parcelRequire=function(e,r,n){var t="function"==typeof parcelRequire&&parcelRequire,i="function"==typeof require&&require;function u(n,o){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!o&&f)return f(n,!0);if(t)return t(n,!0);if(i&&"string"==typeof n)return i(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}a.resolve=function(r){return e[n][1][r]||r};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,a,l,l.exports)}return r[n].exports;function a(e){return u(a.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=t;for(var o=0;o<n.length;o++)u(n[o]);return u}({137:[function(require,module,exports) {
Array.prototype.forEach||(Array.prototype.forEach=function(r){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),o=t.length>>>0;if("function"!=typeof r)throw new TypeError;for(var e=arguments.length>=2?arguments[1]:void 0,i=0;i<o;i++)i in t&&r.call(e,t[i],i,t)});
},{}],138:[function(require,module,exports) {
Array.isArray||(Array.isArray=function(r){return"[object Array]"===Object.prototype.toString.call(r)});
},{}],139:[function(require,module,exports) {
!function(t,e,o){"use strict";function r(t){t&&(t.setTargetAtTime||(t.setTargetAtTime=t.setTargetValueAtTime))}window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=webkitAudioContext,AudioContext.prototype.hasOwnProperty("createGain")||(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),AudioContext.prototype.hasOwnProperty("createDelay")||(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),AudioContext.prototype.hasOwnProperty("createScriptProcessor")||(AudioContext.prototype.createScriptProcessor=AudioContext.prototype.createJavaScriptNode),AudioContext.prototype.hasOwnProperty("createPeriodicWave")||(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable),AudioContext.prototype.internal_createGain=AudioContext.prototype.createGain,AudioContext.prototype.createGain=function(){var t=this.internal_createGain();return r(t.gain),t},AudioContext.prototype.internal_createDelay=AudioContext.prototype.createDelay,AudioContext.prototype.createDelay=function(t){var e=t?this.internal_createDelay(t):this.internal_createDelay();return r(e.delayTime),e},AudioContext.prototype.internal_createBufferSource=AudioContext.prototype.createBufferSource,AudioContext.prototype.createBufferSource=function(){var t=this.internal_createBufferSource();return t.start?(t.internal_start=t.start,t.start=function(e,o,r){void 0!==r?t.internal_start(e||0,o,r):t.internal_start(e||0,o||0)}):t.start=function(t,e,o){e||o?this.noteGrainOn(t||0,e,o):this.noteOn(t||0)},t.stop?(t.internal_stop=t.stop,t.stop=function(e){t.internal_stop(e||0)}):t.stop=function(t){this.noteOff(t||0)},r(t.playbackRate),t},AudioContext.prototype.internal_createDynamicsCompressor=AudioContext.prototype.createDynamicsCompressor,AudioContext.prototype.createDynamicsCompressor=function(){var t=this.internal_createDynamicsCompressor();return r(t.threshold),r(t.knee),r(t.ratio),r(t.reduction),r(t.attack),r(t.release),t},AudioContext.prototype.internal_createBiquadFilter=AudioContext.prototype.createBiquadFilter,AudioContext.prototype.createBiquadFilter=function(){var t=this.internal_createBiquadFilter();return r(t.frequency),r(t.detune),r(t.Q),r(t.gain),t},AudioContext.prototype.hasOwnProperty("createOscillator")&&(AudioContext.prototype.internal_createOscillator=AudioContext.prototype.createOscillator,AudioContext.prototype.createOscillator=function(){var t=this.internal_createOscillator();return t.start?(t.internal_start=t.start,t.start=function(e){t.internal_start(e||0)}):t.start=function(t){this.noteOn(t||0)},t.stop?(t.internal_stop=t.stop,t.stop=function(e){t.internal_stop(e||0)}):t.stop=function(t){this.noteOff(t||0)},t.setPeriodicWave||(t.setPeriodicWave=t.setWaveTable),r(t.frequency),r(t.detune),t})),window.hasOwnProperty("webkitOfflineAudioContext")&&!window.hasOwnProperty("OfflineAudioContext")&&(window.OfflineAudioContext=webkitOfflineAudioContext)}(window);
},{}],140:[function(require,module,exports) {
window.console||(window.console={},window.console.log=window.console.assert=function(){},window.console.warn=window.console.assert=function(){});
},{}],141:[function(require,module,exports) {
Function.prototype.bind||(Function.prototype.bind=function(){var t=Array.prototype.slice;return function(n){var o=this,r=t.call(arguments,1);if("function"!=typeof o)throw new TypeError;function i(){var e=r.concat(t.call(arguments));o.apply(this instanceof i?this:n,e)}return i.prototype=function t(n){if(n&&(t.prototype=n),!(this instanceof t))return new t}(o.prototype),i}}());
},{}],142:[function(require,module,exports) {
Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)});
},{}],143:[function(require,module,exports) {
!function(){if("performance"in window==!1&&(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in window.performance==!1){var n=Date.now();performance.timing&&performance.timing.navigationStart&&(n=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-n}}}();
},{}],144:[function(require,module,exports) {
var global = (1,eval)("this");
var e=(0,eval)("this");if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!e.performance||!e.performance.now){var n=Date.now();e.performance||(e.performance={}),e.performance.now=function(){return Date.now()-n}}for(var t=Date.now(),a=["ms","moz","webkit","o"],o=0;o<a.length&&!e.requestAnimationFrame;++o)e.requestAnimationFrame=e[a[o]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[a[o]+"CancelAnimationFrame"]||e[a[o]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(e){if("function"!=typeof e)throw new TypeError(e+"is not a function");var n=Date.now(),a=16+t-n;return a<0&&(a=0),t=n,setTimeout(function(){t=Date.now(),e(performance.now())},a)}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(e){clearTimeout(e)});
},{}],145:[function(require,module,exports) {
if("function"!=typeof window.Uint32Array&&"object"!=typeof window.Uint32Array){var t=function(t){var r=new Array;window[t]=function(t){if("number"==typeof t){Array.call(this,t),this.length=t;for(var r=0;r<this.length;r++)this[r]=0}else{Array.call(this,t.length),this.length=t.length;for(r=0;r<this.length;r++)this[r]=t[r]}},window[t].prototype=r,window[t].constructor=window[t]};t("Float32Array"),t("Uint32Array"),t("Uint16Array"),t("Int16Array"),t("ArrayBuffer")}
},{}],68:[function(require,module,exports) {
require("./Array.forEach"),require("./Array.isArray"),require("./AudioContextMonkeyPatch"),require("./console"),require("./Function.bind"),require("./Math.trunc"),require("./performance.now"),require("./requestAnimationFrame"),require("./Uint32Array");
},{"./Array.forEach":137,"./Array.isArray":138,"./AudioContextMonkeyPatch":139,"./console":140,"./Function.bind":141,"./Math.trunc":142,"./performance.now":143,"./requestAnimationFrame":144,"./Uint32Array":145}],14:[function(require,module,exports) {
module.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16};
},{}],15:[function(require,module,exports) {
module.exports={DEFAULT:0,LINEAR:0,NEAREST:1};
},{}],12:[function(require,module,exports) {
var e={VERSION:"3.3.0",BlendModes:require("./renderer/BlendModes"),ScaleModes:require("./renderer/ScaleModes"),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};module.exports=e;
},{"./renderer/BlendModes":14,"./renderer/ScaleModes":15}],34:[function(require,module,exports) {
var r=function(r){if("object"!=typeof r||r.nodeType||r===r.window)return!1;try{if(r.constructor&&!{}.hasOwnProperty.call(r.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}return!0};module.exports=r;
},{}],13:[function(require,module,exports) {
var r=require("./IsPlainObject"),e=function(){var i,o,a,n,t,l,f=arguments[0]||{},s=1,u=arguments.length,y=!1;for("boolean"==typeof f&&(y=f,f=arguments[1]||{},s=2),u===s&&(f=this,--s);s<u;s++)if(null!=(i=arguments[s]))for(o in i)a=f[o],f!==(n=i[o])&&(y&&n&&(r(n)||(t=Array.isArray(n)))?(t?(t=!1,l=a&&Array.isArray(a)?a:[]):l=a&&r(a)?a:{},f[o]=e(y,l,n)):void 0!==n&&(f[o]=n));return f};module.exports=e;
},{"./IsPlainObject":34}],161:[function(require,module,exports) {
var o=function(o,r,e,v,i,d){var f;void 0===v&&(v=0),void 0===i&&(i=0),void 0===d&&(d=1);var n=0,t=o.length;if(1===d)for(f=i;f<t;f++)o[f][r]+=e+n*v,n++;else for(f=i;f>=0;f--)o[f][r]+=e+n*v,n++;return o};module.exports=o;
},{}],146:[function(require,module,exports) {
var e=require("./PropertyValueInc"),r=function(r,n,u,o,t){return e(r,"angle",n,u,o,t)};module.exports=r;
},{"./PropertyValueInc":161}],147:[function(require,module,exports) {
var r=function(r,a,e){for(var l=0;l<r.length;l++){var n=r[l];a.call(e,n)}return r};module.exports=r;
},{}],148:[function(require,module,exports) {
var r=function(r,n,o){void 0===o&&(o=0);for(var e=o;e<r.length;e++){var t=r[e],u=!0;for(var v in n)t[v]!==n[v]&&(u=!1);if(u)return t}return null};module.exports=r;
},{}],362:[function(require,module,exports) {
var T={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};module.exports=T;
},{}],564:[function(require,module,exports) {
var e=function(e){return e.y+e.height-e.height*e.originY};module.exports=e;
},{}],567:[function(require,module,exports) {
var i=function(i){return i.x-i.width*i.originX+.5*i.width};module.exports=i;
},{}],566:[function(require,module,exports) {
var e=function(e,i){return e.y=i-e.height+e.height*e.originY,e};module.exports=e;
},{}],574:[function(require,module,exports) {
var r=function(r,i){var t=r.width*r.originX;return r.x=i+t-.5*r.width,r};module.exports=r;
},{}],488:[function(require,module,exports) {
var e=require("../../bounds/GetBottom"),r=require("../../bounds/GetCenterX"),o=require("../../bounds/SetBottom"),t=require("../../bounds/SetCenterX"),u=function(u,n,d,i){return void 0===d&&(d=0),void 0===i&&(i=0),t(u,r(n)+d),o(u,e(n)+i),u};module.exports=u;
},{"../../bounds/GetBottom":564,"../../bounds/GetCenterX":567,"../../bounds/SetBottom":566,"../../bounds/SetCenterX":574}],573:[function(require,module,exports) {
var r=function(r){return r.x-r.width*r.originX};module.exports=r;
},{}],571:[function(require,module,exports) {
var r=function(r,i){return r.x=i+r.width*r.originX,r};module.exports=r;
},{}],495:[function(require,module,exports) {
var e=require("../../bounds/GetBottom"),o=require("../../bounds/GetLeft"),t=require("../../bounds/SetBottom"),r=require("../../bounds/SetLeft"),u=function(u,d,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),r(u,o(d)-i),t(u,e(d)+n),u};module.exports=u;
},{"../../bounds/GetBottom":564,"../../bounds/GetLeft":573,"../../bounds/SetBottom":566,"../../bounds/SetLeft":571}],565:[function(require,module,exports) {
var i=function(i){return i.x+i.width-i.width*i.originX};module.exports=i;
},{}],576:[function(require,module,exports) {
var i=function(i,r){return i.x=r-i.width+i.width*i.originX,i};module.exports=i;
},{}],487:[function(require,module,exports) {
var e=require("../../bounds/GetBottom"),o=require("../../bounds/GetRight"),t=require("../../bounds/SetBottom"),r=require("../../bounds/SetRight"),u=function(u,i,d,n){return void 0===d&&(d=0),void 0===n&&(n=0),r(u,o(i)+d),t(u,e(i)+n),u};module.exports=u;
},{"../../bounds/GetBottom":564,"../../bounds/GetRight":565,"../../bounds/SetBottom":566,"../../bounds/SetRight":576}],570:[function(require,module,exports) {
var r=function(r,e){var i=r.height*r.originY;return r.y=e+i-.5*r.height,r};module.exports=r;
},{}],568:[function(require,module,exports) {
var e=require("./SetCenterX"),r=require("./SetCenterY"),t=function(t,n,u){return e(t,n),r(t,u)};module.exports=t;
},{"./SetCenterX":574,"./SetCenterY":570}],569:[function(require,module,exports) {
var e=function(e){return e.y-e.height*e.originY+.5*e.height};module.exports=e;
},{}],489:[function(require,module,exports) {
var e=require("../../bounds/CenterOn"),r=require("../../bounds/GetCenterX"),n=require("../../bounds/GetCenterY"),u=function(u,o,t,d){return void 0===t&&(t=0),void 0===d&&(d=0),e(u,r(o)+t,n(o)+d),u};module.exports=u;
},{"../../bounds/CenterOn":568,"../../bounds/GetCenterX":567,"../../bounds/GetCenterY":569}],490:[function(require,module,exports) {
var e=require("../../bounds/GetCenterY"),r=require("../../bounds/GetLeft"),t=require("../../bounds/SetCenterY"),u=require("../../bounds/SetLeft"),n=function(n,o,d,i){return void 0===d&&(d=0),void 0===i&&(i=0),u(n,r(o)-d),t(n,e(o)+i),n};module.exports=n;
},{"../../bounds/GetCenterY":569,"../../bounds/GetLeft":573,"../../bounds/SetCenterY":570,"../../bounds/SetLeft":571}],493:[function(require,module,exports) {
var e=require("../../bounds/GetCenterY"),r=require("../../bounds/GetRight"),t=require("../../bounds/SetCenterY"),u=require("../../bounds/SetRight"),i=function(i,n,o,d){return void 0===o&&(o=0),void 0===d&&(d=0),u(i,r(n)+o),t(i,e(n)+d),i};module.exports=i;
},{"../../bounds/GetCenterY":569,"../../bounds/GetRight":565,"../../bounds/SetCenterY":570,"../../bounds/SetRight":576}],572:[function(require,module,exports) {
var r=function(r){return r.y-r.height*r.originY};module.exports=r;
},{}],575:[function(require,module,exports) {
var r=function(r,e){return r.y=e+r.height*r.originY,r};module.exports=r;
},{}],491:[function(require,module,exports) {
var e=require("../../bounds/GetCenterX"),r=require("../../bounds/GetTop"),o=require("../../bounds/SetCenterX"),u=require("../../bounds/SetTop"),n=function(n,t,d,i){return void 0===d&&(d=0),void 0===i&&(i=0),o(n,e(t)+d),u(n,r(t)-i),n};module.exports=n;
},{"../../bounds/GetCenterX":567,"../../bounds/GetTop":572,"../../bounds/SetCenterX":574,"../../bounds/SetTop":575}],492:[function(require,module,exports) {
var e=require("../../bounds/GetLeft"),r=require("../../bounds/GetTop"),o=require("../../bounds/SetLeft"),u=require("../../bounds/SetTop"),t=function(t,d,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),o(t,e(d)-i),u(t,r(d)-n),t};module.exports=t;
},{"../../bounds/GetLeft":573,"../../bounds/GetTop":572,"../../bounds/SetLeft":571,"../../bounds/SetTop":575}],494:[function(require,module,exports) {
var e=require("../../bounds/GetRight"),r=require("../../bounds/GetTop"),o=require("../../bounds/SetRight"),u=require("../../bounds/SetTop"),i=function(i,t,d,n){return void 0===d&&(d=0),void 0===n&&(n=0),o(i,e(t)+d),u(i,r(t)-n),i};module.exports=i;
},{"../../bounds/GetRight":565,"../../bounds/GetTop":572,"../../bounds/SetRight":576,"../../bounds/SetTop":575}],390:[function(require,module,exports) {
var e=require("../const"),r=[];r[e.BOTTOM_CENTER]=require("./BottomCenter"),r[e.BOTTOM_LEFT]=require("./BottomLeft"),r[e.BOTTOM_RIGHT]=require("./BottomRight"),r[e.CENTER]=require("./Center"),r[e.LEFT_CENTER]=require("./LeftCenter"),r[e.RIGHT_CENTER]=require("./RightCenter"),r[e.TOP_CENTER]=require("./TopCenter"),r[e.TOP_LEFT]=require("./TopLeft"),r[e.TOP_RIGHT]=require("./TopRight");var T=function(e,T,t,i,o){return r[t](e,T,i,o)};module.exports=T;
},{"../const":362,"./BottomCenter":488,"./BottomLeft":495,"./BottomRight":487,"./Center":489,"./LeftCenter":490,"./RightCenter":493,"./TopCenter":491,"./TopLeft":492,"./TopRight":494}],102:[function(require,module,exports) {
var r=function(r,e,n){var o=typeof r;return r&&"number"!==o&&"string"!==o&&r.hasOwnProperty(e)&&void 0!==r[e]?r[e]:n};module.exports=r;
},{}],30:[function(require,module,exports) {
var o=function(){};module.exports=o;
},{}],8:[function(require,module,exports) {
function e(e){return!!e.get&&"function"==typeof e.get||!!e.set&&"function"==typeof e.set}function t(t,n,i){var r=i?t[n]:Object.getOwnPropertyDescriptor(t,n);return!i&&r.value&&"object"==typeof r.value&&(r=r.value),!(!r||!e(r))&&(void 0===r.enumerable&&(r.enumerable=!0),void 0===r.configurable&&(r.configurable=!0),r)}function n(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!!n&&(n.value&&"object"==typeof n.value&&(n=n.value),!1===n.configurable)}function i(e,i,r,a){for(var u in i)if(i.hasOwnProperty(u)){var p=t(i,u,r);if(!1!==p){if(n((a||e).prototype,u)){if(o.ignoreFinals)continue;throw new Error("cannot override final property '"+u+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(e.prototype,u,p)}else e.prototype[u]=i[u]}}function r(e,t){if(t){Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++)i(e,t[n].prototype||t[n])}}function o(e){var t,n;if(e||(e={}),e.initialize){if("function"!=typeof e.initialize)throw new Error("initialize must be a function");t=e.initialize,delete e.initialize}else if(e.Extends){var o=e.Extends;t=function(){o.apply(this,arguments)}}else t=function(){};e.Extends?(t.prototype=Object.create(e.Extends.prototype),t.prototype.constructor=t,n=e.Extends,delete e.Extends):t.prototype.constructor=t;var a=null;return e.Mixins&&(a=e.Mixins,delete e.Mixins),r(t,a),i(t,e,!0,n),t}o.extend=i,o.mixin=r,o.ignoreFinals=!1,module.exports=o;
},{}],379:[function(require,module,exports) {
var r=function(r,t,o){return r.radius>0&&t>=r.left&&t<=r.right&&o>=r.top&&o<=r.bottom&&(r.x-t)*(r.x-t)+(r.y-o)*(r.y-o)<=r.radius*r.radius};module.exports=r;
},{}],345:[function(require,module,exports) {
var i=require("../../utils/Class"),t=new i({initialize:function(i,t){void 0===i&&(i=0),void 0===t&&(t=i),this.x=i,this.y=t},setTo:function(i,t){return void 0===i&&(i=0),void 0===t&&(t=i),this.x=i,this.y=t,this}});module.exports=t;
},{"../../utils/Class":8}],550:[function(require,module,exports) {
var i=require("../point/Point"),r=function(r,n,o){return void 0===o&&(o=new i),o.x=r.x+r.radius*Math.cos(n),o.y=r.y+r.radius*Math.sin(n),o};module.exports=r;
},{"../point/Point":345}],227:[function(require,module,exports) {
var t=function(t,a,n){return Math.max(a,Math.min(n,t))};module.exports=t;
},{}],233:[function(require,module,exports) {
var r=require("./Clamp"),e=function(e,u,n){return(n-u)*(e=r(e,0,1))};module.exports=e;
},{"./Clamp":227}],100:[function(require,module,exports) {
var t=require("../../utils/Class"),s=new t({initialize:function(t){this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],t&&this.init(t)},rnd:function(){var t=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|t,this.s0=this.s1,this.s1=this.s2,this.s2=t-this.c,this.s2},hash:function(t){var s,i=this.n;t=t.toString();for(var n=0;n<t.length;n++)s=.02519603282416938*(i+=t.charCodeAt(n)),s-=i=s>>>0,i=(s*=i)>>>0,i+=4294967296*(s-=i);return this.n=i,2.3283064365386963e-10*(i>>>0)},init:function(t){"string"==typeof t?this.state(t):this.sow(t)},sow:function(t){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,t)for(var s=0;s<t.length&&null!=t[s];s++){var i=t[s];this.s0-=this.hash(i),this.s0+=~~(this.s0<0),this.s1-=this.hash(i),this.s1+=~~(this.s1<0),this.s2-=this.hash(i),this.s2+=~~(this.s2<0)}},integer:function(){return 4294967296*this.rnd()},frac:function(){return this.rnd()+1.1102230246251565e-16*(2097152*this.rnd()|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(t,s){return Math.floor(this.realInRange(0,s-t+1)+t)},between:function(t,s){return Math.floor(this.realInRange(0,s-t+1)+t)},realInRange:function(t,s){return this.frac()*(s-t)+t},normal:function(){return 1-2*this.frac()},uuid:function(){var t="",s="";for(s=t="";t++<36;s+=~t%5|3*t&4?(15^t?8^this.frac()*(20^t?16:4):4).toString(16):"-");return s},pick:function(t){return t[this.integerInRange(0,t.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(t){return t[~~(Math.pow(this.frac(),2)*(t.length-1)+.5)]},timestamp:function(t,s){return this.realInRange(t||9466848e5,s||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(t){return"string"==typeof t&&t.match(/^!rnd/)&&(t=t.split(","),this.c=parseFloat(t[1]),this.s0=parseFloat(t[2]),this.s1=parseFloat(t[3]),this.s2=parseFloat(t[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")}});module.exports=s;
},{"../../utils/Class":8}],40:[function(require,module,exports) {
var a=require("./random-data-generator/RandomDataGenerator"),e={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:new a};module.exports=e;
},{"./random-data-generator/RandomDataGenerator":100}],438:[function(require,module,exports) {
var e=require("./CircumferencePoint"),r=require("../../math/FromPercent"),i=require("../../math/const"),n=require("../point/Point"),t=function(t,o,u){void 0===u&&(u=new n);var c=r(o,0,i.PI2);return e(t,c,u)};module.exports=t;
},{"./CircumferencePoint":550,"../../math/FromPercent":233,"../../math/const":40,"../point/Point":345}],551:[function(require,module,exports) {
var r=function(r){return Math.PI*r.radius*2};module.exports=r;
},{}],439:[function(require,module,exports) {
var r=require("./Circumference"),e=require("./CircumferencePoint"),u=require("../../math/FromPercent"),i=require("../../math/const"),n=function(n,o,t,c){void 0===c&&(c=[]),o||(o=r(n)/t);for(var m=0;m<o;m++){var a=u(m/o,0,i.PI2);c.push(e(n,a))}return c};module.exports=n;
},{"./Circumference":551,"./CircumferencePoint":550,"../../math/FromPercent":233,"../../math/const":40}],367:[function(require,module,exports) {
var a=require("../point/Point"),r=function(r,t){void 0===t&&(t=new a);var n=2*Math.PI*Math.random(),o=Math.random()+Math.random(),i=o>1?2-o:o,d=i*Math.cos(n),e=i*Math.sin(n);return t.x=r.x+d*r.radius,t.y=r.y+e*r.radius,t};module.exports=r;
},{"../point/Point":345}],382:[function(require,module,exports) {
var t=require("../../utils/Class"),i=require("./Contains"),s=require("./GetPoint"),n=require("./GetPoints"),r=require("./Random"),e=new t({initialize:function(t,i,s){void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s=0),this.x=t,this.y=i,this._radius=s,this._diameter=2*s},contains:function(t,s){return i(this,t,s)},getPoint:function(t,i){return s(this,t,i)},getPoints:function(t,i,s){return n(this,t,i,s)},getRandomPoint:function(t){return r(this,t)},setTo:function(t,i,s){return this.x=t,this.y=i,this._radius=s,this._diameter=2*s,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(t){this._radius=t,this._diameter=2*t}},diameter:{get:function(){return this._diameter},set:function(t){this._diameter=t,this._radius=.5*t}},left:{get:function(){return this.x-this._radius},set:function(t){this.x=t+this._radius}},right:{get:function(){return this.x+this._radius},set:function(t){this.x=t-this._radius}},top:{get:function(){return this.y-this._radius},set:function(t){this.y=t+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(t){this.y=t-this._radius}}});module.exports=e;
},{"../../utils/Class":8,"./Contains":379,"./GetPoint":438,"./GetPoints":439,"./Random":367}],603:[function(require,module,exports) {
var a=require("../../math/Clamp"),t=2,h={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(t,h,i,l){return void 0===t&&(t=1),void 0===h?this.alpha=t:(this._alphaTL=a(t,0,1),this._alphaTR=a(h,0,1),this._alphaBL=a(i,0,1),this._alphaBR=a(l,0,1)),this},alpha:{get:function(){return this._alpha},set:function(h){var i=a(h,0,1);this._alpha=i,this._alphaTL=i,this._alphaTR=i,this._alphaBL=i,this._alphaBR=i,0===i?this.renderFlags&=~t:this.renderFlags|=t}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(h){var i=a(h,0,1);this._alphaTL=i,0!==i&&(this.renderFlags|=t)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(h){var i=a(h,0,1);this._alphaTR=i,0!==i&&(this.renderFlags|=t)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(h){var i=a(h,0,1);this._alphaBL=i,0!==i&&(this.renderFlags|=t)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(h){var i=a(h,0,1);this._alphaBR=i,0!==i&&(this.renderFlags|=t)}}};module.exports=h;
},{"../../math/Clamp":227}],602:[function(require,module,exports) {
var t=require("../../utils/Class"),i=new t({initialize:function(t){this.parent=t,this.animationManager=t.scene.sys.anims,this.animationManager.once("remove",this.remove,this),this.isPlaying=!1,this.currentAnim=null,this.currentFrame=null,this._timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this._delay=0,this._repeat=0,this._repeatDelay=0,this._yoyo=!1,this.forward=!0,this.accumulator=0,this.nextTick=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._callbackArgs=[t,null],this._updateParams=[]},delay:function(t){return void 0===t?this._delay:(this._delay=t,this)},delayedPlay:function(t,i,e){return this.play(i,!0,e),this.nextTick+=1e3*t,this},getCurrentKey:function(){if(this.currentAnim)return this.currentAnim.key},load:function(t,i){return void 0===i&&(i=0),this.isPlaying&&this.stop(),this.animationManager.load(this,t,i),this},pause:function(t){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),void 0!==t&&this.updateFrame(t),this},paused:function(t){return void 0!==t?t?this.pause():this.resume():this._paused},play:function(t,i,e){if(void 0===i&&(i=!1),void 0===e&&(e=0),i&&this.isPlaying&&this.currentAnim.key===t)return this;this.load(t,e);var s=this.currentAnim,r=this.parent;return this.repeatCounter=-1===this._repeat?Number.MAX_VALUE:this._repeat,s.getFirstTick(this),this.forward=!0,this.isPlaying=!0,this.pendingRepeat=!1,s.showOnStart&&(r.visible=!0),s.onStart&&s.onStart.apply(s.callbackScope,this._callbackArgs.concat(s.onStartParams)),r.setSizeToFrame(),r.updateDisplayOrigin(),this},progress:function(t){if(void 0===t){var i=this.currentFrame.progress;return this.forward||(i=1-i),i}return this},remove:function(t){if(void 0===t&&(t=this.currentAnim),this.isPlaying&&t.key===this.currentAnim.key){this.stop();var i=this.parent,e=this.currentAnim.frames[0];this.currentFrame=e,i.texture=e.frame.texture,i.frame=e.frame}},repeat:function(t){return void 0===t?this._repeat:(this._repeat=t,this.repeatCounter=0,this)},repeatDelay:function(t){return void 0===t?this._repeatDelay:(this._repeatDelay=t,this)},restart:function(t){return void 0===t&&(t=!1),this.currentAnim.getFirstTick(this,t),this.forward=!0,this.isPlaying=!0,this.pendingRepeat=!1,this._paused=!1,this.updateFrame(this.currentAnim.frames[0]),this},resume:function(t){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),void 0!==t&&this.updateFrame(t),this},stop:function(t){void 0===t&&(t=!1),this.isPlaying=!1;var i=this.currentAnim;return t&&i.onComplete&&i.onComplete.apply(i.callbackScope,this._callbackArgs.concat(i.onCompleteParams)),this},timeScale:function(t){return void 0===t?this._timeScale:(this._timeScale=t,this)},totalFrames:function(){return this.currentAnim.frames.length},totalProgres:function(){},update:function(t,i){this.isPlaying&&!this.currentAnim.paused&&(this.accumulator+=i*this._timeScale,this.accumulator>=this.nextTick&&this.currentAnim.setFrame(this))},updateFrame:function(t){var i=this.parent;if(this.currentFrame=t,i.texture=t.frame.texture,i.frame=t.frame,this.isPlaying){t.setAlpha&&(i.alpha=t.alpha);var e=this.currentAnim;e.onUpdate&&e.onUpdate.apply(e.callbackScope,this._updateParams),t.onUpdate&&t.onUpdate(i,t)}},yoyo:function(t){return void 0===t?this._yoyo:(this._yoyo=t,this)},destroy:function(){}});module.exports=i;
},{"../../utils/Class":8}],604:[function(require,module,exports) {
var e=require("../../renderer/BlendModes"),n={_blendMode:e.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(n){"string"==typeof n&&(n=e[n]),(n|=0)>=0&&(this._blendMode=n)}},setBlendMode:function(e){return this.blendMode=e,this}};module.exports=n;
},{"../../renderer/BlendModes":14}],605:[function(require,module,exports) {
var t={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}}};module.exports=t;
},{}],606:[function(require,module,exports) {
var t={_depth:0,depth:{get:function(){return this._depth},set:function(t){this.scene.sys.queueDepthSort(),this._depth=t}},setDepth:function(t){return void 0===t&&(t=0),this.depth=t,this}};module.exports=t;
},{}],607:[function(require,module,exports) {
var i={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(i){return this.flipX=i,this},setFlipY:function(i){return this.flipY=i,this},setFlip:function(i,t){return this.flipX=i,this.flipY=t,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};module.exports=i;
},{}],113:[function(require,module,exports) {
var t=function(t,h,e){return!(t.width<=0||t.height<=0)&&(t.x<=h&&t.x+t.width>=h&&t.y<=e&&t.y+t.height>=e)};module.exports=t;
},{}],344:[function(require,module,exports) {
var t=function(t){return 2*(t.width+t.height)};module.exports=t;
},{}],118:[function(require,module,exports) {
var t=require("./Perimeter"),i=require("../point/Point"),r=function(r,e,o){if(void 0===o&&(o=new i),e<=0||e>=1)return o.x=r.x,o.y=r.y,o;var h=t(r)*e;return e>.5?(h-=r.width+r.height)<=r.width?(o.x=r.right-h,o.y=r.bottom):(o.x=r.x,o.y=r.bottom-(h-r.width)):h<=r.width?(o.x=r.x+h,o.y=r.y):(o.x=r.right,o.y=r.y+(h-r.width)),o};module.exports=r;
},{"./Perimeter":344,"../point/Point":345}],117:[function(require,module,exports) {
var r=require("./GetPoint"),e=require("./Perimeter"),i=function(i,o,t,u){void 0===u&&(u=[]),o||(o=e(i)/t);for(var n=0;n<o;n++){var v=n/o;u.push(r(i,v))}return u};module.exports=i;
},{"./GetPoint":118,"./Perimeter":344}],346:[function(require,module,exports) {
var e=require("../point/Point"),n=function(n,o,r){return void 0===r&&(r=new e),r.x=n.x1+(n.x2-n.x1)*o,r.y=n.y1+(n.y2-n.y1)*o,r};module.exports=n;
},{"../point/Point":345}],432:[function(require,module,exports) {
var r=function(r){return Math.sqrt((r.x2-r.x1)*(r.x2-r.x1)+(r.y2-r.y1)*(r.y2-r.y1))};module.exports=r;
},{}],342:[function(require,module,exports) {
var r=require("./Length"),e=require("../point/Point"),n=function(n,o,i,t){void 0===t&&(t=[]),o||(o=r(n)/i);for(var u=n.x1,v=n.y1,a=n.x2,p=n.y2,x=0;x<o;x++){var d=x/o,f=u+(a-u)*d,h=v+(p-v)*d;t.push(new e(f,h))}return t};module.exports=n;
},{"./Length":432,"../point/Point":345}],343:[function(require,module,exports) {
var r=require("../point/Point"),n=function(n,o){void 0===o&&(o=new r);var e=Math.random();return o.x=n.x1+e*(n.x2-n.x1),o.y=n.y1+e*(n.y2-n.y1),o};module.exports=n;
},{"../point/Point":345}],96:[function(require,module,exports) {
var t=require("../utils/Class"),i=new t({initialize:function(t,i){this.x=0,this.y=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0):(void 0===i&&(i=t),this.x=t||0,this.y=i||0)},clone:function(){return new i(this.x,this.y)},copy:function(t){return this.x=t.x||0,this.y=t.y||0,this},setFromObject:function(t){return this.x=t.x||0,this.y=t.y||0,this},set:function(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setToPolar:function(t,i){return null==i&&(i=1),this.x=Math.cos(t)*i,this.y=Math.sin(t)*i,this},equals:function(t){return this.x===t.x&&this.y===t.y},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(t){var i=t.x-this.x,s=t.y-this.y;return Math.sqrt(i*i+s*s)},distanceSq:function(t){var i=t.x-this.x,s=t.y-this.y;return i*i+s*s},length:function(){var t=this.x,i=this.y;return Math.sqrt(t*t+i*i)},lengthSq:function(){var t=this.x,i=this.y;return t*t+i*i},normalize:function(){var t=this.x,i=this.y,s=t*t+i*i;return s>0&&(s=1/Math.sqrt(s),this.x=t*s,this.y=i*s),this},normalizeRightHand:function(){var t=this.x;return this.x=-1*this.y,this.y=t,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lerp:function(t,i){void 0===i&&(i=0);var s=this.x,n=this.y;return this.x=s+i*(t.x-s),this.y=n+i*(t.y-n),this},transformMat3:function(t){var i=this.x,s=this.y,n=t.val;return this.x=n[0]*i+n[3]*s+n[6],this.y=n[1]*i+n[4]*s+n[7],this},transformMat4:function(t){var i=this.x,s=this.y,n=t.val;return this.x=n[0]*i+n[4]*s+n[12],this.y=n[1]*i+n[5]*s+n[13],this},reset:function(){return this.x=0,this.y=0,this}});i.ZERO=new i,module.exports=i;
},{"../utils/Class":8}],114:[function(require,module,exports) {
var t=require("../../utils/Class"),i=require("./GetPoint"),n=require("./GetPoints"),s=require("./Random"),e=require("../../math/Vector2"),h=new t({initialize:function(t,i,n,s){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0),this.x1=t,this.y1=i,this.x2=n,this.y2=s},getPoint:function(t,n){return i(this,t,n)},getPoints:function(t,i,s){return n(this,t,i,s)},getRandomPoint:function(t){return s(this,t)},setTo:function(t,i,n,s){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0),this.x1=t,this.y1=i,this.x2=n,this.y2=s,this},getPointA:function(t){return void 0===t&&(t=new e),t.setTo(this.x1,this.y1),t},getPointB:function(t){return void 0===t&&(t=new e),t.setTo(this.x2,this.y2),t},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(t){this.x1<=this.x2?this.x1=t:this.x2=t}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(t){this.x1>this.x2?this.x1=t:this.x2=t}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(t){this.y1<=this.y2?this.y1=t:this.y2=t}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(t){this.y1>this.y2?this.y1=t:this.y2=t}}});module.exports=h;
},{"../../utils/Class":8,"./GetPoint":346,"./GetPoints":342,"./Random":343,"../../math/Vector2":96}],115:[function(require,module,exports) {
var t=require("../point/Point"),n=function(n,o){return void 0===o&&(o=new t),o.x=n.x+Math.random()*n.width,o.y=n.y+Math.random()*n.height,o};module.exports=n;
},{"../point/Point":345}],62:[function(require,module,exports) {
var t=require("../../utils/Class"),i=require("./Contains"),h=require("./GetPoint"),n=require("./GetPoints"),s=require("../line/Line"),e=require("./Random"),o=new t({initialize:function(t,i,h,n){void 0===t&&(t=0),void 0===i&&(i=0),void 0===h&&(h=0),void 0===n&&(n=0),this.x=t,this.y=i,this.width=h,this.height=n},contains:function(t,h){return i(this,t,h)},getPoint:function(t,i){return h(this,t,i)},getPoints:function(t,i,h){return n(this,t,i,h)},getRandomPoint:function(t){return e(this,t)},setTo:function(t,i,h,n){return this.x=t,this.y=i,this.width=h,this.height=n,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setSize:function(t,i){return void 0===i&&(i=t),this.width=t,this.height=i,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(t){return void 0===t&&(t=new s),t.setTo(this.x,this.y,this.right,this.y),t},getLineB:function(t){return void 0===t&&(t=new s),t.setTo(this.right,this.y,this.right,this.bottom),t},getLineC:function(t){return void 0===t&&(t=new s),t.setTo(this.right,this.bottom,this.x,this.bottom),t},getLineD:function(t){return void 0===t&&(t=new s),t.setTo(this.x,this.bottom,this.x,this.y),t},left:{get:function(){return this.x},set:function(t){t>=this.right?this.width=0:this.width=this.right-t,this.x=t}},right:{get:function(){return this.x+this.width},set:function(t){t<=this.x?this.width=0:this.width=t-this.x}},top:{get:function(){return this.y},set:function(t){t>=this.bottom?this.height=0:this.height=this.bottom-t,this.y=t}},bottom:{get:function(){return this.y+this.height},set:function(t){t<=this.y?this.height=0:this.height=t-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}});module.exports=o;
},{"../../utils/Class":8,"./Contains":113,"./GetPoint":118,"./GetPoints":117,"../line/Line":114,"./Random":115}],246:[function(require,module,exports) {
var r=function(r,t,a,n){var o=Math.cos(n),e=Math.sin(n),s=r.x-t,u=r.y-a;return r.x=s*o-u*e+t,r.y=s*e+u*o+a,r};module.exports=r;
},{}],609:[function(require,module,exports) {
var t=require("../../geom/rectangle/Rectangle"),i=require("../../math/RotateAround"),h=require("../../math/Vector2"),s={getCenter:function(t){return void 0===t&&(t=new h),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,t},getTopLeft:function(t){return void 0===t&&(t=new h),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY,0!==this.rotation&&i(t,this.x,this.y,this.rotation),t},getTopRight:function(t){return void 0===t&&(t=new h),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY,0!==this.rotation&&i(t,this.x,this.y,this.rotation),t},getBottomLeft:function(t){return void 0===t&&(t=new h),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,0!==this.rotation&&i(t,this.x,this.y,this.rotation),t},getBottomRight:function(t){return void 0===t&&(t=new h),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,0!==this.rotation&&i(t,this.x,this.y,this.rotation),t},getBounds:function(i){void 0===i&&(i=new t),this.getTopLeft(i);var h=i.x,s=i.y;this.getTopRight(i);var o=i.x,e=i.y;this.getBottomLeft(i);var n=i.x,r=i.y;this.getBottomRight(i);var a=i.x,g=i.y;return i.x=Math.min(h,o,n,a),i.y=Math.min(s,e,r,g),i.width=Math.max(h,o,n,a)-i.x,i.height=Math.max(s,e,r,g)-i.y,i}};module.exports=s;
},{"../../geom/rectangle/Rectangle":62,"../../math/RotateAround":246,"../../math/Vector2":96}],608:[function(require,module,exports) {
var t={matrixStack:null,currentMatrix:null,currentMatrixIndex:0,initMatrixStack:function(){return this.matrixStack=new Float32Array(6e3),this.currentMatrix=new Float32Array([1,0,0,1,0,0]),this.currentMatrixIndex=0,this},save:function(){if(this.currentMatrixIndex>=this.matrixStack.length)return this;var t=this.matrixStack,r=this.currentMatrix,i=this.currentMatrixIndex;return this.currentMatrixIndex+=6,t[i+0]=r[0],t[i+1]=r[1],t[i+2]=r[2],t[i+3]=r[3],t[i+4]=r[4],t[i+5]=r[5],this},restore:function(){if(this.currentMatrixIndex<=0)return this;this.currentMatrixIndex-=6;var t=this.matrixStack,r=this.currentMatrix,i=this.currentMatrixIndex;return r[0]=t[i+0],r[1]=t[i+1],r[2]=t[i+2],r[3]=t[i+3],r[4]=t[i+4],r[5]=t[i+5],this},loadIdentity:function(){return this.setTransform(1,0,0,1,0,0),this},transform:function(t,r,i,n,a,e){var s=this.currentMatrix,u=s[0],c=s[1],h=s[2],x=s[3],o=s[4],M=s[5];return s[0]=u*t+h*r,s[1]=c*t+x*r,s[2]=u*i+h*n,s[3]=c*i+x*n,s[4]=u*a+h*e+o,s[5]=c*a+x*e+M,this},setTransform:function(t,r,i,n,a,e){var s=this.currentMatrix;return s[0]=t,s[1]=r,s[2]=i,s[3]=n,s[4]=a,s[5]=e,this},translate:function(t,r){var i=this.currentMatrix,n=i[0],a=i[1],e=i[2],s=i[3],u=i[4],c=i[5];return i[4]=n*t+e*r+u,i[5]=a*t+s*r+c,this},scale:function(t,r){var i=this.currentMatrix,n=i[0],a=i[1],e=i[2],s=i[3];return i[0]=n*t,i[1]=a*t,i[2]=e*r,i[3]=s*r,this},rotate:function(t){var r=this.currentMatrix,i=r[0],n=r[1],a=r[2],e=r[3],s=Math.sin(t),u=Math.cos(t);return r[0]=i*u+a*s,r[1]=n*u+e*s,r[2]=i*-s+a*u,r[3]=n*-s+e*u,this}};module.exports=t;
},{}],611:[function(require,module,exports) {
var i={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(i){this._displayOriginX=i,this.originX=i/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(i){this._displayOriginY=i,this.originY=i/this.height}},setOrigin:function(i,t){return void 0===i&&(i=.5),void 0===t&&(t=i),this.originX=i,this.originY=t,this.updateDisplayOrigin()},setOriginFromFrame:function(){return this.frame&&this.frame.customPivot?(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin()):this.setOrigin()},setDisplayOrigin:function(i,t){return void 0===i&&(i=0),void 0===t&&(t=i),this.displayOriginX=i,this.displayOriginY=t,this},updateDisplayOrigin:function(){return this._displayOriginX=Math.round(this.originX*this.width),this._displayOriginY=Math.round(this.originY*this.height),this}};module.exports=i;
},{}],610:[function(require,module,exports) {
var e={defaultPipeline:null,pipeline:null,initPipeline:function(e){var i=this.scene.sys.game.renderer;return!!(i&&i.gl&&i.hasPipeline(e))&&(this.defaultPipeline=i.getPipeline(e),this.pipeline=this.defaultPipeline,!0)},setPipeline:function(e){var i=this.scene.sys.game.renderer;return!!(i&&i.gl&&i.hasPipeline(e))&&(this.pipeline=i.getPipeline(e),!0)},resetPipeline:function(){return this.pipeline=this.defaultPipeline,null!==this.pipeline},getPipelineName:function(){return this.pipeline.name}};module.exports=e;
},{}],612:[function(require,module,exports) {
var e=require("../../renderer/ScaleModes"),s={_scaleMode:e.DEFAULT,scaleMode:{get:function(){return this._scaleMode},set:function(s){s!==e.LINEAR&&s!==e.NEAREST||(this._scaleMode=s)}},setScaleMode:function(e){return this.scaleMode=e,this}};module.exports=s;
},{"../../renderer/ScaleModes":15}],613:[function(require,module,exports) {
var o={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(o,r){return void 0===r&&(r=o),this.scrollFactorX=o,this.scrollFactorY=r,this}};module.exports=o;
},{}],614:[function(require,module,exports) {
var t={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.frame.realWidth},set:function(t){this.scaleX=t/this.frame.realWidth}},displayHeight:{get:function(){return this.scaleY*this.frame.realHeight},set:function(t){this.scaleY=t/this.frame.realHeight}},setSizeToFrame:function(t){return void 0===t&&(t=this.frame),this.width=t.realWidth,this.height=t.realHeight,this},setSize:function(t,i){return this.width=t,this.height=i,this},setDisplaySize:function(t,i){return this.displayWidth=t,this.displayHeight=i,this}};module.exports=t;
},{}],615:[function(require,module,exports) {
var t=8,e={texture:null,frame:null,setTexture:function(t,e){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(e,i,s){return void 0===i&&(i=!0),void 0===s&&(s=!0),this.frame=this.texture.get(e),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=t:this.renderFlags&=~t,this._sizeComponent&&i&&this.setSizeToFrame(),this._originComponent&&s&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};module.exports=e;
},{}],616:[function(require,module,exports) {
var t=function(t){return(t>>16)+(65280&t)+((255&t)<<16)},i={_tintTL:16777215,_tintTR:16777215,_tintBL:16777215,_tintBR:16777215,clearTint:function(){return this.setTint(16777215),this},setTint:function(i,n,s,e){return void 0===i&&(i=16777215),void 0===n&&(n=i,s=i,e=i),this._tintTL=t(i),this._tintTR=t(n),this._tintBL=t(s),this._tintBR=t(e),this},tintTopLeft:{get:function(){return this._tintTL},set:function(i){this._tintTL=t(i)}},tintTopRight:{get:function(){return this._tintTR},set:function(i){this._tintTR=t(i)}},tintBottomLeft:{get:function(){return this._tintBL},set:function(i){this._tintBL=t(i)}},tintBottomRight:{get:function(){return this._tintBR},set:function(i){this._tintBR=t(i)}},tint:{set:function(t){this.setTint(t,t,t,t)}}};module.exports=i;
},{}],617:[function(require,module,exports) {
var e=function(e){var a={name:e.name,type:e.type,x:e.x,y:e.y,depth:e.depth,scale:{x:e.scaleX,y:e.scaleY},origin:{x:e.originX,y:e.originY},flipX:e.flipX,flipY:e.flipY,rotation:e.rotation,alpha:e.alpha,visible:e.visible,scaleMode:e.scaleMode,blendMode:e.blendMode,textureKey:"",frameKey:"",data:{}};return e.texture&&(a.textureKey=e.texture.key,a.frameKey=e.frame.name),a};module.exports=e;
},{}],254:[function(require,module,exports) {
var r=function(r,e,n){var o=n-e;return e+((r-e)%o+o)%o};module.exports=r;
},{}],771:[function(require,module,exports) {
var r=require("../Wrap"),e=function(e){return r(e,-Math.PI,Math.PI)};module.exports=e;
},{"../Wrap":254}],772:[function(require,module,exports) {
var r=require("../Wrap"),e=function(e){return r(e,-180,180)};module.exports=e;
},{"../Wrap":254}],618:[function(require,module,exports) {
var t=require("../../math/const"),i=require("../../math/angle/Wrap"),s=require("../../math/angle/WrapDegrees"),e=4,n={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scaleX:{get:function(){return this._scaleX},set:function(t){this._scaleX=t,0===this._scaleX?this.renderFlags&=~e:this.renderFlags|=e}},scaleY:{get:function(){return this._scaleY},set:function(t){this._scaleY=t,0===this._scaleY?this.renderFlags&=~e:this.renderFlags|=e}},angle:{get:function(){return s(this._rotation*t.RAD_TO_DEG)},set:function(i){this.rotation=s(i)*t.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=i(t)}},setPosition:function(t,i,s,e){return void 0===t&&(t=0),void 0===i&&(i=t),void 0===s&&(s=0),void 0===e&&(e=0),this.x=t,this.y=i,this.z=s,this.w=e,this},setRotation:function(t){return void 0===t&&(t=0),this.rotation=t,this},setAngle:function(t){return void 0===t&&(t=0),this.angle=t,this},setScale:function(t,i){return void 0===t&&(t=1),void 0===i&&(i=t),this.scaleX=t,this.scaleY=i,this},setX:function(t){return void 0===t&&(t=0),this.x=t,this},setY:function(t){return void 0===t&&(t=0),this.y=t,this},setZ:function(t){return void 0===t&&(t=0),this.z=t,this},setW:function(t){return void 0===t&&(t=0),this.w=t,this}};module.exports=n;
},{"../../math/const":40,"../../math/angle/Wrap":771,"../../math/angle/WrapDegrees":772}],433:[function(require,module,exports) {
var t=require("../../utils/Class"),r=new t({initialize:function(t,r,i,a,n,s){void 0===t&&(t=1),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=1),void 0===n&&(n=0),void 0===s&&(s=0),this.matrix=new Float32Array([t,r,i,a,n,s,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},loadIdentity:function(){var t=this.matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,this},translate:function(t,r){var i=this.matrix;return i[4]=i[0]*t+i[2]*r+i[4],i[5]=i[1]*t+i[3]*r+i[5],this},scale:function(t,r){var i=this.matrix;return i[0]*=t,i[1]*=t,i[2]*=r,i[3]*=r,this},rotate:function(t){var r=Math.sin(t),i=Math.cos(t);return this.transform(i,r,-r,i,0,0)},multiply:function(t){var r=this.matrix,i=t.matrix,a=r[0],n=r[1],s=r[2],o=r[3],e=r[4],h=r[5],u=i[0],c=i[1],m=i[2],v=i[3],l=i[4],x=i[5];return r[0]=u*a+c*s,r[1]=u*n+c*o,r[2]=m*a+v*s,r[3]=m*n+v*o,r[4]=l*a+x*s+e,r[5]=l*n+x*o+h,this},transform:function(t,r,i,a,n,s){var o=this.matrix,e=o[0],h=o[1],u=o[2],c=o[3],m=o[4],v=o[5];return o[0]=t*e+r*u,o[1]=t*h+r*c,o[2]=i*e+a*u,o[3]=i*h+a*c,o[4]=n*e+s*u+m,o[5]=n*h+s*c+v,this},transformPoint:function(t,r,i){void 0===i&&(i={x:0,y:0});var a=this.matrix,n=a[0],s=a[1],o=a[2],e=a[3],h=a[4],u=a[5];return i.x=t*n+r*o+h,i.y=t*s+r*e+u,i},invert:function(){var t=this.matrix,r=t[0],i=t[1],a=t[2],n=t[3],s=t[4],o=t[5],e=r*n-i*a;return t[0]=n/e,t[1]=-i/e,t[2]=-a/e,t[3]=r/e,t[4]=(a*o-n*s)/e,t[5]=-(r*o-i*s)/e,this},setTransform:function(t,r,i,a,n,s){var o=this.matrix;return o[0]=t,o[1]=r,o[2]=i,o[3]=a,o[4]=n,o[5]=s,this},decomposeMatrix:function(){var t=this.decomposedMatrix,r=this.matrix,i=r[0],a=r[1],n=r[2],s=r[3],o=i*i,e=a*a,h=n*n,u=s*s,c=Math.sqrt(o+h),m=Math.sqrt(e+u);return t.translateX=r[4],t.translateY=r[5],t.scaleX=c,t.scaleY=m,t.rotation=Math.acos(i/c)*(Math.atan(-n/i)<0?-1:1),t},applyITRS:function(t,r,i,a,n){var s=this.matrix,o=Math.sin(i),e=Math.cos(i);return s[4]=t,s[5]=r,s[0]=e*a,s[1]=-o*a,s[2]=o*n,s[3]=e*n,this}});module.exports=r;
},{"../../utils/Class":8}],621:[function(require,module,exports) {
var i=1,s={_visible:!0,visible:{get:function(){return this._visible},set:function(s){s?(this._visible=!0,this.renderFlags|=i):(this._visible=!1,this.renderFlags&=~i)}},setVisible:function(i){return this.visible=i,this}};module.exports=s;
},{}],509:[function(require,module,exports) {
module.exports={Alpha:require("./Alpha"),Animation:require("./Animation"),BlendMode:require("./BlendMode"),ComputedSize:require("./ComputedSize"),Depth:require("./Depth"),Flip:require("./Flip"),GetBounds:require("./GetBounds"),MatrixStack:require("./MatrixStack"),Origin:require("./Origin"),Pipeline:require("./Pipeline"),ScaleMode:require("./ScaleMode"),ScrollFactor:require("./ScrollFactor"),Size:require("./Size"),Texture:require("./Texture"),Tint:require("./Tint"),ToJSON:require("./ToJSON"),Transform:require("./Transform"),TransformMatrix:require("./TransformMatrix"),Visible:require("./Visible")};
},{"./Alpha":603,"./Animation":602,"./BlendMode":604,"./ComputedSize":605,"./Depth":606,"./Flip":607,"./GetBounds":609,"./MatrixStack":608,"./Origin":611,"./Pipeline":610,"./ScaleMode":612,"./ScrollFactor":613,"./Size":614,"./Texture":615,"./Tint":616,"./ToJSON":617,"./Transform":618,"./TransformMatrix":433,"./Visible":621}],22:[function(require,module,exports) {
var t=require("../utils/Class"),i=new t({initialize:function(t,i){this.parent=t,this.events=i,i||(this.events=t.events?t.events:t),this.list={},this.blockSet=!1,this._frozen=!1,this.events.once("destroy",this.destroy,this)},get:function(t){return this.list[t]},getAll:function(){var t={};for(var i in this.list)this.list.hasOwnProperty(i)&&(t[i]=this.list[i]);return t},query:function(t){var i={};for(var e in this.list)this.list.hasOwnProperty(e)&&e.match(t)&&(i[e]=this.list[e]);return i},set:function(t,i){if(this._frozen)return this;if(this.events.listenerCount("changedata")>0){this.blockSet=!1;var e=this;if(this.events.emit("changedata",this.parent,t,i,function(i){e.blockSet=!0,e.list[t]=i,e.events.emit("setdata",e.parent,t,i)}),this.blockSet)return this}return this.list[t]=i,this.events.emit("setdata",this.parent,t,i),this},each:function(t,i){for(var e=[this.parent,null,void 0],s=1;s<arguments.length;s++)e.push(arguments[s]);for(var n in this.list)e[1]=n,e[2]=this.list[n],t.apply(i,e);return this},merge:function(t,i){for(var e in void 0===i&&(i=!0),t)t.hasOwnProperty(e)&&(i||!i&&!this.has(e))&&(this.list[e]=t[e]);return this},remove:function(t){if(!this._frozen&&this.has(t)){var i=this.list[t];delete this.list[t],this.events.emit("removedata",this,t,i)}return this},pop:function(t){var i=void 0;return!this._frozen&&this.has(t)&&(i=this.list[t],delete this.list[t],this.events.emit("removedata",this,t,i)),i},has:function(t){return this.list.hasOwnProperty(t)},setFreeze:function(t){return this._frozen=t,this},reset:function(){for(var t in this.list)delete this.list[t];return this.blockSet=!1,this._frozen=!1,this},destroy:function(){this.reset(),this.events.off("changedata"),this.events.off("setdata"),this.events.off("removedata"),this.parent=null},freeze:{get:function(){return this._frozen},set:function(t){this._frozen=!!t}},count:{get:function(){var t=0;for(var i in this.list)void 0!==this.list[i]&&t++;return t}}});module.exports=i;
},{"../utils/Class":8}],35:[function(require,module,exports) {
"use strict";var e=Object.prototype.hasOwnProperty,t="~";function n(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,n,o,s,i){if("function"!=typeof o)throw new TypeError("The listener must be a function");var c=new r(o,s||e,i),f=t?t+n:n;return e._events[f]?e._events[f].fn?e._events[f]=[e._events[f],c]:e._events[f].push(c):(e._events[f]=c,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function i(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(t=!1)),i.prototype.eventNames=function(){var n,r,o=[];if(0===this._eventsCount)return o;for(r in n=this._events)e.call(n,r)&&o.push(t?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(n)):o},i.prototype.listeners=function(e){var n=t?t+e:e,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,s=r.length,i=new Array(s);o<s;o++)i[o]=r[o].fn;return i},i.prototype.listenerCount=function(e){var n=t?t+e:e,r=this._events[n];return r?r.fn?1:r.length:0},i.prototype.emit=function(e,n,r,o,s,i){var c=t?t+e:e;if(!this._events[c])return!1;var f,u,a=this._events[c],l=arguments.length;if(a.fn){switch(a.once&&this.removeListener(e,a.fn,void 0,!0),l){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,n),!0;case 3:return a.fn.call(a.context,n,r),!0;case 4:return a.fn.call(a.context,n,r,o),!0;case 5:return a.fn.call(a.context,n,r,o,s),!0;case 6:return a.fn.call(a.context,n,r,o,s,i),!0}for(u=1,f=new Array(l-1);u<l;u++)f[u-1]=arguments[u];a.fn.apply(a.context,f)}else{var v,h=a.length;for(u=0;u<h;u++)switch(a[u].once&&this.removeListener(e,a[u].fn,void 0,!0),l){case 1:a[u].fn.call(a[u].context);break;case 2:a[u].fn.call(a[u].context,n);break;case 3:a[u].fn.call(a[u].context,n,r);break;case 4:a[u].fn.call(a[u].context,n,r,o);break;default:if(!f)for(v=1,f=new Array(l-1);v<l;v++)f[v-1]=arguments[v];a[u].fn.apply(a[u].context,f)}}return!0},i.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},i.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},i.prototype.removeListener=function(e,n,r,o){var i=t?t+e:e;if(!this._events[i])return this;if(!n)return s(this,i),this;var c=this._events[i];if(c.fn)c.fn!==n||o&&!c.once||r&&c.context!==r||s(this,i);else{for(var f=0,u=[],a=c.length;f<a;f++)(c[f].fn!==n||o&&!c[f].once||r&&c[f].context!==r)&&u.push(c[f]);u.length?this._events[i]=1===u.length?u[0]:u:s(this,i)}return this},i.prototype.removeAllListeners=function(e){var r;return e?(r=t?t+e:e,this._events[r]&&s(this,r)):(this._events=new n,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prefixed=t,i.EventEmitter=i,"undefined"!=typeof module&&(module.exports=i);
},{}],208:[function(require,module,exports) {
var t=require("../utils/Class"),i=require("./components"),e=require("../data/DataManager"),s=require("eventemitter3"),n=new t({Extends:s,initialize:function(t,i){s.call(this),this.scene=t,this.type=i,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.scene.sys.queueDepthSort()},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},setDataEnabled:function(){return this.data||(this.data=new e(this)),this},setData:function(t,i){return this.data||(this.data=new e(this)),this.data.set(t,i),this},getData:function(t){return this.data||(this.data=new e(this)),this.data.get(t)},setInteractive:function(t,i,e){return this.scene.sys.input.enable(this,t,i,e),this},update:function(){},toJSON:function(){return i.ToJSON(this)},willRender:function(){return n.RENDER_MASK===this.renderFlags},destroy:function(){if(this.scene){this.preDestroy&&this.preDestroy.call(this),this.emit("destroy",this);var t=this.scene.sys;t.displayList.remove(this),t.updateList.remove(this),this.input&&(t.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),t.queueDepthSort(),this.active=!1,this.visible=!1,this.scene=void 0,this.removeAllListeners()}}});n.RENDER_MASK=15,module.exports=n;
},{"../utils/Class":8,"./components":509,"../data/DataManager":22,"eventemitter3":35}],291:[function(require,module,exports) {
var e=require("../../renderer/BlendModes"),t=require("../../geom/circle/Circle"),i=require("../../geom/circle/Contains"),n=require("../../utils/Class"),s=require("../components"),r=require("../GameObject"),h=require("../../geom/rectangle/Rectangle"),o=require("../../geom/rectangle/Contains"),c=new n({Extends:r,Mixins:[s.Depth,s.GetBounds,s.Origin,s.ScaleMode,s.Transform,s.ScrollFactor,s.Visible],initialize:function(t,i,n,s,h){void 0===s&&(s=1),void 0===h&&(h=s),r.call(this,t,"Zone"),this.setPosition(i,n),this.width=s,this.height=h,this.blendMode=e.NORMAL},displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}},setSize:function(e,t,i){return void 0===i&&(i=!0),this.width=e,this.height=t,i&&this.input&&this.input.hitArea instanceof h&&(this.input.hitArea.width=e,this.input.hitArea.height=t),this},setDisplaySize:function(e,t){return this.displayWidth=e,this.displayHeight=t,this},setCircleDropZone:function(e){return this.setDropZone(new t(0,0,e),i)},setRectangleDropZone:function(e,t){var i=-e/2,n=-t/2;return this.setDropZone(new h(i,n,e,t),o)},setDropZone:function(e,t){return void 0===e?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(e,t,!0),this},renderCanvas:function(){},renderWebGL:function(){}});module.exports=c;
},{"../../renderer/BlendModes":14,"../../geom/circle/Circle":382,"../../geom/circle/Contains":379,"../../utils/Class":8,"../components":509,"../GameObject":208,"../../geom/rectangle/Rectangle":62,"../../geom/rectangle/Contains":113}],150:[function(require,module,exports) {
var e=require("../display/align/in/QuickSet"),i=require("../display/align/const"),t=require("../utils/object/GetFastValue"),r=require("../utils/NOOP"),s=require("../gameobjects/zone/Zone"),l=new s({sys:{queueDepthSort:r}},0,0,1,1),o=function(r,s){void 0===s&&(s={});var o=t(s,"width",-1),u=t(s,"height",-1),n=t(s,"cellWidth",1),a=t(s,"cellHeight",n),y=t(s,"position",i.TOP_LEFT),c=t(s,"x",0),h=t(s,"y",0),x=0,d=0,g=o*n,q=u*a;l.setPosition(c,h),l.setSize(n,a);for(var f=0;f<r.length;f++)if(e(r[f],l,y),-1===o)d+=a,l.y+=a,d===q&&(d=0,l.x+=n,l.y=h);else if(-1===u)x+=n,l.x+=n,x===g&&(x=0,l.x=c,l.y+=a);else if(x+=n,l.x+=n,x===g&&(x=0,d+=a,l.x=c,l.y+=a,d===q))break;return r};module.exports=o;
},{"../display/align/in/QuickSet":390,"../display/align/const":362,"../utils/object/GetFastValue":102,"../utils/NOOP":30,"../gameobjects/zone/Zone":291}],151:[function(require,module,exports) {
var r=require("./PropertyValueInc"),e=function(e,u,a,n,o){return r(e,"alpha",u,a,n,o)};module.exports=e;
},{"./PropertyValueInc":161}],152:[function(require,module,exports) {
var r=require("./PropertyValueInc"),e=function(e,u,n,o,t){return r(e,"x",u,n,o,t)};module.exports=e;
},{"./PropertyValueInc":161}],153:[function(require,module,exports) {
var r=require("./PropertyValueInc"),e=function(e,u,n,o,l,t,i){return void 0!==n&&null!==n||(n=u),r(e,"x",u,o,t,i),r(e,"y",n,l,t,i)};module.exports=e;
},{"./PropertyValueInc":161}],154:[function(require,module,exports) {
var r=require("./PropertyValueInc"),e=function(e,u,n,o,t){return r(e,"y",u,n,o,t)};module.exports=e;
},{"./PropertyValueInc":161}],155:[function(require,module,exports) {
var r=function(r,o,t,a){void 0===t&&(t=0),void 0===a&&(a=6.28);for(var i=t,n=(a-t)/r.length,d=0;d<r.length;d++)r[d].x=o.x+o.radius*Math.cos(i),r[d].y=o.y+o.radius*Math.sin(i),i+=n;return r};module.exports=r;
},{}],156:[function(require,module,exports) {
var t=function(t,h,o,e){void 0===o&&(o=0),void 0===e&&(e=6.28);for(var i=o,n=(e-o)/t.length,r=h.width/2,a=h.height/2,d=0;d<t.length;d++)t[d].x=h.x+r*Math.cos(i),t[d].y=h.y+a*Math.sin(i),i+=n;return t};module.exports=t;
},{}],157:[function(require,module,exports) {
var e=require("../geom/line/GetPoints"),r=function(r,n){for(var t=e(n,r.length),o=0;o<r.length;o++){var i=r[o],l=t[o];i.x=l.x,i.y=l.y}return r};module.exports=r;
},{"../geom/line/GetPoints":342}],363:[function(require,module,exports) {
var t=require("./Perimeter"),e=require("../point/Point"),r=function(r,o,i,a){if(void 0===a&&(a=[]),!o&&!i)return a;o?i=Math.round(t(r)/o):o=t(r)/i;for(var n=r.x,u=r.y,s=0,b=0;b<i;b++)switch(a.push(new e(n,u)),s){case 0:(n+=o)>=r.right&&(s=1,u+=n-r.right,n=r.right);break;case 1:(u+=o)>=r.bottom&&(s=2,n-=u-r.bottom,u=r.bottom);break;case 2:(n-=o)<=r.left&&(s=3,u-=r.left-n,n=r.left);break;case 3:(u-=o)<=r.top&&(s=0,u=r.top)}return a};module.exports=r;
},{"./Perimeter":344,"../point/Point":345}],364:[function(require,module,exports) {
var r=function(r,o){void 0===o&&(o=1);for(var u=null,n=0;n<o;n++)u=r.shift(),r.push(u);return u};module.exports=r;
},{}],365:[function(require,module,exports) {
var o=function(o,r){void 0===r&&(r=1);for(var n=null,u=0;u<r;u++)n=o.pop(),o.unshift(n);return n};module.exports=o;
},{}],158:[function(require,module,exports) {
var r=require("../geom/rectangle/MarchingAnts"),e=require("../utils/array/RotateLeft"),t=require("../utils/array/RotateRight"),a=function(a,i,n){void 0===n&&(n=0);var o=r(i,!1,a.length);n>0?e(o,n):n<0&&t(o,Math.abs(n));for(var u=0;u<a.length;u++)a[u].x=o[u].x,a[u].y=o[u].y;return a};module.exports=a;
},{"../geom/rectangle/MarchingAnts":363,"../utils/array/RotateLeft":364,"../utils/array/RotateRight":365}],366:[function(require,module,exports) {
var a=function(a,r,o){void 0===r&&(r=1),void 0===o&&(o=[]);var t=Math.round(a.x1),u=Math.round(a.y1),h=Math.round(a.x2),d=Math.round(a.y2),n=Math.abs(h-t),v=Math.abs(d-u),M=t<h?1:-1,s=u<d?1:-1,x=n-v;o.push({x:t,y:u});for(var y=1;t!==h||u!==d;){var e=x<<1;e>-v&&(x-=v,t+=M),e<n&&(x+=n,u+=s),y%r==0&&o.push({x:t,y:u}),y++}return o};module.exports=a;
},{}],159:[function(require,module,exports) {
var x=require("../geom/line/BresenhamPoints"),y=function(y,e,o){var r=x({x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2},o),n=x({x1:e.x2,y1:e.y2,x2:e.x3,y2:e.y3},o),t=x({x1:e.x3,y1:e.y3,x2:e.x1,y2:e.y1},o);r.pop(),n.pop(),t.pop();for(var a=(r=r.concat(n,t)).length/y.length,p=0,l=0;l<y.length;l++){var h=y[l],g=r[Math.floor(p)];h.x=g.x,h.y=g.y,p+=a}return y};module.exports=y;
},{"../geom/line/BresenhamPoints":366}],160:[function(require,module,exports) {
var r=function(r,n,a){for(var e=0;e<r.length;e++)r[e].anims.play(n,a);return r};module.exports=r;
},{}],162:[function(require,module,exports) {
var o=function(o,r,e,v,i,d){var f;void 0===v&&(v=0),void 0===i&&(i=0),void 0===d&&(d=1);var n=0,t=o.length;if(1===d)for(f=i;f<t;f++)o[f][r]=e+n*v,n++;else for(f=i;f>=0;f--)o[f][r]=e+n*v,n++;return o};module.exports=o;
},{}],163:[function(require,module,exports) {
var r=require("../geom/circle/Random"),e=function(e,o){for(var n=0;n<e.length;n++)r(o,e[n]);return e};module.exports=e;
},{"../geom/circle/Random":367}],368:[function(require,module,exports) {
var t=require("../point/Point"),a=function(a,r){void 0===r&&(r=new t);var h=Math.random()*Math.PI*2,n=Math.sqrt(Math.random());return r.x=a.x+n*Math.cos(h)*a.width/2,r.y=a.y+n*Math.sin(h)*a.height/2,r};module.exports=a;
},{"../point/Point":345}],164:[function(require,module,exports) {
var e=require("../geom/ellipse/Random"),r=function(r,o){for(var n=0;n<r.length;n++)e(o,r[n]);return r};module.exports=r;
},{"../geom/ellipse/Random":368}],165:[function(require,module,exports) {
var e=require("../geom/line/Random"),r=function(r,n){for(var o=0;o<r.length;o++)e(n,r[o]);return r};module.exports=r;
},{"../geom/line/Random":343}],166:[function(require,module,exports) {
var e=require("../geom/rectangle/Random"),r=function(r,n){for(var o=0;o<r.length;o++)e(n,r[o]);return r};module.exports=r;
},{"../geom/rectangle/Random":115}],369:[function(require,module,exports) {
var r=require("../point/Point"),n=function(n,o){void 0===o&&(o=new r);var t=n.x2-n.x1,x=n.y2-n.y1,a=n.x3-n.x1,e=n.y3-n.y1,y=Math.random(),i=Math.random();return y+i>=1&&(y=1-y,i=1-i),o.x=n.x1+(t*y+a*i),o.y=n.y1+(x*y+e*i),o};module.exports=n;
},{"../point/Point":345}],167:[function(require,module,exports) {
var r=require("../geom/triangle/Random"),e=function(e,n){for(var o=0;o<e.length;o++)r(n,e[o]);return e};module.exports=e;
},{"../geom/triangle/Random":369}],168:[function(require,module,exports) {
var r=require("./PropertyValueInc"),e=function(e,o,t,n,u){return r(e,"rotation",o,t,n,u)};module.exports=e;
},{"./PropertyValueInc":161}],247:[function(require,module,exports) {
var a=function(a,t,n,r,o){var e=r+Math.atan2(a.y-n,a.x-t);return a.x=t+o*Math.cos(e),a.y=n+o*Math.sin(e),a};module.exports=a;
},{}],376:[function(require,module,exports) {
var r=function(r,t,a,e){var n=r-a,o=t-e;return Math.sqrt(n*n+o*o)};module.exports=r;
},{}],169:[function(require,module,exports) {
var e=require("../math/RotateAroundDistance"),t=require("../math/distance/DistanceBetween"),r=function(r,a,n){for(var i=a.x,o=a.y,u=0;u<r.length;u++){var c=r[u];e(c,i,o,n,Math.max(1,t(c.x,c.y,i,o)))}return r};module.exports=r;
},{"../math/RotateAroundDistance":247,"../math/distance/DistanceBetween":376}],170:[function(require,module,exports) {
var r=require("../math/RotateAroundDistance"),e=function(e,t,n,a){var o=t.x,u=t.y;if(0===a)return e;for(var i=0;i<e.length;i++)r(e[i],o,u,n,a);return e};module.exports=e;
},{"../math/RotateAroundDistance":247}],171:[function(require,module,exports) {
var e=require("./PropertyValueInc"),r=function(r,u,n,o,t){return e(r,"scaleX",u,n,o,t)};module.exports=r;
},{"./PropertyValueInc":161}],172:[function(require,module,exports) {
var e=require("./PropertyValueInc"),r=function(r,l,u,n,o,a,c){return void 0!==u&&null!==u||(u=l),e(r,"scaleX",l,n,a,c),e(r,"scaleY",u,o,a,c)};module.exports=r;
},{"./PropertyValueInc":161}],173:[function(require,module,exports) {
var e=require("./PropertyValueInc"),r=function(r,u,n,o,t){return e(r,"scaleY",u,n,o,t)};module.exports=r;
},{"./PropertyValueInc":161}],174:[function(require,module,exports) {
var e=require("./PropertyValueSet"),r=function(r,t,u,a,o){return e(r,"alpha",t,u,a,o)};module.exports=r;
},{"./PropertyValueSet":162}],175:[function(require,module,exports) {
var e=require("./PropertyValueSet"),r=function(r,o,t,u){return e(r,"blendMode",o,0,t,u)};module.exports=r;
},{"./PropertyValueSet":162}],176:[function(require,module,exports) {
var e=require("./PropertyValueSet"),r=function(r,t,u,o,n){return e(r,"depth",t,u,o,n)};module.exports=r;
},{"./PropertyValueSet":162}],177:[function(require,module,exports) {
var e=function(e,r,t){for(var n=0;n<e.length;n++)e[n].setInteractive(r,t);return e};module.exports=e;
},{}],178:[function(require,module,exports) {
var r=require("./PropertyValueSet"),e=function(e,i,o,n,u,t,l){return void 0!==o&&null!==o||(o=i),r(e,"originX",i,n,t,l),r(e,"originY",o,u,t,l)};module.exports=e;
},{"./PropertyValueSet":162}],179:[function(require,module,exports) {
var r=require("./PropertyValueSet"),e=function(e,t,o,u,n){return r(e,"rotation",t,o,u,n)};module.exports=e;
},{"./PropertyValueSet":162}],180:[function(require,module,exports) {
var e=require("./PropertyValueSet"),r=function(r,l,u,o,t,a,n){return void 0!==u&&null!==u||(u=l),e(r,"scaleX",l,o,a,n),e(r,"scaleY",u,t,a,n)};module.exports=r;
},{"./PropertyValueSet":162}],181:[function(require,module,exports) {
var e=require("./PropertyValueSet"),r=function(r,t,u,o,a){return e(r,"scaleX",t,u,o,a)};module.exports=r;
},{"./PropertyValueSet":162}],182:[function(require,module,exports) {
var e=require("./PropertyValueSet"),r=function(r,t,u,o,a){return e(r,"scaleY",t,u,o,a)};module.exports=r;
},{"./PropertyValueSet":162}],183:[function(require,module,exports) {
var r=function(r,t,e,n,o){for(var u=0;u<r.length;u++)r[u].setTint(t,e,n,o);return r};module.exports=r;
},{}],184:[function(require,module,exports) {
var e=require("./PropertyValueSet"),r=function(r,t,u,i){return e(r,"visible",t,0,u,i)};module.exports=r;
},{"./PropertyValueSet":162}],185:[function(require,module,exports) {
var e=require("./PropertyValueSet"),r=function(r,t,u,o,n){return e(r,"x",t,u,o,n)};module.exports=r;
},{"./PropertyValueSet":162}],186:[function(require,module,exports) {
var e=require("./PropertyValueSet"),r=function(r,u,o,t,l,n,i){return void 0!==o&&null!==o||(o=u),e(r,"x",u,t,n,i),e(r,"y",o,l,n,i)};module.exports=r;
},{"./PropertyValueSet":162}],187:[function(require,module,exports) {
var e=require("./PropertyValueSet"),r=function(r,t,u,o,n){return e(r,"y",t,u,o,n)};module.exports=r;
},{"./PropertyValueSet":162}],188:[function(require,module,exports) {
var e=require("../math/Vector2"),x=function(x,r,y,o,t){var n,i,l,f,v,a;if(void 0===o&&(o=0),void 0===t&&(t=new e),x.length>1)if(0===o){var h=x.length-1;for(n=x[h].x,i=x[h].y,l=h-1;l>=0;l--)f=(a=x[l]).x,v=a.y,a.x=n,a.y=i,n=f,i=v;x[h].x=r,x[h].y=y}else{for(n=x[0].x,i=x[0].y,l=1;l<x.length;l++)f=(a=x[l]).x,v=a.y,a.x=n,a.y=i,n=f,i=v;x[0].x=r,x[0].y=y}else n=x[0].x,i=x[0].y,x[0].x=r,x[0].y=y;return t.x=n,t.y=i,t};module.exports=x;
},{"../math/Vector2":96}],370:[function(require,module,exports) {
var r=function(r){for(var o=r.length-1;o>0;o--){var a=Math.floor(Math.random()*(o+1)),t=r[o];r[o]=r[a],r[a]=t}return r};module.exports=r;
},{}],189:[function(require,module,exports) {
var r=require("../utils/array/Shuffle"),e=function(e){return r(e)};module.exports=e;
},{"../utils/array/Shuffle":370}],251:[function(require,module,exports) {
var t=function(t,a,n){return(t=Math.max(0,Math.min(1,(t-a)/(n-a))))*t*t*(t*(6*t-15)+10)};module.exports=t;
},{}],190:[function(require,module,exports) {
var e=require("../math/SmootherStep"),r=function(r,t,o,h,n){void 0===n&&(n=!1);var a,l=Math.abs(h-o)/r.length;if(n)for(a=0;a<r.length;a++)r[a][t]+=e(a*l,o,h);else for(a=0;a<r.length;a++)r[a][t]=e(a*l,o,h);return r};module.exports=r;
},{"../math/SmootherStep":251}],252:[function(require,module,exports) {
var t=function(t,a,n){return(t=Math.max(0,Math.min(1,(t-a)/(n-a))))*t*(3-2*t)};module.exports=t;
},{}],191:[function(require,module,exports) {
var e=require("../math/SmoothStep"),t=function(t,r,o,h,n){void 0===n&&(n=!1);var a,l=Math.abs(h-o)/t.length;if(n)for(a=0;a<t.length;a++)t[a][r]+=e(a*l,o,h);else for(a=0;a<t.length;a++)t[a][r]=e(a*l,o,h);return t};module.exports=t;
},{"../math/SmoothStep":252}],192:[function(require,module,exports) {
var e=function(e,r,t,n,o){void 0===o&&(o=!1);var l,a=Math.abs(n-t)/e.length;if(o)for(l=0;l<e.length;l++)e[l][r]+=l*a;else for(l=0;l<e.length;l++)e[l][r]=l*a;return e};module.exports=e;
},{}],193:[function(require,module,exports) {
var e=function(e){for(var r=0;r<e.length;r++)e[r].visible=!e[r].visible;return e};module.exports=e;
},{}],194:[function(require,module,exports) {
var r=require("../math/Wrap"),t=function(t,o,e){void 0===e&&(e=0);for(var a=0;a<t.length;a++){var i=t[a];i.x=r(i.x,o.left-e,o.right+e),i.y=r(i.y,o.top-e,o.bottom+e)}return t};module.exports=t;
},{"../math/Wrap":254}],69:[function(require,module,exports) {
module.exports={Angle:require("./Angle"),Call:require("./Call"),GetFirst:require("./GetFirst"),GetLast:require("./GetLast"),GridAlign:require("./GridAlign"),IncAlpha:require("./IncAlpha"),IncX:require("./IncX"),IncXY:require("./IncXY"),IncY:require("./IncY"),PlaceOnCircle:require("./PlaceOnCircle"),PlaceOnEllipse:require("./PlaceOnEllipse"),PlaceOnLine:require("./PlaceOnLine"),PlaceOnRectangle:require("./PlaceOnRectangle"),PlaceOnTriangle:require("./PlaceOnTriangle"),PlayAnimation:require("./PlayAnimation"),PropertyValueInc:require("./PropertyValueInc"),PropertyValueSet:require("./PropertyValueSet"),RandomCircle:require("./RandomCircle"),RandomEllipse:require("./RandomEllipse"),RandomLine:require("./RandomLine"),RandomRectangle:require("./RandomRectangle"),RandomTriangle:require("./RandomTriangle"),Rotate:require("./Rotate"),RotateAround:require("./RotateAround"),RotateAroundDistance:require("./RotateAroundDistance"),ScaleX:require("./ScaleX"),ScaleXY:require("./ScaleXY"),ScaleY:require("./ScaleY"),SetAlpha:require("./SetAlpha"),SetBlendMode:require("./SetBlendMode"),SetDepth:require("./SetDepth"),SetHitArea:require("./SetHitArea"),SetOrigin:require("./SetOrigin"),SetRotation:require("./SetRotation"),SetScale:require("./SetScale"),SetScaleX:require("./SetScaleX"),SetScaleY:require("./SetScaleY"),SetTint:require("./SetTint"),SetVisible:require("./SetVisible"),SetX:require("./SetX"),SetXY:require("./SetXY"),SetY:require("./SetY"),ShiftPosition:require("./ShiftPosition"),Shuffle:require("./Shuffle"),SmootherStep:require("./SmootherStep"),SmoothStep:require("./SmoothStep"),Spread:require("./Spread"),ToggleVisible:require("./ToggleVisible"),WrapInRectangle:require("./WrapInRectangle")};
},{"./Angle":146,"./Call":147,"./GetFirst":148,"./GetLast":148,"./GridAlign":150,"./IncAlpha":151,"./IncX":152,"./IncXY":153,"./IncY":154,"./PlaceOnCircle":155,"./PlaceOnEllipse":156,"./PlaceOnLine":157,"./PlaceOnRectangle":158,"./PlaceOnTriangle":159,"./PlayAnimation":160,"./PropertyValueInc":161,"./PropertyValueSet":162,"./RandomCircle":163,"./RandomEllipse":164,"./RandomLine":165,"./RandomRectangle":166,"./RandomTriangle":167,"./Rotate":168,"./RotateAround":169,"./RotateAroundDistance":170,"./ScaleX":171,"./ScaleXY":172,"./ScaleY":173,"./SetAlpha":174,"./SetBlendMode":175,"./SetDepth":176,"./SetHitArea":177,"./SetOrigin":178,"./SetRotation":179,"./SetScale":180,"./SetScaleX":181,"./SetScaleY":182,"./SetTint":183,"./SetVisible":184,"./SetX":185,"./SetXY":186,"./SetY":187,"./ShiftPosition":188,"./Shuffle":189,"./SmootherStep":190,"./SmoothStep":191,"./Spread":192,"./ToggleVisible":193,"./WrapInRectangle":194}],94:[function(require,module,exports) {
var t=require("../utils/Class"),i=new t({initialize:function(t,i,e,s){this.textureKey=t,this.textureFrame=i,this.index=e,this.frame=s,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.onUpdate=null},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration}},destroy:function(){this.frame=void 0,this.onUpdate=void 0}});module.exports=i;
},{"../utils/Class":8}],53:[function(require,module,exports) {
var r=function(r,e,n){if(r&&"number"!=typeof r){if(r.hasOwnProperty(e))return r[e];if(e.indexOf(".")){for(var t=e.split("."),f=r,i=n,o=0;o<t.length;o++){if(!f.hasOwnProperty(t[o])){i=n;break}i=f[t[o]],f=f[t[o]]}return i}return n}return n};module.exports=r;
},{}],37:[function(require,module,exports) {
var e=require("../utils/Class"),t=require("./AnimationFrame"),a=require("../utils/object/GetValue"),r=new e({initialize:function(e,t,r){this.manager=e,this.key=t,this.type="frame",this.frames=this.getFrames(e.textureManager,a(r,"frames",[]),a(r,"defaultTextureKey",null)),this.frameRate=a(r,"frameRate",null),this.duration=a(r,"duration",null),null===this.duration&&null===this.frameRate?(this.frameRate=24,this.duration=this.frameRate/this.frames.length):this.duration&&null===this.frameRate?this.frameRate=this.frames.length/this.duration:this.duration=this.frames.length/this.frameRate,this.msPerFrame=1e3/this.frameRate,this.skipMissedFrames=a(r,"skipMissedFrames",!0),this.delay=a(r,"delay",0),this.repeat=a(r,"repeat",0),this.repeatDelay=a(r,"repeatDelay",0),this.yoyo=a(r,"yoyo",!1),this.showOnStart=a(r,"showOnStart",!1),this.hideOnComplete=a(r,"hideOnComplete",!1),this.callbackScope=a(r,"callbackScope",this),this.onStart=a(r,"onStart",!1),this.onStartParams=a(r,"onStartParams",[]),this.onRepeat=a(r,"onRepeat",!1),this.onRepeatParams=a(r,"onRepeatParams",[]),this.onUpdate=a(r,"onUpdate",!1),this.onUpdateParams=a(r,"onUpdateParams",[]),this.onComplete=a(r,"onComplete",!1),this.onCompleteParams=a(r,"onCompleteParams",[]),this.paused=!1,this.manager.on("pauseall",this.pause.bind(this)),this.manager.on("resumeall",this.resume.bind(this))},addFrame:function(e){return this.addFrameAt(this.frames.length,e)},addFrameAt:function(e,t){var a=this.getFrames(this.manager.textureManager,t);if(a.length>0){if(0===e)this.frames=a.concat(this.frames);else if(e===this.frames.length)this.frames=this.frames.concat(a);else{var r=this.frames.slice(0,e),s=this.frames.slice(e);this.frames=r.concat(a,s)}this.updateFrameSequence()}return this},checkFrame:function(e){return e<this.frames.length},completeAnimation:function(e){this.hideOnComplete&&(e.parent.visible=!1),e.stop(!0)},getFirstTick:function(e,t){void 0===t&&(t=!0),e.accumulator=0,e.nextTick=e.msPerFrame+e.currentFrame.duration,t&&(e.nextTick+=1e3*e._delay)},getFrameAt:function(e){return this.frames[e]},getFrames:function(e,r,s){var i,n,m,h,o=[],u=1;if("string"==typeof r){h=r;var p=e.get(h).getFrameNames();r=[],p.forEach(function(e,t){r.push({key:h,frame:t})})}if(!Array.isArray(r)||0===r.length)return o;for(m=0;m<r.length;m++){var l=r[m],c=a(l,"key",s);if(c){var f=a(l,"frame",0),d=e.getFrame(c,f);(n=new t(c,f,u,d)).duration=a(l,"duration",0),n.onUpdate=a(l,"onUpdate",null),n.isFirst=!i,i&&(i.nextFrame=n,n.prevFrame=i),o.push(n),i=n,u++}}if(o.length>0){n.isLast=!0,n.nextFrame=o[0],o[0].prevFrame=n;var F=1/(o.length-1);for(m=0;m<o.length;m++)o[m].progress=m*F}return o},getNextTick:function(e){e.accumulator-=e.nextTick,e.nextTick=e.msPerFrame+e.currentFrame.duration},load:function(e,t){t>=this.frames.length&&(t=0),e.currentAnim!==this&&(e.currentAnim=this,e._timeScale=1,e.frameRate=this.frameRate,e.duration=this.duration,e.msPerFrame=this.msPerFrame,e.skipMissedFrames=this.skipMissedFrames,e._delay=this.delay,e._repeat=this.repeat,e._repeatDelay=this.repeatDelay,e._yoyo=this.yoyo,e._callbackArgs[1]=this,e._updateParams=e._callbackArgs.concat(this.onUpdateParams)),e.updateFrame(this.frames[t])},nextFrame:function(e){var t=e.currentFrame;t.isLast?this.yoyo?(e.forward=!1,e.updateFrame(t.prevFrame),this.getNextTick(e)):e.repeatCounter>0?this.repeatAnimation(e):this.completeAnimation(e):(e.updateFrame(t.nextFrame),this.getNextTick(e))},previousFrame:function(e){var t=e.currentFrame;t.isFirst?e.repeatCounter>0?this.repeatAnimation(e):this.completeAnimation(e):(e.updateFrame(t.prevFrame),this.getNextTick(e))},removeFrame:function(e){var t=this.frames.indexOf(e);return-1!==t&&this.removeFrameAt(t),this},removeFrameAt:function(e){return this.frames.splice(e,1),this.updateFrameSequence(),this},repeatAnimation:function(e){e._repeatDelay>0&&!1===e.pendingRepeat?(e.pendingRepeat=!0,e.accumulator-=e.nextTick,e.nextTick+=1e3*e._repeatDelay):(e.repeatCounter--,e.forward=!0,e.updateFrame(e.currentFrame.nextFrame),this.getNextTick(e),e.pendingRepeat=!1,this.onRepeat&&this.onRepeat.apply(this.callbackScope,e._callbackArgs.concat(this.onRepeatParams)))},setFrame:function(e){e.forward?this.nextFrame(e):this.previousFrame(e)},toJSON:function(){var e={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(t){e.frames.push(t.toJSON())}),e},updateFrameSequence:function(){for(var e=this.frames.length,t=1/(e-1),a=0;a<e;a++){var r=this.frames[a];r.index=a+1,r.isFirst=!1,r.isLast=!1,r.progress=a*t,0===a?(r.isFirst=!0,r.isLast=1===e,r.prevFrame=this.frames[e-1],r.nextFrame=this.frames[a+1]):a===e-1?(r.isLast=!0,r.prevFrame=this.frames[e-2],r.nextFrame=this.frames[0]):e>1&&(r.prevFrame=this.frames[a-1],r.nextFrame=this.frames[a+1])}return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){}});module.exports=r;
},{"../utils/Class":8,"./AnimationFrame":94,"../utils/object/GetValue":53}],38:[function(require,module,exports) {
var t=require("../utils/Class"),e=new t({initialize:function(t){if(this.entries={},this.size=0,Array.isArray(t))for(var e=0;e<t.length;e++)this.set(t[e][0],t[e][1])},set:function(t,e){return this.has(t)||(this.entries[t]=e,this.size++),this},get:function(t){if(this.has(t))return this.entries[t]},getArray:function(){var t=[],e=this.entries;for(var i in e)t.push(e[i]);return t},has:function(t){return this.entries.hasOwnProperty(t)},delete:function(t){return this.has(t)&&(delete this.entries[t],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(t){delete this.entries[t]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var t=[],e=this.entries;for(var i in e)t.push(e[i]);return t},dump:function(){var t=this.entries;for(var e in console.group("Map"),t)console.log(e,t[e]);console.groupEnd()},each:function(t){var e=this.entries;for(var i in e)if(!1===t(i,e[i]))break;return this},contains:function(t){var e=this.entries;for(var i in e)if(e[i]===t)return!0;return!1},merge:function(t,e){void 0===e&&(e=!1);var i=this.entries,r=t.entries;for(var n in r)i.hasOwnProperty(n)&&e?i[n]=r[n]:this.set(n,r[n]);return this}});module.exports=e;
},{"../utils/Class":8}],52:[function(require,module,exports) {
var e=function(e,r,n,a){void 0===r&&(r=0),void 0===n&&(n=" "),void 0===a&&(a=3);var i=0;if(r+1>=(e=e.toString()).length)switch(a){case 1:e=new Array(r+1-e.length).join(n)+e;break;case 3:var t=Math.ceil((i=r-e.length)/2);e=new Array(i-t+1).join(n)+e+new Array(t+1).join(n);break;default:e+=new Array(r+1-e.length).join(n)}return e};module.exports=e;
},{}],18:[function(require,module,exports) {
var e=require("./Animation"),t=require("../utils/Class"),r=require("../structs/Map"),i=require("eventemitter3"),a=require("../utils/object/GetValue"),s=require("../utils/string/Pad"),n=new t({Extends:i,initialize:function(e){i.call(this),this.game=e,this.textureManager=null,this.globalTimeScale=1,this.anims=new r,this.paused=!1,this.name="AnimationManager",e.events.once("boot",this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once("destroy",this.destroy,this)},add:function(e,t){if(!this.anims.has(e))return t.key=e,this.anims.set(e,t),this.emit("add",e,t),this;console.warn("Animation with key",e,"already exists")},create:function(t){var r=t.key;if(r&&!this.anims.has(r)){var i=new e(this,r,t);return this.anims.set(r,i),this.emit("add",r,i),i}console.warn("Invalid Animation Key, or Key already in use: "+r)},fromJSON:function(e,t){void 0===t&&(t=!1),t&&this.anims.clear(),"string"==typeof e&&(e=JSON.parse(e));var r=[];if(e.hasOwnProperty("anims")&&Array.isArray(e.anims)){for(var i=0;i<e.anims.length;i++)r.push(this.create(e.anims[i]));e.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=e.globalTimeScale)}else e.hasOwnProperty("key")&&"frame"===e.type&&r.push(this.create(e));return r},generateFrameNames:function(e,t){var r=a(t,"prefix",""),i=a(t,"start",0),n=a(t,"end",0),u=a(t,"suffix",""),h=a(t,"zeroPad",0),o=a(t,"outputArray",[]),l=a(t,"frames",!1),m=this.textureManager.get(e);if(!m)return o;var f,y,c=i<n?1:-1;if(n+=c,Array.isArray(l))for(f=0;f<l.length;f++)y=r+s(l[f],h,"0",1)+u,m.has(y)&&o.push({key:e,frame:y});else for(f=i;f!==n;f+=c)y=r+s(f,h,"0",1)+u,m.has(y)&&o.push({key:e,frame:y});return o},generateFrameNumbers:function(e,t){var r,i=a(t,"start",0),s=a(t,"end",-1),n=a(t,"first",!1),u=a(t,"outputArray",[]),h=a(t,"frames",!1),o=this.textureManager.get(e);if(!o)return u;if(n&&o.has(n)&&u.push({key:e,frame:n}),Array.isArray(h))for(r=0;r<h.length;r++)o.has(h[r])&&u.push({key:e,frame:h[r]});else for(-1===s&&(s=o.frameTotal),r=i;r<=s;r++)o.has(r)&&u.push({key:e,frame:r});return u},get:function(e){return this.anims.get(e)},load:function(e,t,r){var i=this.get(t);return i&&i.load(e,r),e},pauseAll:function(){return this.paused||(this.paused=!0,this.emit("pauseall")),this},play:function(e,t){if(Array.isArray(t)||(t=[t]),this.get(e)){for(var r=0;r<t.length;r++)t[r].anims.play(e);return this}},remove:function(e){var t=this.get(e);return t&&(this.emit("remove",e,t),this.anims.delete(e)),t},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit("resumeall")),this},staggerPlay:function(e,t,r){if(void 0===r&&(r=0),Array.isArray(t)||(t=[t]),this.get(e)){for(var i=0;i<t.length;i++)t[i].anims.delayedPlay(r*i,e);return this}},toJSON:function(e){if(void 0!==e&&""!==e)return this.anims.get(e).toJSON();var t={anims:[],globalTimeScale:this.globalTimeScale};return this.anims.each(function(e,r){t.anims.push(r.toJSON())}),t},destroy:function(){this.anims.clear(),this.textureManager=null,this.game=null}});module.exports=n;
},{"./Animation":37,"../utils/Class":8,"../structs/Map":38,"eventemitter3":35,"../utils/object/GetValue":53,"../utils/string/Pad":52}],70:[function(require,module,exports) {
module.exports={Animation:require("./Animation"),AnimationFrame:require("./AnimationFrame"),AnimationManager:require("./AnimationManager")};
},{"./Animation":37,"./AnimationFrame":94,"./AnimationManager":18}],39:[function(require,module,exports) {
var e=require("../utils/Class"),t=require("../structs/Map"),i=require("eventemitter3"),s=new e({initialize:function(){this.entries=new t,this.events=new i},add:function(e,t){return this.entries.set(e,t),this.events.emit("add",this,e,t),this},has:function(e){return this.entries.has(e)},get:function(e){return this.entries.get(e)},remove:function(e){var t=this.get(e);return t&&(this.entries.delete(e),this.events.emit("remove",this,e,t.data)),this},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});module.exports=s;
},{"../utils/Class":8,"../structs/Map":38,"eventemitter3":35}],19:[function(require,module,exports) {
var t=require("./BaseCache"),s=require("../utils/Class"),i=new s({initialize:function(s){this.game=s,this.binary=new t,this.bitmapFont=new t,this.json=new t,this.physics=new t,this.shader=new t,this.audio=new t,this.text=new t,this.obj=new t,this.tilemap=new t,this.xml=new t,this.custom={},this.game.events.once("destroy",this.destroy,this)},addCustom:function(s){return this.custom.hasOwnProperty(s)||(this.custom[s]=new t),this.custom[s]},destroy:function(){for(var t=["binary","bitmapFont","json","physics","shader","audio","text","obj","tilemap","xml"],s=0;s<t.length;s++)this[t[s]].destroy(),this[t[s]]=null;for(var i in this.custom)this.custom[i].destroy();this.custom=null,this.game=null}});module.exports=i;
},{"./BaseCache":39,"../utils/Class":8}],71:[function(require,module,exports) {
module.exports={BaseCache:require("./BaseCache"),CacheManager:require("./CacheManager")};
},{"./BaseCache":39,"./CacheManager":19}],578:[function(require,module,exports) {
var t=require("../../utils/Class"),s=require("../../utils/object/GetValue"),i=new t({initialize:function(t){this.camera=s(t,"camera",null),this.left=s(t,"left",null),this.right=s(t,"right",null),this.up=s(t,"up",null),this.down=s(t,"down",null),this.zoomIn=s(t,"zoomIn",null),this.zoomOut=s(t,"zoomOut",null),this.zoomSpeed=s(t,"zoomSpeed",.01),this.speedX=0,this.speedY=0;var i=s(t,"speed",null);"number"==typeof i?(this.speedX=i,this.speedY=i):(this.speedX=s(t,"speed.x",0),this.speedY=s(t,"speed.y",0)),this._zoom=0,this.active=null!==this.camera},start:function(){return this.active=null!==this.camera,this},stop:function(){return this.active=!1,this},setCamera:function(t){return this.camera=t,this},update:function(t){if(this.active){void 0===t&&(t=1);var s=this.camera;this.up&&this.up.isDown?s.scrollY-=this.speedY*t|0:this.down&&this.down.isDown&&(s.scrollY+=this.speedY*t|0),this.left&&this.left.isDown?s.scrollX-=this.speedX*t|0:this.right&&this.right.isDown&&(s.scrollX+=this.speedX*t|0),this.zoomIn&&this.zoomIn.isDown?(s.zoom-=this.zoomSpeed,s.zoom<.1&&(s.zoom=.1)):this.zoomOut&&this.zoomOut.isDown&&(s.zoom+=this.zoomSpeed)}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});module.exports=i;
},{"../../utils/Class":8,"../../utils/object/GetValue":53}],577:[function(require,module,exports) {
var e=require("../../utils/Class"),s=require("../../utils/object/GetValue"),t=new e({initialize:function(e){this.camera=s(e,"camera",null),this.left=s(e,"left",null),this.right=s(e,"right",null),this.up=s(e,"up",null),this.down=s(e,"down",null),this.zoomIn=s(e,"zoomIn",null),this.zoomOut=s(e,"zoomOut",null),this.zoomSpeed=s(e,"zoomSpeed",.01),this.accelX=0,this.accelY=0;var t=s(e,"acceleration",null);"number"==typeof t?(this.accelX=t,this.accelY=t):(this.accelX=s(e,"acceleration.x",0),this.accelY=s(e,"acceleration.y",0)),this.dragX=0,this.dragY=0;var i=s(e,"drag",null);"number"==typeof i?(this.dragX=i,this.dragY=i):(this.dragX=s(e,"drag.x",0),this.dragY=s(e,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var h=s(e,"maxSpeed",null);"number"==typeof h?(this.maxSpeedX=h,this.maxSpeedY=h):(this.maxSpeedX=s(e,"maxSpeed.x",0),this.maxSpeedY=s(e,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=null!==this.camera},start:function(){return this.active=null!==this.camera,this},stop:function(){return this.active=!1,this},setCamera:function(e){return this.camera=e,this},update:function(e){if(this.active){void 0===e&&(e=1);var s=this.camera;this._speedX>0?(this._speedX-=this.dragX*e,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*e,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*e,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*e,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,0!==this._speedX&&(s.scrollX-=this._speedX*e|0),0!==this._speedY&&(s.scrollY-=this._speedY*e|0),0!==this._zoom&&(s.zoom+=this._zoom,s.zoom<.1&&(s.zoom=.1))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});module.exports=t;
},{"../../utils/Class":8,"../../utils/object/GetValue":53}],501:[function(require,module,exports) {
module.exports={Fixed:require("./FixedKeyControl"),Smoothed:require("./SmoothedKeyControl")};
},{"./FixedKeyControl":578,"./SmoothedKeyControl":577}],228:[function(require,module,exports) {
var r=require("./const"),e=function(e){return e*r.DEG_TO_RAD};module.exports=e;
},{"./const":40}],121:[function(require,module,exports) {
var r=function(r,e,n){return r<<16|e<<8|n};module.exports=r;
},{}],122:[function(require,module,exports) {
var r=function(r,e,n,o){return o<<24|r<<16|e<<8|n};module.exports=r;
},{}],66:[function(require,module,exports) {
var t=require("../../utils/Class"),i=require("./GetColor"),h=require("./GetColor32"),s=new t({initialize:function(t,i,h,s){void 0===t&&(t=0),void 0===i&&(i=0),void 0===h&&(h=0),void 0===s&&(s=255),this.r=0,this.g=0,this.b=0,this.a=255,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(t,i,h,s)},transparent:function(){return this.red=0,this.green=0,this.blue=0,this.alpha=0,this.update()},setTo:function(t,i,h,s){return void 0===s&&(s=255),this.red=t,this.green=i,this.blue=h,this.alpha=s,this.update()},setGLTo:function(t,i,h,s){return void 0===s&&(s=1),this.redGL=t,this.greenGL=i,this.blueGL=h,this.alphaGL=s,this.update()},setFromRGB:function(t){return this.red=t.r,this.green=t.g,this.blue=t.b,t.hasOwnProperty("a")&&(this.alpha=t.a),this.update()},update:function(){return this._color=i(this.r,this.g,this.b),this._color32=h(this.r,this.g,this.b,this.a),this._rgba="rgba("+this.r+","+this.g+","+this.b+","+this.a/255+")",this},clone:function(){return new s(this.r,this.g,this.b,this.a)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(t){this.gl[0]=Math.min(Math.abs(t),1),this.r=Math.floor(255*this.gl[0]),this.update()}},greenGL:{get:function(){return this.gl[1]},set:function(t){this.gl[1]=Math.min(Math.abs(t),1),this.g=Math.floor(255*this.gl[1]),this.update()}},blueGL:{get:function(){return this.gl[2]},set:function(t){this.gl[2]=Math.min(Math.abs(t),1),this.b=Math.floor(255*this.gl[2]),this.update()}},alphaGL:{get:function(){return this.gl[3]},set:function(t){this.gl[3]=Math.min(Math.abs(t),1),this.a=Math.floor(255*this.gl[3]),this.update()}},red:{get:function(){return this.r},set:function(t){t=Math.floor(Math.abs(t)),this.r=Math.min(t,255),this.gl[0]=t/255,this.update()}},green:{get:function(){return this.g},set:function(t){t=Math.floor(Math.abs(t)),this.g=Math.min(t,255),this.gl[1]=t/255,this.update()}},blue:{get:function(){return this.b},set:function(t){t=Math.floor(Math.abs(t)),this.b=Math.min(t,255),this.gl[2]=t/255,this.update()}},alpha:{get:function(){return this.a},set:function(t){t=Math.floor(Math.abs(t)),this.a=Math.min(t,255),this.gl[3]=t/255,this.update()}}});module.exports=s;
},{"../../utils/Class":8,"./GetColor":121,"./GetColor32":122}],105:[function(require,module,exports) {
var r=require("./Color"),e=function(e){var a=new r;e=e.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(r,e,a,n){return e+e+a+a+n+n});var n=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(n){var f=parseInt(n[1],16),t=parseInt(n[2],16),d=parseInt(n[3],16);a.setTo(f,t,d)}return a};module.exports=e;
},{"./Color":66}],339:[function(require,module,exports) {
var r=function(r){return r>16777215?{a:r>>>24,r:r>>16&255,g:r>>8&255,b:255&r}:{a:255,r:r>>16&255,g:r>>8&255,b:255&r}};module.exports=r;
},{}],108:[function(require,module,exports) {
var r=require("./Color"),e=require("./IntegerToRGB"),o=function(o){var n=e(o);return new r(n.r,n.g,n.b,n.a)};module.exports=o;
},{"./Color":66,"./IntegerToRGB":339}],106:[function(require,module,exports) {
var r=require("./Color"),e=function(e){return new r(e.r,e.g,e.b,e.a)};module.exports=e;
},{"./Color":66}],107:[function(require,module,exports) {
var e=require("./Color"),r=function(r){var s=new e,a=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(r.toLowerCase());if(a){var o=parseInt(a[1],10),t=parseInt(a[2],10),d=parseInt(a[3],10),n=void 0!==a[4]?parseFloat(a[4]):1;s.setTo(o,t,d,255*n)}return s};module.exports=r;
},{"./Color":66}],54:[function(require,module,exports) {
var r=require("./HexStringToColor"),e=require("./IntegerToColor"),o=require("./ObjectToColor"),t=require("./RGBStringToColor"),u=function(u){switch(typeof u){case"string":return"rgb"===u.substr(0,3).toLowerCase()?t(u):r(u);case"number":return e(u);case"object":return o(u)}};module.exports=u;
},{"./HexStringToColor":105,"./IntegerToColor":108,"./ObjectToColor":106,"./RGBStringToColor":107}],377:[function(require,module,exports) {
var t=require("../../utils/Class"),i=require("../../math/DegToRad"),s=require("../../geom/rectangle/Rectangle"),h=require("../../gameobjects/components/TransformMatrix"),e=require("../../display/color/ValueToColor"),r=require("../../math/Vector2"),l=new t({initialize:function(t,i,r,l){this.scene,this.name="",this.x=t,this.y=i,this.width=r,this.height=l,this.roundPixels=!1,this.useBounds=!1,this._bounds=new s,this.inputEnabled=!0,this.scrollX=0,this.scrollY=0,this.zoom=1,this.rotation=0,this.matrix=new h(1,0,0,1,0,0),this.transparent=!0,this.clearBeforeRender=!0,this.backgroundColor=e("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this._shakeDuration=0,this._shakeIntensity=0,this._shakeOffsetX=0,this._shakeOffsetY=0,this._shakeCallback=null,this._fadeDuration=0,this._fadeRed=0,this._fadeGreen=0,this._fadeBlue=0,this._fadeAlpha=0,this._fadeCallback=null,this._flashDuration=0,this._flashRed=1,this._flashGreen=1,this._flashBlue=1,this._flashAlpha=0,this._flashCallback=null,this._follow=null,this._id=0},centerToBounds:function(){return this.scrollX=.5*this._bounds.width-.5*this.width,this.scrollY=.5*this._bounds.height-.5*this.height,this},centerToSize:function(){return this.scrollX=.5*this.width,this.scrollY=.5*this.height,this},cull:function(t){if(this.disableCull)return t;var i=this.matrix.matrix,s=i[0],h=i[1],e=i[2],r=i[3],l=s*r-h*e;if(!l)return t;var o=i[4],a=i[5],n=this.scrollX,u=this.scrollY,d=this.width,f=this.height,c=this.culledObjects,_=t.length;l=1/l,c.length=0;for(var v=0;v<_;++v){var k=t[v];if(k.hasOwnProperty("width")){var b=k.width,g=k.height,m=k.x-n*k.scrollFactorX-b*k.originX,x=k.y-u*k.scrollFactorY-g*k.originY,p=m*s+x*e+o,w=m*h+x*r+a,X=(m+b)*s+(x+g)*e+o,Y=(m+b)*h+(x+g)*r+a,y=d+b,C=f+g;(p>-b||w>-g||p<y||w<C||X>-b||Y>-g||X<y||Y<C)&&c.push(k)}else c.push(k)}return c},cullHitTest:function(t){if(this.disableCull)return t;var i=this.matrix.matrix,s=i[0],h=i[1],e=i[2],r=i[3],l=s*r-h*e;if(!l)return t;var o=i[4],a=i[5],n=this.scrollX,u=this.scrollY,d=this.width,f=this.height,c=t.length;l=1/l;for(var _=[],v=0;v<c;++v){var k=t[v].gameObject;if(k.hasOwnProperty("width")){var b=k.width,g=k.height,m=k.x-n*k.scrollFactorX-b*k.originX,x=k.y-u*k.scrollFactorY-g*k.originY,p=m*s+x*e+o,w=m*h+x*r+a,X=(m+b)*s+(x+g)*e+o,Y=(m+b)*h+(x+g)*r+a,y=d+b,C=f+g;(p>-b||w>-g||p<y||w<C||X>-b||Y>-g||X<y||Y<C)&&_.push(t[v])}else _.push(t[v])}return _},cullTilemap:function(t){var i=this.matrix.matrix,s=i[0],h=i[1],e=i[2],r=i[3],l=s*r-h*e;if(!l)return n;var o=i[4],a=i[5],n=t.tiles,u=this.scrollX,d=this.scrollY,f=this.width,c=this.height,_=this.culledObjects,v=n.length,k=t.tileWidth,b=t.tileHeight,g=f+k,m=c+b,x=t.scrollFactorX,p=t.scrollFactorY;l=1/l,_.length=0;for(var w=0;w<v;++w){var X=n[w],Y=X.x-u*x,y=X.y-d*p;Y*s+y*e+o>-k&&Y*h+y*r+a>-b&&(Y+k)*s+(y+b)*e+o<g&&(Y+k)*h+(y+b)*r+a<m&&_.push(X)}return _},fadeIn:function(t,i,s,h,e){return void 0===s&&(s=0),void 0===h&&(h=0),void 0===e&&(e=0),this.flash(t,s,h,e,!0,i)},fadeOut:function(t,i,s,h,e){return void 0===s&&(s=0),void 0===h&&(h=0),void 0===e&&(e=0),this.fade(t,s,h,e,!0,i)},fade:function(t,i,s,h,e,r){return t||(t=Number.MIN_VALUE),void 0===i&&(i=0),void 0===s&&(s=0),void 0===h&&(h=0),void 0===e&&(e=!1),void 0===r&&(r=null),!e&&this._fadeAlpha>0?this:(this._fadeRed=i,this._fadeGreen=s,this._fadeBlue=h,this._fadeCallback=r,this._fadeDuration=t,this._fadeAlpha=Number.MIN_VALUE,this)},flash:function(t,i,s,h,e,r){return t||(t=Number.MIN_VALUE),void 0===i&&(i=1),void 0===s&&(s=1),void 0===h&&(h=1),void 0===e&&(e=!1),void 0===r&&(r=null),!e&&this._flashAlpha>0?this:(this._flashRed=i,this._flashGreen=s,this._flashBlue=h,this._flashCallback=r,this._flashDuration=t,this._flashAlpha=1,this)},shake:function(t,i,s,h){return t||(t=Number.MIN_VALUE),void 0===i&&(i=.05),void 0===s&&(s=!1),void 0===h&&(h=null),s||0===this._shakeOffsetX&&0===this._shakeOffsetY?(this._shakeDuration=t,this._shakeIntensity=i,this._shakeOffsetX=0,this._shakeOffsetY=0,this._shakeCallback=h,this):this},getWorldPoint:function(t,i,s){void 0===s&&(s=new r);var h=this.matrix.matrix,e=h[0],l=h[1],o=h[2],a=h[3],n=h[4],u=h[5],d=e*a-l*o;if(!d)return s.x=t,s.y=i,s;var f=a*(d=1/d),c=-l*d,_=-o*d,v=e*d,k=(o*u-a*n)*d,b=(l*n-e*u)*d,g=Math.cos(this.rotation),m=Math.sin(this.rotation),x=this.zoom,p=this.scrollX,w=this.scrollY,X=t+(p*g-w*m)*x,Y=i+(p*m+w*g)*x;return s.x=X*f+Y*_+k,s.y=X*c+Y*v+b,s},ignore:function(t){if(t instanceof Array)for(var i=0;i<t.length;++i)t[i].cameraFilter|=this._id;else t.cameraFilter|=this._id;return this},preRender:function(t,i){var s=this.width,h=this.height,e=this.zoom*t,r=this.matrix,l=s/2,o=h/2,a=this._follow;if(null!==a&&(l=a.x,o=a.y,this.scrollX=(l-.5*s)/e,this.scrollY=(o-.5*h)/e),this.useBounds){var n=this._bounds,u=Math.max(0,n.right-s),d=Math.max(0,n.bottom-h);this.scrollX<n.x?this.scrollX=n.x:this.scrollX>u&&(this.scrollX=u),this.scrollY<n.y?this.scrollY=n.y:this.scrollY>d&&(this.scrollY=d)}this.roundPixels&&(this.scrollX=Math.round(this.scrollX),this.scrollY=Math.round(this.scrollY)),r.loadIdentity(),r.scale(i,i),r.translate(this.x+l,this.y+o),r.rotate(this.rotation),r.scale(e,e),r.translate(-l,-o),r.translate(this._shakeOffsetX,this._shakeOffsetY)},removeBounds:function(){return this.useBounds=!1,this._bounds.setEmpty(),this},setAngle:function(t){return void 0===t&&(t=0),this.rotation=i(t),this},setBackgroundColor:function(t){return void 0===t&&(t="rgba(0,0,0,0)"),this.backgroundColor=e(t),this.transparent=0===this.backgroundColor.alpha,this},setBounds:function(t,i,s,h){return this._bounds.setTo(t,i,s,h),this.useBounds=!0,this},setName:function(t){return void 0===t&&(t=""),this.name=t,this},setPosition:function(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setRotation:function(t){return void 0===t&&(t=0),this.rotation=t,this},setRoundPixels:function(t){return this.roundPixels=t,this},setScene:function(t){return this.scene=t,this},setScroll:function(t,i){return void 0===i&&(i=t),this.scrollX=t,this.scrollY=i,this},setSize:function(t,i){return void 0===i&&(i=t),this.width=t,this.height=i,this},setViewport:function(t,i,s,h){return this.x=t,this.y=i,this.width=s,this.height=h,this},setZoom:function(t){return void 0===t&&(t=1),this.zoom=t,this},startFollow:function(t,i){return void 0===i&&(i=!1),this._follow=t,this.roundPixels=i,this},stopFollow:function(){return this._follow=null,this},toJSON:function(){var t={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(t.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),t},resetFX:function(){return this._flashAlpha=0,this._fadeAlpha=0,this._shakeOffsetX=0,this._shakeOffsetY=0,this._shakeDuration=0,this},update:function(t,i){if(this._flashAlpha>0&&(this._flashAlpha-=i/this._flashDuration,this._flashAlpha<=0&&(this._flashAlpha=0,this._flashCallback))){var s=this._flashCallback;this._flashCallback=null,s(this)}if(this._fadeAlpha>0&&this._fadeAlpha<1&&(this._fadeAlpha+=i/this._fadeDuration,this._fadeAlpha>=1&&(this._fadeAlpha=1,this._fadeCallback))){var h=this._fadeCallback;this._fadeCallback=null,h(this)}if(this._shakeDuration>0){var e=this._shakeIntensity;if(this._shakeDuration-=i,this._shakeDuration<=0){if(this._shakeOffsetX=0,this._shakeOffsetY=0,this._shakeCallback){var r=this._shakeCallback;this._shakeCallback=null,r(this)}}else this._shakeOffsetX=(Math.random()*e*this.width*2-e*this.width)*this.zoom,this._shakeOffsetY=(Math.random()*e*this.height*2-e*this.height)*this.zoom,this.roundPixels&&(this._shakeOffsetX|=0,this._shakeOffsetY|=0)}},destroy:function(){this._bounds=void 0,this.matrix=void 0,this.culledObjects=[],this.scene=void 0}});module.exports=l;
},{"../../utils/Class":8,"../../math/DegToRad":228,"../../geom/rectangle/Rectangle":62,"../../gameobjects/components/TransformMatrix":433,"../../display/color/ValueToColor":54,"../../math/Vector2":96}],16:[function(require,module,exports) {
var t=require("../utils/Class"),e={},n=new t({initialize:function(t){this.game=t,t.events.once("boot",this.boot,this)},boot:function(){this.game.events.once("destroy",this.destroy,this)},installGlobal:function(t,e){for(var n=t.game,i=t.scene,o=t.settings.map,s=0;s<e.length;s++){var a=e[s];n[a]&&(t[a]=n[a],o.hasOwnProperty(a)&&(i[o[a]]=t[a]))}},installLocal:function(t,n){for(var i=t.scene,o=t.settings.map,s=t.settings.isBooted,a=0;a<n.length;a++){var r=n[a];if(e[r]){var l=e[r],g=new l.plugin(i);t[l.mapping]=g,o.hasOwnProperty(l.mapping)&&(i[o[l.mapping]]=g),s&&g.boot()}}},remove:function(t){delete e[t]},destroy:function(){this.game=null}});n.register=function(t,n,i){e[t]={plugin:n,mapping:i}},module.exports=n;
},{"../utils/Class":8}],579:[function(require,module,exports) {
var s=require("./Camera"),e=require("../../utils/Class"),t=require("../../utils/object/GetFastValue"),a=require("../../boot/PluginManager"),i=require("../../geom/rectangle/Contains"),r=new e({initialize:function(s){this.scene=s,this.systems=s.sys,s.sys.settings.isBooted||s.sys.events.once("boot",this.boot,this),this.currentCameraId=1,this.cameras=[],this.cameraPool=[],s.sys.settings.cameras?this.fromJSON(s.sys.settings.cameras):this.add(),this.main=this.cameras[0],this.baseScale=1},boot:function(){var s=this.systems.events;s.on("update",this.update,this),s.on("shutdown",this.shutdown,this),s.on("destroy",this.destroy,this)},add:function(e,t,a,i,r,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===a&&(a=this.scene.sys.game.config.width),void 0===i&&(i=this.scene.sys.game.config.height),void 0===r&&(r=!1),void 0===n&&(n="");var o=null;return this.cameraPool.length>0?(o=this.cameraPool.pop()).setViewport(e,t,a,i):o=new s(e,t,a,i),o.setName(n),o.setScene(this.scene),this.cameras.push(o),r&&(this.main=o),o._id=this.currentCameraId,this.currentCameraId=this.currentCameraId<<1,o},addExisting:function(s){var e=this.cameras.indexOf(s),t=this.cameraPool.indexOf(s);return e<0&&t>=0?(this.cameras.push(s),this.cameraPool.slice(t,1),s):null},fromJSON:function(s){Array.isArray(s)||(s=[s]);for(var e=this.scene.sys.game.config.width,a=this.scene.sys.game.config.height,i=0;i<s.length;i++){var r=s[i],n=t(r,"x",0),o=t(r,"y",0),h=t(r,"width",e),c=t(r,"height",a),m=this.add(n,o,h,c);m.name=t(r,"name",""),m.zoom=t(r,"zoom",1),m.rotation=t(r,"rotation",0),m.scrollX=t(r,"scrollX",0),m.scrollY=t(r,"scrollY",0),m.roundPixels=t(r,"roundPixels",!1);var l=t(r,"backgroundColor",!1);l&&m.setBackgroundColor(l);var u=t(r,"bounds",null);if(u){var d=t(u,"x",0),g=t(u,"y",0),f=t(u,"width",e),v=t(u,"height",a);m.setBounds(d,g,f,v)}}return this},getCamera:function(s){for(var e=0;e<this.cameras.length;e++)if(this.cameras[e].name===s)return this.cameras[e];return null},getCameraBelowPointer:function(s){for(var e=this.cameras,t=e.length-1;t>=0;t--){var a=e[t];if(a.inputEnabled&&i(a,s.x,s.y))return a}},remove:function(s){var e=this.cameras.indexOf(s);e>=0&&this.cameras.length>1&&(this.cameraPool.push(this.cameras[e]),this.cameras.splice(e,1),this.main===s&&(this.main=this.cameras[0]))},render:function(s,e,t){for(var a=this.cameras,i=this.baseScale,r=0,n=a.length;r<n;++r){var o=a[r];o.preRender(i,s.config.resolution),s.render(this.scene,e,t,o)}},resetAll:function(){for(;this.cameras.length>0;)this.cameraPool.push(this.cameras.pop());return this.main=this.add(),this.main},update:function(s,e){for(var t=0,a=this.cameras.length;t<a;++t)this.cameras[t].update(s,e)},resize:function(s,e){for(var t=0,a=this.cameras.length;t<a;++t)this.cameras[t].setSize(s,e)},shutdown:function(){},destroy:function(){this.main=void 0;for(var s=0;s<this.cameras.length;s++)this.cameras[s].destroy();for(s=0;s<this.cameraPool.length;s++)this.cameraPool[s].destroy();this.cameras=[],this.cameraPool=[],this.scene=void 0}});a.register("CameraManager",r,"cameras"),module.exports=r;
},{"./Camera":377,"../../utils/Class":8,"../../utils/object/GetFastValue":102,"../../boot/PluginManager":16,"../../geom/rectangle/Contains":113}],500:[function(require,module,exports) {
module.exports={Camera:require("./Camera"),CameraManager:require("./CameraManager")};
},{"./Camera":377,"./CameraManager":579}],258:[function(require,module,exports) {
var t=require("../utils/Class"),i=1e-6,r=new t({initialize:function(t){this.val=new Float32Array(16),t?this.copy(t):this.identity()},clone:function(){return new r(this)},set:function(t){return this.copy(t)},copy:function(t){var i=this.val,r=t.val;return i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],i[9]=r[9],i[10]=r[10],i[11]=r[11],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15],this},fromArray:function(t){var i=this.val;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],this},zero:function(){var t=this.val;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=0,this},xyz:function(t,i,r){this.identity();var n=this.val;return n[12]=t,n[13]=i,n[14]=r,this},scaling:function(t,i,r){this.zero();var n=this.val;return n[0]=t,n[5]=i,n[10]=r,n[15]=1,this},identity:function(){var t=this.val;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},transpose:function(){var t=this.val,i=t[1],r=t[2],n=t[3],a=t[6],s=t[7],h=t[11];return t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=i,t[6]=t[9],t[7]=t[13],t[8]=r,t[9]=a,t[11]=t[14],t[12]=n,t[13]=s,t[14]=h,this},invert:function(){var t=this.val,i=t[0],r=t[1],n=t[2],a=t[3],s=t[4],h=t[5],o=t[6],u=t[7],l=t[8],e=t[9],v=t[10],c=t[11],f=t[12],y=t[13],M=t[14],z=t[15],x=i*h-r*s,p=i*o-n*s,m=i*u-a*s,d=r*o-n*h,w=r*u-a*h,L=n*u-a*o,q=l*y-e*f,A=l*M-v*f,b=l*z-c*f,R=e*M-v*y,g=e*z-c*y,k=v*z-c*M,P=x*k-p*g+m*R+d*b-w*A+L*q;return P?(P=1/P,t[0]=(h*k-o*g+u*R)*P,t[1]=(n*g-r*k-a*R)*P,t[2]=(y*L-M*w+z*d)*P,t[3]=(v*w-e*L-c*d)*P,t[4]=(o*b-s*k-u*A)*P,t[5]=(i*k-n*b+a*A)*P,t[6]=(M*m-f*L-z*p)*P,t[7]=(l*L-v*m+c*p)*P,t[8]=(s*g-h*b+u*q)*P,t[9]=(r*b-i*g-a*q)*P,t[10]=(f*w-y*m+z*x)*P,t[11]=(e*m-l*w-c*x)*P,t[12]=(h*A-s*R-o*q)*P,t[13]=(i*R-r*A+n*q)*P,t[14]=(y*p-f*d-M*x)*P,t[15]=(l*d-e*p+v*x)*P,this):null},adjoint:function(){var t=this.val,i=t[0],r=t[1],n=t[2],a=t[3],s=t[4],h=t[5],o=t[6],u=t[7],l=t[8],e=t[9],v=t[10],c=t[11],f=t[12],y=t[13],M=t[14],z=t[15];return t[0]=h*(v*z-c*M)-e*(o*z-u*M)+y*(o*c-u*v),t[1]=-(r*(v*z-c*M)-e*(n*z-a*M)+y*(n*c-a*v)),t[2]=r*(o*z-u*M)-h*(n*z-a*M)+y*(n*u-a*o),t[3]=-(r*(o*c-u*v)-h*(n*c-a*v)+e*(n*u-a*o)),t[4]=-(s*(v*z-c*M)-l*(o*z-u*M)+f*(o*c-u*v)),t[5]=i*(v*z-c*M)-l*(n*z-a*M)+f*(n*c-a*v),t[6]=-(i*(o*z-u*M)-s*(n*z-a*M)+f*(n*u-a*o)),t[7]=i*(o*c-u*v)-s*(n*c-a*v)+l*(n*u-a*o),t[8]=s*(e*z-c*y)-l*(h*z-u*y)+f*(h*c-u*e),t[9]=-(i*(e*z-c*y)-l*(r*z-a*y)+f*(r*c-a*e)),t[10]=i*(h*z-u*y)-s*(r*z-a*y)+f*(r*u-a*h),t[11]=-(i*(h*c-u*e)-s*(r*c-a*e)+l*(r*u-a*h)),t[12]=-(s*(e*M-v*y)-l*(h*M-o*y)+f*(h*v-o*e)),t[13]=i*(e*M-v*y)-l*(r*M-n*y)+f*(r*v-n*e),t[14]=-(i*(h*M-o*y)-s*(r*M-n*y)+f*(r*o-n*h)),t[15]=i*(h*v-o*e)-s*(r*v-n*e)+l*(r*o-n*h),this},determinant:function(){var t=this.val,i=t[0],r=t[1],n=t[2],a=t[3],s=t[4],h=t[5],o=t[6],u=t[7],l=t[8],e=t[9],v=t[10],c=t[11],f=t[12],y=t[13],M=t[14],z=t[15];return(i*h-r*s)*(v*z-c*M)-(i*o-n*s)*(e*z-c*y)+(i*u-a*s)*(e*M-v*y)+(r*o-n*h)*(l*z-c*f)-(r*u-a*h)*(l*M-v*f)+(n*u-a*o)*(l*y-e*f)},multiply:function(t){var i=this.val,r=i[0],n=i[1],a=i[2],s=i[3],h=i[4],o=i[5],u=i[6],l=i[7],e=i[8],v=i[9],c=i[10],f=i[11],y=i[12],M=i[13],z=i[14],x=i[15],p=t.val,m=p[0],d=p[1],w=p[2],L=p[3];return i[0]=m*r+d*h+w*e+L*y,i[1]=m*n+d*o+w*v+L*M,i[2]=m*a+d*u+w*c+L*z,i[3]=m*s+d*l+w*f+L*x,m=p[4],d=p[5],w=p[6],L=p[7],i[4]=m*r+d*h+w*e+L*y,i[5]=m*n+d*o+w*v+L*M,i[6]=m*a+d*u+w*c+L*z,i[7]=m*s+d*l+w*f+L*x,m=p[8],d=p[9],w=p[10],L=p[11],i[8]=m*r+d*h+w*e+L*y,i[9]=m*n+d*o+w*v+L*M,i[10]=m*a+d*u+w*c+L*z,i[11]=m*s+d*l+w*f+L*x,m=p[12],d=p[13],w=p[14],L=p[15],i[12]=m*r+d*h+w*e+L*y,i[13]=m*n+d*o+w*v+L*M,i[14]=m*a+d*u+w*c+L*z,i[15]=m*s+d*l+w*f+L*x,this},multiplyLocal:function(t){var i=[],r=this.val,n=t.val;return i[0]=r[0]*n[0]+r[1]*n[4]+r[2]*n[8]+r[3]*n[12],i[1]=r[0]*n[1]+r[1]*n[5]+r[2]*n[9]+r[3]*n[13],i[2]=r[0]*n[2]+r[1]*n[6]+r[2]*n[10]+r[3]*n[14],i[3]=r[0]*n[3]+r[1]*n[7]+r[2]*n[11]+r[3]*n[15],i[4]=r[4]*n[0]+r[5]*n[4]+r[6]*n[8]+r[7]*n[12],i[5]=r[4]*n[1]+r[5]*n[5]+r[6]*n[9]+r[7]*n[13],i[6]=r[4]*n[2]+r[5]*n[6]+r[6]*n[10]+r[7]*n[14],i[7]=r[4]*n[3]+r[5]*n[7]+r[6]*n[11]+r[7]*n[15],i[8]=r[8]*n[0]+r[9]*n[4]+r[10]*n[8]+r[11]*n[12],i[9]=r[8]*n[1]+r[9]*n[5]+r[10]*n[9]+r[11]*n[13],i[10]=r[8]*n[2]+r[9]*n[6]+r[10]*n[10]+r[11]*n[14],i[11]=r[8]*n[3]+r[9]*n[7]+r[10]*n[11]+r[11]*n[15],i[12]=r[12]*n[0]+r[13]*n[4]+r[14]*n[8]+r[15]*n[12],i[13]=r[12]*n[1]+r[13]*n[5]+r[14]*n[9]+r[15]*n[13],i[14]=r[12]*n[2]+r[13]*n[6]+r[14]*n[10]+r[15]*n[14],i[15]=r[12]*n[3]+r[13]*n[7]+r[14]*n[11]+r[15]*n[15],this.fromArray(i)},translate:function(t){var i=t.x,r=t.y,n=t.z,a=this.val;return a[12]=a[0]*i+a[4]*r+a[8]*n+a[12],a[13]=a[1]*i+a[5]*r+a[9]*n+a[13],a[14]=a[2]*i+a[6]*r+a[10]*n+a[14],a[15]=a[3]*i+a[7]*r+a[11]*n+a[15],this},scale:function(t){var i=t.x,r=t.y,n=t.z,a=this.val;return a[0]=a[0]*i,a[1]=a[1]*i,a[2]=a[2]*i,a[3]=a[3]*i,a[4]=a[4]*r,a[5]=a[5]*r,a[6]=a[6]*r,a[7]=a[7]*r,a[8]=a[8]*n,a[9]=a[9]*n,a[10]=a[10]*n,a[11]=a[11]*n,this},makeRotationAxis:function(t,i){var r=Math.cos(i),n=Math.sin(i),a=1-r,s=t.x,h=t.y,o=t.z,u=a*s,l=a*h;return this.set(u*s+r,u*h-n*o,u*o+n*h,0,u*h+n*o,l*h+r,l*o-n*s,0,u*o-n*h,l*o+n*s,a*o*o+r,0,0,0,0,1),this},rotate:function(t,r){var n=this.val,a=r.x,s=r.y,h=r.z,o=Math.sqrt(a*a+s*s+h*h);if(Math.abs(o)<i)return null;a*=o=1/o,s*=o,h*=o;var u=Math.sin(t),l=Math.cos(t),e=1-l,v=n[0],c=n[1],f=n[2],y=n[3],M=n[4],z=n[5],x=n[6],p=n[7],m=n[8],d=n[9],w=n[10],L=n[11],q=a*a*e+l,A=s*a*e+h*u,b=h*a*e-s*u,R=a*s*e-h*u,g=s*s*e+l,k=h*s*e+a*u,P=a*h*e+s*u,j=s*h*e-a*u,C=h*h*e+l;return n[0]=v*q+M*A+m*b,n[1]=c*q+z*A+d*b,n[2]=f*q+x*A+w*b,n[3]=y*q+p*A+L*b,n[4]=v*R+M*g+m*k,n[5]=c*R+z*g+d*k,n[6]=f*R+x*g+w*k,n[7]=y*R+p*g+L*k,n[8]=v*P+M*j+m*C,n[9]=c*P+z*j+d*C,n[10]=f*P+x*j+w*C,n[11]=y*P+p*j+L*C,this},rotateX:function(t){var i=this.val,r=Math.sin(t),n=Math.cos(t),a=i[4],s=i[5],h=i[6],o=i[7],u=i[8],l=i[9],e=i[10],v=i[11];return i[4]=a*n+u*r,i[5]=s*n+l*r,i[6]=h*n+e*r,i[7]=o*n+v*r,i[8]=u*n-a*r,i[9]=l*n-s*r,i[10]=e*n-h*r,i[11]=v*n-o*r,this},rotateY:function(t){var i=this.val,r=Math.sin(t),n=Math.cos(t),a=i[0],s=i[1],h=i[2],o=i[3],u=i[8],l=i[9],e=i[10],v=i[11];return i[0]=a*n-u*r,i[1]=s*n-l*r,i[2]=h*n-e*r,i[3]=o*n-v*r,i[8]=a*r+u*n,i[9]=s*r+l*n,i[10]=h*r+e*n,i[11]=o*r+v*n,this},rotateZ:function(t){var i=this.val,r=Math.sin(t),n=Math.cos(t),a=i[0],s=i[1],h=i[2],o=i[3],u=i[4],l=i[5],e=i[6],v=i[7];return i[0]=a*n+u*r,i[1]=s*n+l*r,i[2]=h*n+e*r,i[3]=o*n+v*r,i[4]=u*n-a*r,i[5]=l*n-s*r,i[6]=e*n-h*r,i[7]=v*n-o*r,this},fromRotationTranslation:function(t,i){var r=this.val,n=t.x,a=t.y,s=t.z,h=t.w,o=n+n,u=a+a,l=s+s,e=n*o,v=n*u,c=n*l,f=a*u,y=a*l,M=s*l,z=h*o,x=h*u,p=h*l;return r[0]=1-(f+M),r[1]=v+p,r[2]=c-x,r[3]=0,r[4]=v-p,r[5]=1-(e+M),r[6]=y+z,r[7]=0,r[8]=c+x,r[9]=y-z,r[10]=1-(e+f),r[11]=0,r[12]=i.x,r[13]=i.y,r[14]=i.z,r[15]=1,this},fromQuat:function(t){var i=this.val,r=t.x,n=t.y,a=t.z,s=t.w,h=r+r,o=n+n,u=a+a,l=r*h,e=r*o,v=r*u,c=n*o,f=n*u,y=a*u,M=s*h,z=s*o,x=s*u;return i[0]=1-(c+y),i[1]=e+x,i[2]=v-z,i[3]=0,i[4]=e-x,i[5]=1-(l+y),i[6]=f+M,i[7]=0,i[8]=v+z,i[9]=f-M,i[10]=1-(l+c),i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this},frustum:function(t,i,r,n,a,s){var h=this.val,o=1/(i-t),u=1/(n-r),l=1/(a-s);return h[0]=2*a*o,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=2*a*u,h[6]=0,h[7]=0,h[8]=(i+t)*o,h[9]=(n+r)*u,h[10]=(s+a)*l,h[11]=-1,h[12]=0,h[13]=0,h[14]=s*a*2*l,h[15]=0,this},perspective:function(t,i,r,n){var a=this.val,s=1/Math.tan(t/2),h=1/(r-n);return a[0]=s/i,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=s,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(n+r)*h,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*n*r*h,a[15]=0,this},perspectiveLH:function(t,i,r,n){var a=this.val;return a[0]=2*r/t,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*r/i,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=-n/(r-n),a[11]=1,a[12]=0,a[13]=0,a[14]=r*n/(r-n),a[15]=0,this},ortho:function(t,i,r,n,a,s){var h=this.val,o=t-i,u=r-n,l=a-s;return o=0===o?o:1/o,u=0===u?u:1/u,l=0===l?l:1/l,h[0]=-2*o,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*u,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*l,h[11]=0,h[12]=(t+i)*o,h[13]=(n+r)*u,h[14]=(s+a)*l,h[15]=1,this},lookAt:function(t,r,n){var a=this.val,s=t.x,h=t.y,o=t.z,u=n.x,l=n.y,e=n.z,v=r.x,c=r.y,f=r.z;if(Math.abs(s-v)<i&&Math.abs(h-c)<i&&Math.abs(o-f)<i)return this.identity();var y=s-v,M=h-c,z=o-f,x=1/Math.sqrt(y*y+M*M+z*z),p=l*(z*=x)-e*(M*=x),m=e*(y*=x)-u*z,d=u*M-l*y;(x=Math.sqrt(p*p+m*m+d*d))?(p*=x=1/x,m*=x,d*=x):(p=0,m=0,d=0);var w=M*d-z*m,L=z*p-y*d,q=y*m-M*p;return(x=Math.sqrt(w*w+L*L+q*q))?(w*=x=1/x,L*=x,q*=x):(w=0,L=0,q=0),a[0]=p,a[1]=w,a[2]=y,a[3]=0,a[4]=m,a[5]=L,a[6]=M,a[7]=0,a[8]=d,a[9]=q,a[10]=z,a[11]=0,a[12]=-(p*s+m*h+d*o),a[13]=-(w*s+L*h+q*o),a[14]=-(y*s+M*h+z*o),a[15]=1,this},yawPitchRoll:function(t,i,r){this.zero(),n.zero(),a.zero();var s=this.val,h=n.val,o=a.val,u=Math.sin(r),l=Math.cos(r);return s[10]=1,s[15]=1,s[0]=l,s[1]=u,s[4]=-u,s[5]=l,u=Math.sin(i),l=Math.cos(i),h[0]=1,h[15]=1,h[5]=l,h[10]=l,h[9]=-u,h[6]=u,u=Math.sin(t),l=Math.cos(t),o[5]=1,o[15]=1,o[0]=l,o[2]=-u,o[8]=u,o[10]=l,this.multiplyLocal(n),this.multiplyLocal(a),this},setWorldMatrix:function(t,i,r,s,h){return this.yawPitchRoll(t.y,t.x,t.z),n.scaling(r.x,r.y,r.z),a.xyz(i.x,i.y,i.z),this.multiplyLocal(n),this.multiplyLocal(a),void 0!==s&&this.multiplyLocal(s),void 0!==h&&this.multiplyLocal(h),this}}),n=new r,a=new r;module.exports=r;
},{"../utils/Class":8}],243:[function(require,module,exports) {
var a=function(a,t){void 0===t&&(t=1);var r=2*Math.random()*Math.PI,o=2*Math.random()-1,h=Math.sqrt(1-o*o)*t;return a.x=Math.cos(r)*h,a.y=Math.sin(r)*h,a.z=o*t,a};module.exports=a;
},{}],244:[function(require,module,exports) {
var a=function(a,o){return void 0===o&&(o=1),a.x=(2*Math.random()-1)*o,a.y=(2*Math.random()-1)*o,a.z=(2*Math.random()-1)*o,a.w=(2*Math.random()-1)*o,a};module.exports=a;
},{}],255:[function(require,module,exports) {
var t=require("../utils/Class"),i=new t({initialize:function(t,i,s){"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=i||0,this.z=s||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},clone:function(){return new i(this.x,this.y,this.z)},crossVectors:function(t,i){var s=t.x,h=t.y,n=t.z,r=i.x,u=i.y,y=i.z;return this.x=h*y-n*u,this.y=n*r-s*y,this.z=s*u-h*r,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this},set:function(t,i,s){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=i||0,this.z=s||0),this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(t){var i=t.x-this.x,s=t.y-this.y,h=t.z-this.z||0;return Math.sqrt(i*i+s*s+h*h)},distanceSq:function(t){var i=t.x-this.x,s=t.y-this.y,h=t.z-this.z||0;return i*i+s*s+h*h},length:function(){var t=this.x,i=this.y,s=this.z;return Math.sqrt(t*t+i*i+s*s)},lengthSq:function(){var t=this.x,i=this.y,s=this.z;return t*t+i*i+s*s},normalize:function(){var t=this.x,i=this.y,s=this.z,h=t*t+i*i+s*s;return h>0&&(h=1/Math.sqrt(h),this.x=t*h,this.y=i*h,this.z=s*h),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},cross:function(t){var i=this.x,s=this.y,h=this.z,n=t.x,r=t.y,u=t.z;return this.x=s*u-h*r,this.y=h*n-i*u,this.z=i*r-s*n,this},lerp:function(t,i){void 0===i&&(i=0);var s=this.x,h=this.y,n=this.z;return this.x=s+i*(t.x-s),this.y=h+i*(t.y-h),this.z=n+i*(t.z-n),this},transformMat3:function(t){var i=this.x,s=this.y,h=this.z,n=t.val;return this.x=i*n[0]+s*n[3]+h*n[6],this.y=i*n[1]+s*n[4]+h*n[7],this.z=i*n[2]+s*n[5]+h*n[8],this},transformMat4:function(t){var i=this.x,s=this.y,h=this.z,n=t.val;return this.x=n[0]*i+n[4]*s+n[8]*h+n[12],this.y=n[1]*i+n[5]*s+n[9]*h+n[13],this.z=n[2]*i+n[6]*s+n[10]*h+n[14],this},transformCoordinates:function(t){var i=this.x,s=this.y,h=this.z,n=t.val,r=i*n[0]+s*n[4]+h*n[8]+n[12],u=i*n[1]+s*n[5]+h*n[9]+n[13],y=i*n[2]+s*n[6]+h*n[10]+n[14],z=i*n[3]+s*n[7]+h*n[11]+n[15];return this.x=r/z,this.y=u/z,this.z=y/z,this},transformQuat:function(t){var i=this.x,s=this.y,h=this.z,n=t.x,r=t.y,u=t.z,y=t.w,z=y*i+r*h-u*s,e=y*s+u*i-n*h,x=y*h+n*s-r*i,o=-n*i-r*s-u*h;return this.x=z*y+o*-n+e*-u-x*-r,this.y=e*y+o*-r+x*-n-z*-u,this.z=x*y+o*-u+z*-r-e*-n,this},project:function(t){var i=this.x,s=this.y,h=this.z,n=t.val,r=n[0],u=n[1],y=n[2],z=n[3],e=n[4],x=n[5],o=n[6],c=n[7],a=n[8],f=n[9],v=n[10],l=n[11],d=n[12],p=n[13],m=n[14],q=1/(i*z+s*c+h*l+n[15]);return this.x=(i*r+s*e+h*a+d)*q,this.y=(i*u+s*x+h*f+p)*q,this.z=(i*y+s*o+h*v+m)*q,this},unproject:function(t,i){var s=t.x,h=t.y,n=t.z,r=t.w,u=this.x-s,y=r-this.y-1-h,z=this.z;return this.x=2*u/n-1,this.y=2*y/r-1,this.z=2*z-1,this.project(i)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});module.exports=i;
},{"../utils/Class":8}],257:[function(require,module,exports) {
var t=require("../utils/Class"),n=new t({initialize:function(t){this.val=new Float32Array(9),t?this.copy(t):this.identity()},clone:function(){return new n(this)},set:function(t){return this.copy(t)},copy:function(t){var n=this.val,i=t.val;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this},fromMat4:function(t){var n=t.val,i=this.val;return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[4],i[4]=n[5],i[5]=n[6],i[6]=n[8],i[7]=n[9],i[8]=n[10],this},fromArray:function(t){var n=this.val;return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],this},identity:function(){var t=this.val;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this},transpose:function(){var t=this.val,n=t[1],i=t[2],r=t[5];return t[1]=t[3],t[2]=t[6],t[3]=n,t[5]=t[7],t[6]=i,t[7]=r,this},invert:function(){var t=this.val,n=t[0],i=t[1],r=t[2],a=t[3],s=t[4],u=t[5],e=t[6],v=t[7],h=t[8],l=h*s-u*v,o=-h*a+u*e,c=v*a-s*e,f=n*l+i*o+r*c;return f?(f=1/f,t[0]=l*f,t[1]=(-h*i+r*v)*f,t[2]=(u*i-r*s)*f,t[3]=o*f,t[4]=(h*n-r*e)*f,t[5]=(-u*n+r*a)*f,t[6]=c*f,t[7]=(-v*n+i*e)*f,t[8]=(s*n-i*a)*f,this):null},adjoint:function(){var t=this.val,n=t[0],i=t[1],r=t[2],a=t[3],s=t[4],u=t[5],e=t[6],v=t[7],h=t[8];return t[0]=s*h-u*v,t[1]=r*v-i*h,t[2]=i*u-r*s,t[3]=u*e-a*h,t[4]=n*h-r*e,t[5]=r*a-n*u,t[6]=a*v-s*e,t[7]=i*e-n*v,t[8]=n*s-i*a,this},determinant:function(){var t=this.val,n=t[0],i=t[1],r=t[2],a=t[3],s=t[4],u=t[5],e=t[6],v=t[7],h=t[8];return n*(h*s-u*v)+i*(-h*a+u*e)+r*(v*a-s*e)},multiply:function(t){var n=this.val,i=n[0],r=n[1],a=n[2],s=n[3],u=n[4],e=n[5],v=n[6],h=n[7],l=n[8],o=t.val,c=o[0],f=o[1],y=o[2],m=o[3],p=o[4],d=o[5],w=o[6],x=o[7],M=o[8];return n[0]=c*i+f*s+y*v,n[1]=c*r+f*u+y*h,n[2]=c*a+f*e+y*l,n[3]=m*i+p*s+d*v,n[4]=m*r+p*u+d*h,n[5]=m*a+p*e+d*l,n[6]=w*i+x*s+M*v,n[7]=w*r+x*u+M*h,n[8]=w*a+x*e+M*l,this},translate:function(t){var n=this.val,i=t.x,r=t.y;return n[6]=i*n[0]+r*n[3]+n[6],n[7]=i*n[1]+r*n[4]+n[7],n[8]=i*n[2]+r*n[5]+n[8],this},rotate:function(t){var n=this.val,i=n[0],r=n[1],a=n[2],s=n[3],u=n[4],e=n[5],v=Math.sin(t),h=Math.cos(t);return n[0]=h*i+v*s,n[1]=h*r+v*u,n[2]=h*a+v*e,n[3]=h*s-v*i,n[4]=h*u-v*r,n[5]=h*e-v*a,this},scale:function(t){var n=this.val,i=t.x,r=t.y;return n[0]=i*n[0],n[1]=i*n[1],n[2]=i*n[2],n[3]=r*n[3],n[4]=r*n[4],n[5]=r*n[5],this},fromQuat:function(t){var n=t.x,i=t.y,r=t.z,a=t.w,s=n+n,u=i+i,e=r+r,v=n*s,h=n*u,l=n*e,o=i*u,c=i*e,f=r*e,y=a*s,m=a*u,p=a*e,d=this.val;return d[0]=1-(o+f),d[3]=h+p,d[6]=l-m,d[1]=h-p,d[4]=1-(v+f),d[7]=c+y,d[2]=l+m,d[5]=c-y,d[8]=1-(v+o),this},normalFromMat4:function(t){var n=t.val,i=this.val,r=n[0],a=n[1],s=n[2],u=n[3],e=n[4],v=n[5],h=n[6],l=n[7],o=n[8],c=n[9],f=n[10],y=n[11],m=n[12],p=n[13],d=n[14],w=n[15],x=r*v-a*e,M=r*h-s*e,z=r*l-u*e,A=a*h-s*v,F=a*l-u*v,j=s*l-u*h,q=o*p-c*m,C=o*d-f*m,Q=o*w-y*m,b=c*d-f*p,g=c*w-y*p,k=f*w-y*d,B=x*k-M*g+z*b+A*Q-F*C+j*q;return B?(B=1/B,i[0]=(v*k-h*g+l*b)*B,i[1]=(h*Q-e*k-l*C)*B,i[2]=(e*g-v*Q+l*q)*B,i[3]=(s*g-a*k-u*b)*B,i[4]=(r*k-s*Q+u*C)*B,i[5]=(a*Q-r*g-u*q)*B,i[6]=(p*j-d*F+w*A)*B,i[7]=(d*z-m*j-w*M)*B,i[8]=(m*F-p*z+w*x)*B,this):null}});module.exports=n;
},{"../utils/Class":8}],259:[function(require,module,exports) {
var t=require("../utils/Class"),i=require("./Vector3"),s=require("./Matrix3"),h=1e-6,r=new Int8Array([1,2,0]),n=new Float32Array([0,0,0]),e=new i(1,0,0),a=new i(0,1,0),y=new i,o=new s,x=new t({initialize:function(t,i,s,h){"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=i||0,this.z=s||0,this.w=h||0)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},set:function(t,i,s,h){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=i||0,this.z=s||0,this.w=h||0),this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this},scale:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},length:function(){var t=this.x,i=this.y,s=this.z,h=this.w;return Math.sqrt(t*t+i*i+s*s+h*h)},lengthSq:function(){var t=this.x,i=this.y,s=this.z,h=this.w;return t*t+i*i+s*s+h*h},normalize:function(){var t=this.x,i=this.y,s=this.z,h=this.w,r=t*t+i*i+s*s+h*h;return r>0&&(r=1/Math.sqrt(r),this.x=t*r,this.y=i*r,this.z=s*r,this.w=h*r),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,i){void 0===i&&(i=0);var s=this.x,h=this.y,r=this.z,n=this.w;return this.x=s+i*(t.x-s),this.y=h+i*(t.y-h),this.z=r+i*(t.z-r),this.w=n+i*(t.w-n),this},rotationTo:function(t,i){var s=t.x*i.x+t.y*i.y+t.z*i.z;return s<-.999999?(y.copy(e).cross(t).length()<h&&y.copy(a).cross(t),y.normalize(),this.setAxisAngle(y,Math.PI)):s>.999999?(this.x=0,this.y=0,this.z=0,this.w=1,this):(y.copy(t).cross(i),this.x=y.x,this.y=y.y,this.z=y.z,this.w=1+s,this.normalize())},setAxes:function(t,i,s){var h=o.val;return h[0]=i.x,h[3]=i.y,h[6]=i.z,h[1]=s.x,h[4]=s.y,h[7]=s.z,h[2]=-t.x,h[5]=-t.y,h[8]=-t.z,this.fromMat3(o).normalize()},identity:function(){return this.x=0,this.y=0,this.z=0,this.w=1,this},setAxisAngle:function(t,i){i*=.5;var s=Math.sin(i);return this.x=s*t.x,this.y=s*t.y,this.z=s*t.z,this.w=Math.cos(i),this},multiply:function(t){var i=this.x,s=this.y,h=this.z,r=this.w,n=t.x,e=t.y,a=t.z,y=t.w;return this.x=i*y+r*n+s*a-h*e,this.y=s*y+r*e+h*n-i*a,this.z=h*y+r*a+i*e-s*n,this.w=r*y-i*n-s*e-h*a,this},slerp:function(t,i){var s=this.x,r=this.y,n=this.z,e=this.w,a=t.x,y=t.y,o=t.z,x=t.w,z=s*a+r*y+n*o+e*x;z<0&&(z=-z,a=-a,y=-y,o=-o,x=-x);var u=1-i,w=i;if(1-z>h){var c=Math.acos(z),f=Math.sin(c);u=Math.sin((1-i)*c)/f,w=Math.sin(i*c)/f}return this.x=u*s+w*a,this.y=u*r+w*y,this.z=u*n+w*o,this.w=u*e+w*x,this},invert:function(){var t=this.x,i=this.y,s=this.z,h=this.w,r=t*t+i*i+s*s+h*h,n=r?1/r:0;return this.x=-t*n,this.y=-i*n,this.z=-s*n,this.w=h*n,this},conjugate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},rotateX:function(t){t*=.5;var i=this.x,s=this.y,h=this.z,r=this.w,n=Math.sin(t),e=Math.cos(t);return this.x=i*e+r*n,this.y=s*e+h*n,this.z=h*e-s*n,this.w=r*e-i*n,this},rotateY:function(t){t*=.5;var i=this.x,s=this.y,h=this.z,r=this.w,n=Math.sin(t),e=Math.cos(t);return this.x=i*e-h*n,this.y=s*e+r*n,this.z=h*e+i*n,this.w=r*e-s*n,this},rotateZ:function(t){t*=.5;var i=this.x,s=this.y,h=this.z,r=this.w,n=Math.sin(t),e=Math.cos(t);return this.x=i*e+s*n,this.y=s*e-i*n,this.z=h*e+r*n,this.w=r*e-h*n,this},calculateW:function(){var t=this.x,i=this.y,s=this.z;return this.w=-Math.sqrt(Math.abs(1-t*t-i*i-s*s)),this},fromMat3:function(t){var i,s=t.val,h=s[0]+s[4]+s[8];if(h>0)i=Math.sqrt(h+1),this.w=.5*i,i=.5/i,this.x=(s[7]-s[5])*i,this.y=(s[2]-s[6])*i,this.z=(s[3]-s[1])*i;else{var e=0;s[4]>s[0]&&(e=1),s[8]>s[3*e+e]&&(e=2);var a=r[e],y=r[a];i=Math.sqrt(s[3*e+e]-s[3*a+a]-s[3*y+y]+1),n[e]=.5*i,i=.5/i,n[a]=(s[3*a+e]+s[3*e+a])*i,n[y]=(s[3*y+e]+s[3*e+y])*i,this.x=n[0],this.y=n[1],this.z=n[2],this.w=(s[3*y+a]-s[3*a+y])*i}return this}});module.exports=x;
},{"../utils/Class":8,"./Vector3":255,"./Matrix3":257}],260:[function(require,module,exports) {
var e=require("../math/Vector3"),r=require("../math/Matrix4"),t=require("../math/Quaternion"),n=new r,a=new t,o=new e,i=function(e,r,t){return a.setAxisAngle(r,t),n.fromRotationTranslation(a,o.set(0,0,0)),e.transformMat4(n)};module.exports=i;
},{"../math/Vector3":255,"../math/Matrix4":258,"../math/Quaternion":259}],266:[function(require,module,exports) {
var t=require("../utils/Class"),e=new t({initialize:function(t){if(this.entries=[],Array.isArray(t))for(var e=0;e<t.length;e++)this.set(t[e])},set:function(t){return-1===this.entries.indexOf(t)&&this.entries.push(t),this},get:function(t,e){for(var n=0;n<this.entries.length;n++){var i=this.entries[n];if(i[t]===e)return i}},getArray:function(){return this.entries.slice(0)},delete:function(t){var e=this.entries.indexOf(t);return e>-1&&this.entries.splice(e,1),this},dump:function(){console.group("Set");for(var t=0;t<this.entries.length;t++){var e=this.entries[t];console.log(e)}console.groupEnd()},each:function(t,e){var n,i=this.entries.slice(),r=i.length;if(e)for(n=0;n<r&&!1!==t.call(e,i[n],n);n++);else for(n=0;n<r&&!1!==t(i[n],n);n++);return this},iterate:function(t,e){var n,i=this.entries.length;if(e)for(n=0;n<i&&!1!==t.call(e,this.entries[n],n);n++);else for(n=0;n<i&&!1!==t(this.entries[n],n);n++);return this},iterateLocal:function(t){var e,n=[];for(e=1;e<arguments.length;e++)n.push(arguments[e]);var i=this.entries.length;for(e=0;e<i;e++){var r=this.entries[e];r[t].apply(r,n)}return this},clear:function(){return this.entries.length=0,this},contains:function(t){return this.entries.indexOf(t)>-1},union:function(t){var n=new e;return t.entries.forEach(function(t){n.set(t)}),this.entries.forEach(function(t){n.set(t)}),n},intersect:function(t){var n=new e;return this.entries.forEach(function(e){t.contains(e)&&n.set(e)}),n},difference:function(t){var n=new e;return this.entries.forEach(function(e){t.contains(e)||n.set(e)}),n},size:{get:function(){return this.entries.length},set:function(t){return this.entries.length=t}}});module.exports=e;
},{"../utils/Class":8}],476:[function(require,module,exports) {
var e=require("../GameObject"),r=function(r,i,a,t){e.RENDER_MASK!==i.renderFlags||i.cameraFilter>0&&i.cameraFilter&t._id||this.pipeline.batchSprite(i,t)};module.exports=r;
},{"../GameObject":208}],477:[function(require,module,exports) {
var e=require("../GameObject"),r=function(r,a,i,m){e.RENDER_MASK!==a.renderFlags||a.cameraFilter>0&&a.cameraFilter&m._id||r.drawImage(a,m)};module.exports=r;
},{"../GameObject":208}],408:[function(require,module,exports) {
var e=require("../../utils/NOOP"),r=require("../../utils/NOOP");WEBGL_RENDERER&&(e=require("./SpriteWebGLRenderer")),CANVAS_RENDERER&&(r=require("./SpriteCanvasRenderer")),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../utils/NOOP":30,"./SpriteWebGLRenderer":476,"./SpriteCanvasRenderer":477}],289:[function(require,module,exports) {
var i=require("../../utils/Class"),e=require("../components"),t=require("../GameObject"),n=require("./SpriteRender"),r=new i({Extends:t,Mixins:[e.Alpha,e.BlendMode,e.Depth,e.Flip,e.GetBounds,e.Origin,e.Pipeline,e.ScaleMode,e.ScrollFactor,e.Size,e.Texture,e.Tint,e.Transform,e.Visible,n],initialize:function(i,n,r,s,o){t.call(this,i,"Sprite"),this.anims=new e.Animation(this),this.setTexture(s,o),this.setPosition(n,r),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline("TextureTintPipeline")},preUpdate:function(i,e){this.anims.update(i,e)},play:function(i,e,t){return this.anims.play(i,e,t),this},toJSON:function(){return e.ToJSON(this)}});module.exports=r;
},{"../../utils/Class":8,"../components":509,"../GameObject":208,"./SpriteRender":408}],256:[function(require,module,exports) {
var t=require("../utils/Class"),i=new t({initialize:function(t,i,s,h){"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=i||0,this.z=s||0,this.w=h||0)},clone:function(){return new i(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this.w=t.w||0,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},set:function(t,i,s,h){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=i||0,this.z=s||0,this.w=h||0),this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this.w+=t.w||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this.w-=t.w||0,this},scale:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},length:function(){var t=this.x,i=this.y,s=this.z,h=this.w;return Math.sqrt(t*t+i*i+s*s+h*h)},lengthSq:function(){var t=this.x,i=this.y,s=this.z,h=this.w;return t*t+i*i+s*s+h*h},normalize:function(){var t=this.x,i=this.y,s=this.z,h=this.w,n=t*t+i*i+s*s+h*h;return n>0&&(n=1/Math.sqrt(n),this.x=t*n,this.y=i*n,this.z=s*n,this.w=h*n),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,i){void 0===i&&(i=0);var s=this.x,h=this.y,n=this.z,r=this.w;return this.x=s+i*(t.x-s),this.y=h+i*(t.y-h),this.z=n+i*(t.z-n),this.w=r+i*(t.w-r),this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this.w*=t.w||1,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this.w/=t.w||1,this},distance:function(t){var i=t.x-this.x,s=t.y-this.y,h=t.z-this.z||0,n=t.w-this.w||0;return Math.sqrt(i*i+s*s+h*h+n*n)},distanceSq:function(t){var i=t.x-this.x,s=t.y-this.y,h=t.z-this.z||0,n=t.w-this.w||0;return i*i+s*s+h*h+n*n},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(t){var i=this.x,s=this.y,h=this.z,n=this.w,r=t.val;return this.x=r[0]*i+r[4]*s+r[8]*h+r[12]*n,this.y=r[1]*i+r[5]*s+r[9]*h+r[13]*n,this.z=r[2]*i+r[6]*s+r[10]*h+r[14]*n,this.w=r[3]*i+r[7]*s+r[11]*h+r[15]*n,this},transformQuat:function(t){var i=this.x,s=this.y,h=this.z,n=t.x,r=t.y,e=t.z,o=t.w,y=o*i+r*h-e*s,u=o*s+e*i-n*h,z=o*h+n*s-r*i,x=-n*i-r*s-e*h;return this.x=y*o+x*-n+u*-e-z*-r,this.y=u*o+x*-r+z*-n-y*-e,this.z=z*o+x*-e+y*-r-u*-n,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});i.prototype.sub=i.prototype.subtract,i.prototype.mul=i.prototype.multiply,i.prototype.div=i.prototype.divide,i.prototype.dist=i.prototype.distance,i.prototype.distSq=i.prototype.distanceSq,i.prototype.len=i.prototype.length,i.prototype.lenSq=i.prototype.lengthSq,module.exports=i;
},{"../utils/Class":8}],288:[function(require,module,exports) {
var i=require("../../utils/Class"),t=require("../GameObject"),e=require("../sprite/Sprite"),s=require("../../math/Vector2"),n=require("../../math/Vector4"),h=new i({Extends:t,initialize:function(i,h,c,o,r,a){t.call(this,i,"Sprite3D"),this.gameObject=new e(i,0,0,r,a),this.position=new n(h,c,o),this.size=new s(this.gameObject.width,this.gameObject.height),this.scale=new s(1,1),this.adjustScaleX=!0,this.adjustScaleY=!0,this._visible=!0},project:function(i){var t=this.position,e=this.gameObject;i.project(t,e),i.getPointSize(t,this.size,this.scale),this.scale.x<=0||this.scale.y<=0?e.setVisible(!1):(e.visible||e.setVisible(!0),this.adjustScaleX&&(e.scaleX=this.scale.x),this.adjustScaleY&&(e.scaleY=this.scale.y),e.setDepth(-1*e.z))},setVisible:function(i){return this.visible=i,this},visible:{get:function(){return this._visible},set:function(i){this._visible=i,this.gameObject.visible=i}},x:{get:function(){return this.position.x},set:function(i){this.position.x=i}},y:{get:function(){return this.position.y},set:function(i){this.position.y=i}},z:{get:function(){return this.position.z},set:function(i){this.position.z=i}}});module.exports=h;
},{"../../utils/Class":8,"../GameObject":208,"../sprite/Sprite":289,"../../math/Vector2":96,"../../math/Vector4":256}],581:[function(require,module,exports) {
var t=require("../../utils/Class"),i=require("../../math/Matrix4"),e=require("../../math/RandomXYZ"),r=require("../../math/RandomXYZW"),n=require("../../math/RotateVec3"),s=require("../../structs/Set"),o=require("../../gameobjects/sprite3d/Sprite3D"),h=require("../../math/Vector2"),a=require("../../math/Vector3"),u=require("../../math/Vector4"),c=new a,d=new u,p=new a,l=new a,f=new i,v=new t({initialize:function(t){this.scene=t,this.displayList=t.sys.displayList,this.updateList=t.sys.updateList,this.name="",this.direction=new a(0,0,-1),this.up=new a(0,1,0),this.position=new a,this.pixelScale=128,this.projection=new i,this.view=new i,this.combined=new i,this.invProjectionView=new i,this.near=1,this.far=100,this.ray={origin:new a,direction:new a},this.viewportWidth=0,this.viewportHeight=0,this.billboardMatrixDirty=!0,this.children=new s},setPosition:function(t,i,e){return this.position.set(t,i,e),this.update()},setScene:function(t){return this.scene=t,this},setPixelScale:function(t){return this.pixelScale=t,this.update()},add:function(t){return this.children.set(t),this.updateChildren(),t},remove:function(t){return this.displayList.remove(t.gameObject),this.updateList.remove(t.gameObject),this.children.delete(t),this},clear:function(){for(var t=this.getChildren(),i=0;i<t.length;i++)this.remove(t[i]);return this},getChildren:function(){return this.children.entries},create:function(t,i,e,r,n,s){void 0===s&&(s=!0);var h=new o(this.scene,t,i,e,r,n);return this.displayList.add(h.gameObject),this.updateList.add(h.gameObject),h.visible=s,this.children.set(h),this.updateChildren(),h},createMultiple:function(t,i,e,r){void 0===r&&(r=!0);for(var n=[],s=0;s<t;s++){var h=new o(this.scene,0,0,0,i,e);this.displayList.add(h.gameObject),this.updateList.add(h.gameObject),h.visible=r,this.children.set(h),n.push(h)}return n},createRect:function(t,i,e,r){"number"==typeof t&&(t={x:t,y:t,z:t}),"number"==typeof i&&(i={x:i,y:i,z:i});for(var n=t.x*t.y*t.z,s=this.createMultiple(n,e,r),o=0,h=.5-t.z/2;h<t.z/2;h++)for(var a=.5-t.y/2;a<t.y/2;a++)for(var u=.5-t.x/2;u<t.x/2;u++){var c=u*i.x,d=a*i.y,p=h*i.z;s[o].position.set(c,d,p),o++}return this.update(),s},randomSphere:function(t,i){void 0===i&&(i=this.getChildren());for(var r=0;r<i.length;r++)e(i[r].position,t);return this.update()},randomCube:function(t,i){void 0===i&&(i=this.getChildren());for(var e=0;e<i.length;e++)r(i[e].position,t);return this.update()},translateChildren:function(t,i){void 0===i&&(i=this.getChildren());for(var e=0;e<i.length;e++)i[e].position.add(t);return this.update()},transformChildren:function(t,i){void 0===i&&(i=this.getChildren());for(var e=0;e<i.length;e++)i[e].position.transformMat4(t);return this.update()},setViewport:function(t,i){return this.viewportWidth=t,this.viewportHeight=i,this.update()},translate:function(t,i,e){return"object"==typeof t?(this.position.x+=t.x||0,this.position.y+=t.y||0,this.position.z+=t.z||0):(this.position.x+=t||0,this.position.y+=i||0,this.position.z+=e||0),this.update()},lookAt:function(t,i,e){var r=this.direction,n=this.up;return"object"==typeof t?r.copy(t):r.set(t,i,e),r.subtract(this.position).normalize(),c.copy(r).cross(n).normalize(),n.copy(c).cross(r).normalize(),this.update()},rotate:function(t,i){return n(this.direction,i,t),n(this.up,i,t),this.update()},rotateAround:function(t,i,e){return c.copy(t).subtract(this.position),this.translate(c),this.rotate(i,e),this.translate(c.negate()),this.update()},project:function(t,i){void 0===i&&(i=new u);var e=this.viewportWidth,r=this.viewportHeight,n=v.NEAR_RANGE,s=v.FAR_RANGE;return d.set(t.x,t.y,t.z,1),d.transformMat4(this.combined),0===d.w&&(d.w=1),d.x=d.x/d.w,d.y=d.y/d.w,d.z=d.z/d.w,i.x=e/2*d.x+(0+e/2),i.y=r/2*d.y+(0+r/2),i.z=(s-n)/2*d.z+(s+n)/2,(0===i.w||i.w)&&(i.w=1/d.w),i},unproject:function(t,i){void 0===i&&(i=new a);var e=d.set(0,0,this.viewportWidth,this.viewportHeight);return i.copy(t).unproject(e,this.invProjectionView)},getPickRay:function(t,i){var e=this.ray.origin.set(t,i,0),r=this.ray.direction.set(t,i,1),n=d.set(0,0,this.viewportWidth,this.viewportHeight),s=this.invProjectionView;return e.unproject(n,s),r.unproject(n,s),r.subtract(e).normalize(),this.ray},updateChildren:function(){for(var t=this.children.entries,i=0;i<t.length;i++)t[i].project(this);return this},update:function(){return this.updateChildren()},updateBillboardMatrix:function(){var t=p.set(this.direction).negate(),i=l.set(this.up).cross(t).normalize(),e=c.set(t).cross(i).normalize(),r=f.val;r[0]=i.x,r[1]=i.y,r[2]=i.z,r[3]=0,r[4]=e.x,r[5]=e.y,r[6]=e.z,r[7]=0,r[8]=t.x,r[9]=t.y,r[10]=t.z,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this.billboardMatrixDirty=!1},getPointSize:function(t,i,e){void 0===e&&(e=new h),this.billboardMatrixDirty&&this.updateBillboardMatrix();var r=c,n=i.x/this.pixelScale/2,s=i.y/this.pixelScale/2;r.set(-n,-s,0).transformMat4(f).add(t),this.project(r,r);var o=r.x,a=r.y;r.set(n,s,0).transformMat4(f).add(t),this.project(r,r);var u=r.x-o,d=r.y-a;return e.set(u,d)},destroy:function(){this.children.clear(),this.scene=void 0,this.children=void 0},setX:function(t){return this.position.x=t,this.update()},setY:function(t){return this.position.y=t,this.update()},setZ:function(t){return this.position.z=t,this.update()},x:{get:function(){return this.position.x},set:function(t){this.position.x=t,this.update()}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t,this.update()}},z:{get:function(){return this.position.z},set:function(t){this.position.z=t,this.update()}}});v.FAR_RANGE=1,v.NEAR_RANGE=0,module.exports=v;
},{"../../utils/Class":8,"../../math/Matrix4":258,"../../math/RandomXYZ":243,"../../math/RandomXYZW":244,"../../math/RotateVec3":260,"../../structs/Set":266,"../../gameobjects/sprite3d/Sprite3D":288,"../../math/Vector2":96,"../../math/Vector3":255,"../../math/Vector4":256}],582:[function(require,module,exports) {
var i=require("./Camera"),t=require("../../utils/Class"),o=require("../../math/Vector3"),e=new o,s=new t({Extends:i,initialize:function(t,o,e){void 0===o&&(o=0),void 0===e&&(e=0),i.call(this,t),this.viewportWidth=o,this.viewportHeight=e,this._zoom=1,this.near=0,this.update()},setToOrtho:function(i,t,o){void 0===t&&(t=this.viewportWidth),void 0===o&&(o=this.viewportHeight);var e=this.zoom;return this.up.set(0,i?-1:1,0),this.direction.set(0,0,i?1:-1),this.position.set(e*t/2,e*o/2,0),this.viewportWidth=t,this.viewportHeight=o,this.update()},update:function(){var i=this.viewportWidth,t=this.viewportHeight,o=Math.abs(this.near),s=Math.abs(this.far),h=this.zoom;return 0===i||0===t?this:(this.projection.ortho(h*-i/2,h*i/2,h*-t/2,h*t/2,o,s),e.copy(this.position).add(this.direction),this.view.lookAt(this.position,e,this.up),this.combined.copy(this.projection).multiply(this.view),this.invProjectionView.copy(this.combined).invert(),this.billboardMatrixDirty=!0,this.updateChildren(),this)},zoom:{get:function(){return this._zoom},set:function(i){this._zoom=i,this.update()}}});module.exports=s;
},{"./Camera":581,"../../utils/Class":8,"../../math/Vector3":255}],583:[function(require,module,exports) {
var i=require("./Camera"),t=require("../../utils/Class"),e=require("../../math/Vector3"),s=new e,h=new t({Extends:i,initialize:function(t,e,s,h){void 0===e&&(e=80),void 0===s&&(s=0),void 0===h&&(h=0),i.call(this,t),this.viewportWidth=s,this.viewportHeight=h,this.fieldOfView=e*Math.PI/180,this.update()},setFOV:function(i){return this.fieldOfView=i*Math.PI/180,this},update:function(){var i=this.viewportWidth/this.viewportHeight;return this.projection.perspective(this.fieldOfView,i,Math.abs(this.near),Math.abs(this.far)),s.copy(this.position).add(this.direction),this.view.lookAt(this.position,s,this.up),this.combined.copy(this.projection).multiply(this.view),this.invProjectionView.copy(this.combined).invert(),this.billboardMatrixDirty=!0,this.updateChildren(),this}});module.exports=h;
},{"./Camera":581,"../../utils/Class":8,"../../math/Vector3":255}],580:[function(require,module,exports) {
var e=require("../../utils/Class"),s=require("./OrthographicCamera"),t=require("./PerspectiveCamera"),i=require("../../boot/PluginManager"),a=new e({initialize:function(e){this.scene=e,this.systems=e.sys,this.cameras=[],e.sys.settings.isBooted||e.sys.events.once("boot",this.boot,this)},boot:function(){var e=this.systems.events;e.on("update",this.update,this),e.on("shutdown",this.shutdown,this),e.on("destroy",this.destroy,this)},add:function(e,s,t){return this.addPerspectiveCamera(e,s,t)},addOrthographicCamera:function(e,t){var i=this.scene.sys.game.config;void 0===e&&(e=i.width),void 0===t&&(t=i.height);var a=new s(this.scene,e,t);return this.cameras.push(a),a},addPerspectiveCamera:function(e,s,i){var a=this.scene.sys.game.config;void 0===e&&(e=80),void 0===s&&(s=a.width),void 0===i&&(i=a.height);var r=new t(this.scene,e,s,i);return this.cameras.push(r),r},getCamera:function(e){for(var s=0;s<this.cameras.length;s++)if(this.cameras[s].name===e)return this.cameras[s];return null},removeCamera:function(e){var s=this.cameras.indexOf(e);-1!==s&&this.cameras.splice(s,1)},removeAll:function(){for(;this.cameras.length>0;){this.cameras.pop().destroy()}return this.main},update:function(e,s){for(var t=0,i=this.cameras.length;t<i;++t)this.cameras[t].update(e,s)},shutdown:function(){},destroy:function(){this.scene=void 0}});i.register("CameraManager3D",a,"cameras3d"),module.exports=a;
},{"../../utils/Class":8,"./OrthographicCamera":582,"./PerspectiveCamera":583,"../../boot/PluginManager":16}],502:[function(require,module,exports) {
module.exports={Camera:require("./Camera"),CameraManager:require("./CameraManager"),OrthographicCamera:require("./OrthographicCamera"),PerspectiveCamera:require("./PerspectiveCamera")};
},{"./Camera":581,"./CameraManager":580,"./OrthographicCamera":582,"./PerspectiveCamera":583}],72:[function(require,module,exports) {
module.exports={Controls:require("./controls"),Scene2D:require("./2d"),Sprite3D:require("./sprite3d")};
},{"./controls":501,"./2d":500,"./sprite3d":502}],101:[function(require,module,exports) {
module.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"};
},{}],67:[function(require,module,exports) {
var n="",r=function(){var r=function(n){for(var r=["i","webkitI","msI","mozI","oI"],e=0;e<r.length;e++){var t=r[e]+"mageSmoothingEnabled";if(t in n)return t}return null};return{disable:function(e){return""===n&&(n=r(e)),n&&(e[n]=!1),e},enable:function(e){return""===n&&(n=r(e)),n&&(e[n]=!0),e},getPrefix:r,isEnabled:function(r){return null!==n?r[n]:null}}};module.exports=r();
},{}],33:[function(require,module,exports) {
var n=require("../../const"),t=require("./Smoothing"),e=[],r=!1,a=function(){var a=function(a,i,c,u){var f;void 0===i&&(i=1),void 0===c&&(c=1),void 0===u&&(u=n.CANVAS);var v=o(u);return null===v?(v={parent:a,canvas:document.createElement("canvas"),type:u},e.push(v),f=v.canvas):(v.parent=a,f=v.canvas),f.width=i,f.height=c,r&&u===n.CANVAS&&t.disable(f.getContext("2d")),f},o=function(t){return void 0===t&&(t=n.CANVAS),e.forEach(function(n){if(!n.parent&&n.type===t)return n}),null},i=function(){var n=0;return e.forEach(function(t){t.parent&&n++}),n};return{create2D:function(t,e,r){return a(t,e,r,n.CANVAS)},create:a,createWebGL:function(t,e,r){return a(t,e,r,n.WEBGL)},disableSmoothing:function(){r=!0},enableSmoothing:function(){r=!1},first:o,free:function(){return e.length-i()},pool:e,remove:function(n){var t=n instanceof HTMLCanvasElement;e.forEach(function(e){(t&&e.canvas===n||!t&&e.parent===n)&&(e.parent=null,e.canvas.width=1,e.canvas.height=1)})},total:i}};module.exports=a();
},{"../../const":12,"./Smoothing":67}],46:[function(require,module,exports) {
var e=require("./palettes/Arne16"),t=require("../display/canvas/CanvasPool"),a=require("../utils/object/GetValue"),l=function(l){var r=a(l,"data",[]),n=a(l,"canvas",null),i=a(l,"palette",e),h=a(l,"pixelWidth",1),o=a(l,"pixelHeight",h),s=a(l,"resizeCanvas",!0),u=a(l,"clearCanvas",!0),v=a(l,"preRender",null),c=a(l,"postRender",null),d=Math.floor(Math.abs(r[0].length*h)),p=Math.floor(Math.abs(r.length*o));n||(n=t.create2D(this,d,p),s=!1,u=!1),s&&(n.width=d,n.height=p);var f=n.getContext("2d");u&&f.clearRect(0,0,d,p),v&&v(n,f);for(var g=0;g<r.length;g++)for(var x=r[g],C=0;C<x.length;C++){var M=x[C];"."!==M&&" "!==M&&(f.fillStyle=i[M],f.fillRect(C*h,g*o,h,o))}return c&&c(n,f),n};module.exports=l;
},{"./palettes/Arne16":101,"../display/canvas/CanvasPool":33,"../utils/object/GetValue":53}],589:[function(require,module,exports) {
module.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"};
},{}],584:[function(require,module,exports) {
module.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"};
},{}],587:[function(require,module,exports) {
module.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"};
},{}],588:[function(require,module,exports) {
module.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"};
},{}],503:[function(require,module,exports) {
module.exports={ARNE16:require("./Arne16"),C64:require("./C64"),CGA:require("./CGA"),JMP:require("./JMP"),MSX:require("./MSX")};
},{"./Arne16":101,"./C64":589,"./CGA":584,"./JMP":587,"./MSX":588}],73:[function(require,module,exports) {
module.exports={GenerateTexture:require("./GenerateTexture"),Palettes:require("./palettes")};
},{"./GenerateTexture":46,"./palettes":503}],371:[function(require,module,exports) {
function n(n,r){var t=1-n;return t*t*t*r}function r(n,r){var t=1-n;return 3*t*t*n*r}function t(n,r){return 3*(1-n)*n*n*r}function u(n,r){return n*n*n*r}var e=function(e,o,c,f,i){return n(e,o)+r(e,c)+t(e,f)+u(e,i)};module.exports=e;
},{}],373:[function(require,module,exports) {
var r=require("./Rectangle"),e=function(e,t){if(void 0===t&&(t=new r),0===e.length)return t;for(var a,n,h,i=Number.MAX_VALUE,m=Number.MAX_VALUE,u=Number.MIN_SAFE_INTEGER,A=Number.MIN_SAFE_INTEGER,E=0;E<e.length;E++)a=e[E],Array.isArray(a)?(n=a[0],h=a[1]):(n=a.x,h=a.y),i=Math.min(i,n),m=Math.min(m,h),u=Math.max(u,n),A=Math.max(A,h);return t.x=i,t.y=m,t.width=u-i,t.height=A-m,t};module.exports=e;
},{"./Rectangle":62}],196:[function(require,module,exports) {
var t=require("../utils/Class"),e=require("../geom/rectangle/FromPoints"),n=require("../geom/rectangle/Rectangle"),i=require("../math/Vector2"),s=new t({initialize:function(t){this.type=t,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new i,this._tmpVec2B=new i},draw:function(t,e){return void 0===e&&(e=32),t.strokePoints(this.getPoints(e))},getBounds:function(t,i){t||(t=new n),void 0===i&&(i=16);var s=this.getLength();i>s&&(i=s/2);var r=Math.max(1,Math.round(s/i));return e(this.getSpacedPoints(r),t)},getDistancePoints:function(t){var e=this.getLength(),n=Math.max(1,e/t);return this.getSpacedPoints(n)},getEndPoint:function(t){return void 0===t&&(t=new i),this.getPointAt(1,t)},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n=[],i=this.getPoint(0,this._tmpVec2A),s=0;n.push(0);for(var r=1;r<=t;r++)s+=(e=this.getPoint(r/t,this._tmpVec2B)).distance(i),n.push(s),i.copy(e);return this.cacheArcLengths=n,n},getPointAt:function(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t){void 0===t&&(t=this.defaultDivisions);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getRandomPoint:function(t){return void 0===t&&(t=new i),this.getPoint(Math.random(),t)},getSpacedPoints:function(t){void 0===t&&(t=this.defaultDivisions);for(var e=[],n=0;n<=t;n++){var i=this.getUtoTmapping(n/t,null,t);e.push(this.getPoint(i))}return e},getStartPoint:function(t){return void 0===t&&(t=new i),this.getPointAt(0,t)},getTangent:function(t,e){void 0===e&&(e=new i);var n=t-1e-4,s=t+1e-4;return n<0&&(n=0),s>1&&(s=1),this.getPoint(n,this._tmpVec2A),this.getPoint(s,e),e.subtract(this._tmpVec2A).normalize()},getTangentAt:function(t,e){var n=this.getUtoTmapping(t);return this.getTangent(n,e)},getTFromDistance:function(t,e){return t<=0?0:this.getUtoTmapping(0,t,e)},getUtoTmapping:function(t,e,n){var i,s=this.getLengths(n),r=0,o=s.length;i=e?Math.min(e,s[o-1]):t*s[o-1];for(var h,g=0,a=o-1;g<=a;)if((h=s[r=Math.floor(g+(a-g)/2)]-i)<0)g=r+1;else{if(!(h>0)){a=r;break}a=r-1}if(s[r=a]===i)return r/(o-1);var u=s[r];return(r+(i-u)/(s[r+1]-u))/(o-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});module.exports=s;
},{"../utils/Class":8,"../geom/rectangle/FromPoints":373,"../geom/rectangle/Rectangle":62,"../math/Vector2":96}],195:[function(require,module,exports) {
var t=require("../utils/Class"),i=require("../math/interpolation/CubicBezierInterpolation"),e=require("./Curve"),n=require("../math/Vector2"),r=new t({Extends:e,initialize:function(t,i,r,s){e.call(this,"CubicBezierCurve"),Array.isArray(t)&&(s=new n(t[6],t[7]),r=new n(t[4],t[5]),i=new n(t[2],t[3]),t=new n(t[0],t[1])),this.p0=t,this.p1=i,this.p2=r,this.p3=s},getStartPoint:function(t){return void 0===t&&(t=new n),t.copy(this.p0)},getResolution:function(t){return t},getPoint:function(t,e){void 0===e&&(e=new n);var r=this.p0,s=this.p1,o=this.p2,h=this.p3;return e.set(i(t,r.x,s.x,o.x,h.x),i(t,r.y,s.y,o.y,h.y))},draw:function(t,i){void 0===i&&(i=32);var e=this.getPoints(i);t.beginPath(),t.moveTo(this.p0.x,this.p0.y);for(var n=1;n<e.length;n++)t.lineTo(e[n].x,e[n].y);return t.strokePath(),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});r.fromJSON=function(t){var i=t.points,e=new n(i[0],i[1]),s=new n(i[2],i[3]),o=new n(i[4],i[5]),h=new n(i[6],i[7]);return new r(e,s,o,h)},module.exports=r;
},{"../utils/Class":8,"../math/interpolation/CubicBezierInterpolation":371,"./Curve":196,"../math/Vector2":96}],241:[function(require,module,exports) {
var r=require("./const"),e=function(e){return e*r.RAD_TO_DEG};module.exports=e;
},{"./const":40}],197:[function(require,module,exports) {
var t=require("../utils/Class"),i=require("./Curve"),s=require("../math/DegToRad"),n=require("../utils/object/GetValue"),e=require("../math/RadToDeg"),r=require("../math/Vector2"),o=new t({Extends:i,initialize:function(t,e,o,u,h,a,c,d){if("object"==typeof t){var l=t;t=n(l,"x",0),e=n(l,"y",0),o=n(l,"xRadius",0),u=n(l,"yRadius",o),h=n(l,"startAngle",0),a=n(l,"endAngle",360),c=n(l,"clockwise",!1),d=n(l,"rotation",0)}else void 0===u&&(u=o),void 0===h&&(h=0),void 0===a&&(a=360),void 0===c&&(c=!1),void 0===d&&(d=0);i.call(this,"EllipseCurve"),this.p0=new r(t,e),this._xRadius=o,this._yRadius=u,this._startAngle=s(h),this._endAngle=s(a),this._clockwise=c,this._rotation=s(d)},getStartPoint:function(t){return void 0===t&&(t=new r),this.getPoint(0,t)},getResolution:function(t){return 2*t},getPoint:function(t,i){void 0===i&&(i=new r);for(var s=2*Math.PI,n=this._endAngle-this._startAngle,e=Math.abs(n)<Number.EPSILON;n<0;)n+=s;for(;n>s;)n-=s;n<Number.EPSILON&&(n=e?0:s),this._clockwise&&!e&&(n===s?n=-s:n-=s);var o=this._startAngle+t*n,u=this.p0.x+this._xRadius*Math.cos(o),h=this.p0.y+this._yRadius*Math.sin(o);if(0!==this._rotation){var a=Math.cos(this._rotation),c=Math.sin(this._rotation),d=u-this.p0.x,l=h-this.p0.y;u=d*a-l*c+this.p0.x,h=d*c+l*a+this.p0.y}return i.set(u,h)},setXRadius:function(t){return this.xRadius=t,this},setYRadius:function(t){return this.yRadius=t,this},setWidth:function(t){return this.xRadius=2*t,this},setHeight:function(t){return this.yRadius=2*t,this},setStartAngle:function(t){return this.startAngle=t,this},setEndAngle:function(t){return this.endAngle=t,this},setClockwise:function(t){return this.clockwise=t,this},setRotation:function(t){return this.rotation=t,this},x:{get:function(){return this.p0.x},set:function(t){this.p0.x=t}},y:{get:function(){return this.p0.y},set:function(t){this.p0.y=t}},xRadius:{get:function(){return this._xRadius},set:function(t){this._xRadius=t}},yRadius:{get:function(){return this._yRadius},set:function(t){this._yRadius=t}},startAngle:{get:function(){return e(this._startAngle)},set:function(t){this._startAngle=s(t)}},endAngle:{get:function(){return e(this._endAngle)},set:function(t){this._endAngle=s(t)}},clockwise:{get:function(){return this._clockwise},set:function(t){this._clockwise=t}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=s(t)}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:e(this._startAngle),endAngle:e(this._endAngle),clockwise:this._clockwise,rotation:e(this._rotation)}}});o.fromJSON=function(t){return new o(t)},module.exports=o;
},{"../utils/Class":8,"./Curve":196,"../math/DegToRad":228,"../utils/object/GetValue":53,"../math/RadToDeg":241,"../math/Vector2":96}],210:[function(require,module,exports) {
var s=require("../utils/Class"),t=require("../boot/PluginManager"),i=new s({initialize:function(s){this.scene=s,this.systems=s.sys,s.sys.settings.isBooted||s.sys.events.once("boot",this.boot,this),this.displayList,this.updateList},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList;var s=this.systems.events;s.on("shutdown",this.shutdown,this),s.on("destroy",this.destroy,this)},existing:function(s){return(s.renderCanvas||s.renderWebGL)&&this.displayList.add(s),s.preUpdate&&this.updateList.add(s),s},shutdown:function(){},destroy:function(){this.scene=null,this.displayList=null,this.updateList=null}});i.register=function(s,t){i.prototype.hasOwnProperty(s)||(i.prototype[s]=t)},t.register("GameObjectFactory",i,"add"),module.exports=i;
},{"../utils/Class":8,"../boot/PluginManager":16}],198:[function(require,module,exports) {
var t=require("../utils/Class"),e=require("./Curve"),n=require("../geom/rectangle/FromPoints"),i=require("../geom/rectangle/Rectangle"),r=require("../math/Vector2"),o=new r,s=new t({Extends:e,initialize:function(t,n){e.call(this,"LineCurve"),Array.isArray(t)&&(n=new r(t[2],t[3]),t=new r(t[0],t[1])),this.p0=t,this.p1=n},getBounds:function(t){return void 0===t&&(t=new i),n([this.p0,this.p1],t)},getStartPoint:function(t){return void 0===t&&(t=new r),t.copy(this.p0)},getResolution:function(){return 1},getPoint:function(t,e){return void 0===e&&(e=new r),1===t?e.copy(this.p1):(e.copy(this.p1).subtract(this.p0).scale(t).add(this.p0),e)},getPointAt:function(t,e){return this.getPoint(t,e)},getTangent:function(){return o.copy(this.p1).subtract(this.p0).normalize()},draw:function(t){return t.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});s.fromJSON=function(t){var e=t.points,n=new r(e[0],e[1]),i=new r(e[2],e[3]);return new s(n,i)},module.exports=s;
},{"../utils/Class":8,"./Curve":196,"../geom/rectangle/FromPoints":373,"../geom/rectangle/Rectangle":62,"../math/Vector2":96}],398:[function(require,module,exports) {
var t=require("../../utils/Class"),n=require("../../math/Vector2"),e=new t({initialize:function(t,e){this.active=!1,this.p0=new n(t,e)},getPoint:function(t,e){return void 0===e&&(e=new n),e.copy(this.p0)},getPointAt:function(t,n){return this.getPoint(t,n)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});module.exports=e;
},{"../../utils/Class":8,"../../math/Vector2":96}],372:[function(require,module,exports) {
function n(n,r){var t=1-n;return t*t*r}function r(n,r){return 2*(1-n)*n*r}function t(n,r){return n*n*r}var u=function(u,e,o,c){return n(u,e)+r(u,o)+t(u,c)};module.exports=u;
},{}],199:[function(require,module,exports) {
var t=require("../utils/Class"),i=require("./Curve"),e=require("../math/interpolation/QuadraticBezierInterpolation"),n=require("../math/Vector2"),r=new t({Extends:i,initialize:function(t,e,r){i.call(this,"QuadraticBezier"),Array.isArray(t)&&(r=new n(t[4],t[5]),e=new n(t[2],t[3]),t=new n(t[0],t[1])),this.p0=t,this.p1=e,this.p2=r},getStartPoint:function(t){return void 0===t&&(t=new n),t.copy(this.p0)},getResolution:function(t){return t},getPoint:function(t,i){void 0===i&&(i=new n);var r=this.p0,o=this.p1,s=this.p2;return i.set(e(t,r.x,o.x,s.x),e(t,r.y,o.y,s.y))},draw:function(t,i){void 0===i&&(i=32);var e=this.getPoints(i);t.beginPath(),t.moveTo(this.p0.x,this.p0.y);for(var n=1;n<e.length;n++)t.lineTo(e[n].x,e[n].y);return t.strokePath(),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});r.fromJSON=function(t){var i=t.points,e=new n(i[0],i[1]),o=new n(i[2],i[3]),s=new n(i[4],i[5]);return new r(e,o,s)},module.exports=r;
},{"../utils/Class":8,"./Curve":196,"../math/interpolation/QuadraticBezierInterpolation":372,"../math/Vector2":96}],225:[function(require,module,exports) {
var r=function(r,e,n,o,t){var u=.5*(o-e),a=.5*(t-n),v=r*r;return(2*n-2*o+u+a)*(r*v)+(-3*n+3*o-2*u-a)*v+u*r+n};module.exports=r;
},{}],200:[function(require,module,exports) {
var t=require("../math/CatmullRom"),n=require("../utils/Class"),i=require("./Curve"),e=require("../math/Vector2"),r=new n({Extends:i,initialize:function(t){void 0===t&&(t=[]),i.call(this,"SplineCurve"),this.points=[],this.addPoints(t)},addPoints:function(t){for(var n=0;n<t.length;n++){var i=new e;"number"==typeof t[n]?(i.x=t[n],i.y=t[n+1],n++):Array.isArray(t[n])?(i.x=t[n][0],i.y=t[n][1]):(i.x=t[n].x,i.y=t[n].y),this.points.push(i)}return this},addPoint:function(t,n){var i=new e(t,n);return this.points.push(i),i},getStartPoint:function(t){return void 0===t&&(t=new e),t.copy(this.points[0])},getResolution:function(t){return t*this.points.length},getPoint:function(n,i){void 0===i&&(i=new e);var r=this.points,o=(r.length-1)*n,s=Math.floor(o),u=o-s,h=r[0===s?s:s-1],p=r[s],a=r[s>r.length-2?r.length-1:s+1],l=r[s>r.length-3?r.length-1:s+2];return i.set(t(u,h.x,p.x,a.x,l.x),t(u,h.y,p.y,a.y,l.y))},toJSON:function(){for(var t=[],n=0;n<this.points.length;n++)t.push(this.points[n].x),t.push(this.points[n].y);return{type:this.type,points:t}}});r.fromJSON=function(t){return new r(t.points)},module.exports=r;
},{"../math/CatmullRom":225,"../utils/Class":8,"./Curve":196,"../math/Vector2":96}],281:[function(require,module,exports) {
var t=require("../../utils/Class"),e=require("../CubicBezierCurve"),i=require("../EllipseCurve"),n=require("../../gameobjects/GameObjectFactory"),r=require("../LineCurve"),s=require("./MoveTo"),h=require("../QuadraticBezierCurve"),u=require("../../geom/rectangle/Rectangle"),o=require("../SplineCurve"),c=require("../../math/Vector2"),a=new t({initialize:function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new c,this._tmpVec2A=new c,this._tmpVec2B=new c,"object"==typeof t?this.fromJSON(t):this.startPoint.set(t,e)},add:function(t){return this.curves.push(t),this},circleTo:function(t,e,i){return void 0===e&&(e=!1),this.ellipseTo(t,t,0,360,e,i)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);return t.equals(e)||this.curves.push(new r(e,t)),this},cubicBezierTo:function(t,i,n,r,s,h){var u,o,a,v=this.getEndPoint();return t instanceof c?(u=t,o=i,a=n):(u=new c(n,r),o=new c(s,h),a=new c(t,i)),this.add(new e(v,u,o,a))},quadraticBezierTo:function(t,e,i,n){var r,s,u=this.getEndPoint();return t instanceof c?(r=t,s=e):(r=new c(i,n),s=new c(t,e)),this.add(new h(u,r,s))},draw:function(t,e){for(var i=0;i<this.curves.length;i++){var n=this.curves[i];n.active&&n.draw(t,e)}return t},ellipseTo:function(t,e,n,r,s,h){var u=new i(0,0,t,e,n,r,s,h),o=this.getEndPoint(this._tmpVec2A),c=u.getStartPoint(this._tmpVec2B);return o.subtract(c),u.x=o.x,u.y=o.y,this.add(u)},fromJSON:function(t){this.curves=[],this.cacheLengths=[],this.startPoint.set(t.x,t.y),this.autoClose=t.autoClose;for(var n=0;n<t.curves.length;n++){var s=t.curves[n];switch(s.type){case"LineCurve":this.add(r.fromJSON(s));break;case"EllipseCurve":this.add(i.fromJSON(s));break;case"SplineCurve":this.add(o.fromJSON(s));break;case"CubicBezierCurve":this.add(e.fromJSON(s));break;case"QuadraticBezierCurve":this.add(h.fromJSON(s))}}return this},getBounds:function(t,e){void 0===t&&(t=new u),void 0===e&&(e=16),t.x=Number.MAX_VALUE,t.y=Number.MAX_VALUE;for(var i=new u,n=Number.MIN_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER,s=0;s<this.curves.length;s++){var h=this.curves[s];h.active&&(h.getBounds(i,e),t.x=Math.min(t.x,i.x),t.y=Math.min(t.y,i.y),n=Math.max(n,i.right),r=Math.max(r,i.bottom))}return t.right=n,t.bottom=r,t},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,i=0;i<this.curves.length;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t},getEndPoint:function(t){return void 0===t&&(t=new c),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,t):t.copy(this.startPoint),t},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},getPoint:function(t,e){void 0===e&&(e=new c);for(var i=t*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=i){var s=n[r]-i,h=this.curves[r],u=h.getLength(),o=0===u?0:1-s/u;return h.getPointAt(o,e)}r++}return null},getPoints:function(t){void 0===t&&(t=12);for(var e,i=[],n=0;n<this.curves.length;n++){var r=this.curves[n];if(r.active)for(var s=r.getResolution(t),h=r.getPoints(s),u=0;u<h.length;u++){var o=h[u];e&&e.equals(o)||(i.push(o),e=o)}}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},getRandomPoint:function(t){return void 0===t&&(t=new c),this.getPoint(Math.random(),t)},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e},getStartPoint:function(t){return void 0===t&&(t=new c),t.copy(this.startPoint)},lineTo:function(t,e){t instanceof c?this._tmpVec2B.copy(t):this._tmpVec2B.set(t,e);var i=this.getEndPoint(this._tmpVec2A);return this.add(new r([i.x,i.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(t){return t.unshift(this.getEndPoint()),this.add(new o(t))},moveTo:function(t,e){return this.add(new s(t,e))},toJSON:function(){for(var t=[],e=0;e<this.curves.length;e++)t.push(this.curves[e].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:t}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});n.register("path",function(t,e){return new a(t,e)}),module.exports=a;
},{"../../utils/Class":8,"../CubicBezierCurve":195,"../EllipseCurve":197,"../../gameobjects/GameObjectFactory":210,"../LineCurve":198,"./MoveTo":398,"../QuadraticBezierCurve":199,"../../geom/rectangle/Rectangle":62,"../SplineCurve":200,"../../math/Vector2":96}],74:[function(require,module,exports) {
module.exports={Path:require("./path/Path"),CubicBezier:require("./CubicBezierCurve"),Curve:require("./Curve"),Ellipse:require("./EllipseCurve"),Line:require("./LineCurve"),QuadraticBezier:require("./QuadraticBezierCurve"),Spline:require("./SplineCurve")};
},{"./path/Path":281,"./CubicBezierCurve":195,"./Curve":196,"./EllipseCurve":197,"./LineCurve":198,"./QuadraticBezierCurve":199,"./SplineCurve":200}],201:[function(require,module,exports) {
var s=require("../utils/Class"),t=require("./DataManager"),e=require("../boot/PluginManager"),i=new s({Extends:t,initialize:function(s){this.scene=s,this.systems=s.sys,s.sys.settings.isBooted||s.sys.events.once("boot",this.boot,this),t.call(this,this.scene,s.sys.events)},boot:function(){var s=this.systems.events;s.on("shutdown",this.shutdownPlugin,this),s.on("destroy",this.destroyPlugin,this)},shutdownPlugin:function(){},destroyPlugin:function(){this.destroy(),this.scene=void 0,this.systems=void 0}});e.register("DataManagerPlugin",i,"data"),module.exports=i;
},{"../utils/Class":8,"./DataManager":22,"../boot/PluginManager":16}],75:[function(require,module,exports) {
module.exports={DataManager:require("./DataManager"),DataManagerPlugin:require("./DataManagerPlugin")};
},{"./DataManager":22,"./DataManagerPlugin":201}],921:[function(require,module,exports) {
module.exports={BottomCenter:require("./BottomCenter"),BottomLeft:require("./BottomLeft"),BottomRight:require("./BottomRight"),Center:require("./Center"),LeftCenter:require("./LeftCenter"),QuickSet:require("./QuickSet"),RightCenter:require("./RightCenter"),TopCenter:require("./TopCenter"),TopLeft:require("./TopLeft"),TopRight:require("./TopRight")};
},{"./BottomCenter":488,"./BottomLeft":495,"./BottomRight":487,"./Center":489,"./LeftCenter":490,"./QuickSet":390,"./RightCenter":493,"./TopCenter":491,"./TopLeft":492,"./TopRight":494}],961:[function(require,module,exports) {
var e=require("../../bounds/GetBottom"),r=require("../../bounds/GetCenterX"),o=require("../../bounds/SetCenterX"),t=require("../../bounds/SetTop"),u=function(u,n,d,i){return void 0===d&&(d=0),void 0===i&&(i=0),o(u,r(n)+d),t(u,e(n)+i),u};module.exports=u;
},{"../../bounds/GetBottom":564,"../../bounds/GetCenterX":567,"../../bounds/SetCenterX":574,"../../bounds/SetTop":575}],962:[function(require,module,exports) {
var e=require("../../bounds/GetBottom"),o=require("../../bounds/GetLeft"),r=require("../../bounds/SetLeft"),t=require("../../bounds/SetTop"),u=function(u,d,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),r(u,o(d)-i),t(u,e(d)+n),u};module.exports=u;
},{"../../bounds/GetBottom":564,"../../bounds/GetLeft":573,"../../bounds/SetLeft":571,"../../bounds/SetTop":575}],963:[function(require,module,exports) {
var e=require("../../bounds/GetBottom"),o=require("../../bounds/GetRight"),r=require("../../bounds/SetRight"),t=require("../../bounds/SetTop"),u=function(u,i,d,n){return void 0===d&&(d=0),void 0===n&&(n=0),r(u,o(i)+d),t(u,e(i)+n),u};module.exports=u;
},{"../../bounds/GetBottom":564,"../../bounds/GetRight":565,"../../bounds/SetRight":576,"../../bounds/SetTop":575}],964:[function(require,module,exports) {
var e=require("../../bounds/GetBottom"),o=require("../../bounds/GetLeft"),t=require("../../bounds/SetBottom"),r=require("../../bounds/SetRight"),u=function(u,i,d,n){return void 0===d&&(d=0),void 0===n&&(n=0),r(u,o(i)-d),t(u,e(i)+n),u};module.exports=u;
},{"../../bounds/GetBottom":564,"../../bounds/GetLeft":573,"../../bounds/SetBottom":566,"../../bounds/SetRight":576}],965:[function(require,module,exports) {
var e=require("../../bounds/GetCenterY"),r=require("../../bounds/GetLeft"),t=require("../../bounds/SetCenterY"),u=require("../../bounds/SetRight"),n=function(n,o,i,d){return void 0===i&&(i=0),void 0===d&&(d=0),u(n,r(o)-i),t(n,e(o)+d),n};module.exports=n;
},{"../../bounds/GetCenterY":569,"../../bounds/GetLeft":573,"../../bounds/SetCenterY":570,"../../bounds/SetRight":576}],966:[function(require,module,exports) {
var e=require("../../bounds/GetLeft"),r=require("../../bounds/GetTop"),o=require("../../bounds/SetRight"),u=require("../../bounds/SetTop"),t=function(t,i,d,n){return void 0===d&&(d=0),void 0===n&&(n=0),o(t,e(i)-d),u(t,r(i)-n),t};module.exports=t;
},{"../../bounds/GetLeft":573,"../../bounds/GetTop":572,"../../bounds/SetRight":576,"../../bounds/SetTop":575}],967:[function(require,module,exports) {
var e=require("../../bounds/GetBottom"),o=require("../../bounds/GetRight"),t=require("../../bounds/SetBottom"),r=require("../../bounds/SetLeft"),u=function(u,i,d,n){return void 0===d&&(d=0),void 0===n&&(n=0),r(u,o(i)+d),t(u,e(i)+n),u};module.exports=u;
},{"../../bounds/GetBottom":564,"../../bounds/GetRight":565,"../../bounds/SetBottom":566,"../../bounds/SetLeft":571}],968:[function(require,module,exports) {
var e=require("../../bounds/GetCenterY"),r=require("../../bounds/GetRight"),t=require("../../bounds/SetCenterY"),u=require("../../bounds/SetLeft"),n=function(n,o,i,d){return void 0===i&&(i=0),void 0===d&&(d=0),u(n,r(o)+i),t(n,e(o)+d),n};module.exports=n;
},{"../../bounds/GetCenterY":569,"../../bounds/GetRight":565,"../../bounds/SetCenterY":570,"../../bounds/SetLeft":571}],969:[function(require,module,exports) {
var e=require("../../bounds/GetRight"),r=require("../../bounds/GetTop"),o=require("../../bounds/SetLeft"),u=require("../../bounds/SetTop"),t=function(t,i,d,n){return void 0===d&&(d=0),void 0===n&&(n=0),o(t,e(i)+d),u(t,r(i)-n),t};module.exports=t;
},{"../../bounds/GetRight":565,"../../bounds/GetTop":572,"../../bounds/SetLeft":571,"../../bounds/SetTop":575}],970:[function(require,module,exports) {
var e=require("../../bounds/GetCenterX"),r=require("../../bounds/GetTop"),o=require("../../bounds/SetBottom"),t=require("../../bounds/SetCenterX"),u=function(u,n,d,i){return void 0===d&&(d=0),void 0===i&&(i=0),t(u,e(n)+d),o(u,r(n)-i),u};module.exports=u;
},{"../../bounds/GetCenterX":567,"../../bounds/GetTop":572,"../../bounds/SetBottom":566,"../../bounds/SetCenterX":574}],971:[function(require,module,exports) {
var e=require("../../bounds/GetLeft"),o=require("../../bounds/GetTop"),r=require("../../bounds/SetBottom"),t=require("../../bounds/SetLeft"),u=function(u,d,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),t(u,e(d)-i),r(u,o(d)-n),u};module.exports=u;
},{"../../bounds/GetLeft":573,"../../bounds/GetTop":572,"../../bounds/SetBottom":566,"../../bounds/SetLeft":571}],972:[function(require,module,exports) {
var e=require("../../bounds/GetRight"),o=require("../../bounds/GetTop"),r=require("../../bounds/SetBottom"),t=require("../../bounds/SetRight"),u=function(u,i,d,n){return void 0===d&&(d=0),void 0===n&&(n=0),t(u,e(i)+d),r(u,o(i)-n),u};module.exports=u;
},{"../../bounds/GetRight":565,"../../bounds/GetTop":572,"../../bounds/SetBottom":566,"../../bounds/SetRight":576}],928:[function(require,module,exports) {
module.exports={BottomCenter:require("./BottomCenter"),BottomLeft:require("./BottomLeft"),BottomRight:require("./BottomRight"),LeftBottom:require("./LeftBottom"),LeftCenter:require("./LeftCenter"),LeftTop:require("./LeftTop"),RightBottom:require("./RightBottom"),RightCenter:require("./RightCenter"),RightTop:require("./RightTop"),TopCenter:require("./TopCenter"),TopLeft:require("./TopLeft"),TopRight:require("./TopRight")};
},{"./BottomCenter":961,"./BottomLeft":962,"./BottomRight":963,"./LeftBottom":964,"./LeftCenter":965,"./LeftTop":966,"./RightBottom":967,"./RightCenter":968,"./RightTop":969,"./TopCenter":970,"./TopLeft":971,"./TopRight":972}],508:[function(require,module,exports) {
var e=require("./const"),r=require("../../utils/object/Extend"),i={In:require("./in"),To:require("./to")};i=r(!1,i,e),module.exports=i;
},{"./const":362,"../../utils/object/Extend":13,"./in":921,"./to":928}],585:[function(require,module,exports) {
var r=function(r){return r.width*r.originX};module.exports=r;
},{}],586:[function(require,module,exports) {
var r=function(r){return r.height*r.originY};module.exports=r;
},{}],504:[function(require,module,exports) {
module.exports={CenterOn:require("./CenterOn"),GetBottom:require("./GetBottom"),GetCenterX:require("./GetCenterX"),GetCenterY:require("./GetCenterY"),GetLeft:require("./GetLeft"),GetOffsetX:require("./GetOffsetX"),GetOffsetY:require("./GetOffsetY"),GetRight:require("./GetRight"),GetTop:require("./GetTop"),SetBottom:require("./SetBottom"),SetCenterX:require("./SetCenterX"),SetCenterY:require("./SetCenterY"),SetLeft:require("./SetLeft"),SetRight:require("./SetRight"),SetTop:require("./SetTop")};
},{"./CenterOn":568,"./GetBottom":564,"./GetCenterX":567,"./GetCenterY":569,"./GetLeft":573,"./GetOffsetX":585,"./GetOffsetY":586,"./GetRight":565,"./GetTop":572,"./SetBottom":566,"./SetCenterX":574,"./SetCenterY":570,"./SetLeft":571,"./SetRight":576,"./SetTop":575}],55:[function(require,module,exports) {
var e={setCrisp:function(e){return["optimizeSpeed","crisp-edges","-moz-crisp-edges","-webkit-optimize-contrast","optimize-contrast","pixelated"].forEach(function(t){e.style["image-rendering"]=t}),e.style.msInterpolationMode="nearest-neighbor",e},setBicubic:function(e){return e.style["image-rendering"]="auto",e.style.msInterpolationMode="bicubic",e}};module.exports=e;
},{}],590:[function(require,module,exports) {
var o=function(o,t){return void 0===t&&(t="none"),o.style.msTouchAction=t,o.style["ms-touch-action"]=t,o.style["touch-action"]=t,o};module.exports=o;
},{}],620:[function(require,module,exports) {
var t=function(t,e){void 0===e&&(e="none");return["-webkit-","-khtml-","-moz-","-ms-",""].forEach(function(o){t.style[o+"user-select"]=e}),t.style["-webkit-touch-callout"]=e,t.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",t};module.exports=t;
},{}],505:[function(require,module,exports) {
module.exports={Interpolation:require("./CanvasInterpolation"),Pool:require("./CanvasPool"),Smoothing:require("./Smoothing"),TouchAction:require("./TouchAction"),UserSelect:require("./UserSelect")};
},{"./CanvasInterpolation":55,"./CanvasPool":33,"./Smoothing":67,"./TouchAction":590,"./UserSelect":620}],591:[function(require,module,exports) {
var r=function(r){var a={r:r>>16&255,g:r>>8&255,b:255&r,a:255};return r>16777215&&(a.a=r>>>24),a};module.exports=r;
},{}],592:[function(require,module,exports) {
var r=function(r){var t=r.toString(16);return 1===t.length?"0"+t:t};module.exports=r;
},{}],596:[function(require,module,exports) {
var r=function(r,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?r+6*(e-r)*n:n<.5?e:n<2/3?r+(e-r)*(2/3-n)*6:r};module.export=r;
},{}],593:[function(require,module,exports) {
var e=require("./Color"),r=require("./HueToComponent"),o=function(o,n,u){var t=u,i=u,a=u;if(0!==n){var v=u<.5?u*(1+n):u+n-u*n,f=2*u-v;t=r(f,v,o+1/3),i=r(f,v,o),a=r(f,v,o-1/3)}return(new e).setGLTo(t,i,a,1)};module.exports=o;
},{"./Color":66,"./HueToComponent":596}],595:[function(require,module,exports) {
var o=require("./GetColor"),r=function(r,l,t){void 0===l&&(l=1),void 0===t&&(t=1);var a=Math.floor(6*r),b=6*r-a,e=Math.floor(t*(1-l)*255),f=Math.floor(t*(1-b*l)*255),g=Math.floor(t*(1-(1-b)*l)*255),h={r:t=Math.floor(t*=255),g:t,b:t,color:0},M=a%6;return 0===M?(h.g=g,h.b=e):1===M?(h.r=f,h.b=e):2===M?(h.r=e,h.b=g):3===M?(h.r=e,h.g=f):4===M?(h.r=g,h.g=e):5===M&&(h.g=e,h.b=f),h.color=o(h.r,h.g,h.b),h};module.exports=r;
},{"./GetColor":121}],594:[function(require,module,exports) {
var r=require("./HSVToRGB"),o=function(o,e){void 0===o&&(o=1),void 0===e&&(e=1);for(var u=[],i=0;i<=359;i++)u.push(r(i/359,o,e));return u};module.exports=o;
},{"./HSVToRGB":595}],237:[function(require,module,exports) {
var r=function(r,e,n){return(e-r)*n+r};module.exports=r;
},{}],597:[function(require,module,exports) {
var r=require("../../math/Linear"),o=function(o,i,t,n,e,u,v,d){void 0===v&&(v=100),void 0===d&&(d=0);var a=d/v;return{r:r(o,n,a),g:r(i,e,a),b:r(t,u,a)}},i=function(r,i,t,n){return void 0===t&&(t=100),void 0===n&&(n=0),o(r.r,r.g,r.b,i.r,i.g,i.b,t,n)},t=function(r,i,t,n,e,u){return void 0===e&&(e=100),void 0===u&&(u=0),o(r.r,r.g,r.b,i,t,n,e,u)};module.exports={RGBWithRGB:o,ColorWithRGB:t,ColorWithColor:i};
},{"../../math/Linear":237}],224:[function(require,module,exports) {
var o=function(o,r){return Math.floor(Math.random()*(r-o+1)+o)};module.exports=o;
},{}],598:[function(require,module,exports) {
var e=require("../../math/Between"),r=require("./Color"),o=function(o,i){return void 0===o&&(o=0),void 0===i&&(i=255),new r(e(o,i),e(o,i),e(o,i))};module.exports=o;
},{"../../math/Between":224,"./Color":66}],599:[function(require,module,exports) {
var a=function(a,r,t){a/=255,r/=255,t/=255;var n=Math.min(a,r,t),e=Math.max(a,r,t),h=e-n,m=0;return e!==n&&(e===a?m=(r-t)/h+(r<t?6:0):e===r?m=(t-a)/h+2:e===t&&(m=(a-r)/h+4),m/=6),{h:m,s:0===e?0:h/e,v:e}};module.exports=a;
},{}],600:[function(require,module,exports) {
var o=require("./ComponentToHex"),e=function(e,r,i,n,t){return void 0===n&&(n=255),void 0===t&&(t="#"),"#"===t?"#"+((1<<24)+(e<<16)+(r<<8)+i).toString(16).slice(1):"0x"+o(n)+o(e)+o(r)+o(i)};module.exports=e;
},{"./ComponentToHex":592}],507:[function(require,module,exports) {
var o=require("./Color");o.ColorToRGBA=require("./ColorToRGBA"),o.ComponentToHex=require("./ComponentToHex"),o.GetColor=require("./GetColor"),o.GetColor32=require("./GetColor32"),o.HexStringToColor=require("./HexStringToColor"),o.HSLToColor=require("./HSLToColor"),o.HSVColorWheel=require("./HSVColorWheel"),o.HSVToRGB=require("./HSVToRGB"),o.HueToComponent=require("./HueToComponent"),o.IntegerToColor=require("./IntegerToColor"),o.IntegerToRGB=require("./IntegerToRGB"),o.Interpolate=require("./Interpolate"),o.ObjectToColor=require("./ObjectToColor"),o.RandomRGB=require("./RandomRGB"),o.RGBStringToColor=require("./RGBStringToColor"),o.RGBToHSV=require("./RGBToHSV"),o.RGBToString=require("./RGBToString"),o.ValueToColor=require("./ValueToColor"),module.exports=o;
},{"./Color":66,"./ColorToRGBA":591,"./ComponentToHex":592,"./GetColor":121,"./GetColor32":122,"./HexStringToColor":105,"./HSLToColor":593,"./HSVColorWheel":594,"./HSVToRGB":595,"./HueToComponent":596,"./IntegerToColor":108,"./IntegerToRGB":339,"./Interpolate":597,"./ObjectToColor":106,"./RandomRGB":598,"./RGBStringToColor":107,"./RGBToHSV":599,"./RGBToString":600,"./ValueToColor":54}],601:[function(require,module,exports) {
var e=require("../../utils/Class"),t=new e({initialize:function(e,t){var i=e.sys.game.renderer;if(this.bitmapMask=t,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,i&&i.gl){var r=i.width,a=i.height,s=0==(r&r-1)&&0==(a&a-1),n=i.gl,u=s?n.REPEAT:n.CLAMP_TO_EDGE,m=n.LINEAR;this.mainTexture=i.createTexture2D(0,m,m,u,u,n.RGBA,null,r,a),this.maskTexture=i.createTexture2D(0,m,m,u,u,n.RGBA,null,r,a),this.mainFramebuffer=i.createFramebuffer(r,a,this.mainTexture,!1),this.maskFramebuffer=i.createFramebuffer(r,a,this.maskTexture,!1),i.onContextRestored(function(e){var t=e.width,i=e.height,r=0==(t&t-1)&&0==(i&i-1),a=e.gl,s=r?a.REPEAT:a.CLAMP_TO_EDGE,n=a.LINEAR;this.mainTexture=e.createTexture2D(0,n,n,s,s,a.RGBA,null,t,i),this.maskTexture=e.createTexture2D(0,n,n,s,s,a.RGBA,null,t,i),this.mainFramebuffer=e.createFramebuffer(t,i,this.mainTexture,!1),this.maskFramebuffer=e.createFramebuffer(t,i,this.maskTexture,!1)},this)}},setBitmap:function(e){this.bitmapMask=e},preRenderWebGL:function(e,t,i){e.pipelines.BitmapMaskPipeline.beginMask(this,t,i)},postRenderWebGL:function(e){e.pipelines.BitmapMaskPipeline.endMask(this)},preRenderCanvas:function(){},postRenderCanvas:function(){}});module.exports=t;
},{"../../utils/Class":8}],619:[function(require,module,exports) {
var e=require("../../utils/Class"),n=new e({initialize:function(e,n){this.geometryMask=n},setShape:function(e){this.geometryMask=e},preRenderWebGL:function(e,n,t){var r=e.gl,s=this.geometryMask;e.flush(),r.enable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.NOTEQUAL,1,1),r.stencilOp(r.REPLACE,r.REPLACE,r.REPLACE),s.renderWebGL(e,s,0,t),e.flush(),r.colorMask(!0,!0,!0,!0),r.stencilFunc(r.EQUAL,1,1),r.stencilOp(r.INVERT,r.INVERT,r.INVERT)},postRenderWebGL:function(e){var n=e.gl;e.flush(),n.disable(n.STENCIL_TEST)},preRenderCanvas:function(e,n,t){var r=this.geometryMask;e.currentContext.save(),r.renderCanvas(e,r,0,t,null,!0),e.currentContext.clip()},postRenderCanvas:function(e){e.currentContext.restore()}});module.exports=n;
},{"../../utils/Class":8}],506:[function(require,module,exports) {
module.exports={BitmapMask:require("./BitmapMask"),GeometryMask:require("./GeometryMask")};
},{"./BitmapMask":601,"./GeometryMask":619}],76:[function(require,module,exports) {
module.exports={Align:require("./align"),Bounds:require("./bounds"),Canvas:require("./canvas"),Color:require("./color"),Masks:require("./mask")};
},{"./align":508,"./bounds":504,"./canvas":505,"./color":507,"./mask":506}],17:[function(require,module,exports) {
var e=function(e,o,t){var d;return void 0===t&&(t=!0),o&&("string"==typeof o?d=document.getElementById(o):"object"==typeof o&&1===o.nodeType&&(d=o)),d||(d=document.body),t&&d.style&&(d.style.overflow="hidden"),d.appendChild(e),e};module.exports=e;
},{}],93:[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(t){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],42:[function(require,module,exports) {
var process = require("process");
var o=require("process"),e={android:!1,chromeOS:!1,cocoonJS:!1,cocoonJSApp:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function i(){var i=navigator.userAgent;/Windows/.test(i)?e.windows=!0:/Mac OS/.test(i)?e.macOS=!0:/Linux/.test(i)?e.linux=!0:/Android/.test(i)?e.android=!0:/iP[ao]d|iPhone/i.test(i)?(e.iOS=!0,navigator.appVersion.match(/OS (\d+)/),e.iOSVersion=parseInt(RegExp.$1,10)):/Kindle/.test(i)||/\bKF[A-Z][A-Z]+/.test(i)||/Silk.*Mobile Safari/.test(i)?e.kindle=!0:/CrOS/.test(i)&&(e.chromeOS=!0),(/Windows Phone/i.test(i)||/IEMobile/i.test(i))&&(e.android=!1,e.iOS=!1,e.macOS=!1,e.windows=!0,e.windowsPhone=!0);var n=/Silk/.test(i);if((e.windows||e.macOS||e.linux&&!n||e.chromeOS)&&(e.desktop=!0),(e.windowsPhone||/Windows NT/i.test(i)&&/Touch/i.test(i))&&(e.desktop=!1),navigator.standalone&&(e.webApp=!0),void 0!==window.cordova&&(e.cordova=!0),void 0!==o&&void 0!==o.versions.node&&(e.node=!0),e.node&&"object"==typeof o.versions&&(e.nodeWebkit=!!o.versions["node-webkit"],e.electron=!!o.versions.electron),navigator.isCocoonJS){e.cocoonJS=!0;try{e.cocoonJSApp="undefined"!=typeof CocoonJS}catch(o){e.cocoonJSApp=!1}}return void 0!==window.ejecta&&(e.ejecta=!0),/Crosswalk/.test(i)&&(e.crosswalk=!0),e.iPhone=-1!==i.toLowerCase().indexOf("iphone"),e.iPad=-1!==i.toLowerCase().indexOf("ipad"),e.pixelRatio=window.devicePixelRatio||1,e}module.exports=i();
},{"process":93}],24:[function(require,module,exports) {
var e=require("../device/OS"),t=function(t){if("complete"!==document.readyState&&"interactive"!==document.readyState){var d=function(){document.removeEventListener("deviceready",d,!0),document.removeEventListener("DOMContentLoaded",d,!0),window.removeEventListener("load",d,!0),t()};document.body?e.cordova&&!e.cocoonJS?document.addEventListener("deviceready",d,!1):(document.addEventListener("DOMContentLoaded",d,!0),window.addEventListener("load",d,!0)):window.setTimeout(d,20)}else t()};module.exports=t;
},{"../device/OS":42}],202:[function(require,module,exports) {
var e=function(e){var r="";try{if(window.DOMParser)r=(new DOMParser).parseFromString(e,"text/xml");else(r=new ActiveXObject("Microsoft.XMLDOM")).loadXML(e)}catch(e){r=null}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length?r:null};module.exports=e;
},{}],203:[function(require,module,exports) {
var e=function(e){e.parentNode&&e.parentNode.removeChild(e)};module.exports=e;
},{}],48:[function(require,module,exports) {
var t=require("../utils/Class"),i=require("../utils/NOOP"),s=new t({initialize:function(){this.isRunning=!1,this.callback=i,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0;var t=this;this.step=function i(s){t.lastTime=t.tick,t.tick=s,t.callback(s),t.timeOutID=window.requestAnimationFrame(i)},this.stepTimeout=function i(){var s=Date.now(),e=Math.max(16+t.lastTime-s,0);t.lastTime=t.tick,t.tick=s,t.callback(s),t.timeOutID=window.setTimeout(i,e)}},start:function(t,i){this.isRunning||(this.callback=t,this.isSetTimeOut=i,this.isRunning=!0,this.timeOutID=i?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=i}});module.exports=s;
},{"../utils/Class":8,"../utils/NOOP":30}],77:[function(require,module,exports) {
module.exports={AddToDOM:require("./AddToDOM"),DOMContentLoaded:require("./DOMContentLoaded"),ParseXML:require("./ParseXML"),RemoveFromDOM:require("./RemoveFromDOM"),RequestAnimationFrame:require("./RequestAnimationFrame")};
},{"./AddToDOM":17,"./DOMContentLoaded":24,"./ParseXML":202,"./RemoveFromDOM":203,"./RequestAnimationFrame":48}],9:[function(require,module,exports) {
var e=require("../utils/Class"),t=require("eventemitter3"),i=require("../boot/PluginManager"),r=new e({Extends:t,initialize:function(){t.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});i.register("EventEmitter",r,"events"),module.exports=r;
},{"../utils/Class":8,"eventemitter3":35,"../boot/PluginManager":16}],36:[function(require,module,exports) {
var e={Global:["anims","cache","registry","sound","textures"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["CameraManager3D","Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};module.exports=e;
},{}],20:[function(require,module,exports) {
var e=require("../utils/Class"),t=require("../const"),i=require("../utils/object/GetValue"),a=require("../math/const"),s=require("../utils/NOOP"),r=require("../plugins"),o=require("../display/color/ValueToColor"),n=new e({initialize:function(e){void 0===e&&(e={});this.width=i(e,"width",1024),this.height=i(e,"height",768),this.zoom=i(e,"zoom",1),this.resolution=i(e,"resolution",1),this.renderType=i(e,"type",t.AUTO),this.parent=i(e,"parent",null),this.canvas=i(e,"canvas",null),this.canvasStyle=i(e,"canvasStyle",null),this.sceneConfig=i(e,"scene",null),this.seed=i(e,"seed",[(Date.now()*Math.random()).toString()]),a.RND.init(this.seed),this.gameTitle=i(e,"title",""),this.gameURL=i(e,"url","https://phaser.io"),this.gameVersion=i(e,"version",""),this.inputKeyboard=i(e,"input.keyboard",!0),this.inputKeyboardEventTarget=i(e,"input.keyboard.target",window),this.inputMouse=i(e,"input.mouse",!0),this.inputMouseEventTarget=i(e,"input.mouse.target",null),this.inputMouseCapture=i(e,"input.mouse.capture",!0),this.inputTouch=i(e,"input.touch",!0),this.inputTouchEventTarget=i(e,"input.touch.target",null),this.inputTouchCapture=i(e,"input.touch.capture",!0),this.inputGamepad=i(e,"input.gamepad",!1),this.disableContextMenu=i(e,"disableContextMenu",!1),this.audio=i(e,"audio"),this.hideBanner=!1===i(e,"banner",null),this.hidePhaser=i(e,"banner.hidePhaser",!1),this.bannerTextColor=i(e,"banner.text","#ffffff"),this.bannerBackgroundColor=i(e,"banner.background",["#ff0000","#ffff00","#00ff00","#00ffff","#000000"]),""===this.gameTitle&&this.hidePhaser&&(this.hideBanner=!0),this.fps=i(e,"fps",null);var n=i(e,"render",e);this.antialias=i(n,"antialias",!0),this.pixelArt=i(n,"pixelArt",!1),this.autoResize=i(n,"autoResize",!1),this.roundPixels=i(n,"roundPixels",!1),this.transparent=i(n,"transparent",!1),this.clearBeforeRender=i(n,"clearBeforeRender",!0),this.premultipliedAlpha=i(n,"premultipliedAlpha",!0),this.preserveDrawingBuffer=i(n,"preserveDrawingBuffer",!1),this.failIfMajorPerformanceCaveat=i(n,"failIfMajorPerformanceCaveat",!1),this.powerPreference=i(n,"powerPreference","default");var l=i(e,"backgroundColor",0);this.backgroundColor=o(l),0===l&&this.transparent&&(this.backgroundColor.alpha=0),this.preBoot=i(e,"callbacks.preBoot",s),this.postBoot=i(e,"callbacks.postBoot",s),this.physics=i(e,"physics",{}),this.defaultPhysicsSystem=i(this.physics,"default",!1),this.loaderBaseURL=i(e,"loader.baseURL",""),this.loaderPath=i(e,"loader.path",""),this.loaderEnableParallel=i(e,"loader.enableParallel",!0),this.loaderMaxParallelDownloads=i(e,"loader.maxParallelDownloads",4),this.loaderCrossOrigin=i(e,"loader.crossOrigin",void 0),this.loaderResponseType=i(e,"loader.responseType",""),this.loaderAsync=i(e,"loader.async",!0),this.loaderUser=i(e,"loader.user",""),this.loaderPassword=i(e,"loader.password",""),this.loaderTimeout=i(e,"loader.timeout",0),this.defaultPlugins=i(e,"plugins",r.DefaultScene);var h="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=i(e,"images.default",h+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=i(e,"images.missing",h+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg==")}});module.exports=n;
},{"../utils/Class":8,"../const":12,"../utils/object/GetValue":53,"../math/const":40,"../utils/NOOP":30,"../plugins":36,"../display/color/ValueToColor":54}],95:[function(require,module,exports) {
var e=require("./OS"),r={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};function i(){var i=navigator.userAgent;return/Edge\/\d+/.test(i)?r.edge=!0:/Chrome\/(\d+)/.test(i)&&!e.windowsPhone?(r.chrome=!0,r.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(i)?(r.firefox=!0,r.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(i)&&e.iOS?r.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(i)?(r.ie=!0,r.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(i)?r.opera=!0:/Safari/.test(i)&&!e.windowsPhone?r.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(i)&&(r.ie=!0,r.trident=!0,r.tridentVersion=parseInt(RegExp.$1,10),r.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(i)&&(r.silk=!0),r}module.exports=i();
},{"./OS":42}],41:[function(require,module,exports) {
var e=require("./OS"),t=require("./Browser"),i=require("../display/canvas/CanvasPool"),r={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function n(){var e=new ArrayBuffer(4),t=new Uint8Array(e),i=new Uint32Array(e);return t[0]=161,t[1]=178,t[2]=195,t[3]=212,3569595041===i[0]||2712847316!==i[0]&&null}function a(){r.canvas=!!window.CanvasRenderingContext2D||e.cocoonJS;try{r.localStorage=!!localStorage.getItem}catch(e){r.localStorage=!1}r.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),r.fileSystem=!!window.requestFileSystem;var a=!1;return r.webGL=function(){if(window.WebGLRenderingContext)try{var t=i.createWebGL(this);e.cocoonJS&&(t.screencanvas=!1);var r=t.getContext("webgl")||t.getContext("experimental-webgl"),n=i.create2D(this),o=n.getContext("2d").createImageData(1,1);return a=o.data instanceof Uint8ClampedArray,i.remove(t),i.remove(n),!!r}catch(e){return!1}return!1}(),r.worker=!!window.Worker,r.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,r.getUserMedia=r.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,t.firefox&&t.firefoxVersion<21&&(r.getUserMedia=!1),!e.iOS&&(t.ie||t.firefox||t.chrome)&&(r.canvasBitBltShift=!0),(t.safari||t.mobileSafari)&&(r.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(r.vibration=!0),"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint32Array&&(r.littleEndian=n()),r.support32bit="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof Int32Array&&null!==r.littleEndian&&a,r}module.exports=a();
},{"./OS":42,"./Browser":95,"../display/canvas/CanvasPool":33}],124:[function(require,module,exports) {
var t=!1,e=function(e,a,r){var i=this.currentContext,n=r.canvasData;t&&(e|=0,a|=0),i.drawImage(r.source.image,n.sx,n.sy,n.sWidth,n.sHeight,e,a,n.dWidth,n.dHeight)};module.exports=function(a){return t=a,e};
},{}],109:[function(require,module,exports) {
var a=function(a,e,o){void 0===e&&(e="image/png"),void 0===o&&(o=.92);var r=a.toDataURL(e,o),n=new Image;return n.src=r,n};module.exports=a;
},{}],125:[function(require,module,exports) {
var e=!1,a=function(a,l){var r=this.currentContext,t=a.frame,i=t.canvasData;this.currentBlendMode!==a.blendMode&&(this.currentBlendMode=a.blendMode,r.globalCompositeOperation=this.blendModes[a.blendMode]),this.currentAlpha!==a.alpha&&(this.currentAlpha=a.alpha,r.globalAlpha=a.alpha),this.currentScaleMode!==a.scaleMode&&(this.currentScaleMode=a.scaleMode);var s=t.x,o=t.y,d=1,n=1;a.flipX?(d=-1,s-=i.dWidth-a.displayOriginX):s-=a.displayOriginX,a.flipY?(n=-1,o-=i.dHeight-a.displayOriginY):o-=a.displayOriginY;var c=a.x-l.scrollX*a.scrollFactorX,h=a.y-l.scrollY*a.scrollFactorY;e&&(c|=0,h|=0,s|=0,o|=0),r.save(),r.translate(c,h),r.rotate(a.rotation),r.scale(a.scaleX,a.scaleY),r.scale(d,n),r.drawImage(t.source.image,i.sx,i.sy,i.sWidth,i.sHeight,s,o,i.dWidth,i.dHeight),r.restore()};module.exports=function(l){return e=l,a};
},{}],347:[function(require,module,exports) {
var a=require("../display/canvas/CanvasPool"),e={supportInverseAlpha:!1,supportNewBlendModes:!1};function t(){var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",r="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",A=new Image;return A.onload=function(){var n=new Image;n.onload=function(){var t=a.create(n,6,1).getContext("2d");if(t.globalCompositeOperation="multiply",t.drawImage(A,0,0),t.drawImage(n,2,0),!t.getImageData(2,0,1,1))return!1;var r=t.getImageData(2,0,1,1).data;a.remove(n),e.supportNewBlendModes=255===r[0]&&0===r[1]&&0===r[2]},n.src=t+"/wCKxvRF"+r},A.src=t+"AP804Oa6"+r,!1}function r(){var e=a.create(this,2,1).getContext("2d");e.fillStyle="rgba(10, 20, 30, 0.5)",e.fillRect(0,0,1,1);var t=e.getImageData(0,0,1,1);if(null===t)return!1;e.putImageData(t,1,0);var r=e.getImageData(1,0,1,1);return r.data[0]===t.data[0]&&r.data[1]===t.data[1]&&r.data[2]===t.data[2]&&r.data[3]===t.data[3]}function A(){return void 0!==document&&(e.supportNewBlendModes=t(),e.supportInverseAlpha=r()),e}module.exports=A();
},{"../display/canvas/CanvasPool":33}],126:[function(require,module,exports) {
var e=require("../../BlendModes"),r=require("../../../device/CanvasFeatures"),o=function(){var o=[],u=r.supportNewBlendModes;return o[e.NORMAL]="source-over",o[e.ADD]="lighter",o[e.MULTIPLY]=u?"multiply":"source-over",o[e.SCREEN]=u?"screen":"source-over",o[e.OVERLAY]=u?"overlay":"source-over",o[e.DARKEN]=u?"darken":"source-over",o[e.LIGHTEN]=u?"lighten":"source-over",o[e.COLOR_DODGE]=u?"color-dodge":"source-over",o[e.COLOR_BURN]=u?"color-burn":"source-over",o[e.HARD_LIGHT]=u?"hard-light":"source-over",o[e.SOFT_LIGHT]=u?"soft-light":"source-over",o[e.DIFFERENCE]=u?"difference":"source-over",o[e.EXCLUSION]=u?"exclusion":"source-over",o[e.HUE]=u?"hue":"source-over",o[e.SATURATION]=u?"saturation":"source-over",o[e.COLOR]=u?"color":"source-over",o[e.LUMINOSITY]=u?"luminosity":"source-over",o};module.exports=o;
},{"../../BlendModes":14,"../../../device/CanvasFeatures":347}],56:[function(require,module,exports) {
var t=require("./utils/BlitImage"),e=require("../snapshot/CanvasSnapshot"),i=require("../../utils/Class"),s=require("../../const"),n=require("./utils/DrawImage"),a=require("./utils/GetBlendModes"),h=require("../ScaleModes"),r=require("../../display/canvas/Smoothing"),o=new i({initialize:function(e){this.game=e,this.type=s.CANVAS,this.drawCount=0,this.width=e.config.width,this.height=e.config.height,this.config={clearBeforeRender:e.config.clearBeforeRender,pixelArt:e.config.pixelArt,backgroundColor:e.config.backgroundColor,resolution:e.config.resolution,autoResize:e.config.autoResize,roundPixels:e.config.roundPixels},this.scaleMode=e.config.pixelArt?h.NEAREST:h.LINEAR,this.gameCanvas=e.canvas,this.gameContext=this.gameCanvas.getContext("2d"),this.currentContext=this.gameContext,this.drawImage=n(this.config.roundPixels),this.blitImage=t(this.config.roundPixels),this.blendModes=a(),this.currentAlpha=1,this.currentBlendMode=0,this.currentScaleMode=0,this.snapshotCallback=null,this.snapshotType=null,this.snapshotEncoder=null,this.init()},init:function(){this.resize(this.width,this.height)},resize:function(t,e){var i=this.config.resolution;this.width=t*i,this.height=e*i,this.gameCanvas.width=this.width,this.gameCanvas.height=this.height,this.config.autoResize&&(this.gameCanvas.style.width=this.width/i+"px",this.gameCanvas.style.height=this.height/i+"px"),this.scaleMode===h.NEAREST&&r.disable(this.gameContext)},onContextLost:function(){},onContextRestored:function(){},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(t){return this.currentBlendMode!==t&&(this.currentContext.globalCompositeOperation=t,this.currentBlendMode=t),this.currentBlendMode},setAlpha:function(t){return this.currentAlpha!==t&&(this.currentContext.globalAlpha=t,this.currentAlpha=t),this.currentAlpha},preRender:function(){var t=this.gameContext,e=this.config,i=this.width,s=this.height;e.clearBeforeRender&&t.clearRect(0,0,i,s),e.transparent||(t.fillStyle=e.backgroundColor.rgba,t.fillRect(0,0,i,s)),this.drawCount=0},render:function(t,e,i,s){var n=t.sys.context,a=0!==s.x||0!==s.y||s.width!==n.canvas.width||s.height!==n.canvas.height,h=e.list,r=this.config.resolution;this.currentContext=n,s.transparent||(n.fillStyle=s.backgroundColor.rgba,n.fillRect(s.x,s.y,s.width,s.height)),1!==this.currentAlpha&&(n.globalAlpha=1,this.currentAlpha=1),0!==this.currentBlendMode&&(n.globalCompositeOperation="source-over",this.currentBlendMode=0),this.currentScaleMode=0,this.drawCount+=h.length,a&&(n.save(),n.beginPath(),n.rect(s.x*r,s.y*r,s.width*r,s.height*r),n.clip());var o=s.matrix.matrix;n.setTransform(o[0],o[1],o[2],o[3],o[4],o[5]);for(var l=0;l<h.length;l++){var c=h[l];c.mask&&c.mask.preRenderCanvas(this,c,s),c.renderCanvas(this,c,i,s),c.mask&&c.mask.postRenderCanvas(this,c,s)}n.setTransform(1,0,0,1,0,0),(s._fadeAlpha>0||s._flashAlpha>0)&&(n.globalCompositeOperation="source-over",n.fillStyle="rgb("+255*s._fadeRed+","+255*s._fadeGreen+","+255*s._fadeBlue+")",n.globalAlpha=s._fadeAlpha,n.fillRect(s.x,s.y,s.width,s.height),n.fillStyle="rgb("+255*s._flashRed+","+255*s._flashGreen+","+255*s._flashBlue+")",n.globalAlpha=s._flashAlpha,n.fillRect(s.x,s.y,s.width,s.height),n.globalAlpha=1),a&&n.restore()},postRender:function(){var t=this.gameContext;t.globalAlpha=1,t.globalCompositeOperation="source-over",this.currentAlpha=1,this.currentBlendMode=0,this.snapshotCallback&&(this.snapshotCallback(e(this.gameCanvas,this.snapshotType,this.snapshotEncoder)),this.snapshotCallback=null)},snapshot:function(t,e,i){this.snapshotCallback=t,this.snapshotType=e,this.snapshotEncoder=i},destroy:function(){this.gameCanvas=null,this.gameContext=null,this.game=null}});module.exports=o;
},{"./utils/BlitImage":124,"../snapshot/CanvasSnapshot":109,"../../utils/Class":8,"../../const":12,"./utils/DrawImage":125,"./utils/GetBlendModes":126,"../ScaleModes":15,"../../display/canvas/Smoothing":67}],110:[function(require,module,exports) {
var r=function(r,e){return r>0&&0==(r&r-1)&&e>0&&0==(e&e-1)};module.exports=r;
},{}],116:[function(require,module,exports) {
module.exports={getTintFromFloats:function(t,n,e,o){return((255&(255*o|0))<<24|(255&(255*t|0))<<16|(255&(255*n|0))<<8|255&(255*e|0))>>>0},getTintAppendFloatAlpha:function(t,n){return((255&(255*n|0))<<24|t)>>>0},getTintAppendFloatAlphaAndSwap:function(t,n){return((255&(255*n|0))<<24|(255&(0|t))<<16|(255&(t>>8|0))<<8|255&(t>>16|0))>>>0},getFloatsFromUintRGB:function(t){return[(255&(t>>16|0))/255,(255&(t>>8|0))/255,(255&(0|t))/255]},getComponentCount:function(t,n){for(var e=0,o=0;o<t.length;++o){var r=t[o];r.type===n.FLOAT?e+=r.size:e+=1}return e}};
},{}],111:[function(require,module,exports) {
var e=function(e,t,a){t||(t="image/png"),a||(a=.92);var r=e.getContext("experimental-webgl"),i=new Uint8Array(r.drawingBufferWidth*r.drawingBufferHeight*4);r.readPixels(0,0,r.drawingBufferWidth,r.drawingBufferHeight,r.RGBA,r.UNSIGNED_BYTE,i);var g,d=document.createElement("canvas"),h=d.getContext("2d");d.width=r.drawingBufferWidth,d.height=r.drawingBufferHeight;for(var n=(g=h.getImageData(0,0,d.width,d.height)).data,f=0;f<d.height;f+=1)for(var w=0;w<d.width;w+=1){var u=4*((d.height-f)*d.width+w),o=4*(f*d.width+w);n[o+0]=i[u+0],n[o+1]=i[u+1],n[o+2]=i[u+2],n[o+3]=i[u+3]}h.putImageData(g,0,0);var m=d.toDataURL(t,a),v=new Image;return v.src=m,v};module.exports=e;
},{}],348:[function(require,module,exports) {
module.exports="#define SHADER_NAME PHASER_BITMAP_MASK_FS\n\nprecision mediump float;\n#define GLSLIFY 1\n\nuniform vec2 uResolution;\nuniform sampler2D uMainSampler;\nuniform sampler2D uMaskSampler;\nuniform bool uInvertMaskAlpha;\n\nvoid main()\n{\n    vec2 uv = gl_FragCoord.xy / uResolution;\n    vec4 mainColor = texture2D(uMainSampler, uv);\n    vec4 maskColor = texture2D(uMaskSampler, uv);\n    float alpha = mainColor.a;\n\n    if (!uInvertMaskAlpha)\n    {\n        alpha *= (maskColor.a);\n    }\n    else\n    {\n        alpha *= (1.0 - maskColor.a);\n    }\n    \n    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);\n}\n";
},{}],349:[function(require,module,exports) {
module.exports="#define SHADER_NAME PHASER_BITMAP_MASK_VS\n\nprecision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 inPosition;\n\nvoid main()\n{\n    gl_Position = vec4(inPosition, 0.0, 1.0);\n}\n";
},{}],350:[function(require,module,exports) {
var t=require("../../utils/Class"),e=require("./Utils"),r=new t({initialize:function(t){this.name="WebGLPipeline",this.game=t.game,this.view=t.game.canvas,this.resolution=t.game.config.resolution,this.width=t.game.config.width*this.resolution,this.height=t.game.config.height*this.resolution,this.gl=t.gl,this.vertexCount=0,this.vertexCapacity=t.vertexCapacity,this.renderer=t.renderer,this.vertexData=t.vertices?t.vertices:new ArrayBuffer(t.vertexCapacity*t.vertexSize),this.vertexBuffer=this.renderer.createVertexBuffer(t.vertices?t.vertices:this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=this.renderer.createProgram(t.vertShader,t.fragShader),this.attributes=t.attributes,this.vertexSize=t.vertexSize,this.topology=t.topology,this.bytes=new Uint8Array(this.vertexData),this.vertexComponentCount=e.getComponentCount(t.attributes,this.gl),this.flushLocked=!1},addAttribute:function(t,e,r,i,s){return this.attributes.push({name:t,size:e,type:this.renderer.glFormats[r],normalized:i,offset:s}),this},shouldFlush:function(){return this.vertexCount>=this.vertexCapacity},resize:function(t,e,r){return this.width=t*r,this.height=e*r,this},bind:function(){var t=this.gl,e=this.vertexBuffer,r=this.attributes,i=this.program,s=this.renderer,n=this.vertexSize;s.setProgram(i),s.setVertexBuffer(e);for(var h=0;h<r.length;++h){var o=r[h],a=t.getAttribLocation(i,o.name);a>=0?(t.enableVertexAttribArray(a),t.vertexAttribPointer(a,o.size,o.type,o.normalized,n,o.offset)):t.disableVertexAttribArray(a)}return this},onBind:function(){return this},onPreRender:function(){return this},onRender:function(){return this},onPostRender:function(){return this},flush:function(){if(this.flushLocked)return this;this.flushLocked=!0;var t=this.gl,e=this.vertexCount,r=this.topology,i=this.vertexSize;if(0!==e)return t.bufferSubData(t.ARRAY_BUFFER,0,this.bytes.subarray(0,e*i)),t.drawArrays(r,0,e),this.vertexCount=0,this.flushLocked=!1,this;this.flushLocked=!1},destroy:function(){var t=this.gl;return t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),delete this.program,delete this.vertexBuffer,delete this.gl,this},setFloat1:function(t,e){return this.renderer.setFloat1(this.program,t,e),this},setFloat2:function(t,e,r){return this.renderer.setFloat2(this.program,t,e,r),this},setFloat3:function(t,e,r,i){return this.renderer.setFloat3(this.program,t,e,r,i),this},setFloat4:function(t,e,r,i,s){return this.renderer.setFloat4(this.program,t,e,r,i,s),this},setInt1:function(t,e){return this.renderer.setInt1(this.program,t,e),this},setInt2:function(t,e,r){return this.renderer.setInt2(this.program,t,e,r),this},setInt3:function(t,e,r,i){return this.renderer.setInt3(this.program,t,e,r,i),this},setInt4:function(t,e,r,i,s){return this.renderer.setInt4(this.program,t,e,r,i,s),this},setMatrix2:function(t,e,r){return this.renderer.setMatrix2(this.program,t,e,r),this},setMatrix3:function(t,e,r){return this.renderer.setMatrix3(this.program,t,e,r),this},setMatrix4:function(t,e,r){return this.renderer.setMatrix4(this.program,t,e,r),this}});module.exports=r;
},{"../../utils/Class":8,"./Utils":116}],127:[function(require,module,exports) {
var e=require("../../../utils/Class"),r=require("../shaders/BitmapMask.frag"),t=require("../shaders/BitmapMask.vert"),i=require("../WebGLPipeline"),a=new e({Extends:i,initialize:function(e){i.call(this,{game:e.game,renderer:e.renderer,gl:e.renderer.gl,topology:e.topology?e.topology:e.renderer.gl.TRIANGLES,vertShader:e.vertShader?e.vertShader:t,fragShader:e.fragShader?e.fragShader:r,vertexCapacity:e.vertexCapacity?e.vertexCapacity:3,vertexSize:e.vertexSize?e.vertexSize:2*Float32Array.BYTES_PER_ELEMENT,vertices:new Float32Array([-1,1,-1,-7,7,1]).buffer,attributes:[{name:"inPosition",size:2,type:e.renderer.gl.FLOAT,normalized:!1,offset:0}]}),this.vertexViewF32=new Float32Array(this.vertexData),this.maxQuads=1,this.resolutionDirty=!0},onBind:function(){i.prototype.onBind.call(this);var e=this.renderer,r=this.program;return this.resolutionDirty&&(e.setFloat2(r,"uResolution",this.width,this.height),e.setInt1(r,"uMainSampler",0),e.setInt1(r,"uMaskSampler",1),this.resolutionDirty=!1),this},resize:function(e,r,t){return i.prototype.resize.call(this,e,r,t),this.resolutionDirty=!0,this},beginMask:function(e,r,t){var i=e.bitmapMask,a=this.renderer,s=this.gl,n=i.visible;i&&s&&(a.setFramebuffer(e.maskFramebuffer),s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT),i.visible=!0,i.renderWebGL(a,i,0,t),i.visible=n,a.flush(),a.setFramebuffer(e.mainFramebuffer),s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT))},endMask:function(e){var r=e.bitmapMask,t=this.renderer,i=this.gl;r&&(t.setFramebuffer(null),t.setPipeline(this),t.setTexture2D(e.maskTexture,1),t.setTexture2D(e.mainTexture,0),t.setInt1(this.program,"uInvertMaskAlpha",e.invertAlpha),i.drawArrays(this.topology,0,3))}});module.exports=a;
},{"../../../utils/Class":8,"../shaders/BitmapMask.frag":348,"../shaders/BitmapMask.vert":349,"../WebGLPipeline":350}],352:[function(require,module,exports) {
module.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,LINE_FX_TO:12,MOVE_FX_TO:13,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18};
},{}],353:[function(require,module,exports) {
"use strict";function n(n,t,x){x=x||2;var i,u,v,o,y,l,p,a=t&&t.length,h=a?t[0]*x:n.length,s=e(n,0,h,x,!0),c=[];if(!s)return c;if(a&&(s=f(n,t,s,x)),n.length>80*x){i=v=n[0],u=o=n[1];for(var Z=x;Z<h;Z+=x)y=n[Z],l=n[Z+1],y<i&&(i=y),l<u&&(u=l),y>v&&(v=y),l>o&&(o=l);p=Math.max(v-i,o-u)}return r(s,c,x,i,u,p),c}function e(n,e,t,r,x){var i,u;if(x===A(n,e,t,r)>0)for(i=e;i<t;i+=r)u=k(i,n[i],n[i+1],u);else for(i=t-r;i>=e;i-=r)u=k(i,n[i],n[i+1],u);return u&&d(u,u.next)&&(j(u),u=u.next),u}function t(n,e){if(!n)return n;e||(e=n);var t,r=n;do{if(t=!1,r.steiner||!d(r,r.next)&&0!==g(r.prev,r,r.next))r=r.next;else{if(j(r),(r=e=r.prev)===r.next)return null;t=!0}}while(t||r!==e);return e}function r(n,e,f,o,y,l,a){if(n){!a&&l&&p(n,o,y,l);for(var h,s,c=n;n.prev!==n.next;)if(h=n.prev,s=n.next,l?i(n,o,y,l):x(n))e.push(h.i/f),e.push(n.i/f),e.push(s.i/f),j(n),n=s.next,c=s.next;else if((n=s)===c){a?1===a?r(n=u(n,e,f),e,f,o,y,l,2):2===a&&v(n,e,f,o,y,l):r(t(n),e,f,o,y,l,1);break}}}function x(n){var e=n.prev,t=n,r=n.next;if(g(e,t,r)>=0)return!1;for(var x=n.next.next;x!==n.prev;){if(c(e.x,e.y,t.x,t.y,r.x,r.y,x.x,x.y)&&g(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function i(n,e,t,r){var x=n.prev,i=n,u=n.next;if(g(x,i,u)>=0)return!1;for(var v=x.x<i.x?x.x<u.x?x.x:u.x:i.x<u.x?i.x:u.x,f=x.y<i.y?x.y<u.y?x.y:u.y:i.y<u.y?i.y:u.y,o=x.x>i.x?x.x>u.x?x.x:u.x:i.x>u.x?i.x:u.x,y=x.y>i.y?x.y>u.y?x.y:u.y:i.y>u.y?i.y:u.y,l=h(v,f,e,t,r),p=h(o,y,e,t,r),a=n.nextZ;a&&a.z<=p;){if(a!==n.prev&&a!==n.next&&c(x.x,x.y,i.x,i.y,u.x,u.y,a.x,a.y)&&g(a.prev,a,a.next)>=0)return!1;a=a.nextZ}for(a=n.prevZ;a&&a.z>=l;){if(a!==n.prev&&a!==n.next&&c(x.x,x.y,i.x,i.y,u.x,u.y,a.x,a.y)&&g(a.prev,a,a.next)>=0)return!1;a=a.prevZ}return!0}function u(n,e,t){var r=n;do{var x=r.prev,i=r.next.next;!d(x,i)&&w(x,r,r.next,i)&&b(x,i)&&b(i,x)&&(e.push(x.i/t),e.push(r.i/t),e.push(i.i/t),j(r),j(r.next),r=n=i),r=r.next}while(r!==n);return r}function v(n,e,x,i,u,v){var f=n;do{for(var o=f.next.next;o!==f.prev;){if(f.i!==o.i&&Z(f,o)){var y=m(f,o);return f=t(f,f.next),y=t(y,y.next),r(f,e,x,i,u,v),void r(y,e,x,i,u,v)}o=o.next}f=f.next}while(f!==n)}function f(n,r,x,i){var u,v,f,l=[];for(u=0,v=r.length;u<v;u++)(f=e(n,r[u]*i,u<v-1?r[u+1]*i:n.length,i,!1))===f.next&&(f.steiner=!0),l.push(s(f));for(l.sort(o),u=0;u<l.length;u++)y(l[u],x),x=t(x,x.next);return x}function o(n,e){return n.x-e.x}function y(n,e){if(e=l(n,e)){var r=m(e,n);t(r,r.next)}}function l(n,e){var t,r=e,x=n.x,i=n.y,u=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var v=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(v<=x&&v>u){if(u=v,v===x){if(i===r.y)return r;if(i===r.next.y)return r.next}t=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!t)return null;if(x===u)return t.prev;var f,o=t,y=t.x,l=t.y,p=1/0;for(r=t.next;r!==o;)x>=r.x&&r.x>=y&&x!==r.x&&c(i<l?x:u,i,y,l,i<l?u:x,i,r.x,r.y)&&((f=Math.abs(i-r.y)/(x-r.x))<p||f===p&&r.x>t.x)&&b(r,n)&&(t=r,p=f),r=r.next;return t}function p(n,e,t,r){var x=n;do{null===x.z&&(x.z=h(x.x,x.y,e,t,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==n);x.prevZ.nextZ=null,x.prevZ=null,a(x)}function a(n){var e,t,r,x,i,u,v,f,o=1;do{for(t=n,n=null,i=null,u=0;t;){for(u++,r=t,v=0,e=0;e<o&&(v++,r=r.nextZ);e++);for(f=o;v>0||f>0&&r;)0!==v&&(0===f||!r||t.z<=r.z)?(x=t,t=t.nextZ,v--):(x=r,r=r.nextZ,f--),i?i.nextZ=x:n=x,x.prevZ=i,i=x;t=r}i.nextZ=null,o*=2}while(u>1);return n}function h(n,e,t,r,x){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-t)/x)|n<<8))|n<<4))|n<<2))|n<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)/x)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function s(n){var e=n,t=n;do{e.x<t.x&&(t=e),e=e.next}while(e!==n);return t}function c(n,e,t,r,x,i,u,v){return(x-u)*(e-v)-(n-u)*(i-v)>=0&&(n-u)*(r-v)-(t-u)*(e-v)>=0&&(t-u)*(i-v)-(x-u)*(r-v)>=0}function Z(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!z(n,e)&&b(n,e)&&b(e,n)&&M(n,e)}function g(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function d(n,e){return n.x===e.x&&n.y===e.y}function w(n,e,t,r){return!!(d(n,e)&&d(t,r)||d(n,r)&&d(t,e))||g(n,e,t)>0!=g(n,e,r)>0&&g(t,r,n)>0!=g(t,r,e)>0}function z(n,e){var t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&w(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function b(n,e){return g(n.prev,n,n.next)<0?g(n,e,n.next)>=0&&g(n,n.prev,e)>=0:g(n,e,n.prev)<0||g(n,n.next,e)<0}function M(n,e){var t=n,r=!1,x=(n.x+e.x)/2,i=(n.y+e.y)/2;do{t.y>i!=t.next.y>i&&t.next.y!==t.y&&x<(t.next.x-t.x)*(i-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next}while(t!==n);return r}function m(n,e){var t=new q(n.i,n.x,n.y),r=new q(e.i,e.x,e.y),x=n.next,i=e.prev;return n.next=e,e.prev=n,t.next=x,x.prev=t,r.next=t,t.prev=r,i.next=r,r.prev=i,r}function k(n,e,t,r){var x=new q(n,e,t);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function j(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function q(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(n,e,t,r){for(var x=0,i=e,u=t-r;i<t;i+=r)x+=(n[u]-n[i])*(n[i+1]+n[u+1]),u=i;return x}module.exports=n,n.deviation=function(n,e,t,r){var x=e&&e.length,i=x?e[0]*t:n.length,u=Math.abs(A(n,0,i,t));if(x)for(var v=0,f=e.length;v<f;v++){var o=e[v]*t,y=v<f-1?e[v+1]*t:n.length;u-=Math.abs(A(n,o,y,t))}var l=0;for(v=0;v<r.length;v+=3){var p=r[v]*t,a=r[v+1]*t,h=r[v+2]*t;l+=Math.abs((n[p]-n[h])*(n[a+1]-n[p+1])-(n[p]-n[a])*(n[h+1]-n[p+1]))}return 0===u&&0===l?0:Math.abs((l-u)/u)},n.flatten=function(n){for(var e=n[0][0].length,t={vertices:[],holes:[],dimensions:e},r=0,x=0;x<n.length;x++){for(var i=0;i<n[x].length;i++)for(var u=0;u<e;u++)t.vertices.push(n[x][i][u]);x>0&&(r+=n[x-1].length,t.holes.push(r))}return t};
},{}],395:[function(require,module,exports) {
var t={modelMatrixDirty:!1,viewMatrixDirty:!1,projectionMatrixDirty:!1,modelMatrix:null,viewMatrix:null,projectionMatrix:null,mvpInit:function(){return this.modelMatrixDirty=!0,this.viewMatrixDirty=!0,this.projectionMatrixDirty=!0,this.modelMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},mvpUpdate:function(){var t=this.program;return this.modelMatrixDirty&&(this.renderer.setMatrix4(t,"uModelMatrix",!1,this.modelMatrix),this.modelMatrixDirty=!1),this.viewMatrixDirty&&(this.renderer.setMatrix4(t,"uViewMatrix",!1,this.viewMatrix),this.viewMatrixDirty=!1),this.projectionMatrixDirty&&(this.renderer.setMatrix4(t,"uProjectionMatrix",!1,this.projectionMatrix),this.projectionMatrixDirty=!1),this},modelIdentity:function(){var t=this.modelMatrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this.modelMatrixDirty=!0,this},modelScale:function(t,i,r){var e=this.modelMatrix;return e[0]=e[0]*t,e[1]=e[1]*t,e[2]=e[2]*t,e[3]=e[3]*t,e[4]=e[4]*i,e[5]=e[5]*i,e[6]=e[6]*i,e[7]=e[7]*i,e[8]=e[8]*r,e[9]=e[9]*r,e[10]=e[10]*r,e[11]=e[11]*r,this.modelMatrixDirty=!0,this},modelTranslate:function(t,i,r){var e=this.modelMatrix;return e[12]=e[0]*t+e[4]*i+e[8]*r+e[12],e[13]=e[1]*t+e[5]*i+e[9]*r+e[13],e[14]=e[2]*t+e[6]*i+e[10]*r+e[14],e[15]=e[3]*t+e[7]*i+e[11]*r+e[15],this.modelMatrixDirty=!0,this},modelRotateX:function(t){var i=this.modelMatrix,r=Math.sin(t),e=Math.cos(t),a=i[4],o=i[5],n=i[6],s=i[7],h=i[8],M=i[9],x=i[10],v=i[11];return i[4]=a*e+h*r,i[5]=o*e+M*r,i[6]=n*e+x*r,i[7]=s*e+v*r,i[8]=h*e-a*r,i[9]=M*e-o*r,i[10]=x*e-n*r,i[11]=v*e-s*r,this.modelMatrixDirty=!0,this},modelRotateY:function(t){var i=this.modelMatrix,r=Math.sin(t),e=Math.cos(t),a=i[0],o=i[1],n=i[2],s=i[3],h=i[8],M=i[9],x=i[10],v=i[11];return i[0]=a*e-h*r,i[1]=o*e-M*r,i[2]=n*e-x*r,i[3]=s*e-v*r,i[8]=a*r+h*e,i[9]=o*r+M*e,i[10]=n*r+x*e,i[11]=s*r+v*e,this.modelMatrixDirty=!0,this},modelRotateZ:function(t){var i=this.modelMatrix,r=Math.sin(t),e=Math.cos(t),a=i[0],o=i[1],n=i[2],s=i[3],h=i[4],M=i[5],x=i[6],v=i[7];return i[0]=a*e+h*r,i[1]=o*e+M*r,i[2]=n*e+x*r,i[3]=s*e+v*r,i[4]=h*e-a*r,i[5]=M*e-o*r,i[6]=x*e-n*r,i[7]=v*e-s*r,this.modelMatrixDirty=!0,this},viewIdentity:function(){var t=this.viewMatrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this.viewMatrixDirty=!0,this},viewScale:function(t,i,r){var e=this.viewMatrix;return e[0]=e[0]*t,e[1]=e[1]*t,e[2]=e[2]*t,e[3]=e[3]*t,e[4]=e[4]*i,e[5]=e[5]*i,e[6]=e[6]*i,e[7]=e[7]*i,e[8]=e[8]*r,e[9]=e[9]*r,e[10]=e[10]*r,e[11]=e[11]*r,this.viewMatrixDirty=!0,this},viewTranslate:function(t,i,r){var e=this.viewMatrix;return e[12]=e[0]*t+e[4]*i+e[8]*r+e[12],e[13]=e[1]*t+e[5]*i+e[9]*r+e[13],e[14]=e[2]*t+e[6]*i+e[10]*r+e[14],e[15]=e[3]*t+e[7]*i+e[11]*r+e[15],this.viewMatrixDirty=!0,this},viewRotateX:function(t){var i=this.viewMatrix,r=Math.sin(t),e=Math.cos(t),a=i[4],o=i[5],n=i[6],s=i[7],h=i[8],M=i[9],x=i[10],v=i[11];return i[4]=a*e+h*r,i[5]=o*e+M*r,i[6]=n*e+x*r,i[7]=s*e+v*r,i[8]=h*e-a*r,i[9]=M*e-o*r,i[10]=x*e-n*r,i[11]=v*e-s*r,this.viewMatrixDirty=!0,this},viewRotateY:function(t){var i=this.viewMatrix,r=Math.sin(t),e=Math.cos(t),a=i[0],o=i[1],n=i[2],s=i[3],h=i[8],M=i[9],x=i[10],v=i[11];return i[0]=a*e-h*r,i[1]=o*e-M*r,i[2]=n*e-x*r,i[3]=s*e-v*r,i[8]=a*r+h*e,i[9]=o*r+M*e,i[10]=n*r+x*e,i[11]=s*r+v*e,this.viewMatrixDirty=!0,this},viewRotateZ:function(t){var i=this.viewMatrix,r=Math.sin(t),e=Math.cos(t),a=i[0],o=i[1],n=i[2],s=i[3],h=i[4],M=i[5],x=i[6],v=i[7];return i[0]=a*e+h*r,i[1]=o*e+M*r,i[2]=n*e+x*r,i[3]=s*e+v*r,i[4]=h*e-a*r,i[5]=M*e-o*r,i[6]=x*e-n*r,i[7]=v*e-s*r,this.viewMatrixDirty=!0,this},viewLoad2D:function(t){var i=this.viewMatrix;return i[0]=t[0],i[1]=t[1],i[2]=0,i[3]=0,i[4]=t[2],i[5]=t[3],i[6]=0,i[7]=0,i[8]=t[4],i[9]=t[5],i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this.viewMatrixDirty=!0,this},viewLoad:function(t){var i=this.viewMatrix;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],this.viewMatrixDirty=!0,this},projIdentity:function(){var t=this.projectionMatrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this.projectionMatrixDirty=!0,this},projOrtho:function(t,i,r,e,a,o){var n=this.projectionMatrix,s=1/(t-i),h=1/(r-e),M=1/(a-o);return n[0]=-2*s,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*h,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*M,n[11]=0,n[12]=(t+i)*s,n[13]=(e+r)*h,n[14]=(o+a)*M,n[15]=1,this.projectionMatrixDirty=!0,this},projPersp:function(t,i,r,e){var a=this.projectionMatrix,o=1/Math.tan(t/2),n=1/(r-e);return a[0]=o/i,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=o,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(e+r)*n,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*e*r*n,a[15]=0,this.projectionMatrixDirty=!0,this}};module.exports=t;
},{}],354:[function(require,module,exports) {
module.exports="#define SHADER_NAME PHASER_FLAT_TINT_FS\n\nprecision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 outTint;\n\nvoid main() {\n    gl_FragColor = vec4(outTint.rgb * outTint.a, outTint.a);\n}\n";
},{}],355:[function(require,module,exports) {
module.exports="#define SHADER_NAME PHASER_FLAT_TINT_VS\n\nprecision mediump float;\n#define GLSLIFY 1\n\nuniform mat4 uProjectionMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uModelMatrix;\n\nattribute vec2 inPosition;\nattribute vec4 inTint;\n\nvarying vec4 outTint;\n\nvoid main () {\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(inPosition, 1.0, 1.0);\n    outTint = inTint;\n}\n";
},{}],128:[function(require,module,exports) {
var t=require("../../../utils/Class"),e=require("../../../gameobjects/graphics/Commands"),i=require("../../../geom/polygon/Earcut"),r=require("./components/ModelViewProjection"),a=require("../shaders/FlatTint.frag"),n=require("../shaders/FlatTint.vert"),h=require("../Utils"),s=require("../WebGLPipeline"),o=function(t,e,i,r,a){this.x=t,this.y=e,this.width=i,this.rgb=r,this.alpha=a},l=function(t,e,i,r,a){this.points=[],this.pointsLength=1,this.points[0]=new o(t,e,i,r,a)},p=new Float32Array([1,0,0,1,0,0]),c=new Float32Array(6e3),u=0,x=[],v=new t({Extends:s,Mixins:[r],initialize:function(t){s.call(this,{game:t.game,renderer:t.renderer,gl:t.renderer.gl,topology:t.topology?t.topology:t.renderer.gl.TRIANGLES,vertShader:t.vertShader?t.vertShader:n,fragShader:t.fragShader?t.fragShader:a,vertexCapacity:t.vertexCapcity?t.vertexCapacity:12e3,vertexSize:t.vertexSize?t.vertexSize:2*Float32Array.BYTES_PER_ELEMENT+4*Uint8Array.BYTES_PER_ELEMENT,attributes:[{name:"inPosition",size:2,type:t.renderer.gl.FLOAT,normalized:!1,offset:0},{name:"inTint",size:4,type:t.renderer.gl.UNSIGNED_BYTE,normalized:!0,offset:2*Float32Array.BYTES_PER_ELEMENT}]}),this.vertexViewF32=new Float32Array(this.vertexData),this.vertexViewU32=new Uint32Array(this.vertexData),this.tempTriangle=[{x:0,y:0,width:0,rgb:16777215,alpha:1},{x:0,y:0,width:0,rgb:16777215,alpha:1},{x:0,y:0,width:0,rgb:16777215,alpha:1},{x:0,y:0,width:0,rgb:16777215,alpha:1}],this.polygonCache=[],this.mvpInit()},onBind:function(){return s.prototype.onBind.call(this),this.mvpUpdate(),this},resize:function(t,e,i){return s.prototype.resize.call(this,t,e,i),this.projOrtho(0,this.width,this.height,0,-1e3,1e3),this},batchFillRect:function(t,e,i,r,a,n,s,o,l,p,c,u,x,v,d,g,b,f){this.renderer.setPipeline(this),this.vertexCount+6>this.vertexCapacity&&this.flush();var w=this.vertexViewF32,T=this.vertexViewU32,y=this.vertexCount*this.vertexComponentCount,C=n+o,E=s+l,m=f[0],A=f[1],S=f[2],F=f[3],L=u*m+x*S,k=u*A+x*F,P=v*m+d*S,_=v*A+d*F,I=g*m+b*S+f[4],R=g*A+b*F+f[5],V=n*L+s*P+I,M=n*k+s*_+R,N=n*L+E*P+I,O=n*k+E*_+R,B=C*L+E*P+I,U=C*k+E*_+R,z=C*L+s*P+I,q=C*k+s*_+R,Y=h.getTintAppendFloatAlphaAndSwap(p,c);w[y+0]=V,w[y+1]=M,T[y+2]=Y,w[y+3]=N,w[y+4]=O,T[y+5]=Y,w[y+6]=B,w[y+7]=U,T[y+8]=Y,w[y+9]=V,w[y+10]=M,T[y+11]=Y,w[y+12]=B,w[y+13]=U,T[y+14]=Y,w[y+15]=z,w[y+16]=q,T[y+17]=Y,this.vertexCount+=6},batchFillTriangle:function(t,e,i,r,a,n,s,o,l,p,c,u,x,v,d,g,b,f,w,T){this.renderer.setPipeline(this),this.vertexCount+3>this.vertexCapacity&&this.flush();var y=this.vertexViewF32,C=this.vertexViewU32,E=this.vertexCount*this.vertexComponentCount,m=T[0],A=T[1],S=T[2],F=T[3],L=v*m+d*S,k=v*A+d*F,P=g*m+b*S,_=g*A+b*F,I=f*m+w*S+T[4],R=f*A+w*F+T[5],V=n*L+s*P+I,M=n*k+s*_+R,N=o*L+l*P+I,O=o*k+l*_+R,B=p*L+c*P+I,U=p*k+c*_+R,z=h.getTintAppendFloatAlphaAndSwap(u,x);y[E+0]=V,y[E+1]=M,C[E+2]=z,y[E+3]=N,y[E+4]=O,C[E+5]=z,y[E+6]=B,y[E+7]=U,C[E+8]=z,this.vertexCount+=3},batchStrokeTriangle:function(t,e,i,r,a,n,h,s,o,l,p,c,u,x,v,d,g,b,f,w,T){var y=this.tempTriangle;y[0].x=n,y[0].y=h,y[0].width=c,y[0].rgb=u,y[0].alpha=x,y[1].x=s,y[1].y=o,y[1].width=c,y[1].rgb=u,y[1].alpha=x,y[2].x=l,y[2].y=p,y[2].width=c,y[2].rgb=u,y[2].alpha=x,y[3].x=n,y[3].y=h,y[3].width=c,y[3].rgb=u,y[3].alpha=x,this.batchStrokePath(t,e,i,r,a,y,c,u,x,v,d,g,b,f,w,!1,T)},batchFillPath:function(t,e,r,a,n,s,o,l,p,c,u,x,v,d,g){this.renderer.setPipeline(this);for(var b,f,w,T,y,C,E,m,A,S,F,L,k,P,_,I,R,V=s.length,M=this.polygonCache,N=this.vertexViewF32,O=this.vertexViewU32,B=0,U=g[0],z=g[1],q=g[2],Y=g[3],G=p*U+c*q,D=p*z+c*Y,X=u*U+x*q,H=u*z+x*Y,j=v*U+d*q+g[4],K=v*z+d*Y+g[5],W=h.getTintAppendFloatAlphaAndSwap(o,l),J=0;J<V;++J)f=s[J],M.push(f.x,f.y);V=(b=i(M)).length;for(var Q=0;Q<V;Q+=3)w=2*b[Q+0],T=2*b[Q+1],y=2*b[Q+2],this.vertexCount+3>this.vertexCapacity&&this.flush(),B=this.vertexCount*this.vertexComponentCount,L=(C=M[w+0])*G+(E=M[w+1])*X+j,k=C*D+E*H+K,P=(m=M[T+0])*G+(A=M[T+1])*X+j,_=m*D+A*H+K,I=(S=M[y+0])*G+(F=M[y+1])*X+j,R=S*D+F*H+K,N[B+0]=L,N[B+1]=k,O[B+2]=W,N[B+3]=P,N[B+4]=_,O[B+5]=W,N[B+6]=I,N[B+7]=R,O[B+8]=W,this.vertexCount+=3;M.length=0},batchStrokePath:function(t,e,i,r,a,n,s,o,l,p,c,u,x,v,d,g,b){var f,w;this.renderer.setPipeline(this);for(var T,y,C,E,m=n.length,A=this.polygonCache,S=this.vertexViewF32,F=this.vertexViewU32,L=h.getTintAppendFloatAlphaAndSwap,k=0;k+1<m;k+=1)f=n[k],w=n[k+1],E=this.batchLine(t,e,i,r,a,f.x,f.y,w.x,w.y,f.width/2,w.width/2,f.rgb,w.rgb,l,p,c,u,x,v,d,b),A.push(E);for(var P=1,_=A.length;P<_;++P)this.vertexCount+6>this.vertexCapacity&&this.flush(),T=A[P-1]||A[_-1],y=A[P],S[(C=this.vertexCount*this.vertexComponentCount)+0]=T[6],S[C+1]=T[7],F[C+2]=L(T[8],l),S[C+3]=T[0],S[C+4]=T[1],F[C+5]=L(T[2],l),S[C+6]=y[9],S[C+7]=y[10],F[C+8]=L(y[11],l),S[C+9]=T[0],S[C+10]=T[1],F[C+11]=L(T[2],l),S[C+12]=T[6],S[C+13]=T[7],F[C+14]=L(T[8],l),S[C+15]=y[3],S[C+16]=y[4],F[C+17]=L(y[5],l),this.vertexCount+=6;A.length=0},batchLine:function(t,e,i,r,a,n,s,o,l,p,c,u,x,v,d,g,b,f,w,T,y){this.renderer.setPipeline(this),this.vertexCount+6>this.vertexCapacity&&this.flush();var C=y[0],E=y[1],m=y[2],A=y[3],S=d*C+g*m,F=d*E+g*A,L=b*C+f*m,k=b*E+f*A,P=w*C+T*m+y[4],_=w*E+T*A+y[5],I=this.vertexViewF32,R=this.vertexViewU32,V=o-n,M=l-s,N=Math.sqrt(V*V+M*M),O=p*(l-s)/N,B=p*(n-o)/N,U=c*(l-s)/N,z=c*(n-o)/N,q=o-U,Y=l-z,G=n-O,D=s-B,X=o+U,H=l+z,j=n+O,K=s+B,W=q*S+Y*L+P,J=q*F+Y*k+_,Q=G*S+D*L+P,Z=G*F+D*k+_,$=X*S+H*L+P,tt=X*F+H*k+_,et=j*S+K*L+P,it=j*F+K*k+_,rt=h.getTintAppendFloatAlphaAndSwap,at=rt(u,v),nt=rt(x,v),ht=this.vertexCount*this.vertexComponentCount;return I[ht+0]=W,I[ht+1]=J,R[ht+2]=nt,I[ht+3]=Q,I[ht+4]=Z,R[ht+5]=at,I[ht+6]=$,I[ht+7]=tt,R[ht+8]=nt,I[ht+9]=Q,I[ht+10]=Z,R[ht+11]=at,I[ht+12]=et,I[ht+13]=it,R[ht+14]=at,I[ht+15]=$,I[ht+16]=tt,R[ht+17]=nt,this.vertexCount+=6,[W,J,x,Q,Z,u,$,tt,x,et,it,u]},batchGraphics:function(t,i){if(!(t.commandBuffer.length<=0)){this.renderer.setPipeline(this);var r,a,n=i.scrollX*t.scrollFactorX,h=i.scrollY*t.scrollFactorY,s=t.x-n,v=t.y-h,d=t.scaleX,g=t.scaleY,b=-t.rotation,f=t.commandBuffer,w=t.alpha,T=1,y=1,C=0,E=0,m=1,A=i.matrix.matrix,S=null,F=0,L=0,k=0,P=0,_=0,I=0,R=0,V=0,M=0,N=0,O=null,B=Math.sin,U=Math.cos,z=2*Math.PI,q=B(b),Y=U(b),G=Y*d,D=-q*d,X=q*g,H=Y*g,j=s,K=v,W=A[0],J=A[1],Q=A[2],Z=A[3],$=G*W+D*Q,tt=G*J+D*Z,et=X*W+H*Q,it=X*J+H*Z,rt=j*W+K*Q+A[4],at=j*J+K*Z+A[5];x.length=0;for(var nt=0,ht=f.length;nt<ht;++nt)switch(Z=f[nt]){case e.ARC:for(F=0,_=f[nt+1],I=f[nt+2],R=f[nt+3],V=f[nt+4],M=f[nt+5],N=f[nt+6],null===S&&(S=new l(_+U(V)*R,I+B(V)*R,m,C,T*w),x.push(S),F+=.01),M-=V,N?M<-z?M=-z:M>0&&(M=M%z-z):M>z?M=z:M<0&&(M=z+M%z);F<1;)L=_+U(P=M*F+V)*R,k=I+B(P)*R,S.points.push(new o(L,k,m,C,T*w)),F+=.01;L=_+U(P=M+V)*R,k=I+B(P)*R,S.points.push(new o(L,k,m,C,T*w)),nt+=6;break;case e.LINE_STYLE:m=f[nt+1],C=f[nt+2],T=f[nt+3],nt+=3;break;case e.FILL_STYLE:E=f[nt+1],y=f[nt+2],nt+=2;break;case e.BEGIN_PATH:x.length=0,S=null;break;case e.CLOSE_PATH:S&&S.points.length&&S.points.push(S.points[0]);break;case e.FILL_PATH:for(r=0,a=x.length;r<a;++r)this.batchFillPath(s,v,d,g,b,x[r].points,E,y*w,$,tt,et,it,rt,at,p);break;case e.STROKE_PATH:for(r=0,a=x.length;r<a;++r)O=x[r],this.batchStrokePath(s,v,d,g,b,O.points,m,C,T*w,$,tt,et,it,rt,at,O===this._lastPath,p);break;case e.FILL_RECT:this.batchFillRect(s,v,d,g,b,f[nt+1],f[nt+2],f[nt+3],f[nt+4],E,y*w,$,tt,et,it,rt,at,p),nt+=4;break;case e.FILL_TRIANGLE:this.batchFillTriangle(s,v,d,g,b,f[nt+1],f[nt+2],f[nt+3],f[nt+4],f[nt+5],f[nt+6],E,y*w,$,tt,et,it,rt,at,p),nt+=6;break;case e.STROKE_TRIANGLE:this.batchStrokeTriangle(s,v,d,g,b,f[nt+1],f[nt+2],f[nt+3],f[nt+4],f[nt+5],f[nt+6],m,C,T*w,$,tt,et,it,rt,at,p),nt+=6;break;case e.LINE_TO:null!==S?S.points.push(new o(f[nt+1],f[nt+2],m,C,T*w)):(S=new l(f[nt+1],f[nt+2],m,C,T*w),x.push(S)),nt+=2;break;case e.MOVE_TO:S=new l(f[nt+1],f[nt+2],m,C,T*w),x.push(S),nt+=2;break;case e.LINE_FX_TO:null!==S?S.points.push(new o(f[nt+1],f[nt+2],f[nt+3],f[nt+4],f[nt+5]*w)):(S=new l(f[nt+1],f[nt+2],f[nt+3],f[nt+4],f[nt+5]*w),x.push(S)),nt+=5;break;case e.MOVE_FX_TO:S=new l(f[nt+1],f[nt+2],f[nt+3],f[nt+4],f[nt+5]*w),x.push(S),nt+=5;break;case e.SAVE:c[u+0]=p[0],c[u+1]=p[1],c[u+2]=p[2],c[u+3]=p[3],c[u+4]=p[4],c[u+5]=p[5],u+=6;break;case e.RESTORE:u-=6,p[0]=c[u+0],p[1]=c[u+1],p[2]=c[u+2],p[3]=c[u+3],p[4]=c[u+4],p[5]=c[u+5];break;case e.TRANSLATE:_=f[nt+1],I=f[nt+2],p[4]=p[0]*_+p[2]*I+p[4],p[5]=p[1]*_+p[3]*I+p[5],nt+=2;break;case e.SCALE:_=f[nt+1],I=f[nt+2],p[0]*=_,p[1]*=_,p[2]*=I,p[3]*=I,nt+=2;break;case e.ROTATE:_=B(I=f[nt+1]),I=U(I),G=p[0],D=p[1],X=p[2],H=p[3],p[0]=I*G+_*X,p[1]=I*D+_*H,p[2]=-_*G+I*X,p[3]=-_*D+I*H,nt+=1;break;default:console.error("Phaser: Invalid Graphics Command ID "+Z)}}},drawStaticTilemapLayer:function(){},drawEmitterManager:function(){},drawBlitter:function(){},batchSprite:function(){},batchMesh:function(){},batchBitmapText:function(){},batchDynamicBitmapText:function(){},batchText:function(){},batchDynamicTilemapLayer:function(){},batchTileSprite:function(){}});module.exports=v;
},{"../../../utils/Class":8,"../../../gameobjects/graphics/Commands":352,"../../../geom/polygon/Earcut":353,"./components/ModelViewProjection":395,"../shaders/FlatTint.frag":354,"../shaders/FlatTint.vert":355,"../Utils":116,"../WebGLPipeline":350}],351:[function(require,module,exports) {
module.exports="#define SHADER_NAME PHASER_FORWARD_DIFFUSE_FS\n\nprecision mediump float;\n#define GLSLIFY 1\n\nstruct Light\n{\n    vec2 position;\n    vec3 color;\n    float intensity;\n    float radius;\n};\n\nconst int kMaxLights = %LIGHT_COUNT%;\n\nuniform vec4 uCamera; /* x, y, rotation, zoom */\nuniform vec2 uResolution;\nuniform sampler2D uMainSampler;\nuniform sampler2D uNormSampler;\nuniform vec3 uAmbientLightColor;\nuniform Light uLights[kMaxLights];\n\nvarying vec2 outTexCoord;\nvarying vec4 outTint;\n\nvoid main()\n{\n    vec3 finalColor = vec3(0.0, 0.0, 0.0);\n    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.rgb * outTint.a, outTint.a);\n    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;\n    vec3 normal = normalize(vec3(normalMap * 2.0 - 1.0));\n    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;\n\n    for (int index = 0; index < kMaxLights; ++index)\n    {\n        Light light = uLights[index];\n        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);\n        vec3 lightNormal = normalize(lightDir);\n        float distToSurf = length(lightDir) * uCamera.w;\n        float diffuseFactor = max(dot(normal, lightNormal), 0.0);\n        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;\n        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);\n        vec3 diffuse = light.color * diffuseFactor;\n        finalColor += (attenuation * diffuse) * light.intensity;\n    }\n\n    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);\n    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);\n\n}\n";
},{}],356:[function(require,module,exports) {
module.exports="#define SHADER_NAME PHASER_TEXTURE_TINT_FS\n\nprecision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D uMainSampler;\n\nvarying vec2 outTexCoord;\nvarying vec4 outTint;\n\nvoid main() \n{\n    vec4 texel = texture2D(uMainSampler, outTexCoord);\n    texel *= vec4(outTint.rgb * outTint.a, outTint.a);\n    gl_FragColor = texel;\n}\n";
},{}],357:[function(require,module,exports) {
module.exports="#define SHADER_NAME PHASER_TEXTURE_TINT_VS\n\nprecision mediump float;\n#define GLSLIFY 1\n\nuniform mat4 uProjectionMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uModelMatrix;\n\nattribute vec2 inPosition;\nattribute vec2 inTexCoord;\nattribute vec4 inTint;\n\nvarying vec2 outTexCoord;\nvarying vec4 outTint;\n\nvoid main () \n{\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(inPosition, 1.0, 1.0);\n    outTexCoord = inTexCoord;\n    outTint = inTint;\n}\n\n";
},{}],130:[function(require,module,exports) {
var t=require("../../../utils/Class"),e=require("./components/ModelViewProjection"),i=require("../shaders/TextureTint.frag"),r=require("../shaders/TextureTint.vert"),s=require("../Utils"),h=require("../WebGLPipeline"),a=new t({Extends:h,Mixins:[e],initialize:function(t){h.call(this,{game:t.game,renderer:t.renderer,gl:t.renderer.gl,topology:t.topology?t.topology:t.renderer.gl.TRIANGLES,vertShader:t.vertShader?t.vertShader:r,fragShader:t.fragShader?t.fragShader:i,vertexCapacity:t.vertexCapacity?t.vertexCapacity:12e3,vertexSize:t.vertexSize?t.vertexSize:2*Float32Array.BYTES_PER_ELEMENT+2*Float32Array.BYTES_PER_ELEMENT+4*Uint8Array.BYTES_PER_ELEMENT,attributes:[{name:"inPosition",size:2,type:t.renderer.gl.FLOAT,normalized:!1,offset:0},{name:"inTexCoord",size:2,type:t.renderer.gl.FLOAT,normalized:!1,offset:2*Float32Array.BYTES_PER_ELEMENT},{name:"inTint",size:4,type:t.renderer.gl.UNSIGNED_BYTE,normalized:!0,offset:4*Float32Array.BYTES_PER_ELEMENT}]}),this.vertexViewF32=new Float32Array(this.vertexData),this.vertexViewU32=new Uint32Array(this.vertexData),this.maxQuads=2e3,this.batches=[],this.mvpInit()},setTexture2D:function(t,e){if(!t)return this;var i=this.batches;0===i.length&&this.pushBatch();var r=i[i.length-1];return e>0?(r.textures[e-1]&&r.textures[e-1]!==t&&this.pushBatch(),i[i.length-1].textures[e-1]=t):(null!==r.texture&&r.texture!==t&&this.pushBatch(),i[i.length-1].texture=t),this},pushBatch:function(){var t={first:this.vertexCount,texture:null,textures:[]};this.batches.push(t)},flush:function(){if(this.flushLocked)return this;this.flushLocked=!0;var t,e,i,r=this.gl,s=this.renderer,h=this.vertexCount,a=this.topology,n=this.vertexSize,o=this.batches,l=0,x=null;if(0===o.length||0===h)return this.flushLocked=!1,this;r.bufferSubData(r.ARRAY_BUFFER,0,this.bytes.subarray(0,h*n));for(var u=0;u<o.length-1;++u){if(x=o[u],t=o[u+1],x.textures.length>0){for(e=0;e<x.textures.length;++e)(i=x.textures[e])&&s.setTexture2D(i,1+e);r.activeTexture(r.TEXTURE0)}l=t.first-x.first,null===x.texture||l<=0||(s.setTexture2D(x.texture,0),r.drawArrays(a,x.first,l))}if((x=o[o.length-1]).textures.length>0){for(e=0;e<x.textures.length;++e)(i=x.textures[e])&&s.setTexture2D(i,1+e);r.activeTexture(r.TEXTURE0)}return l=h-x.first,x.texture&&l>0&&(s.setTexture2D(x.texture,0),r.drawArrays(a,x.first,l)),this.vertexCount=0,o.length=0,this.pushBatch(),this.flushLocked=!1,this},onBind:function(){return h.prototype.onBind.call(this),this.mvpUpdate(),0===this.batches.length&&this.pushBatch(),this},resize:function(t,e,i){return h.prototype.resize.call(this,t,e,i),this.projOrtho(0,this.width,this.height,0,-1e3,1e3),this},drawStaticTilemapLayer:function(t){if(t.vertexCount>0){var e=this.vertexBuffer,i=this.gl,r=this.renderer,s=t.tileset.image.get();r.currentPipeline&&r.currentPipeline.vertexCount>0&&r.flush(),this.vertexBuffer=t.vertexBuffer,r.setPipeline(this),r.setTexture2D(s.source.glTexture,0),i.drawArrays(this.topology,0,t.vertexCount),this.vertexBuffer=e}this.viewIdentity(),this.modelIdentity()},drawEmitterManager:function(t,e){this.renderer.setPipeline(this);var i=this.renderer.config.roundPixels,r=t.emitters.list,s=r.length,h=this.vertexViewF32,a=this.vertexViewU32,n=this.renderer,o=this.maxQuads,l=e.scrollX,x=e.scrollY,u=e.matrix.matrix,c=u[0],v=u[1],p=u[2],d=u[3],f=u[4],g=u[5],T=Math.sin,y=Math.cos,C=this.vertexComponentCount,m=this.vertexCapacity,w=t.defaultFrame.source.glTexture;this.setTexture2D(w,0);for(var Y=0;Y<s;++Y){var F=r[Y],X=F.alive,_=X.length,B=Math.ceil(_/o),A=0,L=l*F.scrollFactorX,E=x*F.scrollFactorY;if(F.visible&&0!==_){n.setBlendMode(F.blendMode),this.vertexCount>=m&&(this.flush(),this.setTexture2D(w,0));for(var R=0;R<B;++R){for(var b=Math.min(_,o),M=0;M<b;++M){var P=X[A+M];if(!(P.alpha<=0)){var D=P.frame,S=D.uvs,z=-D.halfWidth,V=-D.halfHeight,U=P.color,O=z+D.width,I=V+D.height,N=T(P.rotation),k=y(P.rotation),q=k*P.scaleX,H=-N*P.scaleX,G=N*P.scaleY,Q=k*P.scaleY,W=P.x-L*P.scrollFactorX,j=P.y-E*P.scrollFactorY,J=q*c+H*p,K=q*v+H*d,Z=G*c+Q*p,$=G*v+Q*d,tt=W*c+j*p+f,et=W*v+j*d+g,it=z*J+V*Z+tt,rt=z*K+V*$+et,st=z*J+I*Z+tt,ht=z*K+I*$+et,at=O*J+I*Z+tt,nt=O*K+I*$+et,ot=O*J+V*Z+tt,lt=O*K+V*$+et,xt=this.vertexCount*C;i&&(it|=0,rt|=0,st|=0,ht|=0,at|=0,nt|=0,ot|=0,lt|=0),h[xt+0]=it,h[xt+1]=rt,h[xt+2]=S.x0,h[xt+3]=S.y0,a[xt+4]=U,h[xt+5]=st,h[xt+6]=ht,h[xt+7]=S.x1,h[xt+8]=S.y1,a[xt+9]=U,h[xt+10]=at,h[xt+11]=nt,h[xt+12]=S.x2,h[xt+13]=S.y2,a[xt+14]=U,h[xt+15]=it,h[xt+16]=rt,h[xt+17]=S.x0,h[xt+18]=S.y0,a[xt+19]=U,h[xt+20]=at,h[xt+21]=nt,h[xt+22]=S.x2,h[xt+23]=S.y2,a[xt+24]=U,h[xt+25]=ot,h[xt+26]=lt,h[xt+27]=S.x3,h[xt+28]=S.y3,a[xt+29]=U,this.vertexCount+=6}}A+=b,_-=b,this.vertexCount>=m&&(this.flush(),this.setTexture2D(w,0))}}}this.setTexture2D(w,0)},drawBlitter:function(t,e){this.renderer.setPipeline(this);for(var i=this.renderer.config.roundPixels,r=s.getTintAppendFloatAlpha,h=this.vertexViewF32,a=this.vertexViewU32,n=t.getRenderList(),o=n.length,l=e.matrix.matrix,x=l[0],u=l[1],c=l[2],v=l[3],p=l[4],d=l[5],f=e.scrollX*t.scrollFactorX,g=e.scrollY*t.scrollFactorY,T=Math.ceil(o/this.maxQuads),y=0,C=t.x-f,m=t.y-g,w=0;w<T;++w){for(var Y=Math.min(o,this.maxQuads),F=0;F<Y;++F){var X=n[y+F],_=X.frame,B=r(16777215,X.alpha),A=_.uvs,L=X.flipX,E=X.flipY,R=_.width*(L?-1:1),b=_.height*(E?-1:1),M=C+X.x+_.x+_.width*(L?1:0),P=m+X.y+_.y+_.height*(E?1:0),D=M+R,S=P+b,z=M*x+P*c+p,V=M*u+P*v+d,U=D*x+S*c+p,O=D*u+S*v+d;this.setTexture2D(_.texture.source[_.sourceIndex].glTexture,0);var I=this.vertexCount*this.vertexComponentCount;i&&(z|=0,V|=0,U|=0,O|=0),h[I+0]=z,h[I+1]=V,h[I+2]=A.x0,h[I+3]=A.y0,a[I+4]=B,h[I+5]=z,h[I+6]=O,h[I+7]=A.x1,h[I+8]=A.y1,a[I+9]=B,h[I+10]=U,h[I+11]=O,h[I+12]=A.x2,h[I+13]=A.y2,a[I+14]=B,h[I+15]=z,h[I+16]=V,h[I+17]=A.x0,h[I+18]=A.y0,a[I+19]=B,h[I+20]=U,h[I+21]=O,h[I+22]=A.x2,h[I+23]=A.y2,a[I+24]=B,h[I+25]=U,h[I+26]=V,h[I+27]=A.x3,h[I+28]=A.y3,a[I+29]=B,this.vertexCount+=6,this.vertexCount>=this.vertexCapacity&&this.flush()}y+=Y,o-=Y,this.vertexCount>=this.vertexCapacity&&this.flush()}},batchSprite:function(t,e){this.renderer.setPipeline(this),this.vertexCount+6>this.vertexCapacity&&this.flush();var i,r=this.renderer.config.roundPixels,h=s.getTintAppendFloatAlpha,a=this.vertexViewF32,n=this.vertexViewU32,o=e.matrix.matrix,l=t.frame,x=l.texture.source[l.sourceIndex].glTexture,u=!!x.isRenderTexture,c=t.flipX,v=t.flipY^u,p=l.uvs,d=l.width*(c?-1:1),f=l.height*(v?-1:1),g=-t.displayOriginX+l.x+l.width*(c?1:0),T=-t.displayOriginY+l.y+l.height*(v?1:0),y=(r?0|g:g)+d,C=(r?0|T:T)+f,m=t.x-e.scrollX*t.scrollFactorX,w=t.y-e.scrollY*t.scrollFactorY,Y=t.scaleX,F=t.scaleY,X=-t.rotation,_=t._alphaTL,B=t._alphaTR,A=t._alphaBL,L=t._alphaBR,E=t._tintTL,R=t._tintTR,b=t._tintBL,M=t._tintBR,P=Math.sin(X),D=Math.cos(X),S=D*Y,z=-P*Y,V=P*F,U=D*F,O=m,I=w,N=o[0],k=o[1],q=o[2],H=o[3],G=S*N+z*q,Q=S*k+z*H,W=V*N+U*q,j=V*k+U*H,J=O*N+I*q+o[4],K=O*k+I*H+o[5],Z=g*G+T*W+J,$=g*Q+T*j+K,tt=g*G+C*W+J,et=g*Q+C*j+K,it=y*G+C*W+J,rt=y*Q+C*j+K,st=y*G+T*W+J,ht=y*Q+T*j+K,at=h(E,_),nt=h(R,B),ot=h(b,A),lt=h(M,L);r&&(Z|=0,$|=0,tt|=0,et|=0,it|=0,rt|=0,st|=0,ht|=0),this.setTexture2D(x,0),a[(i=this.vertexCount*this.vertexComponentCount)+0]=Z,a[i+1]=$,a[i+2]=p.x0,a[i+3]=p.y0,n[i+4]=at,a[i+5]=tt,a[i+6]=et,a[i+7]=p.x1,a[i+8]=p.y1,n[i+9]=ot,a[i+10]=it,a[i+11]=rt,a[i+12]=p.x2,a[i+13]=p.y2,n[i+14]=lt,a[i+15]=Z,a[i+16]=$,a[i+17]=p.x0,a[i+18]=p.y0,n[i+19]=at,a[i+20]=it,a[i+21]=rt,a[i+22]=p.x2,a[i+23]=p.y2,n[i+24]=lt,a[i+25]=st,a[i+26]=ht,a[i+27]=p.x3,a[i+28]=p.y3,n[i+29]=nt,this.vertexCount+=6},batchMesh:function(t,e){var i=t.vertices,r=i.length,h=r/2|0;this.renderer.setPipeline(this),this.vertexCount+h>this.vertexCapacity&&this.flush();var a=this.renderer.config.roundPixels,n=s.getTintAppendFloatAlpha,o=t.uv,l=t.colors,x=t.alphas,u=this.vertexViewF32,c=this.vertexViewU32,v=e.matrix.matrix,p=t.frame,d=t.texture.source[p.sourceIndex].glTexture,f=t.x-e.scrollX*t.scrollFactorX,g=t.y-e.scrollY*t.scrollFactorY,T=t.scaleX,y=t.scaleY,C=-t.rotation,m=Math.sin(C),w=Math.cos(C),Y=w*T,F=-m*T,X=m*y,_=w*y,B=f,A=g,L=v[0],E=v[1],R=v[2],b=v[3],M=Y*L+F*R,P=Y*E+F*b,D=X*L+_*R,S=X*E+_*b,z=B*L+A*R+v[4],V=B*E+A*b+v[5],U=0;this.setTexture2D(d,0),U=this.vertexCount*this.vertexComponentCount;for(var O=0,I=0;O<r;O+=2){var N=i[O+0],k=i[O+1],q=N*M+k*D+z,H=N*P+k*S+V;a&&(q|=0,H|=0),u[U+0]=q,u[U+1]=H,u[U+2]=o[O+0],u[U+3]=o[O+1],c[U+4]=n(l[I],x[I]),U+=5,I+=1}this.vertexCount+=h},batchBitmapText:function(t,e){this.renderer.setPipeline(this),this.vertexCount+6>this.vertexCapacity&&this.flush();var i,r,h,a,n,o,l,x,u=this.renderer.config.roundPixels,c=t.text,v=c.length,p=s.getTintAppendFloatAlpha,d=this.vertexViewF32,f=this.vertexViewU32,g=e.matrix.matrix,T=e.width+50,y=e.height+50,C=t.frame,m=t.texture.source[C.sourceIndex],w=e.scrollX*t.scrollFactorX,Y=e.scrollY*t.scrollFactorY,F=t.fontData,X=F.lineHeight,_=t.fontSize/F.size,B=F.chars,A=t.alpha,L=p(t._tintTL,A),E=p(t._tintTR,A),R=p(t._tintBL,A),b=p(t._tintBR,A),M=t.x,P=t.y,D=C.cutX,S=C.cutY,z=m.width,V=m.height,U=m.glTexture,O=0,I=0,N=0,k=0,q=null,H=0,G=0,Q=0,W=0,j=0,J=0,K=0,Z=0,$=0,tt=0,et=0,it=0,rt=null,st=0,ht=M-w+C.x,at=P-Y+C.y,nt=-t.rotation,ot=t.scaleX,lt=t.scaleY,xt=Math.sin(nt),ut=Math.cos(nt),ct=ut*ot,vt=-xt*ot,pt=xt*lt,dt=ut*lt,ft=ht,gt=at,Tt=g[0],yt=g[1],Ct=g[2],mt=g[3],wt=ct*Tt+vt*Ct,Yt=ct*yt+vt*mt,Ft=pt*Tt+dt*Ct,Xt=pt*yt+dt*mt,_t=ft*Tt+gt*Ct+g[4],Bt=ft*yt+gt*mt+g[5],At=0;this.setTexture2D(U,0);for(var Lt=0;Lt<v;++Lt)if(10!==(k=c.charCodeAt(Lt))){if(q=B[k]){if(H=D+q.x,G=S+q.y,Q=q.width,W=q.height,j=(N+q.xOffset+O)*_,J=(q.yOffset+I)*_,null!==rt){var Et=q.kerning[st];j+=void 0!==Et?Et:0}O+=q.xAdvance,N+=1,rt=q,st=k,0!==Q&&0!==W&&32!==k&&(r=(j-=t.displayOriginX)*Yt+(J-=t.displayOriginY)*Xt+Bt,h=j*wt+(Z=J+W*_)*Ft+_t,a=j*Yt+Z*Xt+Bt,n=(K=j+Q*_)*wt+Z*Ft+_t,o=K*Yt+Z*Xt+Bt,l=K*wt+J*Ft+_t,x=K*Yt+J*Xt+Bt,$=H/z,tt=(H+Q)/z,et=G/V,it=(G+W)/V,((i=j*wt+J*Ft+_t)<-50||i>T||r<-50||r>y)&&(h<-50||h>T||a<-50||a>y)&&(n<-50||n>T||o<-50||o>y)&&(l<-50||l>T||x<-50||x>y)||(this.vertexCount+6>this.vertexCapacity&&this.flush(),At=this.vertexCount*this.vertexComponentCount,u&&(i|=0,r|=0,h|=0,a|=0,n|=0,o|=0,l|=0,x|=0),d[At+0]=i,d[At+1]=r,d[At+2]=$,d[At+3]=et,f[At+4]=L,d[At+5]=h,d[At+6]=a,d[At+7]=$,d[At+8]=it,f[At+9]=R,d[At+10]=n,d[At+11]=o,d[At+12]=tt,d[At+13]=it,f[At+14]=b,d[At+15]=i,d[At+16]=r,d[At+17]=$,d[At+18]=et,f[At+19]=L,d[At+20]=n,d[At+21]=o,d[At+22]=tt,d[At+23]=it,f[At+24]=b,d[At+25]=l,d[At+26]=x,d[At+27]=tt,d[At+28]=et,f[At+29]=E,this.vertexCount+=6))}}else O=0,N=0,I+=X,rt=null},batchDynamicBitmapText:function(t,e){this.renderer.setPipeline(this),this.vertexCount+6>this.vertexCapacity&&this.flush();var i,r,h,a,n,o,l,x,u,c,v,p,d,f,g=this.renderer.config.roundPixels,T=t.displayCallback,y=t.text,C=y.length,m=s.getTintAppendFloatAlpha,w=this.vertexViewF32,Y=this.vertexViewU32,F=this.renderer,X=e.matrix.matrix,_=t.frame,B=t.texture.source[_.sourceIndex],A=e.scrollX*t.scrollFactorX,L=e.scrollY*t.scrollFactorY,E=t.scrollX,R=t.scrollY,b=t.fontData,M=b.lineHeight,P=t.fontSize/b.size,D=b.chars,S=t.alpha,z=m(t._tintTL,S),V=m(t._tintTR,S),U=m(t._tintBL,S),O=m(t._tintBR,S),I=t.x,N=t.y,k=_.cutX,q=_.cutY,H=B.width,G=B.height,Q=B.glTexture,W=0,j=0,J=0,K=0,Z=null,$=0,tt=0,et=0,it=0,rt=0,st=0,ht=0,at=0,nt=0,ot=0,lt=0,xt=0,ut=null,ct=0,vt=I+_.x,pt=N+_.y,dt=-t.rotation,ft=t.scaleX,gt=t.scaleY,Tt=Math.sin(dt),yt=Math.cos(dt),Ct=yt*ft,mt=-Tt*ft,wt=Tt*gt,Yt=yt*gt,Ft=vt,Xt=pt,_t=X[0],Bt=X[1],At=X[2],Lt=X[3],Et=Ct*_t+mt*At,Rt=Ct*Bt+mt*Lt,bt=wt*_t+Yt*At,Mt=wt*Bt+Yt*Lt,Pt=Ft*_t+Xt*At+X[4],Dt=Ft*Bt+Xt*Lt+X[5],St=t.cropWidth>0||t.cropHeight>0,zt=0;this.setTexture2D(Q,0),St&&F.pushScissor(t.x,t.y,t.cropWidth*t.scaleX,t.cropHeight*t.scaleY);for(var Vt=0;Vt<C;++Vt)if(P=t.fontSize/t.fontData.size,dt=0,10!==(K=y.charCodeAt(Vt))){if(Z=D[K]){if($=k+Z.x,tt=q+Z.y,et=Z.width,it=Z.height,rt=J+Z.xOffset+W-E,st=Z.yOffset+j-R,null!==ut){var Ut=Z.kerning[ct];rt+=void 0!==Ut?Ut:0}if(W+=Z.xAdvance,J+=1,ut=Z,ct=K,0!==et&&0!==it&&32!==K){if(T){var Ot=T({color:0,tint:{topLeft:z,topRight:V,bottomLeft:U,bottomRight:O},index:Vt,charCode:K,x:rt,y:st,scale:P,rotation:0,data:Z.data});rt=Ot.x,st=Ot.y,P=Ot.scale,dt=Ot.rotation,Ot.color?(z=Ot.color,V=Ot.color,U=Ot.color,O=Ot.color):(z=Ot.tint.topLeft,V=Ot.tint.topRight,U=Ot.tint.bottomLeft,O=Ot.tint.bottomRight),z=m(z,S),V=m(V,S),U=m(U,S),O=m(O,S)}rt-=t.displayOriginX,st-=t.displayOriginY,rt*=P,st*=P,rt-=A,st-=L,Tt=Math.sin(-dt),yt=Math.cos(-dt),i=Ft=(d=rt)*Et+(f=st)*bt+Pt,r=Xt=d*Rt+f*Mt+Dt,h=(at=it)*(wt=(v=Tt*P)*Et+(p=yt*P)*bt)+Ft,a=at*(Yt=v*Rt+p*Mt)+Xt,n=(ht=et)*(Ct=(u=yt*P)*Et+(c=-Tt*P)*bt)+at*wt+Ft,o=ht*(mt=u*Rt+c*Mt)+at*Yt+Xt,l=ht*Ct+Ft,x=ht*mt+Xt,nt=$/H,ot=($+et)/H,lt=tt/G,xt=(tt+it)/G,this.vertexCount+6>this.vertexCapacity&&this.flush(),zt=this.vertexCount*this.vertexComponentCount,g&&(i|=0,r|=0,h|=0,a|=0,n|=0,o|=0,l|=0,x|=0),w[zt+0]=i,w[zt+1]=r,w[zt+2]=nt,w[zt+3]=lt,Y[zt+4]=z,w[zt+5]=h,w[zt+6]=a,w[zt+7]=nt,w[zt+8]=xt,Y[zt+9]=U,w[zt+10]=n,w[zt+11]=o,w[zt+12]=ot,w[zt+13]=xt,Y[zt+14]=O,w[zt+15]=i,w[zt+16]=r,w[zt+17]=nt,w[zt+18]=lt,Y[zt+19]=z,w[zt+20]=n,w[zt+21]=o,w[zt+22]=ot,w[zt+23]=xt,Y[zt+24]=O,w[zt+25]=l,w[zt+26]=x,w[zt+27]=ot,w[zt+28]=lt,Y[zt+29]=V,this.vertexCount+=6}}}else W=0,J=0,j+=M,ut=null;St&&F.popScissor()},batchText:function(t,e){var i=s.getTintAppendFloatAlpha;this.batchTexture(t,t.canvasTexture,t.canvasTexture.width,t.canvasTexture.height,t.x,t.y,t.canvasTexture.width,t.canvasTexture.height,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,t.canvasTexture.width,t.canvasTexture.height,i(t._tintTL,t._alphaTL),i(t._tintTR,t._alphaTR),i(t._tintBL,t._alphaBL),i(t._tintBR,t._alphaBR),0,0,e)},batchDynamicTilemapLayer:function(t,e){for(var i=t.culledTiles,r=i.length,h=t.tileset.image.get().source.glTexture,a=t.tileset,n=t.scrollFactorX,o=t.scrollFactorY,l=t.alpha,x=t.x,u=t.y,c=t.scaleX,v=t.scaleY,p=s.getTintAppendFloatAlpha,d=0;d<r;++d){var f=i[d],g=a.getTileTextureCoordinates(f.index);if(null!==g){var T=f.width,y=f.height,C=g.x,m=g.y,w=p(f.tint,l*f.alpha);this.batchTexture(t,h,h.width,h.height,f.width/2+x+f.pixelX*c,f.height/2+u+f.pixelY*v,f.width*c,f.height*v,1,1,f.rotation,f.flipX,f.flipY,n,o,f.width/2,f.height/2,C,m,T,y,w,w,w,w,0,0,e)}}},batchTileSprite:function(t,e){var i=s.getTintAppendFloatAlpha;this.batchTexture(t,t.tileTexture,t.frame.width,t.frame.height,t.x,t.y,t.width,t.height,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.originX*t.width,t.originY*t.height,0,0,t.width,t.height,i(t._tintTL,t._alphaTL),i(t._tintTR,t._alphaTR),i(t._tintBL,t._alphaBL),i(t._tintBR,t._alphaBR),t.tilePositionX/t.frame.width,t.tilePositionY/t.frame.height,e)},batchTexture:function(t,e,i,r,s,h,a,n,o,l,x,u,c,v,p,d,f,g,T,y,C,m,w,Y,F,X,_,B){this.renderer.setPipeline(this),this.vertexCount+6>this.vertexCapacity&&this.flush(),c^=e.isRenderTexture?1:0,x=-x;var A,L=this.renderer.config.roundPixels,E=this.vertexViewF32,R=this.vertexViewU32,b=B.matrix.matrix,M=a*(u?1:0)-d,P=n*(c?1:0)-f,D=M+a*(u?-1:1),S=P+n*(c?-1:1),z=s-B.scrollX*v,V=h-B.scrollY*p,U=Math.sin(x),O=Math.cos(x),I=O*o,N=-U*o,k=U*l,q=O*l,H=z,G=V,Q=b[0],W=b[1],j=b[2],J=b[3],K=I*Q+N*j,Z=I*W+N*J,$=k*Q+q*j,tt=k*W+q*J,et=H*Q+G*j+b[4],it=H*W+G*J+b[5],rt=M*K+P*$+et,st=M*Z+P*tt+it,ht=M*K+S*$+et,at=M*Z+S*tt+it,nt=D*K+S*$+et,ot=D*Z+S*tt+it,lt=D*K+P*$+et,xt=D*Z+P*tt+it,ut=g/i+X,ct=T/r+_,vt=(g+y)/i+X,pt=(T+C)/r+_;this.setTexture2D(e,0),A=this.vertexCount*this.vertexComponentCount,L&&(rt|=0,st|=0,ht|=0,at|=0,nt|=0,ot|=0,lt|=0,xt|=0),E[A+0]=rt,E[A+1]=st,E[A+2]=ut,E[A+3]=ct,R[A+4]=m,E[A+5]=ht,E[A+6]=at,E[A+7]=ut,E[A+8]=pt,R[A+9]=w,E[A+10]=nt,E[A+11]=ot,E[A+12]=vt,E[A+13]=pt,R[A+14]=Y,E[A+15]=rt,E[A+16]=st,E[A+17]=ut,E[A+18]=ct,R[A+19]=m,E[A+20]=nt,E[A+21]=ot,E[A+22]=vt,E[A+23]=pt,R[A+24]=Y,E[A+25]=lt,E[A+26]=xt,E[A+27]=vt,E[A+28]=ct,R[A+29]=F,this.vertexCount+=6},drawTexture:function(t,e,i,r,h,a,n,o,l,x){this.renderer.setPipeline(this),this.vertexCount+6>this.vertexCapacity&&this.flush();var u,c=this.renderer.config.roundPixels,v=this.vertexViewF32,p=this.vertexViewU32,d=e,f=i,g=d+o,T=f+l,y=x[0],C=x[1],m=x[2],w=x[3],Y=x[4],F=x[5],X=d*y+f*m+Y,_=d*C+f*w+F,B=d*y+T*m+Y,A=d*C+T*w+F,L=g*y+T*m+Y,E=g*C+T*w+F,R=g*y+f*m+Y,b=g*C+f*w+F,M=t.width,P=t.height,D=a/M,S=n/P,z=(a+o)/M,V=(n+l)/P;r=s.getTintAppendFloatAlpha(r,h),this.setTexture2D(t,0),u=this.vertexCount*this.vertexComponentCount,c&&(X|=0,_|=0,B|=0,A|=0,L|=0,E|=0,R|=0,b|=0),v[u+0]=X,v[u+1]=_,v[u+2]=D,v[u+3]=S,p[u+4]=r,v[u+5]=B,v[u+6]=A,v[u+7]=D,v[u+8]=V,p[u+9]=r,v[u+10]=L,v[u+11]=E,v[u+12]=z,v[u+13]=V,p[u+14]=r,v[u+15]=X,v[u+16]=_,v[u+17]=D,v[u+18]=S,p[u+19]=r,v[u+20]=L,v[u+21]=E,v[u+22]=z,v[u+23]=V,p[u+24]=r,v[u+25]=R,v[u+26]=b,v[u+27]=z,v[u+28]=S,p[u+29]=r,this.vertexCount+=6,this.flush()},batchGraphics:function(){}});module.exports=a;
},{"../../../utils/Class":8,"./components/ModelViewProjection":395,"../shaders/TextureTint.frag":356,"../shaders/TextureTint.vert":357,"../Utils":116,"../WebGLPipeline":350}],129:[function(require,module,exports) {
var e=require("../../../utils/Class"),t=require("../shaders/ForwardDiffuse.frag"),i=require("./TextureTintPipeline"),r=10,n=new e({Extends:i,initialize:function(e){e.fragShader=t.replace("%LIGHT_COUNT%",r.toString()),i.call(this,e)},onBind:function(){i.prototype.onBind.call(this);var e=this.renderer,t=this.program;return this.mvpUpdate(),e.setInt1(t,"uNormSampler",1),e.setFloat2(t,"uResolution",this.width,this.height),this},onRender:function(e,t){var i=e.sys.lights;if(!i)return this;if(i.culledLights.length=0,i.lights.length<=0||!i.active)return this;var n,a=this.renderer,s=this.program,l=i.cull(t),p=Math.min(l.length,r),o=t.matrix,h={x:0,y:0},u=a.height;for(n=0;n<r;++n)a.setFloat1(s,"uLights["+n+"].radius",0);if(p<=0)return this;for(a.setFloat4(s,"uCamera",t.x,t.y,t.rotation,t.zoom),a.setFloat3(s,"uAmbientLightColor",i.ambientColor.r,i.ambientColor.g,i.ambientColor.b),n=0;n<p;++n){var c=l[n],d="uLights["+n+"].";o.transformPoint(c.x,c.y,h),a.setFloat2(s,d+"position",h.x-t.scrollX*c.scrollFactorX*t.zoom,u-(h.y-t.scrollY*c.scrollFactorY*t.zoom)),a.setFloat3(s,d+"color",c.r,c.g,c.b),a.setFloat1(s,d+"intensity",c.intensity),a.setFloat1(s,d+"radius",c.radius)}return this},drawStaticTilemapLayer:function(e,t){var r=e.texture.dataSource[0];r?(this.renderer.setPipeline(this),this.setTexture2D(r.glTexture,1),i.prototype.drawStaticTilemapLayer.call(this,e,t)):(console.warn("Normal map texture missing for using Light2D pipeline. StaticTilemapLayer rendered with default pipeline."),this.renderer.pipelines.TextureTintPipeline.drawStaticTilemapLayer(e,t))},drawEmitterManager:function(e,t){var r=e.texture.dataSource[0];r?(this.renderer.setPipeline(this),this.setTexture2D(r.glTexture,1),i.prototype.drawEmitterManager.call(this,e,t)):(console.warn("Normal map texture missing for using Light2D pipeline. EmitterManager rendered with default pipeline."),this.renderer.pipelines.TextureTintPipeline.drawEmitterManager(e,t))},drawBlitter:function(e,t){var r=e.texture.dataSource[0];r?(this.renderer.setPipeline(this),this.setTexture2D(r.glTexture,1),i.prototype.drawBlitter.call(this,e,t)):(console.warn("Normal map texture missing for using Light2D pipeline. Blitter rendered with default pipeline."),this.renderer.pipelines.TextureTintPipeline.drawBlitter(e,t))},batchSprite:function(e,t){var r=e.texture.dataSource[0];r?(this.renderer.setPipeline(this),this.setTexture2D(r.glTexture,1),i.prototype.batchSprite.call(this,e,t)):(console.warn("Normal map texture missing for using Light2D pipeline. Sprite rendered with default pipeline."),this.renderer.pipelines.TextureTintPipeline.batchSprite(e,t))},batchMesh:function(e,t){var r=e.texture.dataSource[0];r?(this.renderer.setPipeline(this),this.setTexture2D(r.glTexture,1),i.prototype.batchMesh.call(this,e,t)):(console.warn("Normal map texture missing for using Light2D pipeline. Mesh rendered with default pipeline."),this.renderer.pipelines.TextureTintPipeline.batchMesh(e,t))},batchBitmapText:function(e,t){var r=e.texture.dataSource[0];r?(this.renderer.setPipeline(this),this.setTexture2D(r.glTexture,1),i.prototype.batchBitmapText.call(this,e,t)):(console.warn("Normal map texture missing for using Light2D pipeline. BitmapText rendered with default pipeline."),this.renderer.pipelines.TextureTintPipeline.batchBitmapText(e,t))},batchDynamicBitmapText:function(e,t){var r=e.texture.dataSource[0];r?(this.renderer.setPipeline(this),this.setTexture2D(r.glTexture,1),i.prototype.batchDynamicBitmapText.call(this,e,t)):(console.warn("Normal map texture missing for using Light2D pipeline. DynamicBitmapText rendered with default pipeline."),this.renderer.pipelines.TextureTintPipeline.batchDynamicBitmapText(e,t))},batchText:function(e,t){var r=e.texture.dataSource[0];r?(this.renderer.setPipeline(this),this.setTexture2D(r.glTexture,1),i.prototype.batchText.call(this,e,t)):(console.warn("Normal map texture missing for using Light2D pipeline. Text rendered with default pipeline."),this.renderer.pipelines.TextureTintPipeline.batchText(e,t))},batchDynamicTilemapLayer:function(e,t){var r=e.texture.dataSource[0];r?(this.renderer.setPipeline(this),this.setTexture2D(r.glTexture,1),i.prototype.batchDynamicTilemapLayer.call(this,e,t)):(console.warn("Normal map texture missing for using Light2D pipeline. DynamicTilemapLayer rendered with default pipeline."),this.renderer.pipelines.TextureTintPipeline.batchDynamicTilemapLayer(e,t))},batchTileSprite:function(e,t){var r=e.texture.dataSource[0];r?(this.renderer.setPipeline(this),this.setTexture2D(r.glTexture,1),i.prototype.batchTileSprite.call(this,e,t)):(console.warn("Normal map texture missing for using Light2D pipeline. TileSprite rendered with default pipeline."),this.renderer.pipelines.TextureTintPipeline.batchTileSprite(e,t))}});n.LIGHT_COUNT=r,module.exports=n;
},{"../../../utils/Class":8,"../shaders/ForwardDiffuse.frag":351,"./TextureTintPipeline":130}],57:[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../../const"),i=require("../../math/pow2/IsSizePowerOfTwo"),r=require("./Utils"),s=require("../snapshot/WebGLSnapshot"),n=require("./pipelines/BitmapMaskPipeline"),h=require("./pipelines/FlatTintPipeline"),o=require("./pipelines/ForwardDiffuseLightPipeline"),a=require("./pipelines/TextureTintPipeline"),l=new e({initialize:function(e){var i=this,r=e.config,s={alpha:r.transparent,depth:!1,antialias:r.antialias,premultipliedAlpha:r.premultipliedAlpha,stencil:!0,preserveDrawingBuffer:r.preserveDrawingBuffer,failIfMajorPerformanceCaveat:r.failIfMajorPerformanceCaveat,powerPreference:r.powerPreference};this.config={clearBeforeRender:r.clearBeforeRender,pixelArt:r.pixelArt,backgroundColor:r.backgroundColor,contextCreation:s,resolution:r.resolution,autoResize:r.autoResize,roundPixels:r.roundPixels},this.game=e,this.type=t.WEBGL,this.width=e.config.width,this.height=e.config.height,this.canvas=e.canvas,this.lostContextCallbacks=[],this.restoredContextCallbacks=[],this.blendModes=[],this.nativeTextures=[],this.contextLost=!1,this.pipelines=null,this.snapshotState={callback:null,type:null,encoder:null},this.currentActiveTextureUnit=0,this.currentTextures=new Array(16),this.currentFramebuffer=null,this.currentPipeline=null,this.currentProgram=null,this.currentVertexBuffer=null,this.currentIndexBuffer=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=new Uint32Array([0,0,this.width,this.height]),this.currentScissorIdx=0,this.scissorStack=new Uint32Array(4e3),this.canvas.addEventListener("webglcontextlost",function(e){i.contextLost=!0,e.preventDefault();for(var t=0;t<i.lostContextCallbacks.length;++t){var r=i.lostContextCallbacks[t];r[0].call(r[1],i)}},!1),this.canvas.addEventListener("webglcontextrestored",function(){i.contextLost=!1,i.init(i.config);for(var e=0;e<i.restoredContextCallbacks.length;++e){var t=i.restoredContextCallbacks[e];t[0].call(t[1],i)}},!1),this.gl=null,this.supportedExtensions=null,this.extensions={},this.glFormats=[],this.init(this.config)},init:function(e){var i=this.canvas,r=e.backgroundColor,s=i.getContext("webgl",e.contextCreation)||i.getContext("experimental-webgl",e.contextCreation);if(!s)throw this.contextLost=!0,new Error("This browser does not support WebGL. Try using the Canvas pipeline.");this.gl=s;for(var l=0;l<=16;l++)this.blendModes.push({func:[s.ONE,s.ONE_MINUS_SRC_ALPHA],equation:s.FUNC_ADD});this.blendModes[1].func=[s.ONE,s.DST_ALPHA],this.blendModes[2].func=[s.DST_COLOR,s.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[s.ONE,s.ONE_MINUS_SRC_COLOR],this.glFormats[0]=s.BYTE,this.glFormats[1]=s.SHORT,this.glFormats[2]=s.UNSIGNED_BYTE,this.glFormats[3]=s.UNSIGNED_SHORT,this.glFormats[4]=s.FLOAT,this.supportedExtensions=s.getSupportedExtensions(),s.disable(s.DEPTH_TEST),s.disable(s.CULL_FACE),s.disable(s.SCISSOR_TEST),s.enable(s.BLEND),s.clearColor(r.redGL,r.greenGL,r.blueGL,1);for(var u=0;u<this.currentTextures.length;++u)this.currentTextures[u]=null;return this.pipelines={},this.addPipeline("TextureTintPipeline",new a({game:this.game,renderer:this})),this.addPipeline("FlatTintPipeline",new h({game:this.game,renderer:this})),this.addPipeline("BitmapMaskPipeline",new n({game:this.game,renderer:this})),this.addPipeline("Light2D",new o({game:this.game,renderer:this})),this.setBlendMode(t.BlendModes.NORMAL),this.resize(this.width,this.height),this},resize:function(e,t){var i=this.gl,r=this.pipelines,s=this.config.resolution;for(var n in this.width=Math.floor(e*s),this.height=Math.floor(t*s),this.canvas.width=this.width,this.canvas.height=this.height,this.config.autoResize&&(this.canvas.style.width=this.width/s+"px",this.canvas.style.height=this.height/s+"px"),i.viewport(0,0,this.width,this.height),r)r[n].resize(e,t,s);return this.currentScissor.set([0,0,this.width,this.height]),this},onContextRestored:function(e,t){return this.restoredContextCallbacks.push([e,t]),this},onContextLost:function(e,t){return this.lostContextCallbacks.push([e,t]),this},hasExtension:function(e){return!!this.supportedExtensions&&this.supportedExtensions.indexOf(e)},getExtension:function(e){return this.hasExtension(e)?(e in this.extensions||(this.extensions[e]=this.gl.getExtension(e)),this.extensions[e]):null},flush:function(){this.currentPipeline&&this.currentPipeline.flush()},hasPipeline:function(e){return e in this.pipelines},getPipeline:function(e){return this.hasPipeline(e)?this.pipelines[e]:null},removePipeline:function(e){return delete this.pipelines[e],this},addPipeline:function(e,t){return this.hasPipeline(e)?console.warn("Pipeline",e," already exists."):this.pipelines[e]=t,t.name=e,this.pipelines[e].resize(this.width,this.height,this.config.resolution),t},setScissor:function(e,t,i,r){var s=this.gl,n=this.currentScissor,h=0===e&&0===t&&i===s.canvas.width&&r===s.canvas.height&&i>=0&&r>=0;return n[0]===e&&n[1]===t&&n[2]===i&&n[3]===r||this.flush(),n[0]=e,n[1]=t,n[2]=i,n[3]=r,this.currentScissorEnabled=h,h?(s.disable(s.SCISSOR_TEST),this):(s.enable(s.SCISSOR_TEST),s.scissor(e,s.drawingBufferHeight-t-r,i,r),this)},pushScissor:function(e,t,i,r){var s=this.scissorStack,n=this.currentScissorIdx,h=this.currentScissor;return s[n+0]=h[0],s[n+1]=h[1],s[n+2]=h[2],s[n+3]=h[3],this.currentScissorIdx+=4,this.setScissor(e,t,i,r),this},popScissor:function(){var e=this.scissorStack,t=this.currentScissorIdx-4,i=e[t+0],r=e[t+1],s=e[t+2],n=e[t+3];return this.currentScissorIdx=t,this.setScissor(i,r,s,n),this},setPipeline:function(e){return this.currentPipeline===e&&this.currentPipeline.vertexBuffer===this.currentVertexBuffer&&this.currentPipeline.program===this.currentProgram||(this.flush(),this.currentPipeline=e,this.currentPipeline.bind()),this.currentPipeline.onBind(),this.currentPipeline},setBlendMode:function(e){var i=this.gl,r=this.blendModes[e];return e!==t.BlendModes.SKIP_CHECK&&this.currentBlendMode!==e&&(this.flush(),i.enable(i.BLEND),i.blendEquation(r.equation),r.func.length>2?i.blendFuncSeparate(r.func[0],r.func[1],r.func[2],r.func[3]):i.blendFunc(r.func[0],r.func[1]),this.currentBlendMode=e),this},addBlendMode:function(e,t){return this.blendModes.push({func:e,equation:t})-1},updateBlendMode:function(e,t,i){return this.blendModes[e]&&(this.blendModes[e].func=t,i&&(this.blendModes[e].equation=i)),this},removeBlendMode:function(e){return e>16&&this.blendModes[e]&&this.blendModes.splice(e,1),this},setTexture2D:function(e,t){var i=this.gl;return e!==this.currentTextures[t]&&(this.flush(),this.currentActiveTextureUnit!==t&&(i.activeTexture(i.TEXTURE0+t),this.currentActiveTextureUnit=t),i.bindTexture(i.TEXTURE_2D,e),this.currentTextures[t]=e),this},setFramebuffer:function(e){var t=this.gl;return e!==this.currentFramebuffer&&(this.flush(),t.bindFramebuffer(t.FRAMEBUFFER,e),this.currentFramebuffer=e),this},setProgram:function(e){var t=this.gl;return e!==this.currentProgram&&(this.flush(),t.useProgram(e),this.currentProgram=e),this},setVertexBuffer:function(e){var t=this.gl;return e!==this.currentVertexBuffer&&(this.flush(),t.bindBuffer(t.ARRAY_BUFFER,e),this.currentVertexBuffer=e),this},setIndexBuffer:function(e){var t=this.gl;return e!==this.currentIndexBuffer&&(this.flush(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.currentIndexBuffer=e),this},createTextureFromSource:function(e,r,s,n){var h=this.gl,o=h.NEAREST,a=h.CLAMP_TO_EDGE;return r=e?e.width:r,s=e?e.height:s,i(r,s)&&(a=h.REPEAT),n===t.ScaleModes.LINEAR?o=h.LINEAR:(n===t.ScaleModes.NEAREST||this.config.pixelArt)&&(o=h.NEAREST),e||"number"!=typeof r||"number"!=typeof s?this.createTexture2D(0,o,o,a,a,h.RGBA,e):this.createTexture2D(0,o,o,a,a,h.RGBA,null,r,s)},createTexture2D:function(e,t,i,r,s,n,h,o,a,l){var u=this.gl,c=u.createTexture();return l=void 0===l||null===l||l,this.setTexture2D(c,0),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,t),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,i),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,s),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,r),u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),null===h||void 0===h?u.texImage2D(u.TEXTURE_2D,e,n,o,a,0,n,u.UNSIGNED_BYTE,null):(u.texImage2D(u.TEXTURE_2D,e,n,n,u.UNSIGNED_BYTE,h),o=h.width,a=h.height),this.setTexture2D(null,0),c.isAlphaPremultiplied=l,c.isRenderTexture=!1,c.width=o,c.height=a,this.nativeTextures.push(c),c},createFramebuffer:function(e,t,i,r){var s,n=this.gl,h=n.createFramebuffer();if(this.setFramebuffer(h),r){var o=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,o),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e,t),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,o)}if(i.isRenderTexture=!0,i.isAlphaPremultiplied=!1,n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,i,0),(s=n.checkFramebufferStatus(n.FRAMEBUFFER))!==n.FRAMEBUFFER_COMPLETE){throw new Error("Framebuffer incomplete. Framebuffer status: "+{36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"}[s])}return h.renderTexture=i,this.setFramebuffer(null),h},createProgram:function(e,t){var i=this.gl,r=i.createProgram(),s=i.createShader(i.VERTEX_SHADER),n=i.createShader(i.FRAGMENT_SHADER);if(i.shaderSource(s,e),i.shaderSource(n,t),i.compileShader(s),i.compileShader(n),!i.getShaderParameter(s,i.COMPILE_STATUS))throw new Error("Failed to compile Vertex Shader:\n"+i.getShaderInfoLog(s));if(!i.getShaderParameter(n,i.COMPILE_STATUS))throw new Error("Failed to compile Fragment Shader:\n"+i.getShaderInfoLog(n));if(i.attachShader(r,s),i.attachShader(r,n),i.linkProgram(r),!i.getProgramParameter(r,i.LINK_STATUS))throw new Error("Failed to link program:\n"+i.getProgramInfoLog(r));return r},createVertexBuffer:function(e,t){var i=this.gl,r=i.createBuffer();return this.setVertexBuffer(r),i.bufferData(i.ARRAY_BUFFER,e,t),this.setVertexBuffer(null),r},createIndexBuffer:function(e,t){var i=this.gl,r=i.createBuffer();return this.setIndexBuffer(r),i.bufferData(i.ELEMENT_ARRAY_BUFFER,e,t),this.setIndexBuffer(null),r},deleteTexture:function(e){return this.gl.deleteTexture(e),this},deleteFramebuffer:function(e){return this.gl.deleteFramebuffer(e),this},deleteProgram:function(e){return this.gl.deleteProgram(e),this},deleteBuffer:function(e){return this.gl.deleteBuffer(e),this},preRenderCamera:function(e){var t=this.config.resolution,i=Math.floor(e.x*t),s=Math.floor(e.y*t),n=Math.floor(e.width*t),h=Math.floor(e.height*t);if(this.pushScissor(i,s,n,h),e.backgroundColor.alphaGL>0){var o=e.backgroundColor,a=this.pipelines.FlatTintPipeline;a.batchFillRect(0,0,1,1,0,e.x,e.y,e.width,e.height,r.getTintFromFloats(o.redGL,o.greenGL,o.blueGL,1),o.alphaGL,1,0,0,1,0,0,[1,0,0,1,0,0]),a.flush()}},postRenderCamera:function(e){if(e._fadeAlpha>0||e._flashAlpha>0){var t=this.pipelines.FlatTintPipeline;t.batchFillRect(0,0,1,1,0,e.x,e.y,e.width,e.height,r.getTintFromFloats(e._fadeRed,e._fadeGreen,e._fadeBlue,1),e._fadeAlpha,1,0,0,1,0,0,[1,0,0,1,0,0]),t.batchFillRect(0,0,1,1,0,e.x,e.y,e.width,e.height,r.getTintFromFloats(e._flashRed,e._flashGreen,e._flashBlue,1),e._flashAlpha,1,0,0,1,0,0,[1,0,0,1,0,0]),t.flush()}this.popScissor()},preRender:function(){if(!this.contextLost){var e=this.gl,t=this.config.backgroundColor,i=this.pipelines;for(var r in e.clearColor(t.redGL,t.greenGL,t.blueGL,t.alphaGL),this.config.clearBeforeRender&&e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT),i)i[r].onPreRender()}},render:function(e,i,r,s){if(!this.contextLost){var n=i.list,h=n.length,o=this.pipelines;for(var a in o)o[a].onRender(e,s);this.preRenderCamera(s);for(var l=0;l<h;++l){var u=n[l];u.willRender()&&(u.blendMode!==this.currentBlendMode&&this.setBlendMode(u.blendMode),u.mask&&u.mask.preRenderWebGL(this,u,s),u.renderWebGL(this,u,r,s),u.mask&&u.mask.postRenderWebGL(this,u))}this.flush(),this.setBlendMode(t.BlendModes.NORMAL),this.postRenderCamera(s)}},postRender:function(){if(!this.contextLost){this.snapshotState.callback&&(this.snapshotState.callback(s(this.canvas,this.snapshotState.type,this.snapshotState.encoder)),this.snapshotState.callback=null);var e=this.pipelines;for(var t in e)e[t].onPostRender()}},snapshot:function(e,t,i){return this.snapshotState.callback=e,this.snapshotState.type=t,this.snapshotState.encoder=i,this},canvasToTexture:function(e,t){var r=this.gl;if(t)this.setTexture2D(t,0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e),t.width=e.width,t.height=e.height,this.setTexture2D(null,0);else{var s=r.CLAMP_TO_EDGE;i(e.width,e.height)&&(s=r.REPEAT),t=this.createTexture2D(0,r.NEAREST,r.NEAREST,s,s,r.RGBA,e,e.width,e.height,!0)}return t},setTextureFilter:function(e,t){var i=this.gl,r=[i.LINEAR,i.NEAREST][t];return this.setTexture2D(e,0),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,r),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,r),this.setTexture2D(null,0),this},setFloat1:function(e,t,i){return this.setProgram(e),this.gl.uniform1f(this.gl.getUniformLocation(e,t),i),this},setFloat2:function(e,t,i,r){return this.setProgram(e),this.gl.uniform2f(this.gl.getUniformLocation(e,t),i,r),this},setFloat3:function(e,t,i,r,s){return this.setProgram(e),this.gl.uniform3f(this.gl.getUniformLocation(e,t),i,r,s),this},setFloat4:function(e,t,i,r,s,n){return this.setProgram(e),this.gl.uniform4f(this.gl.getUniformLocation(e,t),i,r,s,n),this},setInt1:function(e,t,i){return this.setProgram(e),this.gl.uniform1i(this.gl.getUniformLocation(e,t),i),this},setInt2:function(e,t,i,r){return this.setProgram(e),this.gl.uniform2i(this.gl.getUniformLocation(e,t),i,r),this},setInt3:function(e,t,i,r,s){return this.setProgram(e),this.gl.uniform3i(this.gl.getUniformLocation(e,t),i,r,s),this},setInt4:function(e,t,i,r,s,n){return this.setProgram(e),this.gl.uniform4i(this.gl.getUniformLocation(e,t),i,r,s,n),this},setMatrix2:function(e,t,i,r){return this.setProgram(e),this.gl.uniformMatrix2fv(this.gl.getUniformLocation(e,t),i,r),this},setMatrix3:function(e,t,i,r){return this.setProgram(e),this.gl.uniformMatrix3fv(this.gl.getUniformLocation(e,t),i,r),this},setMatrix4:function(e,t,i,r){return this.setProgram(e),this.gl.uniformMatrix4fv(this.gl.getUniformLocation(e,t),i,r),this},destroy:function(){for(var e in this.pipelines)this.pipelines[e].destroy(),delete this.pipelines[e];for(var t=0;t<this.nativeTextures.length;++t)this.deleteTexture(this.nativeTextures[t]),delete this.nativeTextures[t];this.hasExtension("WEBGL_lose_context")&&this.getExtension("WEBGL_lose_context").loseContext(),delete this.gl,delete this.game,this.contextLost=!0,this.extensions={},this.nativeTextures.length=0}});module.exports=l;
},{"../../utils/Class":8,"../../const":12,"../../math/pow2/IsSizePowerOfTwo":110,"./Utils":116,"../snapshot/WebGLSnapshot":111,"./pipelines/BitmapMaskPipeline":127,"./pipelines/FlatTintPipeline":128,"./pipelines/ForwardDiffuseLightPipeline":129,"./pipelines/TextureTintPipeline":130}],21:[function(require,module,exports) {
var e=require("../display/canvas/CanvasInterpolation"),r=require("../display/canvas/CanvasPool"),n=require("../const"),a=require("../device/Features"),t=function(t){var d,s,i=t.config;if(i.renderType!==n.HEADLESS)if(i.renderType===n.CANVAS||i.renderType!==n.CANVAS&&!a.webGL){if(!a.canvas)throw new Error("Cannot create Canvas or WebGL context, aborting.");i.renderType=n.CANVAS}else i.renderType=n.WEBGL;(i.pixelArt&&r.disableSmoothing(),i.canvas?t.canvas=i.canvas:t.canvas=r.create(t,i.width,i.height,i.renderType),i.canvasStyle&&(t.canvas.style=i.canvasStyle),i.pixelArt&&e.setCrisp(t.canvas),1!==i.zoom&&(t.canvas.style.width=(i.width*i.zoom).toString()+"px",t.canvas.style.height=(i.height*i.zoom).toString()+"px"),i.renderType!==n.HEADLESS)&&(WEBGL_RENDERER&&CANVAS_RENDERER&&(d=require("../renderer/canvas/CanvasRenderer"),s=require("../renderer/webgl/WebGLRenderer"),i.renderType===n.WEBGL?(t.renderer=new s(t),t.context=null):(t.renderer=new d(t),t.context=t.renderer.gameContext)),WEBGL_RENDERER&&!CANVAS_RENDERER&&(s=require("../renderer/webgl/WebGLRenderer"),i.renderType=n.WEBGL,t.renderer=new s(t),t.context=null),!WEBGL_RENDERER&&CANVAS_RENDERER&&(d=require("../renderer/canvas/CanvasRenderer"),i.renderType=n.CANVAS,t.renderer=new d(t),t.context=t.renderer.gameContext))};module.exports=t;
},{"../display/canvas/CanvasInterpolation":55,"../display/canvas/CanvasPool":33,"../const":12,"../device/Features":41,"../renderer/canvas/CanvasRenderer":56,"../renderer/webgl/WebGLRenderer":57}],23:[function(require,module,exports) {
var o=require("../const"),e=function(e){var a=e.config;if(!a.hideBanner){var r="WebGL";a.renderType===o.CANVAS?r="Canvas":a.renderType===o.HEADLESS&&(r="Headless");var n,c=a.audio,i=e.device.audio;if(n=!i.webAudio||c&&c.disableWebAudio?c&&c.noAudio||!i.webAudio&&!i.audioData?"No Audio":"HTML5 Audio":"Web Audio",e.device.browser.ie)window.console&&console.log("Phaser v"+o.VERSION+" / https://phaser.io");else{var d,s="",u=[s];if(Array.isArray(a.bannerBackgroundColor))a.bannerBackgroundColor.forEach(function(o){s=s.concat("%c "),u.push("background: "+o),d=o}),u[u.length-1]="color: "+a.bannerTextColor+"; background: "+d;else s=s.concat("%c "),u.push("color: "+a.bannerTextColor+"; background: "+a.bannerBackgroundColor);u.push("background: #fff"),a.gameTitle&&(s=s.concat(a.gameTitle),a.gameVersion&&(s=s.concat(" v"+a.gameVersion)),a.hidePhaser||(s=s.concat(" / "))),a.hidePhaser||(s=s.concat("Phaser v"+o.VERSION+" ("+r+" | "+n+")")),s=s.concat(" %c "+a.gameURL),u[0]=s,console.log.apply(console,u)}}};module.exports=e;
},{"../const":12}],358:[function(require,module,exports) {
var e=require("./OS"),n=require("./Browser"),o={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function t(){return("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(o.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(o.mspointer=!0),navigator.getGamepads&&(o.gamepads=!0),e.cocoonJS||("onwheel"in window||n.ie&&"WheelEvent"in window?o.wheelEvent="wheel":"onmousewheel"in window?o.wheelEvent="mousewheel":n.firefox&&"MouseScrollEvent"in window&&(o.wheelEvent="DOMMouseScroll")),o}module.exports=t();
},{"./OS":42,"./Browser":95}],359:[function(require,module,exports) {
var a=require("./Browser"),e={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function o(){e.audioData=!!window.Audio,e.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var o=document.createElement("audio"),c=!!o.canPlayType;try{if(c&&(o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(e.ogg=!0),(o.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||o.canPlayType("audio/opus;").replace(/^no$/,""))&&(e.opus=!0),o.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(e.mp3=!0),o.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(e.wav=!0),(o.canPlayType("audio/x-m4a;")||o.canPlayType("audio/aac;").replace(/^no$/,""))&&(e.m4a=!0),o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(e.webm=!0),""!==o.canPlayType('audio/mp4;codecs="ec-3"')))if(a.edge)e.dolby=!0;else if(a.safari&&a.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var d=parseInt(RegExp.$1,10),i=parseInt(RegExp.$2,10);(10===d&&i>=11||d>10)&&(e.dolby=!0)}}catch(a){}return e}module.exports=o();
},{"./Browser":95}],360:[function(require,module,exports) {
var e={h264Video:!1,hlsVideo:!1,mp4Video:!1,oggVideo:!1,vp9Video:!1,webmVideo:!1};function o(){var o=document.createElement("video"),c=!!o.canPlayType;try{c&&(o.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(e.oggVideo=!0),o.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(e.h264Video=!0,e.mp4Video=!0),o.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(e.webmVideo=!0),o.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(e.vp9Video=!0),o.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(e.hlsVideo=!0))}catch(e){}return e}module.exports=o();
},{}],361:[function(require,module,exports) {
var e={available:!1,cancel:"",keyboard:!1,request:""};function l(){var l,n=["requestFullscreen","requestFullScreen","webkitRequestFullscreen","webkitRequestFullScreen","msRequestFullscreen","msRequestFullScreen","mozRequestFullScreen","mozRequestFullscreen"],r=document.createElement("div");for(l=0;l<n.length;l++)if(r[n[l]]){e.available=!0,e.request=n[l];break}var u=["cancelFullScreen","exitFullscreen","webkitCancelFullScreen","webkitExitFullscreen","msCancelFullScreen","msExitFullscreen","mozCancelFullScreen","mozExitFullscreen"];if(e.available)for(l=0;l<u.length;l++)if(document[u[l]]){e.cancel=u[l];break}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&(e.keyboard=!0),e}module.exports=l();
},{}],261:[function(require,module,exports) {
module.exports={os:require("./OS"),browser:require("./Browser"),features:require("./Features"),input:require("./Input"),audio:require("./Audio"),video:require("./Video"),fullscreen:require("./Fullscreen"),canvasFeatures:require("./CanvasFeatures")};
},{"./OS":42,"./Browser":95,"./Features":41,"./Input":358,"./Audio":359,"./Video":360,"./Fullscreen":361,"./CanvasFeatures":347}],341:[function(require,module,exports) {
var t=require("../../utils/Class"),e=new t({initialize:function(t,e){this.pad=t,this.events=t.events,this.index=e,this.value=0,this.threshold=.05},update:function(t){this.value=t},getValue:function(){var t=(Math.abs(this.value)-this.threshold)/(1-this.threshold);return t<0&&(t=0),t*(this.value>0?1:-1)}});module.exports=e;
},{"../../utils/Class":8}],340:[function(require,module,exports) {
var s=require("../../utils/Class"),e=new s({initialize:function(s,e){this.pad=s,this.events=s.events,this.index=e,this.value=0,this.threshold=1,this.pressed=!1},update:function(s){this.value=s.value,this.value>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit("down",this.pad,this,this.value,s)):this.pressed&&(this.pressed=!1,this.events.emit("up",this.pad,this,this.value,s))}});module.exports=e;
},{"../../utils/Class":8}],112:[function(require,module,exports) {
var t=require("./Axis"),e=require("./Button"),i=require("../../utils/Class"),s=new i({initialize:function(t,e,i){this.manager=t,this.events=t.events,this.id=e,this.index=i,this.connected=!0,this.timestamp=0,this.buttons=[],this.axes=[]},update:function(i){var s;this.timestamp=i.timestamp,this.connected=i.connected;var n=this.axes,a=this.buttons;for(s=0;s<i.buttons.length;s++){var h=i.buttons[s];void 0===a[s]&&(a[s]=new e(this,s)),a[s].update(h)}for(s=0;s<i.axes.length;s++){var o=i.axes[s];void 0===n[s]&&(n[s]=new t(this,s)),n[s].update(o)}}});module.exports=s;
},{"./Axis":341,"./Button":340,"../../utils/Class":8}],58:[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("./Gamepad"),a=new e({initialize:function(e){this.manager=e,this.events=e.events,this.enabled=!1,this.target,this.handler,this.gamepads=[],this.queue=[]},boot:function(){var e=this.manager.config;this.enabled=e.inputGamepad&&this.manager.game.device.input.gamepads,this.target=window,this.enabled&&this.startListeners()},startListeners:function(){var e=this.queue,t=function(t){t.defaultPrevented||e.push(t)};this.handler=t;var a=this.target;a.addEventListener("gamepadconnected",t,!1),a.addEventListener("gamepaddisconnected",t,!1),a.addEventListener("gamepadbuttondown",t,!1),a.addEventListener("gamepadbuttonup",t,!1),a.addEventListener("gamepadaxismove",t,!1)},stopListeners:function(){var e=this.target,t=this.handler;e.removeEventListener("gamepadconnected",t),e.removeEventListener("gamepaddisconnected",t),e.removeEventListener("gamepadbuttondown",t),e.removeEventListener("gamepadbuttonup",t),e.removeEventListener("gamepadaxismove",t)},disconnectAll:function(){for(var e=0;e<this.gamepads.length;e++)this.gamepads.connected=!1},addPad:function(e){var a=new t(this,e.id,e.index);return this.gamepads[e.index]=a,a},removePad:function(){},refreshPads:function(e){if(e)for(var t=0;t<e.length;t++){var a=e[t];a&&(void 0===this.gamepads[a.index]&&this.addPad(a),this.gamepads[a.index].update(a))}else this.disconnectAll()},getAll:function(){for(var e=[],t=0;t<this.gamepads.length;t++)this.gamepads[t]&&e.push(this.gamepads[t]);return e},getPad:function(e){for(var t=0;t<this.gamepads.length;t++)if(this.gamepads[t].index===e)return this.gamepads[t]},update:function(){if(this.enabled){this.refreshPads(navigator.getGamepads());var e=this.queue.length;if(0!==e)for(var t=this.queue.splice(0,e),a=0;a<e;a++){var n,i=t[a];switch(i.type){case"gamepadconnected":n=this.getPad(i.gamepad.index),this.events.emit("connected",n,i);break;case"gamepaddisconnected":n=this.getPad(i.gamepad.index),this.events.emit("disconnected",n,i)}}}},destroy:function(){this.stopListeners(),this.disconnectAll(),this.gamepads=[]},total:{get:function(){return this.gamepads.length}}});module.exports=a;
},{"../../utils/Class":8,"./Gamepad":112}],135:[function(require,module,exports) {
var i=require("../../../utils/Class"),t=new i({initialize:function(i){this.keyCode=i,this.originalEvent=void 0,this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1}});module.exports=t;
},{"../../../utils/Class":8}],131:[function(require,module,exports) {
module.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221};
},{}],482:[function(require,module,exports) {
var e=function(e,t){return t.timeLastMatched=e.timeStamp,t.index++,t.index===t.size||(t.current=t.keyCodes[t.index],!1)};module.exports=e;
},{}],385:[function(require,module,exports) {
var e=require("./AdvanceKeyCombo"),t=function(t,a){if(a.matched)return!0;var r=!1,m=!1;if(t.keyCode===a.current)if(a.index>0&&a.maxKeyDelay>0){var i=a.timeLastMatched+a.maxKeyDelay;t.timeStamp<=i&&(m=!0,r=e(t,a))}else m=!0,r=e(t,a);return!m&&a.resetOnWrongKey&&(a.index=0,a.current=a.keyCodes[0]),r&&(a.timeLastMatched=t.timeStamp,a.matched=!0,a.timeMatched=t.timeStamp),r};module.exports=t;
},{"./AdvanceKeyCombo":482}],386:[function(require,module,exports) {
var e=function(e){return e.current=e.keyCodes[0],e.index=0,e.timeLastMatched=0,e.matched=!1,e.timeMatched=0,e};module.exports=e;
},{}],133:[function(require,module,exports) {
var e=require("../../../utils/Class"),t=require("../../../utils/object/GetFastValue"),s=require("./ProcessKeyCombo"),i=require("./ResetKeyCombo"),h=new e({initialize:function(e,h,n){if(void 0===n&&(n={}),h.length<2)return!1;this.manager=e,this.enabled=!0,this.keyCodes=[];for(var o=0;o<h.length;o++){var r=h[o];"string"==typeof r?this.keyCodes.push(r.toUpperCase().charCodeAt(0)):"number"==typeof r?this.keyCodes.push(r):r.hasOwnProperty("keyCode")&&this.keyCodes.push(r.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=t(n,"resetOnWrongKey",!0),this.maxKeyDelay=t(n,"maxKeyDelay",0),this.resetOnMatch=t(n,"resetOnMatch",!1),this.deleteOnMatch=t(n,"deleteOnMatch",!1);var a=this,d=function(e){!a.matched&&a.enabled&&(s(e,a)&&(a.manager.emit("keycombomatch",a,e),a.resetOnMatch?i(a):a.deleteOnMatch&&a.destroy()))};this.onKeyDown=d,this.manager.on("keydown",d)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off("keydown",this.onKeyDown),this.manager=void 0}});module.exports=h;
},{"../../../utils/Class":8,"../../../utils/object/GetFastValue":102,"./ProcessKeyCombo":385,"./ResetKeyCombo":386}],132:[function(require,module,exports) {
var e=require("./KeyCodes"),r={};for(var o in e)r[e[o]]=o;module.exports=r;
},{"./KeyCodes":131}],136:[function(require,module,exports) {
var t=function(t,e){if(t.originalEvent=e,t.preventDefault&&e.preventDefault(),t.enabled)return t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.shiftKey=e.shiftKey,t.location=e.location,!1===t.isDown&&(t.isDown=!0,t.isUp=!1,t.timeDown=e.timeStamp,t.duration=0),t.repeats++,t._justDown=!0,t._justUp=!1,t};module.exports=t;
},{}],134:[function(require,module,exports) {
var e=function(e,t){if(e.originalEvent=t,e.preventDefault&&t.preventDefault(),e.enabled)return e.isDown=!1,e.isUp=!0,e.timeUp=t.timeStamp,e.duration=e.timeUp-e.timeDown,e.repeats=0,e._justDown=!1,e._justUp=!0,e};module.exports=e;
},{}],59:[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("eventemitter3"),s=require("./keys/Key"),i=require("./keys/KeyCodes"),r=require("./combo/KeyCombo"),n=require("./keys/KeyMap"),a=require("./keys/ProcessKeyDown"),h=require("./keys/ProcessKeyUp"),o=new e({Extends:t,initialize:function(e){t.call(this),this.manager=e,this.enabled=!1,this.target,this.keys=[],this.combos=[],this.captures=[],this.queue=[],this.handler},boot:function(){var e=this.manager.config;this.enabled=e.inputKeyboard,this.target=e.inputKeyboardEventTarget,this.enabled&&this.startListeners()},startListeners:function(){var e=this.queue,t=this.captures,s=function(s){s.defaultPrevented||(e.push(s),t[s.keyCode]&&s.preventDefault())};this.handler=s,this.target.addEventListener("keydown",s,!1),this.target.addEventListener("keyup",s,!1)},stopListeners:function(){this.target.removeEventListener("keydown",this.handler),this.target.removeEventListener("keyup",this.handler)},createCursorKeys:function(){return this.addKeys({up:i.UP,down:i.DOWN,left:i.LEFT,right:i.RIGHT,space:i.SPACE,shift:i.SHIFT})},addKeys:function(e){var t={};for(var s in e)t[s]=this.addKey(e[s]);return t},addKey:function(e){var t=this.keys;return t[e]||(t[e]=new s(e),this.captures[e]=!0),t[e]},removeKey:function(e){this.keys[e]&&(this.keys[e]=void 0,this.captures[e]=!1)},addKeyCapture:function(e){Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++)this.captures[e[t]]=!0},removeKeyCapture:function(e){Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++)this.captures[e[t]]=!1},createCombo:function(e,t){return new r(this,e,t)},update:function(){var e=this.queue.length;if(this.enabled&&0!==e)for(var t=this.queue.splice(0,e),s=this.keys,i=0;i<e;i++){var r=t[i],o=r.keyCode;"keydown"===r.type?(!n[o]||void 0!==s[o]&&!1!==s[o].isDown||(this.emit(r.type,r),this.emit("keydown_"+n[o],r)),s[o]&&a(s[o],r)):(this.emit(r.type,r),this.emit("keyup_"+n[o],r),s[o]&&h(s[o],r))}},shutdown:function(){this.removeAllListeners()},destroy:function(){this.stopListeners(),this.removeAllListeners(),this.keys=[],this.combos=[],this.captures=[],this.queue=[],this.handler=void 0,this.manager=null}});module.exports=o;
},{"../../utils/Class":8,"eventemitter3":35,"./keys/Key":135,"./keys/KeyCodes":131,"./combo/KeyCombo":133,"./keys/KeyMap":132,"./keys/ProcessKeyDown":136,"./keys/ProcessKeyUp":134}],60:[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../../device/Features"),n=new e({initialize:function(e){this.manager=e,this.capture=!0,this.enabled=!1,this.target,this.handler,this.locked=!1},boot:function(){var e=this.manager.config;this.enabled=e.inputMouse,this.target=e.inputMouseEventTarget,this.capture=e.inputMouseCapture,this.target||(this.target=this.manager.game.canvas),e.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(e){return e.preventDefault(),!1}),this},requestPointerLock:function(){if(t.pointerLock){var e=this.target;e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock||e.webkitRequestPointerLock,e.requestPointerLock()}},pointerLockChange:function(e){var t=this.target;this.locked=document.pointerLockElement===t||document.mozPointerLockElement===t||document.webkitPointerLockElement===t,this.manager.queue.push(e)},releasePointerLock:function(){t.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var e,n=this.manager.queue,o=this.target,i={passive:!0},r={passive:!1};this.capture?(e=function(e){e.defaultPrevented||(n.push(e),e.preventDefault())},o.addEventListener("mousemove",e,r),o.addEventListener("mousedown",e,r),o.addEventListener("mouseup",e,r)):(e=function(e){e.defaultPrevented||n.push(e)},o.addEventListener("mousemove",e,i),o.addEventListener("mousedown",e,i),o.addEventListener("mouseup",e,i)),this.handler=e,t.pointerLock&&(this.pointerLockChange=this.pointerLockChange.bind(this),document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},stopListeners:function(){var e=this.target;e.removeEventListener("mousemove",this.handler),e.removeEventListener("mousedown",this.handler),e.removeEventListener("mouseup",this.handler),t.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.manager=null}});module.exports=n;
},{"../../utils/Class":8,"../../device/Features":41}],43:[function(require,module,exports) {
var t=require("../utils/Class"),s=require("../math/Vector2"),i=new t({initialize:function(t,i){this.manager=t,this.id=i,this.event,this.camera=null,this.buttons=0,this.position=new s,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.dragState=0,this.isDown=!1,this.dirty=!1,this.justDown=!1,this.justUp=!1,this.justMoved=!1,this.wasTouch=!1,this.movementX=0,this.movementY=0},positionToCamera:function(t,s){return t.getWorldPoint(this.x,this.y,s)},x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},reset:function(){this.dirty=!1,this.justDown=!1,this.justUp=!1,this.justMoved=!1,this.movementX=0,this.movementY=0},touchmove:function(t){this.event=t,this.x=this.manager.transformX(t.changedTouches[0].pageX),this.y=this.manager.transformY(t.changedTouches[0].pageY),this.justMoved=!0,this.dirty=!0,this.wasTouch=!0},move:function(t){t.buttons&&(this.buttons=t.buttons),this.event=t,this.x=this.manager.transformX(t.pageX),this.y=this.manager.transformY(t.pageY),this.manager.mouse.locked&&(this.movementX+=t.movementX||t.mozMovementX||t.webkitMovementX||0,this.movementY+=t.movementY||t.mozMovementY||t.webkitMovementY||0),this.justMoved=!0,this.dirty=!0,this.wasTouch=!1},down:function(t,s){t.buttons&&(this.buttons=t.buttons),this.event=t,this.x=this.manager.transformX(t.pageX),this.y=this.manager.transformY(t.pageY),0===t.button&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=s),this.justDown=!0,this.isDown=!0,this.dirty=!0,this.wasTouch=!1},touchstart:function(t,s){this.buttons=1,this.event=t,this.x=this.manager.transformX(t.changedTouches[0].pageX),this.y=this.manager.transformY(t.changedTouches[0].pageY),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=s,this.justDown=!0,this.isDown=!0,this.dirty=!0,this.wasTouch=!0},up:function(t,s){t.buttons&&(this.buttons=t.buttons),this.event=t,this.x=this.manager.transformX(t.pageX),this.y=this.manager.transformY(t.pageY),0===t.button&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=s),this.justUp=!0,this.isDown=!1,this.dirty=!0,this.wasTouch=!1},touchend:function(t,s){this.buttons=0,this.event=t,this.x=this.manager.transformX(t.changedTouches[0].pageX),this.y=this.manager.transformY(t.changedTouches[0].pageY),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=s,this.justUp=!0,this.isDown=!1,this.dirty=!0,this.wasTouch=!0},noButtonDown:function(){return 0===this.buttons},leftButtonDown:function(){return 1&this.buttons},rightButtonDown:function(){return 2&this.buttons},middleButtonDown:function(){return 4&this.buttons},backButtonDown:function(){return 8&this.buttons},forwardButtonDown:function(){return 16&this.buttons},destroy:function(){this.camera=null,this.manager=null,this.position=null}});module.exports=i;
},{"../utils/Class":8,"../math/Vector2":96}],61:[function(require,module,exports) {
var t=require("../../utils/Class"),e=new t({initialize:function(t){this.manager=t,this.capture=!0,this.enabled=!1,this.target,this.handler},boot:function(){var t=this.manager.config;this.enabled=t.inputTouch,this.target=t.inputTouchEventTarget,this.capture=t.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),this.enabled&&this.startListeners()},startListeners:function(){var t,e=this.manager.queue,n=this.target,s={passive:!0},i={passive:!1};this.capture?(t=function(t){t.defaultPrevented||(e.push(t),t.preventDefault())},n.addEventListener("touchstart",t,i),n.addEventListener("touchmove",t,i),n.addEventListener("touchend",t,i)):(t=function(t){t.defaultPrevented||e.push(t)},n.addEventListener("touchstart",t,s),n.addEventListener("touchmove",t,s),n.addEventListener("touchend",t,s)),this.handler=t},stopListeners:function(){var t=this.target;t.removeEventListener("touchstart",this.handler),t.removeEventListener("touchmove",this.handler),t.removeEventListener("touchend",this.handler)},destroy:function(){this.stopListeners(),this.manager=null}});module.exports=e;
},{"../../utils/Class":8}],44:[function(require,module,exports) {
var r=require("./Vector2"),e=function(e,o,t,n,a,i,u,c){void 0===c&&(c=new r);var s=Math.sin(-a),v=Math.cos(-a),d=v*i,h=-s*i,x=s*u,M=v*u,f=d*M-h*x,l=M/f,m=-h/f,p=-x/f,q=d/f,w=(x*n-M*t)/f,y=-(d*n-h*t)/f;return c.x=e*l+o*p+w,c.y=e*m+o*q+y,c};module.exports=e;
},{"./Vector2":96}],25:[function(require,module,exports) {
var t=require("../utils/Class"),e=require("eventemitter3"),i=require("./gamepad/GamepadManager"),s=require("./keyboard/KeyboardManager"),n=require("./mouse/MouseManager"),o=require("./Pointer"),h=require("../geom/rectangle/Rectangle"),a=require("./touch/TouchManager"),r=require("../math/TransformXY"),u=new t({initialize:function(t,r){this.game=t,this.canvas,this.config=r,this.enabled=!0,this.events=new e,this.queue=[],this.keyboard=new s(this),this.mouse=new n(this),this.touch=new a(this),this.gamepad=new i(this),this.activePointer=new o(this,0),this.scale={x:1,y:1},this.globalTopOnly=!0,this.ignoreEvents=!1,this.bounds=new h,this._tempPoint={x:0,y:0},this._tempHitTest=[],t.events.once("boot",this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.updateBounds(),this.keyboard.boot(),this.mouse.boot(),this.touch.boot(),this.gamepad.boot(),this.game.events.once("destroy",this.destroy,this)},updateBounds:function(){var t=this.bounds,e=this.canvas.getBoundingClientRect();t.x=e.left+window.pageXOffset-document.documentElement.clientLeft,t.y=e.top+window.pageYOffset-document.documentElement.clientTop,t.width=e.width,t.height=e.height},resize:function(){this.updateBounds();var t=this.game.config.width,e=this.game.config.height,i=this.bounds.width,s=this.bounds.height;this.scale.x=t/i,this.scale.y=e/s},update:function(t){this.keyboard.update(),this.gamepad.update(),this.ignoreEvents=!1;var e=this.queue.length,i=this.activePointer;if(i.reset(),this.enabled&&0!==e){this.updateBounds(),this.scale.x=this.game.config.width/this.bounds.width,this.scale.y=this.game.config.height/this.bounds.height;for(var s=this.queue.splice(0,e),n=0;n<e;n++){var o=s[n];switch(o.type){case"mousemove":i.move(o,t);break;case"mousedown":i.down(o,t);break;case"mouseup":i.up(o,t);break;case"touchmove":i.touchmove(o,t);break;case"touchstart":i.touchstart(o,t);break;case"touchend":i.touchend(o,t);break;case"pointerlockchange":this.events.emit("pointerlockchange",o,this.mouse.locked)}}}},hitTest:function(t,e,i,s,n){void 0===n&&(n=this._tempHitTest);var o=this._tempPoint,h=s.width,a=s.height;if(n.length=0,!(t>=s.x&&e>=s.y&&t<=s.x+h&&e<=s.y+a))return n;s.getWorldPoint(t,e,o);for(var u=s.cull(i),c={x:0,y:0},l=this.game.config.resolution,d=0;d<u.length;d++){var g=u[d];if(g.input&&g.input.enabled&&g.willRender()){var m=o.x*l+s.scrollX*g.scrollFactorX-s.scrollX,f=o.y*l+s.scrollY*g.scrollFactorY-s.scrollY;r(m,f,g.x,g.y,g.rotation,g.scaleX,g.scaleY,c),this.pointWithinHitArea(g,c.x,c.y)&&n.push(g)}}return n},pointWithinHitArea:function(t,e,i){var s=t.input;return e+=t.displayOriginX,i+=t.displayOriginY,!!s.hitAreaCallback(s.hitArea,e,i,t)&&(s.localX=e,s.localY=i,!0)},pointWithinInteractiveObject:function(t,e,i){return!!t.hitArea&&(e+=t.gameObject.displayOriginX,i+=t.gameObject.displayOriginY,t.localX=e,t.localY=i,t.hitAreaCallback(t.hitArea,e,i,t))},transformX:function(t){return(t-this.bounds.left)*this.scale.x},transformY:function(t){return(t-this.bounds.top)*this.scale.y},getOffsetX:function(){return this.bounds.left},getOffsetY:function(){return this.bounds.top},getScaleX:function(){return this.game.config.width/this.bounds.width},getScaleY:function(){return this.game.config.height/this.bounds.height},destroy:function(){this.events.removeAllListeners(),this.keyboard.destroy(),this.mouse.destroy(),this.touch.destroy(),this.gamepad.destroy(),this.activePointer.destroy(),this.queue=[],this.game=null}});module.exports=u;
},{"../utils/Class":8,"eventemitter3":35,"./gamepad/GamepadManager":58,"./keyboard/KeyboardManager":59,"./mouse/MouseManager":60,"./Pointer":43,"../geom/rectangle/Rectangle":62,"./touch/TouchManager":61,"../math/TransformXY":44}],45:[function(require,module,exports) {
module.exports={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};
},{}],103:[function(require,module,exports) {
var e=function(e){return e&&e[0].toUpperCase()+e.slice(1)};module.exports=e;
},{}],49:[function(require,module,exports) {
var s=require("../utils/object/GetFastValue"),e=require("../utils/string/UppercaseFirst"),i=function(i){var r=i.game.config.defaultPhysicsSystem,t=s(i.settings,"physics",!1);if(r||t){var u=[];if(r&&u.push(e(r+"Physics")),t)for(var a in t)a=e(a.concat("Physics")),-1===u.indexOf(a)&&u.push(a);return u}};module.exports=i;
},{"../utils/object/GetFastValue":102,"../utils/string/UppercaseFirst":103}],50:[function(require,module,exports) {
var e=require("../utils/object/GetFastValue"),r=function(r){var t=r.game.config.defaultPlugins,u=e(r.settings,"plugins",!1);return Array.isArray(u)?u:t||[]};module.exports=r;
},{"../utils/object/GetFastValue":102}],99:[function(require,module,exports) {
var e={game:"game",anims:"anims",cache:"cache",registry:"registry",sound:"sound",textures:"textures",events:"events",cameras:"cameras",cameras3d:"cameras3d",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};module.exports=e;
},{}],51:[function(require,module,exports) {
var e=require("./const"),i=require("../utils/object/GetValue"),s=require("./InjectionMap"),a={create:function(a){return"string"==typeof a?a={key:a}:void 0===a&&(a={}),{status:e.PENDING,key:i(a,"key",""),active:i(a,"active",!1),visible:i(a,"visible",!0),isBooted:!1,data:{},files:i(a,"files",!1),cameras:i(a,"cameras",null),map:i(a,"map",s),physics:i(a,"physics",{}),loader:i(a,"loader",{}),plugins:i(a,"plugins",!1)}}};module.exports=a;
},{"./const":45,"../utils/object/GetValue":53,"./InjectionMap":99}],32:[function(require,module,exports) {
var t=require("../utils/Class"),s=require("./const"),i=require("./GetPhysicsPlugins"),e=require("./GetScenePlugins"),n=require("../plugins"),h=require("./Settings"),a=new t({initialize:function(t,s){this.scene=t,this.game,this.config=s,this.settings=h.create(s),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList},init:function(t){this.settings.status=s.INIT,this.game=t,this.canvas=t.canvas,this.context=t.context;var h=t.plugins;this.plugins=h,h.installGlobal(this,n.Global),h.installLocal(this,n.CoreScene),h.installLocal(this,e(this)),h.installLocal(this,i(this)),this.events.emit("boot",this),this.settings.isBooted=!0},install:function(t){Array.isArray(t)||(t=[t]),this.plugins.installLocal(this,t)},step:function(t,s){this.events.emit("preupdate",t,s),this.events.emit("update",t,s),this.scene.update.call(this.scene,t,s),this.events.emit("postupdate",t,s)},render:function(t){var s=this.displayList;s.depthSort(),this.cameras.render(t,s),this.events.emit("render",t)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(){return this.settings.active&&(this.settings.status=s.PAUSED,this.settings.active=!1,this.events.emit("pause",this)),this},resume:function(){return this.settings.active||(this.settings.status=s.RUNNING,this.settings.active=!0,this.events.emit("resume",this)),this},sleep:function(){return this.settings.status=s.SLEEPING,this.settings.active=!1,this.settings.visible=!1,this.events.emit("sleep",this),this},wake:function(){return this.settings.status=s.RUNNING,this.settings.active=!0,this.settings.visible=!0,this.events.emit("wake",this),this},isSleeping:function(){return this.settings.status===s.SLEEPING},isActive:function(){return this.settings.status===s.RUNNING},isVisible:function(){return this.settings.visible},setVisible:function(t){return this.settings.visible=t,this},setActive:function(t){return t?this.resume():this.pause()},start:function(t){this.settings.status=s.START,this.settings.data=t,this.settings.active=!0,this.settings.visible=!0,this.events.emit("start",this)},resize:function(t,s){this.events.emit("resize",t,s)},shutdown:function(){this.settings.status=s.SHUTDOWN,this.settings.active=!1,this.settings.visible=!1,this.events.emit("shutdown",this)},destroy:function(){this.settings.status=s.DESTROYED,this.settings.active=!1,this.settings.visible=!1,this.events.emit("destroy",this)}});module.exports=a;
},{"../utils/Class":8,"./const":45,"./GetPhysicsPlugins":49,"./GetScenePlugins":50,"../plugins":36,"./Settings":51}],11:[function(require,module,exports) {
var e=require("../utils/Class"),i=require("./Systems"),s=new e({initialize:function(e){this.sys=new i(this,e)},update:function(){}});module.exports=s;
},{"../utils/Class":8,"./Systems":32}],26:[function(require,module,exports) {
var e=require("../utils/Class"),s=require("./const"),t=require("../utils/object/GetValue"),i=require("../utils/NOOP"),n=require("./Scene"),r=require("./Systems"),h=new e({initialize:function(e,s){if(this.game=e,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._processing=0,s){Array.isArray(s)||(s=[s]);for(var t=0;t<s.length;t++)this._pending.push({key:"default",scene:s[t],autoStart:0===t,data:{}});e.events.once("ready",this.bootQueue,this)}},bootQueue:function(){var e,s,t,i;for(e=0;e<this._pending.length;e++){var r;t=(s=this._pending[e]).key,(i=s.scene)instanceof n?r=this.createSceneFromInstance(t,i):"object"==typeof i?r=this.createSceneFromObject(t,i):"function"==typeof i&&(r=this.createSceneFromFunction(t,i)),t=r.sys.settings.key,this.keys[t]=r,this.scenes.push(r),(s.autoStart||r.sys.settings.active)&&this._start.push(t)}for(this._pending.length=0,e=0;e<this._start.length;e++)s=this._start[e],this.start(s);this._start.length=0},processQueue:function(){var e=this._pending.length,s=this._queue.length;if(0!==e||0!==s){var t,i;if(e){for(t=0;t<e;t++)i=this._pending[t],this.add(i.key,i.scene,i.autoStart);for(t=0;t<this._start.length;t++)i=this._start[t],this.start(i);return this._start.length=0,void(this._pending.length=0)}for(t=0;t<this._queue.length;t++)this[(i=this._queue[t]).op](i.keyA,i.keyB);this._queue.length=0}},add:function(e,s,t){return void 0===t&&(t=!1),1!==this._processing&&this.game.isBooted?(e=this.getKey(e,s),s instanceof n?i=this.createSceneFromInstance(e,s):"object"==typeof s?(s.key=e,i=this.createSceneFromObject(e,s)):"function"==typeof s&&(i=this.createSceneFromFunction(e,s)),e=i.sys.settings.key,this.keys[e]=i,this.scenes.push(i),(t||i.sys.settings.active)&&(this.game.isBooted?this.start(e):this._start.push(e)),i):(this._pending.push({key:e,scene:s,autoStart:t,data:{}}),null);var i},remove:function(e){if(this._processing)this._queue.push({op:"remove",keyA:e,keyB:null});else{var s=this.getScene(e);if(!s)return this;var t=this.scenes.indexOf(s),i=s.sys.settings.key;t>-1&&(delete this.keys[i],this.scenes.splice(t,1),this._start.indexOf(i)>-1&&(t=this._start.indexOf(i),this._start.splice(t,1)),s.sys.destroy())}return this},bootScene:function(e){var t;e.init&&e.init.call(e,e.sys.settings.data),e.sys.load&&(t=e.sys.load).reset(),t&&e.preload?(e.preload.call(e),0===t.list.size?this.create(e):(e.sys.settings.status=s.LOADING,t.once("complete",this.loadComplete,this),t.start())):this.create(e)},loadComplete:function(e){var s=e.scene;this.create(s)},payloadComplete:function(e){this.bootScene(e.scene)},update:function(e,t){this.processQueue(),this._processing=1;for(var i=this.scenes.length-1;i>=0;i--){var n=this.scenes[i].sys;n.settings.status===s.RUNNING&&n.step(e,t)}},resize:function(e,s){for(var t=0;t<this.scenes.length;t++){this.scenes[t].sys.resize(e,s)}},render:function(e){for(var t=0;t<this.scenes.length;t++){var i=this.scenes[t].sys;i.settings.visible&&i.settings.status>=s.LOADING&&i.settings.status<s.SLEEPING&&i.render(e)}this._processing=0},create:function(e){e.create&&(e.sys.settings.status=s.CREATING,e.create.call(e,e.sys.settings.data)),e.sys.settings.status=s.RUNNING},createSceneFromFunction:function(e,s){var t=new s;if(t instanceof n){var h=t.sys.settings.key;if(""!==h&&(e=h),this.keys.hasOwnProperty(e))throw new Error("Cannot add a Scene with duplicate key: "+e);return this.createSceneFromInstance(e,t)}return t.sys=new r(t),t.sys.settings.key=e,t.sys.init(this.game),t.update||(t.update=i),t},createSceneFromInstance:function(e,s){var t=s.sys.settings.key;return""!==t?e=t:s.sys.settings.key=e,s.sys.init(this.game),s},createSceneFromObject:function(e,s){var r=new n(s),h=r.sys.settings.key;""!==h?e=h:r.sys.settings.key=e,r.sys.init(this.game);for(var o=["init","preload","create","update","render"],a=0;a<o.length;a++){var u=t(s,o[a],null);"update"!==o[a]||u||(u=i),u&&(r[o[a]]=u)}if(s.hasOwnProperty("extend"))for(var c in s.extend)r[c]=s.extend[c];return r},getKey:function(e,s){if(e||(e="default"),"function"==typeof s)return e;if(s instanceof n?e=s.sys.settings.key:"object"==typeof s&&s.hasOwnProperty("key")&&(e=s.key),this.keys.hasOwnProperty(e))throw new Error("Cannot add a Scene with duplicate key: "+e);return e},getScene:function(e){if("string"==typeof e){if(this.keys[e])return this.keys[e]}else for(var s=0;s<this.scenes.length;s++)if(e===this.scenes[s])return e;return null},isActive:function(e){var s=this.getScene(e);return s?s.sys.isActive():null},isVisible:function(e){var s=this.getScene(e);return s?s.sys.isVisible():null},isSleeping:function(e){var s=this.getScene(e);return s?s.sys.isSleeping():null},pause:function(e){var s=this.getScene(e);return s&&s.sys.pause(),this},resume:function(e){var s=this.getScene(e);return s&&s.sys.resume(),this},sleep:function(e){var s=this.getScene(e);return s&&s.sys.sleep(),this},wake:function(e){var s=this.getScene(e);return s&&s.sys.wake(),this},start:function(e,t){if(void 0===t&&(t={}),!this.game.isBooted){for(var i=0;i<this._pending.length;i++){var n=this._pending[i];n.key===e&&(n.autoStart=!0,n.data=t)}return this}var r=this.getScene(e);if(r){var h;if(r.sys.start(t),r.sys.load&&(h=r.sys.load),h&&Array.isArray(r.sys.settings.files)&&(h.reset(),h.loadArray(r.sys.settings.files)))return r.sys.settings.status=s.LOADING,h.once("complete",this.payloadComplete,this),h.start(),this;this.bootScene(r)}return this},stop:function(e){var s=this.getScene(e);return s&&s.sys.shutdown(),this},switch:function(e,s){var t=this.getScene(e),i=this.getScene(s);return t&&i&&t!==i&&(this.sleep(e),this.isSleeping(s)?this.wake(s):this.start(s)),this},getAt:function(e){return this.scenes[e]},getIndex:function(e){var s=this.getScene(e);return this.scenes.indexOf(s)},bringToTop:function(e){if(this._processing)this._queue.push({op:"bringToTop",keyA:e,keyB:null});else{var s=this.getIndex(e);if(-1!==s&&s<this.scenes.length){var t=this.getScene(e);this.scenes.splice(s,1),this.scenes.push(t)}}return this},sendToBack:function(e){if(this._processing)this._queue.push({op:"sendToBack",keyA:e,keyB:null});else{var s=this.getIndex(e);if(-1!==s&&s>0){var t=this.getScene(e);this.scenes.splice(s,1),this.scenes.unshift(t)}}return this},moveDown:function(e){if(this._processing)this._queue.push({op:"moveDown",keyA:e,keyB:null});else{var s=this.getIndex(e);if(s>0){var t=s-1,i=this.getScene(e),n=this.getAt(t);this.scenes[s]=n,this.scenes[t]=i}}return this},moveUp:function(e){if(this._processing)this._queue.push({op:"moveUp",keyA:e,keyB:null});else{var s=this.getIndex(e);if(s<this.scenes.length-1){var t=s+1,i=this.getScene(e),n=this.getAt(t);this.scenes[s]=n,this.scenes[t]=i}}return this},moveAbove:function(e,s){if(e===s)return this;if(this._processing)this._queue.push({op:"moveAbove",keyA:e,keyB:s});else{var t=this.getIndex(e),i=this.getIndex(s);if(t>i&&-1!==t&&-1!==i){var n=this.getAt(i);this.scenes.splice(i,1),this.scenes.splice(t,0,n)}}return this},moveBelow:function(e,s){if(e===s)return this;if(this._processing)this._queue.push({op:"moveBelow",keyA:e,keyB:s});else{var t=this.getIndex(e),i=this.getIndex(s);if(t<i&&-1!==t&&-1!==i){var n=this.getAt(i);this.scenes.splice(i,1),this.scenes.splice(t,0,n)}}return this},queueOp:function(e,s,t){return this._queue.push({op:e,keyA:s,keyB:t}),this},swapPosition:function(e,s){if(e===s)return this;if(this._processing)this._queue.push({op:"swapPosition",keyA:e,keyB:s});else{var t=this.getIndex(e),i=this.getIndex(s);if(t!==i&&-1!==t&&-1!==i){var n=this.getAt(t);this.scenes[t]=this.scenes[i],this.scenes[i]=n}}return this},dump:function(){for(var e=[],t=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],i=0;i<this.scenes.length;i++){var n=this.scenes[i].sys,r=!n.settings.visible||n.settings.status!==s.RUNNING&&n.settings.status!==s.PAUSED?"[-] ":"[*] ";r+=n.settings.key+" ("+t[n.settings.status]+")",e.push(r)}console.log(e.join("\n"))},destroy:function(){for(var e=this.scenes.length-1;e>=0;e--){this.scenes[e].sys.destroy()}this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});module.exports=h;
},{"../utils/Class":8,"./const":45,"../utils/object/GetValue":53,"../utils/NOOP":30,"./Scene":11,"./Systems":32}],104:[function(require,module,exports) {
var t=require("../utils/Class"),e=require("eventemitter3"),s=require("../utils/NOOP"),i=new t({Extends:e,initialize:function(t){e.call(this),this.game=t,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,t.events.on("blur",function(){this.pauseOnBlur&&this.onBlur()},this),t.events.on("focus",function(){this.pauseOnBlur&&this.onFocus()},this),t.events.once("destroy",this.destroy,this),this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,this.locked&&this.unlock()},add:s,addAudioSprite:function(t,e){var s=this.add(t,e);for(var i in s.spritemap=this.game.cache.json.get(t).spritemap,s.spritemap)if(s.spritemap.hasOwnProperty(i)){var n=s.spritemap[i];s.addMarker({name:i,start:n.start,duration:n.end-n.start,config:e})}return s},play:function(t,e){var s=this.add(t);return s.once("ended",s.destroy,s),e?e.name?(s.addMarker(e),s.play(e.name)):s.play(e):s.play()},playAudioSprite:function(t,e,s){var i=this.addAudioSprite(t);return i.once("ended",i.destroy,i),i.play(e,s)},remove:function(t){var e=this.sounds.indexOf(t);return-1!==e&&(t.destroy(),this.sounds.splice(e,1),!0)},removeByKey:function(t){for(var e=0,s=this.sounds.length-1;s>=0;s--){var i=this.sounds[s];i.key===t&&(i.destroy(),this.sounds.splice(s,1),e++)}return e},pauseAll:function(){this.forEachActiveSound(function(t){t.pause()}),this.emit("pauseall",this)},resumeAll:function(){this.forEachActiveSound(function(t){t.resume()}),this.emit("resumeall",this)},stopAll:function(){this.forEachActiveSound(function(t){t.stop()}),this.emit("stopall",this)},unlock:s,onBlur:s,onFocus:s,update:function(t,e){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit("unlocked",this));for(var s=this.sounds.length-1;s>=0;s--)this.sounds[s].pendingRemove&&this.sounds.splice(s,1);this.sounds.forEach(function(s){s.update(t,e)})},destroy:function(){this.removeAllListeners(),this.forEachActiveSound(function(t){t.destroy()}),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(t,e){var s=this;this.sounds.forEach(function(i,n){i.pendingRemove||t.call(e||s,i,n,s.sounds)})},setRate:function(t){return this.rate=t,this},rate:{get:function(){return this._rate},set:function(t){this._rate=t,this.forEachActiveSound(function(t){t.setRate()}),this.emit("rate",this,t)}},setDetune:function(t){return this.detune=t,this},detune:{get:function(){return this._detune},set:function(t){this._detune=t,this.forEachActiveSound(function(t){t.setRate()}),this.emit("detune",this,t)}}});module.exports=i;
},{"../utils/Class":8,"eventemitter3":35,"../utils/NOOP":30}],267:[function(require,module,exports) {
var t=require("../utils/Class"),e=require("eventemitter3"),i=require("../utils/object/Extend"),r=require("../utils/NOOP"),n=new t({Extends:e,initialize:function(t,r,n){e.call(this),this.manager=t,this.key=r,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={delay:0},this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.config=i(this.config,n),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(t){return!(!t||!t.name||"string"!=typeof t.name)&&(this.markers[t.name]?(console.error("addMarker - Marker with name '"+t.name+"' already exists for sound '"+this.key+"'!"),!1):(t=i(!0,{name:"",start:0,duration:this.totalDuration-(t.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0}},t),this.markers[t.name]=t,!0))},updateMarker:function(t){return!(!t||!t.name||"string"!=typeof t.name)&&(this.markers[t.name]?(this.markers[t.name]=i(!0,this.markers[t.name],t),!0):(console.error("updateMarker - Marker with name '"+t.name+"' does not exist for sound '"+this.key+"'!"),!1))},removeMarker:function(t){var e=this.markers[t];return e?(this.markers[t]=null,e):null},play:function(t,e){if(void 0===t&&(t=""),"object"==typeof t&&(e=t,t=""),"string"!=typeof t)return console.error("Sound marker name has to be a string!"),!1;if(t){if(!this.markers[t])return console.error("No marker with name '"+t+"' found for sound '"+this.key+"'!"),!1;this.currentMarker=this.markers[t],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}else this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;return this.resetConfig(),this.currentConfig=i(this.currentConfig,e),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return!(this.isPaused||!this.isPlaying)&&(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!(!this.isPaused||this.isPlaying)&&(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!(!this.isPaused&&!this.isPlaying)&&(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:r,calculateRate:function(){var t=this.currentConfig.detune+this.manager.detune,e=Math.pow(1.0005777895065548,t);this.totalRate=this.currentConfig.rate*this.manager.rate*e},setRate:function(t){return this.rate=t,this},rate:{get:function(){return this.currentConfig.rate},set:function(t){this.currentConfig.rate=t,this.calculateRate(),this.emit("rate",this,t)}},setDetune:function(t){return this.detune=t,this},detune:{get:function(){return this.currentConfig.detune},set:function(t){this.currentConfig.detune=t,this.calculateRate(),this.emit("detune",this,t)}},destroy:function(){this.pendingRemove||(this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});module.exports=n;
},{"../utils/Class":8,"eventemitter3":35,"../utils/object/Extend":13,"../utils/NOOP":30}],120:[function(require,module,exports) {
var t=require("../../utils/Class"),i=require("../BaseSound"),e=new t({Extends:i,initialize:function(t,e,s){void 0===s&&(s={}),this.tags=t.game.cache.audio.get(e),this.tags?(this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,i.call(this,t,e,s)):console.error("No audio loaded in cache with key: '"+e+"'!")},play:function(t,e){return!this.manager.isLocked(this,"play",[t,e])&&(!!i.prototype.play.call(this,t,e)&&(!!this.pickAndPlayAudioTag()&&(this.emit("play",this),!0)))},pause:function(){return!this.manager.isLocked(this,"pause")&&(!(this.startTime>0)&&(!!i.prototype.pause.call(this)&&(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit("pause",this),!0)))},resume:function(){return!this.manager.isLocked(this,"resume")&&(!(this.startTime>0)&&(!!i.prototype.resume.call(this)&&(!!this.pickAndPlayAudioTag()&&(this.emit("resume",this),!0))))},stop:function(){return!this.manager.isLocked(this,"stop")&&(!!i.prototype.stop.call(this)&&(this.stopAndReleaseAudioTag(),this.emit("stop",this),!0))},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var t=this.currentConfig.seek,i=this.currentConfig.delay,e=(this.currentMarker?this.currentMarker.start:0)+t;return this.previousTime=e,this.audio.currentTime=e,this.applyConfig(),0===i?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+1e3*i,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var t=0;t<this.tags.length;t++){var i=this.tags[t];if("false"===i.dataset.used)return i.dataset.used="true",this.audio=i,!0}if(!this.manager.override)return!1;var e=[];this.manager.forEachActiveSound(function(t){t.key===this.key&&t.audio&&e.push(t)},this),e.sort(function(t,i){return t.loop===i.loop?i.seek/i.duration-t.seek/t.duration:t.loop?1:-1});var s=e[0];return this.audio=s.audio,s.reset(),s.audio=null,s.startTime=0,s.previousTime=0,!0},playCatchPromise:function(){var t=this.audio.play();t&&t.catch(function(t){console.warn(t)})},stopAndReleaseAudioTag:function(){this.audio.pause(),this.audio.dataset.used="false",this.audio=null,this.startTime=0,this.previousTime=0},reset:function(){i.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(t,i){if(this.isPlaying)if(this.startTime>0)this.startTime<t-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,t-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());else{var e=this.currentMarker?this.currentMarker.start:0,s=e+this.duration,r=this.audio.currentTime;if(this.currentConfig.loop)r>=s-this.manager.loopEndOffset?(this.audio.currentTime=e+Math.max(0,r-s),r=this.audio.currentTime):r<e&&(this.audio.currentTime+=e,r=this.audio.currentTime),r<this.previousTime&&this.emit("looped",this);else if(r>=s)return this.reset(),this.stopAndReleaseAudioTag(),void this.emit("ended",this);this.previousTime=r}},destroy:function(){i.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},setMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},setVolume:function(){this.audio&&(this.audio.volume=this.currentConfig.volume*this.manager.volume)},setRate:function(){i.prototype.setRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)}});Object.defineProperty(e.prototype,"mute",{get:function(){return this.currentConfig.mute},set:function(t){this.currentConfig.mute=t,this.manager.isLocked(this,"mute",t)||(this.setMute(),this.emit("mute",this,t))}}),Object.defineProperty(e.prototype,"volume",{get:function(){return this.currentConfig.volume},set:function(t){this.currentConfig.volume=t,this.manager.isLocked(this,"volume",t)||(this.setVolume(),this.emit("volume",this,t))}}),Object.defineProperty(e.prototype,"rate",{get:function(){return Object.getOwnPropertyDescriptor(i.prototype,"rate").get.call(this)},set:function(t){this.currentConfig.rate=t,this.manager.isLocked(this,"rate",t)||Object.getOwnPropertyDescriptor(i.prototype,"rate").set.call(this,t)}}),Object.defineProperty(e.prototype,"detune",{get:function(){return Object.getOwnPropertyDescriptor(i.prototype,"detune").get.call(this)},set:function(t){this.currentConfig.detune=t,this.manager.isLocked(this,"detune",t)||Object.getOwnPropertyDescriptor(i.prototype,"detune").set.call(this,t)}}),Object.defineProperty(e.prototype,"seek",{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(t){this.manager.isLocked(this,"seek",t)||this.startTime>0||(this.isPlaying||this.isPaused)&&(t=Math.min(Math.max(0,t),this.duration),this.isPlaying?(this.previousTime=t,this.audio.currentTime=t):this.isPaused&&(this.currentConfig.seek=t),this.emit("seek",this,t))}}),Object.defineProperty(e.prototype,"loop",{get:function(){return this.currentConfig.loop},set:function(t){this.currentConfig.loop=t,this.manager.isLocked(this,"loop",t)||(this.audio&&(this.audio.loop=t),this.emit("loop",this,t))}}),module.exports=e;
},{"../../utils/Class":8,"../BaseSound":267}],63:[function(require,module,exports) {
var t=require("../BaseSoundManager"),n=require("../../utils/Class"),o=require("./HTML5AudioSound"),e=new n({Extends:t,initialize:function(n){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,t.call(this,n)},add:function(t,n){var e=new o(this,t,n);return this.sounds.push(e),e},unlock:function(){var t=this,n=!1,o=function(){n=!0},e=function(){if(t.game.cache.audio.entries.size)if(n)n=!1;else{document.body.removeEventListener("touchmove",o),document.body.removeEventListener("touchend",e);var u=[];t.game.cache.audio.entries.each(function(t,n){for(var o=0;o<n.length;o++)u.push(n[o]);return!0});var i=u[u.length-1];i.oncanplaythrough=function(){i.oncanplaythrough=null,t.unlocked=!0},u.forEach(function(t){t.load()})}};this.once("unlocked",function(){this.forEachActiveSound(function(t){t.duration=t.tags[0].duration,t.totalDuration=t.tags[0].duration}),this.lockedActionsQueue.forEach(function(t){t.sound[t.prop].apply?t.sound[t.prop].apply(t.sound,t.value||[]):t.sound[t.prop]=t.value}),this.lockedActionsQueue.length=0,this.lockedActionsQueue=null},this),document.body.addEventListener("touchmove",o,!1),document.body.addEventListener("touchend",e,!1)},onBlur:function(){this.forEachActiveSound(function(t){t.isPlaying&&(this.onBlurPausedSounds.push(t),t.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(t){t.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){t.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(t,n,o){return!!this.locked&&(this.lockedActionsQueue.push({sound:t,prop:n,value:o}),!0)},setMute:function(t){return this.mute=t,this},mute:{get:function(){return this._mute},set:function(t){this._mute=t,this.forEachActiveSound(function(t){t.setMute()}),this.emit("mute",this,t)}},setVolume:function(t){return this.volume=t,this},volume:{get:function(){return this._volume},set:function(t){this._volume=t,this.forEachActiveSound(function(t){t.setVolume()}),this.emit("volume",this,t)}}});module.exports=e;
},{"../BaseSoundManager":104,"../../utils/Class":8,"./HTML5AudioSound":120}],119:[function(require,module,exports) {
var t=require("../BaseSound"),e=require("../../utils/Class"),i=require("eventemitter3"),r=require("../../utils/object/Extend"),n=new e({Extends:i,initialize:function(t,e,n){void 0===n&&(n={}),i.call(this),this.manager=t,this.key=e,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=r({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0},n),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(t){return!1},updateMarker:function(t){return!1},removeMarker:function(t){return null},play:function(t,e){return!1},pause:function(){return!1},resume:function(){return!1},stop:function(){return!1},destroy:function(){this.manager.remove(this),t.prototype.destroy.call(this)}});module.exports=n;
},{"../BaseSound":267,"../../utils/Class":8,"eventemitter3":35,"../../utils/object/Extend":13}],64:[function(require,module,exports) {
var e=require("../BaseSoundManager"),t=require("../../utils/Class"),r=require("eventemitter3"),i=require("./NoAudioSound"),u=require("../../utils/NOOP"),o=new t({Extends:r,initialize:function(e){r.call(this),this.game=e,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(e,t){var r=new i(this,e,t);return this.sounds.push(r),r},addAudioSprite:function(e,t){var r=this.add(e,t);return r.spritemap={},r},play:function(e,t){return!1},playAudioSprite:function(e,t,r){return!1},remove:function(t){return e.prototype.remove.call(this,t)},removeByKey:function(t){return e.prototype.removeByKey.call(this,t)},pauseAll:u,resumeAll:u,stopAll:u,update:u,setRate:u,setDetune:u,setMute:u,setVolume:u,forEachActiveSound:function(t,r){e.prototype.forEachActiveSound.call(this,t,r)},destroy:function(){e.prototype.destroy.call(this)}});module.exports=o;
},{"../BaseSoundManager":104,"../../utils/Class":8,"eventemitter3":35,"./NoAudioSound":119,"../../utils/NOOP":30}],123:[function(require,module,exports) {
var t=require("../../utils/Class"),e=require("../BaseSound"),i=new t({Extends:e,initialize:function(t,i,s){void 0===s&&(s={}),this.audioBuffer=t.game.cache.audio.get(i),this.audioBuffer?(this.source=null,this.loopSource=null,this.muteNode=t.context.createGain(),this.volumeNode=t.context.createGain(),this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),this.volumeNode.connect(t.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,e.call(this,t,i,s)):console.error("No audio loaded in cache with key: '"+i+"'!")},play:function(t,i){return!!e.prototype.play.call(this,t,i)&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit("play",this),!0)},pause:function(){return!(this.manager.context.currentTime<this.startTime)&&(!!e.prototype.pause.call(this)&&(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit("pause",this),!0))},resume:function(){return!(this.manager.context.currentTime<this.startTime)&&(!!e.prototype.resume.call(this)&&(this.createAndStartBufferSource(),this.emit("resume",this),!0))},stop:function(){return!!e.prototype.stop.call(this)&&(this.stopAndRemoveBufferSource(),this.emit("stop",this),!0)},createAndStartBufferSource:function(){var t=this.currentConfig.seek,e=this.currentConfig.delay,i=this.manager.context.currentTime+e,s=(this.currentMarker?this.currentMarker.start:0)+t,o=this.duration-t;this.playTime=i-t,this.startTime=i,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,i),Math.max(0,s),Math.max(0,o)),this.resetConfig()},createAndStartLoopBufferSource:function(){var t=this.getLoopTime(),e=this.currentMarker?this.currentMarker.start:0,i=this.duration;this.loopTime=t,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,t),Math.max(0,e),Math.max(0,i))},createBufferSource:function(){var t=this,e=this.manager.context.createBufferSource();return e.buffer=this.audioBuffer,e.connect(this.muteNode),e.onended=function(e){e.target===t.source&&(t.currentConfig.loop?t.hasLooped=!0:t.hasEnded=!0)},e},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),e.prototype.applyConfig.call(this)},update:function(t,i){this.hasEnded?(this.hasEnded=!1,e.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit("ended",this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit("looped",this))},destroy:function(){e.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.rateUpdates.length=0,this.rateUpdates=null},setRate:function(){e.prototype.setRate.call(this);var t=this.manager.context.currentTime;this.source&&this.source.playbackRate.setValueAtTime(this.totalRate,t),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,t)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var t=0,e=0;e<this.rateUpdates.length;e++){t+=((e<this.rateUpdates.length-1?this.rateUpdates[e+1].time:this.manager.context.currentTime-this.playTime)-this.rateUpdates[e].time)*this.rateUpdates[e].rate}return t},getLoopTime:function(){for(var t=0,e=0;e<this.rateUpdates.length-1;e++)t+=(this.rateUpdates[e+1].time-this.rateUpdates[e].time)*this.rateUpdates[e].rate;var i=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+i.time+(this.duration-t)/i.rate}});Object.defineProperty(i.prototype,"mute",{get:function(){return 0===this.muteNode.gain.value},set:function(t){this.currentConfig.mute=t,this.muteNode.gain.setValueAtTime(t?0:1,0),this.emit("mute",this,t)}}),Object.defineProperty(i.prototype,"volume",{get:function(){return this.volumeNode.gain.value},set:function(t){this.currentConfig.volume=t,this.volumeNode.gain.setValueAtTime(t,0),this.emit("volume",this,t)}}),Object.defineProperty(i.prototype,"seek",{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(t){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(t=Math.min(Math.max(0,t),this.duration),this.currentConfig.seek=t,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit("seek",this,t))}}),Object.defineProperty(i.prototype,"loop",{get:function(){return this.currentConfig.loop},set:function(t){this.currentConfig.loop=t,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),t&&this.createAndStartLoopBufferSource()),this.emit("loop",this,t)}}),module.exports=i;
},{"../../utils/Class":8,"../BaseSound":267}],65:[function(require,module,exports) {
var t=require("../BaseSoundManager"),e=require("../../utils/Class"),n=require("./WebAudioSound"),o=new e({Extends:t,initialize:function(e){this.context=this.createAudioContext(e),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked="suspended"===this.context.state&&"ontouchstart"in window,t.call(this,e)},createAudioContext:function(t){var e=t.config.audio;return e&&e.context?(e.context.resume(),e.context):new AudioContext},add:function(t,e){var o=new n(this,t,e);return this.sounds.push(o),o},unlock:function(){var t=this,e=function(){t.context.resume().then(function(){document.body.removeEventListener("touchstart",e),document.body.removeEventListener("touchend",e),t.unlocked=!0})};document.body.addEventListener("touchstart",e,!1),document.body.addEventListener("touchend",e,!1)},onBlur:function(){this.context.suspend()},onFocus:function(){this.context.resume()},destroy:function(){this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio&&this.game.config.audio.context?this.context.suspend():this.context.close(),this.context=null,t.prototype.destroy.call(this)},setMute:function(t){return this.mute=t,this},mute:{get:function(){return 0===this.masterMuteNode.gain.value},set:function(t){this.masterMuteNode.gain.setValueAtTime(t?0:1,0),this.emit("mute",this,t)}},setVolume:function(t){return this.volume=t,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(t){this.masterVolumeNode.gain.setValueAtTime(t,0),this.emit("volume",this,t)}}});module.exports=o;
},{"../BaseSoundManager":104,"../../utils/Class":8,"./WebAudioSound":123}],27:[function(require,module,exports) {
var e=require("./html5/HTML5AudioSoundManager"),o=require("./noaudio/NoAudioSoundManager"),u=require("./webaudio/WebAudioSoundManager"),i={create:function(i){var d=i.config.audio,a=i.device.audio;return d&&d.noAudio||!a.webAudio&&!a.audioData?new o(i):!a.webAudio||d&&d.disableWebAudio?new e(i):new u(i)}};module.exports=i;
},{"./html5/HTML5AudioSoundManager":63,"./noaudio/NoAudioSoundManager":64,"./webaudio/WebAudioSoundManager":65}],441:[function(require,module,exports) {
var r=function(r,e){var t=r.source[e];return r.add("__BASE",e,0,0,t.width,t.height),r};module.exports=r;
},{}],452:[function(require,module,exports) {
var r=function(r){var a={};for(var e in r)Array.isArray(r[e])?a[e]=r[e].slice(0):a[e]=r[e];return a};module.exports=r;
},{}],447:[function(require,module,exports) {
var r=require("../../utils/object/Clone"),e=function(e,a,t){if(t.frames||t.textures){var s=e.source[a];e.add("__BASE",a,0,0,s.width,s.height);for(var i,o=Array.isArray(t.textures)?t.textures[a].frames:t.frames,u=0;u<o.length;u++){var m=o[u];i=e.add(m.filename,a,m.frame.x,m.frame.y,m.frame.w,m.frame.h),m.trimmed&&i.setTrim(m.sourceSize.w,m.sourceSize.h,m.spriteSourceSize.x,m.spriteSourceSize.y,m.spriteSourceSize.w,m.spriteSourceSize.h),m.rotated&&(i.rotated=!0,i.updateUVsInverted()),m.anchor&&(i.customPivot=!0,i.pivotX=m.anchor.x,i.pivotY=m.anchor.y),i.customData=r(m)}for(var c in t)"frames"!==c&&(Array.isArray(t[c])?e.customData[c]=t[c].slice(0):e.customData[c]=t[c]);return e}console.warn("Invalid Texture Atlas JSON Array given, missing 'frames' and 'textures' array")};module.exports=e;
},{"../../utils/object/Clone":452}],448:[function(require,module,exports) {
var e=require("../../utils/object/Clone"),r=function(r,a,t){if(t.frames){var i=r.source[a];r.add("__BASE",a,0,0,i.width,i.height);var s,o=t.frames;for(var u in o){var m=o[u];s=r.add(u,a,m.frame.x,m.frame.y,m.frame.w,m.frame.h),m.trimmed&&s.setTrim(m.sourceSize.w,m.sourceSize.h,m.spriteSourceSize.x,m.spriteSourceSize.y,m.spriteSourceSize.w,m.spriteSourceSize.h),m.rotated&&(s.rotated=!0,s.updateUVsInverted()),s.customData=e(m)}for(var c in t)"frames"!==c&&(Array.isArray(t[c])?r.customData[c]=t[c].slice(0):r.customData[c]=t[c]);return r}console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object")};module.exports=r;
},{"../../utils/object/Clone":452}],442:[function(require,module,exports) {
var e=function(e,t){if(["layers","tilewidth","tileheight","tileswide","tileshigh"].forEach(function(e){t[e]}),1===t.layers.length){for(var i=new Phaser.FrameData,r=t.tileheight,a=t.tilewidth,h=t.layers[0].tiles,l=0;l<h.length;l++)i.addFrame(new Phaser.Frame(l,h[l].x,h[l].y,a,r,"frame_"+l)).setTrim(!1);return i}};module.exports=e;
},{}],444:[function(require,module,exports) {
var r=require("../../utils/object/GetFastValue"),e=function(e,a,t,i,n,o,d){var h=r(d,"frameWidth",null),l=r(d,"frameHeight",h);if(null===h)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var u=e.source[a];e.add("__BASE",a,0,0,u.width,u.height);var f=r(d,"startFrame",0),v=r(d,"endFrame",-1),m=r(d,"margin",0),g=r(d,"spacing",0),s=Math.floor((n-m+g)/(h+g))*Math.floor((o-m+g)/(l+g));(f>s||f<-s)&&(f=0),f<0&&(f=s+f),-1!==v&&(s=f+(v+1));for(var c=m,p=m,w=0,F=0,M=0;M<s;M++){w=0,F=0;var S=c+h,x=p+l;S>n&&(w=S-n),x>o&&(F=x-o),e.add(M,a,t+c,i+p,h-w,l-F),(c+=h+g)+h>n&&(c=m,p+=l+g)}return e};module.exports=e;
},{"../../utils/object/GetFastValue":102}],443:[function(require,module,exports) {
var r=require("../../utils/object/GetFastValue"),t=function(t,e,a){var i=r(a,"frameWidth",null),u=r(a,"frameHeight",i);if(!i)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var o,h=r(a,"startFrame",0),n=r(a,"endFrame",-1),d=r(a,"margin",0),l=r(a,"spacing",0),c=e.cutX,f=e.cutY,m=e.cutWidth,v=e.cutHeight,g=e.realWidth,s=e.realHeight,W=Math.floor((g-d+l)/(i+l)),x=Math.floor((s-d+l)/(u+l)),F=W*x,H=e.x,p=i-H,M=i-(g-m-H),w=e.y,I=u-w,S=u-(s-v-w);(h>F||h<-F)&&(h=0),h<0&&(h=F+h),-1!==n&&(F=h+(n+1));for(var T=d,b=d,j=0,q=e.sourceIndex,y=0;y<x;y++){for(var A=0===y,E=y===x-1,G=0;G<W;G++){var V=0===G,X=G===W-1;if(o=t.add(j,q,c+T,f+b,i,u),V||A||X||E){var Y=V?H:0,k=A?w:0,z=i,B=u;V?z=p:X&&(z=M),A?B=I:E&&(B=S),o.cutWidth=z,o.cutHeight=B,o.setTrim(i,u,Y,k,z,B)}T+=l,T+=V?p:X||i,j++}T=d,b+=l,b+=A?I:E?S:u}return t};module.exports=t;
},{"../../utils/object/GetFastValue":102}],445:[function(require,module,exports) {
var e=function(e,a){if(a.getElementsByTagName("TextureAtlas")){for(var t,r,l,n,u,s,m,v,h,p,f,i=new Phaser.FrameData,I=a.getElementsByTagName("SubTexture"),g=0;g<I.length;g++)r=(l=I[g].attributes).name.value,n=parseInt(l.x.value,10),u=parseInt(l.y.value,10),s=parseInt(l.width.value,10),m=parseInt(l.height.value,10),v=null,h=null,l.frameX&&(v=Math.abs(parseInt(l.frameX.value,10)),h=Math.abs(parseInt(l.frameY.value,10)),p=parseInt(l.frameWidth.value,10),f=parseInt(l.frameHeight.value,10)),t=i.addFrame(new Phaser.Frame(g,n,u,s,m,r)),null===v&&null===h||t.setTrim(!0,s,m,v,h,p,f);return i}};module.exports=e;
},{}],446:[function(require,module,exports) {
var h=0,t=function(t,e,i,a){var r=h-a.y-a.height;t.add(i,e,a.x,r,a.width,a.height)},e=function(e,i,a){var r=e.source[i];e.add("__BASE",i,0,0,r.width,r.height),h=r.height;for(var d=a.split("\n"),s=/^[ ]*(- )*(\w+)+[: ]+(.*)/,c="",n="",g={x:0,y:0,width:0,height:0},w=0;w<d.length;w++){var o=d[w].match(s);if(o){var v="- "===o[1],f=o[2],u=o[3];if(v&&(n!==c&&(t(e,i,n,g),c=n),g={x:0,y:0,width:0,height:0}),"name"!==f)switch(f){case"x":case"y":case"width":case"height":g[f]=parseInt(u,10)}else n=u}}return n!==c&&t(e,i,n,g),e};module.exports=e;
},{}],387:[function(require,module,exports) {
module.exports={Canvas:require("./Canvas"),Image:require("./Image"),JSONArray:require("./JSONArray"),JSONHash:require("./JSONHash"),Pyxel:require("./Pyxel"),SpriteSheet:require("./SpriteSheet"),SpriteSheetFromAtlas:require("./SpriteSheetFromAtlas"),StarlingXML:require("./StarlingXML"),UnityYAML:require("./UnityYAML")};
},{"./Canvas":441,"./Image":441,"./JSONArray":447,"./JSONHash":448,"./Pyxel":442,"./SpriteSheet":444,"./SpriteSheetFromAtlas":443,"./StarlingXML":445,"./UnityYAML":446}],97:[function(require,module,exports) {
var t=require("../utils/Class"),i=require("../utils/object/Extend"),h=new t({initialize:function(t,i,h,s,e,u,r){this.texture=t,this.name=i,this.source=t.source[h],this.sourceIndex=h,this.cutX=s,this.cutY=e,this.cutWidth=u,this.cutHeight=r,this.x=0,this.y=0,this.width=u,this.height=r,this.halfWidth=Math.floor(.5*u),this.halfHeight=Math.floor(.5*r),this.centerX=Math.floor(u/2),this.centerY=Math.floor(r/2),this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.data={cut:{x:s,y:e,w:u,h:r,r:s+u,b:e+r},trim:!1,sourceSize:{w:u,h:r},spriteSourceSize:{x:0,y:0,w:u,h:r},uvs:{x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},radius:.5*Math.sqrt(u*u+r*r),drawImage:{sx:s,sy:e,sWidth:u,sHeight:r,dWidth:u,dHeight:r}},this.updateUVs()},setTrim:function(t,i,h,s,e,u){var r=this.data,a=r.spriteSourceSize;return r.trim=!0,r.sourceSize.w=t,r.sourceSize.h=i,a.x=h,a.y=s,a.w=e,a.h=u,this.x=h,this.y=s,this.width=e,this.height=u,this.halfWidth=.5*e,this.halfHeight=.5*u,this.centerX=Math.floor(e/2),this.centerY=Math.floor(u/2),this.updateUVs()},updateUVs:function(){var t=this.cutX,i=this.cutY,h=this.cutWidth,s=this.cutHeight,e=this.data.drawImage;e.sWidth=h,e.sHeight=s,e.dWidth=h,e.dHeight=s;var u=this.source.width,r=this.source.height,a=this.data.uvs;return a.x0=t/u,a.y0=i/r,a.x1=t/u,a.y1=(i+s)/r,a.x2=(t+h)/u,a.y2=(i+s)/r,a.x3=(t+h)/u,a.y3=i/r,this},updateUVsInverted:function(){var t=this.source.width,i=this.source.height,h=this.data.uvs;return h.x3=(this.cutX+this.cutHeight)/t,h.y3=(this.cutY+this.cutWidth)/i,h.x2=this.cutX/t,h.y2=(this.cutY+this.cutWidth)/i,h.x1=this.cutX/t,h.y1=this.cutY/i,h.x0=(this.cutX+this.cutHeight)/t,h.y0=this.cutY/i,this},clone:function(){var t=new h(this.texture,this.name,this.sourceIndex);return t.cutX=this.cutX,t.cutY=this.cutY,t.cutWidth=this.cutWidth,t.cutHeight=this.cutHeight,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t.halfWidth=this.halfWidth,t.halfHeight=this.halfHeight,t.centerX=this.centerX,t.centerY=this.centerY,t.rotated=this.rotated,t.data=i(!0,t.data,this.data),t.updateUVs(),t},destroy:function(){this.texture=null,this.source=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},uvs:{get:function(){return this.data.uvs}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});module.exports=h;
},{"../utils/Class":8,"../utils/object/Extend":13}],98:[function(require,module,exports) {
var e=require("../utils/Class"),t=require("../const"),i=require("../math/pow2/IsSizePowerOfTwo"),r=require("../renderer/ScaleModes"),s=new e({initialize:function(e,t,s,h){var n=e.manager.game;this.texture=e,this.image=t,this.compressionAlgorithm=null,this.resolution=1,this.width=s||t.naturalWidth||t.width||0,this.height=h||t.naturalHeight||t.height||0,this.scaleMode=r.DEFAULT,this.isCanvas=t instanceof HTMLCanvasElement,this.isPowerOf2=i(this.width,this.height),this.glTexture=null,this.init(n)},init:function(e){e.config.renderType===t.WEBGL&&(this.glTexture=e.renderer.createTextureFromSource(this.image,this.width,this.height,this.scaleMode)),e.config.pixelArt&&this.setFilter(1)},setFilter:function(e){var i=this.texture.manager.game;i.config.renderType===t.WEBGL&&i.renderer.setTextureFilter(this.glTexture,e)},destroy:function(){this.texture=null,this.image=null}});module.exports=s;
},{"../utils/Class":8,"../const":12,"../math/pow2/IsSizePowerOfTwo":110,"../renderer/ScaleModes":15}],47:[function(require,module,exports) {
var r=require("../utils/Class"),e=require("./Frame"),t=require("./TextureSource"),s=new r({initialize:function(r,e,s,i,a){Array.isArray(s)||(s=[s]),this.manager=r,this.key=e,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var o=0;o<s.length;o++)this.source.push(new t(this,s[o],i,a))},add:function(r,t,s,i,a,o){var u=new e(this,r,t,s,i,a,o);return this.frames[r]=u,1===this.frameTotal&&(this.firstFrame=r),this.frameTotal++,u},has:function(r){return this.frames[r]},get:function(r){r||(r=this.firstFrame);var e=this.frames[r];return e||(console.warn("No Texture.frame found with name "+r),e=this.frames[this.firstFrame]),e},getTextureSourceIndex:function(r){for(var e=0;e<this.source.length;e++)if(this.source[e]===r)return e;return-1},getFramesFromTextureSource:function(r){var e=[];for(var t in this.frames)if("__BASE"!==t){var s=this.frames[t];s.sourceIndex===r&&e.push(s.name)}return e},getFrameNames:function(r){void 0===r&&(r=!1);var e=Object.keys(this.frames);if(!r){var t=e.indexOf("__BASE");-1!==t&&e.splice(t,1)}return e},getSourceImage:function(r){void 0!==r&&null!==r&&1!==this.frameTotal||(r="__BASE");var e=this.frames[r];return e?e.source.image:(console.warn("No Texture.frame found with name "+r),this.frames.__BASE.source.image)},setDataSource:function(r){Array.isArray(r)||(r=[r]);for(var e=0;e<r.length;e++){var s=this.source[e];this.dataSource.push(new t(this,r[e],s.width,s.height))}},setFilter:function(r){var e;for(e=0;e<this.source.length;e++)this.source[e].setFilter(r);for(e=0;e<this.dataSource.length;e++)this.dataSource[e].setFilter(r)},destroy:function(){var r;for(r=0;r<this.source.length;r++)this.source[r].destroy();for(r=0;r<this.dataSource.length;r++)this.dataSource[r].destroy();for(var e in this.frames){this.frames[e].destroy()}this.source=[],this.dataSource=[],this.frames={}}});module.exports=s;
},{"../utils/Class":8,"./Frame":97,"./TextureSource":98}],28:[function(require,module,exports) {
var t=require("../display/canvas/CanvasPool"),e=require("../utils/Class"),r=require("../display/color/Color"),i=require("eventemitter3"),a=require("../create/GenerateTexture"),s=require("../utils/object/GetValue"),n=require("./parsers"),o=require("./Texture"),h=new e({Extends:i,initialize:function(e){i.call(this),this.game=e,this.name="TextureManager",this.list={},this._tempCanvas=t.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,e.events.once("boot",this.boot,this)},boot:function(){this._pending=2,this.on("onload",this.updatePending,this),this.on("onerror",this.updatePending,this),this.addBase64("__DEFAULT",this.game.config.defaultImage),this.addBase64("__MISSING",this.game.config.missingImage),this.game.events.once("destroy",this.destroy,this)},updatePending:function(){this._pending--,0===this._pending&&(this.off("onload"),this.off("onerror"),this.game.events.emit("ready"))},addBase64:function(t,e){var r=this,i=new Image;i.onerror=function(){r.emit("onerror",t)},i.onload=function(){var e=r.create(t,i);n.Image(e,0),r.emit("onload",t,e)},i.src=e},addImage:function(t,e,r){var i=this.create(t,e);return n.Image(i,0),r&&i.setDataSource(r),i},generate:function(e,r){var i=t.create(this,1,1);return r.canvas=i,a(r),this.addCanvas(e,i)},createCanvas:function(e,r,i){void 0===r&&(r=256),void 0===i&&(i=256);var a=t.create(this,r,i);return this.addCanvas(e,a)},addCanvas:function(t,e){var r=this.create(t,e);return n.Canvas(r,0),r},addAtlas:function(t,e,r){return Array.isArray(r.textures)||Array.isArray(r.frames)?this.addAtlasJSONArray(t,e,r):this.addAtlasJSONHash(t,e,r)},addAtlasJSONArray:function(t,e,r){var i=this.create(t,e);if(Array.isArray(r))for(var a=1===r.length,s=0;s<i.source.length;s++){var o=a?r[0]:r[s];n.JSONArray(i,s,o)}else n.JSONArray(i,0,r);return i},addAtlasJSONHash:function(t,e,r){var i=this.create(t,e);if(Array.isArray(r))for(var a=0;a<r.length;a++)n.JSONHash(i,a,r[a]);else n.JSONHash(i,0,r);return i},addUnityAtlas:function(t,e,r){var i=this.create(t,e);return n.UnityYAML(i,0,r),i},addSpriteSheet:function(t,e,r){var i=this.create(t,e),a=i.source[0].width,s=i.source[0].height;return n.SpriteSheet(i,0,0,0,a,s,r),i},addSpriteSheetFromAtlas:function(t,e){var r=s(e,"atlas",null),i=s(e,"frame",null);if(r&&i){var a=this.get(r).get(i);if(a){var o=this.create(t,a.source.image);return a.trimmed?n.SpriteSheetFromAtlas(o,a,e):n.SpriteSheet(o,0,a.cutX,a.cutY,a.cutWidth,a.cutHeight,e),o}}},addAtlasStarlingXML:function(t,e,r){var i=this.create(t,e);if(Array.isArray(r))for(var a=0;a<r.length;a++)n.StarlingXML(i,a,r[a]);else n.StarlingXML(i,0,r);return i},addAtlasPyxel:function(t,e,r){var i=this.create(t,e);if(Array.isArray(r))for(var a=0;a<r.length;a++)n.Pyxel(i,a,r[a]);else n.Pyxel(i,0,r);return i},create:function(t,e,r,i){var a=new o(this,t,e,r,i);return this.list[t]=a,a},exists:function(t){return this.list.hasOwnProperty(t)},get:function(t){return void 0===t&&(t="__DEFAULT"),this.list[t]?this.list[t]:this.list.__MISSING},cloneFrame:function(t,e){if(this.list[t])return this.list[t].get(e).clone()},getFrame:function(t,e){if(this.list[t])return this.list[t].get(e)},getTextureKeys:function(){var t=[];for(var e in this.list)"__DEFAULT"!==e&&"__MISSING"!==e&&t.push(e);return t},getPixel:function(t,e,i,a){var s=this.getFrame(i,a);if(s){var n=s.source.image;if(t>=0&&t<=n.width&&e>=0&&e<=n.height){t+=s.cutX,e+=s.cutY;var o=this._tempContext;o.clearRect(0,0,1,1),o.drawImage(n,t,e,1,1,0,0,1,1);var h=o.getImageData(0,0,1,1);return new r(h.data[0],h.data[1],h.data[2],h.data[3])}}return null},setTexture:function(t,e,r){return this.list[e]&&(t.texture=this.list[e],t.frame=t.texture.get(r)),t},each:function(t,e){for(var r=[null],i=1;i<arguments.length;i++)r.push(arguments[i]);for(var a in this.list)r[0]=this.list[a],t.apply(e,r)},destroy:function(){for(var t in this.list)this.list[t].destroy();this.list={},this.game=null}});module.exports=h;
},{"../display/canvas/CanvasPool":33,"../utils/Class":8,"../display/color/Color":66,"eventemitter3":35,"../create/GenerateTexture":46,"../utils/object/GetValue":53,"./parsers":387,"./Texture":47}],29:[function(require,module,exports) {
var t=require("../utils/Class"),i=require("../utils/object/GetValue"),s=require("../utils/NOOP"),e=require("../dom/RequestAnimationFrame"),h=new t({initialize:function(t,h){this.game=t,this.raf=new e,this.started=!1,this.running=!1,this.minFps=i(h,"min",5),this.targetFps=i(h,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=s,this.forceSetTimeOut=i(h,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=i(h,"deltaHistory",10),this.panicMax=i(h,"panicMax",120),this.rawDelta=0},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var t=window.performance.now();this.time=t,this.lastTime=t,this.nextFpsUpdate=t+1e3,this.framesThisSecond=0,this.frame=0;for(var i=0;i<this.deltaSmoothingMax;i++)this.deltaHistory[i]=Math.min(this._target,this.deltaHistory[i]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(t){if(this.started)return this;this.started=!0,this.running=!0;for(var i=0;i<this.deltaSmoothingMax;i++)this.deltaHistory[i]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=t,this.raf.start(this.step.bind(this),this.forceSetTimeOut)},step:function(t){this.frame++,this.rawDelta=t-this.lastTime;var i=this.deltaIndex,s=this.deltaHistory,e=this.deltaSmoothingMax,h=t-this.lastTime;(this._coolDown>0||!this.inFocus)&&(this._coolDown--,h=Math.min(h,this._target)),h>this._min&&(h=s[i],h=Math.min(h,this._min)),s[i]=h,this.deltaIndex++,this.deltaIndex>e&&(this.deltaIndex=0);for(var a=0,n=0;n<e;n++)a+=s[n];a/=e,this.delta=a,this.time+=this.rawDelta,t>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=t+1e3,this.framesThisSecond=0),this.framesThisSecond++;var r=a/this._target;this.callback(t,a,r),this.lastTime=t},tick:function(){this.step(window.performance.now())},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(t){this.running?this.sleep():t&&(this.startTime+=-this.lastTime+(this.lastTime=window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step(window.performance.now())},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=s,this.raf=null,this.game=null}});module.exports=h;
},{"../utils/Class":8,"../utils/object/GetValue":53,"../utils/NOOP":30,"../dom/RequestAnimationFrame":48}],31:[function(require,module,exports) {
var i=function(i){var n;if(void 0!==document.hidden)n="visibilitychange";else{["webkit","moz","ms"].forEach(function(i){void 0!==document[i+"Hidden"]&&(document.hidden=function(){return document[i+"Hidden"]},n=i+"visibilitychange")})}n&&document.addEventListener(n,function(n){document.hidden||"pause"===n.type?i.emit("hidden"):i.emit("visible")},!1),window.onblur=function(){i.emit("blur")},window.onfocus=function(){i.emit("focus")}};module.exports=i;
},{}],10:[function(require,module,exports) {
var e=require("../dom/AddToDOM"),t=require("../animations/AnimationManager"),i=require("../cache/CacheManager"),s=require("../display/canvas/CanvasPool"),n=require("../utils/Class"),r=require("./Config"),h=require("./CreateRenderer"),o=require("../data/DataManager"),u=require("./DebugHeader"),a=require("../device"),d=require("../dom/DOMContentLoaded"),c=require("eventemitter3"),l=require("../input/InputManager"),p=require("../utils/NOOP"),v=require("./PluginManager"),g=require("../scene/SceneManager"),f=require("../sound/SoundManagerCreator"),m=require("../textures/TextureManager"),q=require("./TimeStep"),b=require("./VisibilityHandler"),w=new n({initialize:function(e){this.config=new r(e),this.renderer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new c,this.anims=new t(this),this.textures=new m(this),this.cache=new i(this),this.registry=new o(this),this.input=new l(this,this.config),this.scene=new g(this,this.config.sceneConfig),this.device=a,this.sound=f.create(this),this.loop=new q(this,this.config.fps),this.plugins=new v(this,this.config),this.onStepCallback=p,d(this.boot.bind(this))},boot:function(){this.isBooted=!0,this.config.preBoot(this),h(this),u(this),e(this.canvas,this.config.parent),this.events.emit("boot"),this.events.once("ready",this.start,this)},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),b(this.events),this.events.on("hidden",this.onHidden,this),this.events.on("visible",this.onVisible,this),this.events.on("blur",this.onBlur,this),this.events.on("focus",this.onFocus,this)},step:function(e,t){this.input.update(e,t),this.sound.update(e,t),this.onStepCallback(),this.scene.update(e,t);var i=this.renderer;i.preRender(),this.events.emit("prerender",i),this.scene.render(i),i.postRender(),this.events.emit("postrender",i)},headlessStep:function(e,t){this.input.update(e,t),this.sound.update(e,t),this.onStepCallback(),this.scene.update(e,t),this.events.emit("prerender"),this.events.emit("postrender")},onHidden:function(){this.loop.pause(),this.events.emit("pause")},onVisible:function(){this.loop.resume(),this.events.emit("resume")},onBlur:function(){this.loop.blur()},onFocus:function(){this.loop.focus()},resize:function(e,t){this.config.width=e,this.config.height=t,this.renderer.resize(e,t),this.input.resize(),this.scene.resize(e,t),this.events.emit("resize",e,t)},destroy:function(e){this.loop.destroy(),this.scene.destroy(),this.renderer.destroy(),this.events.emit("destroy"),this.events.removeAllListeners(),this.onStepCallback=null,e&&s.remove(this.canvas)}});module.exports=w;
},{"../dom/AddToDOM":17,"../animations/AnimationManager":18,"../cache/CacheManager":19,"../display/canvas/CanvasPool":33,"../utils/Class":8,"./Config":20,"./CreateRenderer":21,"../data/DataManager":22,"./DebugHeader":23,"../device":261,"../dom/DOMContentLoaded":24,"eventemitter3":35,"../input/InputManager":25,"../utils/NOOP":30,"./PluginManager":16,"../scene/SceneManager":26,"../sound/SoundManagerCreator":27,"../textures/TextureManager":28,"./TimeStep":29,"./VisibilityHandler":31}],263:[function(require,module,exports) {
var t=require("../utils/Class"),i=new t({initialize:function(t){this.parent=t,this.list=[],this.position=0},add:function(t){return-1===this.getIndex(t)&&this.list.push(t),t},addAt:function(t,i){return void 0===i&&(i=0),0===this.list.length?this.add(t):(i>=0&&i<=this.list.length&&-1===this.getIndex(t)&&this.list.splice(i,0,t),t)},addMultiple:function(t){if(Array.isArray(t))for(var i=0;i<t.length;i++)this.add(t[i]);return t},getAt:function(t){return this.list[t]},getIndex:function(t){return this.list.indexOf(t)},sort:function(t){return void 0===t&&(t=this.list),t.sort(this.sortIndexHandler.bind(this))},sortIndexHandler:function(t,i){var s=this.getIndex(t),n=this.getIndex(i);return s<n?-1:s>n?1:0},getByKey:function(t,i){for(var s=0;s<this.list.length;s++)if(this.list[s][t]===i)return this.list[s];return null},getByName:function(t){return this.getByKey("name",t)},getRandom:function(t,i){if(void 0===t&&(t=0),void 0===i&&(i=this.list.length),0===i||i>this.list.length)return null;var s=t+Math.floor(Math.random()*i);return this.list[s]},getFirst:function(t,i,s,n){void 0===s&&(s=0),void 0===n&&(n=this.list.length);for(var e=s;e<n;e++){var r=this.list[e];if(r[t]===i)return r}return null},getAll:function(t,i,s,n){void 0===s&&(s=0),void 0===n&&(n=this.list.length);for(var e=[],r=s;r<n;r++){var h=this.list[r];t?h[t]===i&&e.push(h):e.push(h)}return e},count:function(t,i){for(var s=0,n=0;n<this.list.length;n++){this.list[n][t]===i&&s++}return s},swap:function(t,i){if(t!==i){var s=this.getIndex(t),n=this.getIndex(i);if(s<0||n<0)throw new Error("List.swap: Supplied objects must be children of the same list");this.list[s]=i,this.list[n]=t}},moveTo:function(t,i){var s=this.getIndex(t);if(-1===s||i<0||i>=this.list.length)throw new Error("List.moveTo: The supplied index is out of bounds");return this.list.splice(s,1),this.list.splice(i,0,t),t},remove:function(t){var i=this.list.indexOf(t);return-1!==i&&this.list.splice(i,1),t},removeAt:function(t){var i=this.list[t];return i&&this.children.splice(t,1),i},removeBetween:function(t,i){void 0===t&&(t=0),void 0===i&&(i=this.list.length);var s=i-t;if(s>0&&s<=i)return this.list.splice(t,s);if(0===s&&0===this.list.length)return[];throw new Error("List.removeBetween: Range Error, numeric values are outside the acceptable range")},removeAll:function(){for(var t=this.list.length;t--;)this.remove(this.list[t]);return this},bringToTop:function(t){return this.getIndex(t)<this.list.length&&(this.remove(t),this.add(t)),t},sendToBack:function(t){return this.getIndex(t)>0&&(this.remove(t),this.addAt(t,0)),t},moveUp:function(t){var i=this.getIndex(t);if(-1!==i&&i<this.list.length-1){var s=this.getAt(i+1);s&&this.swap(t,s)}return t},moveDown:function(t){var i=this.getIndex(t);if(i>0){var s=this.getAt(i-1);s&&this.swap(t,s)}return t},reverse:function(){return this.list.reverse(),this},shuffle:function(){for(var t=this.list.length-1;t>0;t--){var i=Math.floor(Math.random()*(t+1)),s=this.list[t];this.list[t]=this.list[i],this.list[i]=s}return this},replace:function(t,i){var s=this.getIndex(t);if(-1!==s)return this.remove(t),this.addAt(i,s),t},exists:function(t){return this.list.indexOf(t)>-1},setAll:function(t,i){for(var s=0;s<this.list.length;s++)this.list[s]&&(this.list[s][t]=i)},each:function(t,i){for(var s=[null],n=1;n<arguments.length;n++)s.push(arguments[n]);for(n=0;n<this.list.length;n++)s[0]=this.list[n],t.apply(i,s)},shutdown:function(){this.removeAll()},destroy:function(){this.removeAll(),this.list=[],this.parent=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});module.exports=i;
},{"../utils/Class":8}],374:[function(require,module,exports) {
!function(){var n=function(n,r){return e(n.slice(),r)};function e(n,e){"function"!=typeof e&&(e=function(n,e){return String(n).localeCompare(e)});var t=n.length;if(t<=1)return n;for(var o=new Array(t),f=1;f<t;f*=2){r(n,e,f,o);var i=n;n=o,o=i}return n}n.inplace=function(n,t){var o=e(n,t);return o!==n&&r(o,null,n.length,n),n};var r=function(n,e,r,t){var o,f,i,u,l,a=n.length,c=0,v=2*r;for(o=0;o<a;o+=v)for(i=(f=o+r)+r,f>a&&(f=a),i>a&&(i=a),u=o,l=f;;)if(u<f&&l<i)e(n[u],n[l])<=0?t[c++]=n[u++]:t[c++]=n[l++];else if(u<f)t[c++]=n[u++];else{if(!(l<i))break;t[c++]=n[l++]}};"undefined"!=typeof module?module.exports=n:window.stable=n}();
},{}],204:[function(require,module,exports) {
var t=require("../utils/Class"),s=require("../structs/List"),e=require("../boot/PluginManager"),i=require("../utils/array/StableSort"),r=new t({Extends:s,initialize:function(t){s.call(this,t),this.sortChildrenFlag=!1,this.scene=t,this.systems=t.sys,t.sys.settings.isBooted||t.sys.events.once("boot",this.boot,this)},boot:function(){var t=this.systems.events;t.on("shutdown",this.shutdown,this),t.on("destroy",this.destroy,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(i.inplace(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(t,s){return t._depth-s._depth},sortGameObjects:function(t){return void 0===t&&(t=this.list),this.scene.sys.depthSort(),t.sort(this.sortIndexHandler.bind(this))},getTopGameObject:function(t){return this.sortGameObjects(t),t[t.length-1]}});e.register("DisplayList",r,"displayList"),module.exports=r;
},{"../utils/Class":8,"../structs/List":263,"../boot/PluginManager":16,"../utils/array/StableSort":374}],205:[function(require,module,exports) {
var s=require("../utils/Class"),t=require("../boot/PluginManager"),i=new s({initialize:function(s){this.scene=s,this.systems=s.sys,s.sys.settings.isBooted||s.sys.events.once("boot",this.boot,this),this.displayList,this.updateList},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList;var s=this.systems.events;s.on("shutdown",this.shutdown,this),s.on("destroy",this.destroy,this)},shutdown:function(){},destroy:function(){this.scene=null,this.displayList=null,this.updateList=null}});i.register=function(s,t){i.prototype.hasOwnProperty(s)||(i.prototype[s]=t)},t.register("GameObjectCreator",i,"make"),module.exports=i;
},{"../utils/Class":8,"../boot/PluginManager":16}],206:[function(require,module,exports) {
var t=require("../utils/Class"),i=require("../boot/PluginManager"),s=new t({initialize:function(t){this.scene=t,this.systems=t.sys,t.sys.settings.isBooted||t.sys.events.once("boot",this.boot,this),this._list=[],this._pendingInsertion=[],this._pendingRemoval=[]},boot:function(){var t=this.systems.events;t.on("preupdate",this.preUpdate,this),t.on("update",this.update,this),t.on("shutdown",this.shutdown,this),t.on("destroy",this.destroy,this)},add:function(t){return-1===this._list.indexOf(t)&&-1===this._pendingInsertion.indexOf(t)&&this._pendingInsertion.push(t),t},preUpdate:function(){var t=this._pendingRemoval.length,i=this._pendingInsertion.length;if(0!==t||0!==i){var s,e;for(s=0;s<t;s++){e=this._pendingRemoval[s];var n=this._list.indexOf(e);n>-1&&this._list.splice(n,1)}this._list=this._list.concat(this._pendingInsertion.splice(0)),this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(t,i){for(var s=0;s<this._list.length;s++){var e=this._list[s];e.active&&e.preUpdate.call(e,t,i)}},remove:function(t){var i=this._list.indexOf(t);return-1!==i&&this._list.splice(i,1),t},removeAll:function(){for(var t=this._list.length;t--;)this.remove(this._list[t]);return this},shutdown:function(){this.removeAll(),this._list.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});i.register("UpdateList",s,"updateList"),module.exports=s;
},{"../utils/Class":8,"../boot/PluginManager":16}],375:[function(require,module,exports) {
var r=require("../../math/const"),n=require("./GetValue"),e=function(e,t,a){var u=n(e,t,null);if(null===u)return a;if(Array.isArray(u))return r.RND.pick(u);if("object"==typeof u){if(u.hasOwnProperty("randInt"))return r.RND.integerInRange(u.randInt[0],u.randInt[1]);if(u.hasOwnProperty("randFloat"))return r.RND.realInRange(u.randFloat[0],u.randFloat[1])}else if("function"==typeof u)return u(t);return u};module.exports=e;
},{"../../math/const":40,"./GetValue":53}],209:[function(require,module,exports) {
var e=require("../renderer/BlendModes"),l=require("../utils/object/GetAdvancedValue"),r=require("../renderer/ScaleModes"),a=function(a,n,t){n.x=l(t,"x",0),n.y=l(t,"y",0),n.depth=l(t,"depth",0),n.flipX=l(t,"flipX",!1),n.flipY=l(t,"flipY",!1);var i=l(t,"scale",null);"number"==typeof i?n.setScale(i):null!==i&&(n.scaleX=l(i,"x",1),n.scaleY=l(i,"y",1));var o=l(t,"scrollFactor",null);"number"==typeof o?n.setScrollFactor(o):null!==o&&(n.scrollFactorX=l(o,"x",1),n.scrollFactorY=l(o,"y",1)),n.rotation=l(t,"rotation",0);var s=l(t,"angle",null);null!==s&&(n.angle=s),n.alpha=l(t,"alpha",1);var d=l(t,"origin",null);if("number"==typeof d)n.setOrigin(d);else if(null!==d){var u=l(d,"x",.5),c=l(d,"y",.5);n.setOrigin(u,c)}return n.scaleMode=l(t,"scaleMode",r.DEFAULT),n.blendMode=l(t,"blendMode",e.NORMAL),n.visible=l(t,"visible",!0),l(t,"add",!0)&&a.sys.displayList.add(n),n.preUpdate&&a.sys.updateList.add(n),n};module.exports=a;
},{"../renderer/BlendModes":14,"../utils/object/GetAdvancedValue":375,"../renderer/ScaleModes":15}],207:[function(require,module,exports) {
var e=require("../utils/object/GetAdvancedValue"),a=function(a,l){var y=e(l,"anims",null);if(null===y)return a;if("string"==typeof y)a.anims.play(y);else if("object"==typeof y){var r=a.anims,t=e(y,"key",void 0),o=e(y,"startFrame",void 0),d=e(y,"delay",0),i=e(y,"repeat",0),n=e(y,"repeatDelay",0),p=e(y,"yoyo",!1),u=e(y,"play",!1),s=e(y,"delayedPlay",0);r.delay(d),r.repeat(i),r.repeatDelay(n),r.yoyo(p),u?r.play(t,o):s>0?r.delayedPlay(s,t,o):r.load(t)}return a};module.exports=a;
},{"../utils/object/GetAdvancedValue":375}],414:[function(require,module,exports) {
var l=function(l,a){for(var t=l.text,o=t.length,h=Number.MAX_VALUE,e=Number.MAX_VALUE,i=0,n=0,r=l.fontData.chars,d=l.fontData.lineHeight,g=0,u=0,c=0,f=0,b=null,x=0,M=0,s=0,y=0,v=null,w=0,A=0;A<o;++A)if(10!==(f=t.charCodeAt(A))){if(b=r[f]){if(x=b.width,M=b.height,s=c+b.xOffset+g,y=b.yOffset+u,null!==v){var m=b.kerning[w];s+=void 0!==m?m:0}h>s&&(h=s),e>y&&(e=y);var D=s+x-h,X=y+M-e;i<D&&(i=D),n<X&&(n=X),g+=b.xAdvance,c+=1,v=b,w=f}}else g=0,c=0,u+=d,v=null;var z=l.fontSize/l.fontData.size,E=z*l.scaleX,L=z*l.scaleY,N={local:{x:h*z,y:e*z,width:i*z,height:n*z},global:{x:l.x+h*E,y:l.y+e*L,width:i*E,height:n*L}};return a&&(N.local.x=Math.round(N.local.x),N.local.y=Math.round(N.local.y),N.local.width=Math.round(N.local.width),N.local.height=Math.round(N.local.height),N.global.x=Math.round(N.global.x),N.global.y=Math.round(N.global.y),N.global.width=Math.round(N.global.width),N.global.height=Math.round(N.global.height)),N};module.exports=l;
},{}],378:[function(require,module,exports) {
function e(e,t){return parseInt(e.getAttribute(t),10)}var t=function(t,r,a,n){void 0===r&&(r=0),void 0===a&&(a=0);var i={},o=t.getElementsByTagName("info")[0],f=t.getElementsByTagName("common")[0];i.font=o.getAttribute("face"),i.size=e(o,"size"),i.lineHeight=e(f,"lineHeight")+a,i.chars={};var h=t.getElementsByTagName("char"),g=void 0!==n&&n.trimmed;if(g)var s=n.height,c=n.width;for(var v=0;v<h.length;v++){var m=h[v],d=e(m,"id"),l=e(m,"x"),y=e(m,"y"),x=e(m,"width"),u=e(m,"height");g&&(l<c&&(c=l),y<s&&(s=y)),i.chars[d]={x:l,y:y,width:x,height:u,centerX:Math.floor(x/2),centerY:Math.floor(u/2),xOffset:e(m,"xoffset"),yOffset:e(m,"yoffset"),xAdvance:e(m,"xadvance")+r,data:{},kerning:{}}}if(g&&0!==s&&0!==c)for(var B in i.chars){var E=i.chars[B];E.x-=n.x,E.y-=n.y}var N=t.getElementsByTagName("kerning");for(v=0;v<N.length;v++){var T=N[v],k=e(T,"first"),w=e(T,"second"),A=e(T,"amount");i.chars[w].kerning[k]=A}return i};module.exports=t;
},{}],415:[function(require,module,exports) {
var e=require("./ParseXMLBitmapFont"),r=function(r,t,a,s,u,m,n){var c=r.sys.textures.getFrame(a,s),i=r.sys.cache.xml.get(u);if(c&&i){var o=e(i,m,n,c);return r.sys.cache.bitmapFont.add(t,{data:o,texture:a,frame:s}),!0}return!1};module.exports=r;
},{"./ParseXMLBitmapFont":378}],416:[function(require,module,exports) {
var T=require("../../utils/object/GetValue"),e=function(e,t){var E=t.width,r=t.height,a=Math.floor(E/2),X=Math.floor(r/2),S=t.chars,n=T(t,"image",""),h=T(t,"offset.x",0),o=T(t,"offset.y",0),s=T(t,"spacing.x",0),i=T(t,"spacing.y",0),l=T(t,"charsPerRow",null);null===l&&(l=e.sys.textures.getFrame(n).width/E)>S.length&&(l=S.length);for(var f=h,c=o,A={retroFont:!0,font:n,size:E,lineHeight:r,chars:{}},F=0,M=0;M<S.length;M++){var O=S.charCodeAt(M);A.chars[O]={x:f,y:c,width:E,height:r,centerX:a,centerY:X,xOffset:0,yOffset:0,xAdvance:E,data:{},kerning:{}},++F===l?(F=0,f=h,c+=r+i):f+=E+s}return{data:A,frame:null,texture:n}};e.TEXT_SET1=" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",e.TEXT_SET2=" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ",e.TEXT_SET3="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",e.TEXT_SET4="ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",e.TEXT_SET5="ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",e.TEXT_SET6="ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' ",e.TEXT_SET7="AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39",e.TEXT_SET8="0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",e.TEXT_SET9="ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!",e.TEXT_SET10="ABCDEFGHIJKLMNOPQRSTUVWXYZ",e.TEXT_SET11="ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789",module.exports=e;
},{"../../utils/object/GetValue":53}],544:[function(require,module,exports) {
var e=require("../../GameObject"),t=function(t,r,a,i){var l=r.text.length;e.RENDER_MASK!==r.renderFlags||0===l||r.cameraFilter>0&&r.cameraFilter&i._id||this.pipeline.batchBitmapText(this,i)};module.exports=t;
},{"../../GameObject":208}],545:[function(require,module,exports) {
var e=require("../../GameObject"),a=function(a,r,l,t){var o=r.text,n=o.length;if(!(e.RENDER_MASK!==r.renderFlags||0===n||r.cameraFilter>0&&r.cameraFilter&t._id)){var c=r.frame,s=r.fontData.chars,i=r.fontData.lineHeight,d=0,f=0,u=0,h=0,g=null,m=0,p=0,M=0,v=0,x=0,b=0,y=null,A=0,O=a.currentContext,F=r.frame.source.image,X=c.cutX,Y=c.cutY,D=r.fontSize/r.fontData.size;a.currentBlendMode!==r.blendMode&&(a.currentBlendMode=r.blendMode,O.globalCompositeOperation=a.blendModes[r.blendMode]),a.currentAlpha!==r.alpha&&(a.currentAlpha=r.alpha,O.globalAlpha=r.alpha),a.currentScaleMode!==r.scaleMode&&(a.currentScaleMode=r.scaleMode);var S=a.config.roundPixels,C=r.x-t.scrollX*r.scrollFactorX+r.frame.x,w=r.y-t.scrollY*r.scrollFactorY+r.frame.y;S&&(C|=0,w|=0),O.save(),O.translate(C,w),O.rotate(r.rotation),O.translate(-r.displayOriginX,-r.displayOriginY),O.scale(r.scaleX,r.scaleY);for(var z=0;z<n;++z)if(10!==(h=o.charCodeAt(z))){if(g=s[h]){if(m=X+g.x,p=Y+g.y,M=g.width,v=g.height,x=u+g.xOffset+d,b=g.yOffset+f,null!==y){var B=g.kerning[A];x+=void 0!==B?B:0}x*=D,b*=D,d+=g.xAdvance,u+=1,y=g,A=h,0!==M&&0!==v&&32!==h&&(S&&(x|=0,b|=0),O.save(),O.translate(x,b),O.scale(D,D),O.drawImage(F,m,p,M,v,0,0,M,v),O.restore())}}else d=0,u=0,f+=i,y=null;O.restore()}};module.exports=a;
},{"../../GameObject":208}],419:[function(require,module,exports) {
var e=require("../../../utils/NOOP"),r=require("../../../utils/NOOP");WEBGL_RENDERER&&(e=require("./BitmapTextWebGLRenderer")),CANVAS_RENDERER&&(r=require("./BitmapTextCanvasRenderer")),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../../utils/NOOP":30,"./BitmapTextWebGLRenderer":544,"./BitmapTextCanvasRenderer":545}],330:[function(require,module,exports) {
var t=require("../../../utils/Class"),e=require("../../components"),i=require("../../GameObject"),n=require("../GetBitmapTextSize"),s=require("../ParseFromAtlas"),r=require("../ParseRetroFont"),o=require("./BitmapTextRender"),a=new t({Extends:i,Mixins:[e.Alpha,e.BlendMode,e.Depth,e.Origin,e.Pipeline,e.ScaleMode,e.ScrollFactor,e.Texture,e.Tint,e.Transform,e.Visible,o],initialize:function(t,e,n,s,r,o){void 0===r&&(r=""),i.call(this,t,"BitmapText"),this.font=s;var a=this.scene.sys.cache.bitmapFont.get(s);this.fontData=a.data,this.text=Array.isArray(r)?r.join("\n"):r,this.fontSize=o||this.fontData.size,this.setTexture(a.texture,a.frame),this.setPosition(e,n),this.setOrigin(0,0),this.initPipeline("TextureTintPipeline"),this._bounds=this.getTextBounds()},setFontSize:function(t){return this.fontSize=t,this},setText:function(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this.text&&(this.text=t.toString(),this.updateDisplayOrigin()),this},getTextBounds:function(t){return this._bounds=n(this,t),this._bounds},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var t=e.ToJSON(this),i={font:this.font,text:this.text,fontSize:this.fontSize};return t.data=i,t}});a.ParseRetroFont=r,a.ParseFromAtlas=s,module.exports=a;
},{"../../../utils/Class":8,"../../components":509,"../../GameObject":208,"../GetBitmapTextSize":414,"../ParseFromAtlas":415,"../ParseRetroFont":416,"./BitmapTextRender":419}],463:[function(require,module,exports) {
var e=require("../GameObject"),r=function(r,i,a,t){e.RENDER_MASK!==i.renderFlags||i.cameraFilter>0&&i.cameraFilter&t._id||this.pipeline.drawBlitter(i,t)};module.exports=r;
},{"../GameObject":208}],464:[function(require,module,exports) {
var e=require("../GameObject"),r=function(r,a,t,l){if(!(e.RENDER_MASK!==a.renderFlags||a.cameraFilter>0&&a.cameraFilter&l._id)){var i=a.getRenderList();r.setBlendMode(a.blendMode);for(var s=r.gameContext,d=a.x-l.scrollX*a.scrollFactorX,o=a.y-l.scrollY*a.scrollFactorY,c=0;c<i.length;c++){var g=i[c],m=g.flipX||g.flipY,n=g.frame,f=n.canvasData,h=n.x,x=n.y,v=1,p=1;m?(g.flipX&&(v=-1,h-=f.dWidth),g.flipY&&(p=-1,x-=f.dHeight),s.save(),s.translate(g.x+d,g.y+o),s.scale(v,p),s.drawImage(n.source.image,f.sx,f.sy,f.sWidth,f.sHeight,h,x,f.dWidth,f.dHeight),s.restore()):r.blitImage(h+g.x+d,x+g.y+o,g.frame)}}};module.exports=r;
},{"../GameObject":208}],396:[function(require,module,exports) {
var e=require("../../utils/NOOP"),r=require("../../utils/NOOP");WEBGL_RENDERER&&(e=require("./BlitterWebGLRenderer")),CANVAS_RENDERER&&(r=require("./BlitterCanvasRenderer")),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../utils/NOOP":30,"./BlitterWebGLRenderer":463,"./BlitterCanvasRenderer":464}],397:[function(require,module,exports) {
var t=require("../../utils/Class"),i=new t({initialize:function(t,i,s,e,h){this.parent=t,this.x=i,this.y=s,this.frame=e,this.data={},this._visible=h,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function(t){return t=void 0===t?this.parent.frame:this.parent.texture.get(t),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(t,i,s){return this.x=t,this.y=i,this.frame=s,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,i){return this.flipX=t,this.flipY=i,this},setVisible:function(t){return this.visible=t,this},setAlpha:function(t){return this.alpha=t,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(t){this._visible=t,this.parent.dirty=!0}},alpha:{get:function(){return this._alpha},set:function(t){this._alpha=t,this.parent.dirty=!0}}});module.exports=i;
},{"../../utils/Class":8}],282:[function(require,module,exports) {
var e=require("./BlitterRender"),i=require("./Bob"),t=require("../../utils/Class"),r=require("../components"),n=require("../../textures/Frame"),s=require("../GameObject"),l=require("../../structs/List"),h=new t({Extends:s,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Pipeline,r.ScaleMode,r.ScrollFactor,r.Size,r.Texture,r.Transform,r.Visible,e],initialize:function(e,i,t,r,n){s.call(this,e,"Blitter"),this.setTexture(r,n),this.setPosition(i,t),this.initPipeline("TextureTintPipeline"),this.children=new l,this.renderList=[],this.dirty=!1},create:function(e,t,r,s,l){void 0===s&&(s=!0),void 0===l&&(l=this.children.length),void 0===r?r=this.frame:r instanceof n||(r=this.texture.get(r));var h=new i(this,e,t,r,s);return this.children.addAt(h,l,!1),this.dirty=!0,h},createFromCallback:function(e,i,t,r){for(var n=this.createMultiple(i,t,r),s=0;s<n.length;s++){var l=n[s];e.call(this,l,s)}return n},createMultiple:function(e,i,t){void 0===i&&(i=this.frame.name),void 0===t&&(t=!0),Array.isArray(i)||(i=[i]);var r=[],n=this;return i.forEach(function(i){for(var s=0;s<e;s++)r.push(n.create(0,0,i,t))}),r},childCanRender:function(e){return e.visible&&e.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0}});module.exports=h;
},{"./BlitterRender":396,"./Bob":397,"../../utils/Class":8,"../components":509,"../../textures/Frame":97,"../GameObject":208,"../../structs/List":263}],547:[function(require,module,exports) {
var e=require("../../GameObject"),t=function(t,a,r,i){var c=a.text.length;e.RENDER_MASK!==a.renderFlags||0===c||a.cameraFilter>0&&a.cameraFilter&i._id||this.pipeline.batchDynamicBitmapText(a,i)};module.exports=t;
},{"../../GameObject":208}],549:[function(require,module,exports) {
var e=require("../../GameObject"),t=function(t,a,r,l){var o=a.text,i=o.length;if(!(e.RENDER_MASK!==a.renderFlags||0===i||a.cameraFilter>0&&a.cameraFilter&l._id)){var c=a.frame,n=a.displayCallback,s=l.scrollX*a.scrollFactorX,d=l.scrollY*a.scrollFactorY,h=a.fontData.chars,f=a.fontData.lineHeight,p=0,g=0,u=0,b=0,m=null,v=0,x=0,M=0,y=0,A=0,O=0,X=null,Y=0,C=t.currentContext,D=a.frame.source.image,F=c.cutX,S=c.cutY,z=0,H=a.fontSize/a.fontData.size;t.currentBlendMode!==a.blendMode&&(t.currentBlendMode=a.blendMode,C.globalCompositeOperation=t.blendModes[a.blendMode]),t.currentAlpha!==a.alpha&&(t.currentAlpha=a.alpha,C.globalAlpha=a.alpha),t.currentScaleMode!==a.scaleMode&&(t.currentScaleMode=a.scaleMode),C.save(),C.translate(a.x,a.y),C.rotate(a.rotation),C.translate(-a.displayOriginX,-a.displayOriginY),C.scale(a.scaleX,a.scaleY),a.cropWidth>0&&a.cropHeight>0&&(C.save(),C.beginPath(),C.rect(0,0,a.cropWidth,a.cropHeight),C.clip());for(var R=t.config.roundPixels,W=0;W<i;++W)if(H=a.fontSize/a.fontData.size,z=0,10!==(b=o.charCodeAt(W))){if(m=h[b]){if(v=F+m.x,x=S+m.y,M=m.width,y=m.height,A=u+m.xOffset+p-a.scrollX,O=m.yOffset+g-a.scrollY,null!==X){var k=m.kerning[Y];A+=void 0!==k?k:0}if(n){var w=n({tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:W,charCode:b,x:A,y:O,scale:H,rotation:0,data:m.data});A=w.x,O=w.y,H=w.scale,z=w.rotation}A*=H,O*=H,A-=s,O-=d,R&&(A|=0,O|=0),C.save(),C.translate(A,O),C.rotate(z),C.scale(H,H),C.drawImage(D,v,x,M,y,0,0,M,y),C.restore(),p+=m.xAdvance,u+=1,X=m,Y=b}}else p=0,u=0,g+=f,X=null;a.cropWidth>0&&a.cropHeight>0&&C.restore(),C.restore()}};module.exports=t;
},{"../../GameObject":208}],420:[function(require,module,exports) {
var e=require("../../../utils/NOOP"),r=require("../../../utils/NOOP");WEBGL_RENDERER&&(e=require("./DynamicBitmapTextWebGLRenderer")),CANVAS_RENDERER&&(r=require("./DynamicBitmapTextCanvasRenderer")),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../../utils/NOOP":30,"./DynamicBitmapTextWebGLRenderer":547,"./DynamicBitmapTextCanvasRenderer":549}],331:[function(require,module,exports) {
var t=require("../../../utils/Class"),i=require("../../components"),e=require("../../GameObject"),s=require("../GetBitmapTextSize"),n=require("./DynamicBitmapTextRender"),r=new t({Extends:e,Mixins:[i.Alpha,i.BlendMode,i.Depth,i.Origin,i.Pipeline,i.ScrollFactor,i.Texture,i.Tint,i.Transform,i.Visible,n],initialize:function(t,i,s,n,r,o){void 0===r&&(r=""),e.call(this,t,"DynamicBitmapText"),this.font=n;var h=this.scene.sys.cache.bitmapFont.get(n);this.fontData=h.data,this.text=Array.isArray(r)?r.join("\n"):r,this.fontSize=o||this.fontData.size,this.setTexture(h.texture,h.frame),this.setPosition(i,s),this.setOrigin(0,0),this.initPipeline("TextureTintPipeline"),this._bounds=this.getTextBounds(),this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback},setSize:function(t,i){return this.cropWidth=t,this.cropHeight=i,this},setDisplayCallback:function(t){return this.displayCallback=t,this},setFontSize:function(t){return this.fontSize=t,this},setText:function(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this.text&&(this.text=t.toString(),this.updateDisplayOrigin()),this},setScrollX:function(t){return this.scrollX=t,this},setScrollY:function(t){return this.scrollY=t,this},getTextBounds:function(t){return this._bounds=s(this,t),this._bounds},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var t=i.ToJSON(this),e={font:this.font,text:this.text,fontSize:this.fontSize};return t.data=e,t}});module.exports=r;
},{"../../../utils/Class":8,"../../components":509,"../../GameObject":208,"../GetBitmapTextSize":414,"./DynamicBitmapTextRender":420}],381:[function(require,module,exports) {
var t=function(t,r,e){if(t.width<=0||t.height<=0)return!1;var h=(r-t.x)/t.width,i=(e-t.y)/t.height;return(h*=h)+(i*=i)<.25};module.exports=t;
},{}],553:[function(require,module,exports) {
var t=require("../point/Point"),i=function(i,e,n){void 0===n&&(n=new t);var o=i.width/2,r=i.height/2;return n.x=i.x+o*Math.cos(e),n.y=i.y+r*Math.sin(e),n};module.exports=i;
},{"../point/Point":345}],552:[function(require,module,exports) {
var t=function(t){var h=t.width/2,a=t.height/2,r=Math.pow(h-a,2)/Math.pow(h+a,2);return Math.PI*(h+a)*(1+3*r/(10+Math.sqrt(4-3*r)))};module.exports=t;
},{}],380:[function(require,module,exports) {
var t=require("../../utils/Class"),i=require("./Contains"),h=require("./GetPoint"),n=require("./GetPoints"),s=require("./Random"),e=new t({initialize:function(t,i,h,n){void 0===t&&(t=0),void 0===i&&(i=0),void 0===h&&(h=0),void 0===n&&(n=0),this.x=t,this.y=i,this.width=h,this.height=n},contains:function(t,h){return i(this,t,h)},getPoint:function(t,i){return h(this,t,i)},getPoints:function(t,i,h){return n(this,t,i,h)},getRandomPoint:function(t){return s(this,t)},setTo:function(t,i,h,n){return this.x=t,this.y=i,this.width=h,this.height=n,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setSize:function(t,i){return void 0===i&&(i=t),this.width=t,this.height=i,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(t){this.x=t+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(t){this.y=t+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}});module.exports=e;
},{"../../utils/Class":8,"./Contains":381,"./GetPoint":438,"./GetPoints":439,"./Random":368}],652:[function(require,module,exports) {
var t=function(t){return t.isEmpty()?0:t.getMajorRadius()*t.getMinorRadius()*Math.PI};module.exports=t;
},{}],653:[function(require,module,exports) {
var e=require("./Ellipse"),r=function(r){return new e(r.x,r.y,r.width,r.height)};module.exports=r;
},{"./Ellipse":380}],654:[function(require,module,exports) {
var r=require("./Contains"),e=function(e,n){return r(e,n.x,n.y)};module.exports=e;
},{"./Contains":381}],655:[function(require,module,exports) {
var t=require("./Contains"),o=function(o,r){return t(o,r.x,r.y)&&t(o,r.right,r.y)&&t(o,r.x,r.bottom)&&t(o,r.right,r.bottom)};module.exports=o;
},{"./Contains":381}],656:[function(require,module,exports) {
var t=function(t,e){return e.setTo(t.x,t.y,t.width,t.height)};module.exports=t;
},{}],657:[function(require,module,exports) {
var t=function(t,h){return t.x===h.x&&t.y===h.y&&t.width===h.width&&t.height===h.height};module.exports=t;
},{}],658:[function(require,module,exports) {
var e=require("../rectangle/Rectangle"),t=function(t,i){return void 0===i&&(i=new e),i.x=t.left,i.y=t.top,i.width=t.width,i.height=t.height,i};module.exports=t;
},{"../rectangle/Rectangle":62}],659:[function(require,module,exports) {
var r=function(r,e,n){return r.x+=e,r.y+=n,r};module.exports=r;
},{}],660:[function(require,module,exports) {
var r=function(r,e){return r.x+=e.x,r.y+=e.y,r};module.exports=r;
},{}],512:[function(require,module,exports) {
var e=require("./Ellipse");e.Area=require("./Area"),e.Circumference=require("./Circumference"),e.CircumferencePoint=require("./CircumferencePoint"),e.Clone=require("./Clone"),e.Contains=require("./Contains"),e.ContainsPoint=require("./ContainsPoint"),e.ContainsRect=require("./ContainsRect"),e.CopyFrom=require("./CopyFrom"),e.Equals=require("./Equals"),e.GetBounds=require("./GetBounds"),e.GetPoint=require("./GetPoint"),e.GetPoints=require("./GetPoints"),e.Offset=require("./Offset"),e.OffsetPoint=require("./OffsetPoint"),e.Random=require("./Random"),module.exports=e;
},{"./Ellipse":380,"./Area":652,"./Circumference":552,"./CircumferencePoint":553,"./Clone":653,"./Contains":381,"./ContainsPoint":654,"./ContainsRect":655,"./CopyFrom":656,"./Equals":657,"./GetBounds":658,"./GetPoint":438,"./GetPoints":439,"./Offset":659,"./OffsetPoint":660,"./Random":368}],459:[function(require,module,exports) {
var e=require("../GameObject"),r=function(r,i,a,t){e.RENDER_MASK!==i.renderFlags||i.cameraFilter>0&&i.cameraFilter&t._id||this.pipeline.batchGraphics(this,t)};module.exports=r;
},{"../GameObject":208}],460:[function(require,module,exports) {
var e=require("./Commands"),a=require("../GameObject"),r=function(r,l,o,c,s,t){if(!(a.RENDER_MASK!==l.renderFlags||l.cameraFilter>0&&l.cameraFilter&c._id)){var n=c.scrollX*l.scrollFactorX,b=c.scrollY*l.scrollFactorY,T=l.x,i=l.y,d=l.scaleX,E=l.scaleY,k=l.rotation,L=l.commandBuffer,h=s||r.currentContext,A=1,_=1,S=0,f=0,m=1,M=0,O=0,R=0;r.currentBlendMode!==l.blendMode&&(r.currentBlendMode=l.blendMode,h.globalCompositeOperation=r.blendModes[l.blendMode]),r.currentAlpha!==l.alpha&&(r.currentAlpha=l.alpha,h.globalAlpha=l.alpha),r.currentScaleMode!==l.scaleMode&&(r.currentScaleMode=l.scaleMode),h.save(),h.translate(T-n,i-b),h.rotate(k),h.scale(d,E),h.fillStyle="#fff",h.globalAlpha=l.alpha;for(var u=0,p=L.length;u<p;++u){switch(L[u]){case e.ARC:h.arc(L[u+1],L[u+2],L[u+3],L[u+4],L[u+5],L[u+6]),u+=6;break;case e.LINE_STYLE:m=L[u+1],S=L[u+2],A=L[u+3],M=(16711680&S)>>>16,O=(65280&S)>>>8,R=255&S,h.strokeStyle="rgba("+M+","+O+","+R+","+A+")",h.lineWidth=m,u+=3;break;case e.FILL_STYLE:f=L[u+1],_=L[u+2],M=(16711680&f)>>>16,O=(65280&f)>>>8,R=255&f,h.fillStyle="rgba("+M+","+O+","+R+","+_+")",u+=2;break;case e.BEGIN_PATH:h.beginPath();break;case e.CLOSE_PATH:h.closePath();break;case e.FILL_PATH:t||h.fill();break;case e.STROKE_PATH:t||h.stroke();break;case e.FILL_RECT:t?h.rect(L[u+1],L[u+2],L[u+3],L[u+4]):h.fillRect(L[u+1],L[u+2],L[u+3],L[u+4]),u+=4;break;case e.FILL_TRIANGLE:h.beginPath(),h.moveTo(L[u+1],L[u+2]),h.lineTo(L[u+3],L[u+4]),h.lineTo(L[u+5],L[u+6]),h.closePath(),t||h.fill(),u+=6;break;case e.STROKE_TRIANGLE:h.beginPath(),h.moveTo(L[u+1],L[u+2]),h.lineTo(L[u+3],L[u+4]),h.lineTo(L[u+5],L[u+6]),h.closePath(),t||h.stroke(),u+=6;break;case e.LINE_TO:h.lineTo(L[u+1],L[u+2]),u+=2;break;case e.MOVE_TO:h.moveTo(L[u+1],L[u+2]),u+=2;break;case e.LINE_FX_TO:h.lineTo(L[u+1],L[u+2]),u+=5;break;case e.MOVE_FX_TO:h.moveTo(L[u+1],L[u+2]),u+=5;break;case e.SAVE:h.save();break;case e.RESTORE:h.restore();break;case e.TRANSLATE:h.translate(L[u+1],L[u+2]),u+=2;break;case e.SCALE:h.scale(L[u+1],L[u+2]),u+=2;break;case e.ROTATE:h.rotate(L[u+1]),u+=1}}h.restore()}};module.exports=r;
},{"./Commands":352,"../GameObject":208}],394:[function(require,module,exports) {
var e=require("../../utils/NOOP"),r=require("../../utils/NOOP");WEBGL_RENDERER&&(e=require("./GraphicsWebGLRenderer"),r=require("./GraphicsCanvasRenderer")),CANVAS_RENDERER&&(r=require("./GraphicsCanvasRenderer")),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../utils/NOOP":30,"./GraphicsWebGLRenderer":459,"./GraphicsCanvasRenderer":460}],211:[function(require,module,exports) {
var t=require("../../cameras/2d/Camera.js"),e=require("../../utils/Class"),i=require("./Commands"),r=require("../components"),n=require("../../geom/ellipse/"),s=require("../GameObject"),h=require("../../utils/object/GetValue"),l=require("../../math/const"),o=require("./GraphicsRender"),u=new e({Extends:s,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Pipeline,r.Transform,r.Visible,r.ScrollFactor,o],initialize:function(t,e){var i=h(e,"x",0),r=h(e,"y",0);s.call(this,t,"Graphics"),this.setPosition(i,r),this.initPipeline("FlatTintPipeline"),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(e)},setDefaultStyles:function(t){return h(t,"lineStyle",null)&&(this.defaultStrokeWidth=h(t,"lineStyle.width",1),this.defaultStrokeColor=h(t,"lineStyle.color",16777215),this.defaultStrokeAlpha=h(t,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),h(t,"fillStyle",null)&&(this.defaultFillColor=h(t,"fillStyle.color",16777215),this.defaultFillAlpha=h(t,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(t,e,r){return void 0===r&&(r=1),this.commandBuffer.push(i.LINE_STYLE,t,e,r),this._lineWidth=t,this},fillStyle:function(t,e){return void 0===e&&(e=1),this.commandBuffer.push(i.FILL_STYLE,t,e),this},beginPath:function(){return this.commandBuffer.push(i.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(i.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(i.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(i.STROKE_PATH),this},fillCircleShape:function(t){return this.fillCircle(t.x,t.y,t.radius)},strokeCircleShape:function(t){return this.strokeCircle(t.x,t.y,t.radius)},fillCircle:function(t,e,i){return this.beginPath(),this.arc(t,e,i,0,l.PI2),this.fillPath(),this},strokeCircle:function(t,e,i){return this.beginPath(),this.arc(t,e,i,0,l.PI2),this.strokePath(),this},fillRectShape:function(t){return this.fillRect(t.x,t.y,t.width,t.height)},strokeRectShape:function(t){return this.strokeRect(t.x,t.y,t.width,t.height)},fillRect:function(t,e,r,n){return this.commandBuffer.push(i.FILL_RECT,t,e,r,n),this},strokeRect:function(t,e,i,r){var n=this._lineWidth/2,s=t-n,h=t+n;return this.beginPath(),this.moveTo(t,e),this.lineTo(t,e+r),this.strokePath(),this.beginPath(),this.moveTo(t+i,e),this.lineTo(t+i,e+r),this.strokePath(),this.beginPath(),this.moveTo(s,e),this.lineTo(h+i,e),this.strokePath(),this.beginPath(),this.moveTo(s,e+r),this.lineTo(h+i,e+r),this.strokePath(),this},fillPointShape:function(t,e){return this.fillPoint(t.x,t.y,e)},fillPoint:function(t,e,r){return!r||r<1?r=1:(t-=r/2,e-=r/2),this.commandBuffer.push(i.FILL_RECT,t,e,r,r),this},fillTriangleShape:function(t){return this.fillTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},strokeTriangleShape:function(t){return this.strokeTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},fillTriangle:function(t,e,r,n,s,h){return this.commandBuffer.push(i.FILL_TRIANGLE,t,e,r,n,s,h),this},strokeTriangle:function(t,e,r,n,s,h){return this.commandBuffer.push(i.STROKE_TRIANGLE,t,e,r,n,s,h),this},strokeLineShape:function(t){return this.lineBetween(t.x1,t.y1,t.x2,t.y2)},lineBetween:function(t,e,i,r){return this.beginPath(),this.moveTo(t,e),this.lineTo(i,r),this.strokePath(),this},lineTo:function(t,e){return this.commandBuffer.push(i.LINE_TO,t,e),this},moveTo:function(t,e){return this.commandBuffer.push(i.MOVE_TO,t,e),this},lineFxTo:function(t,e,r,n){return this.commandBuffer.push(i.LINE_FX_TO,t,e,r,n,1),this},moveFxTo:function(t,e,r,n){return this.commandBuffer.push(i.MOVE_FX_TO,t,e,r,n,1),this},strokePoints:function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var r=1;r<i;r++)this.lineTo(t[r].x,t[r].y);return e&&this.lineTo(t[0].x,t[0].y),this.strokePath(),this},fillPoints:function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var r=1;r<i;r++)this.lineTo(t[r].x,t[r].y);return e&&this.lineTo(t[0].x,t[0].y),this.fillPath(),this},strokeEllipseShape:function(t,e){void 0===e&&(e=32);var i=t.getPoints(e);return this.strokePoints(i,!0)},strokeEllipse:function(t,e,i,r,s){void 0===s&&(s=32);var h=new n(t,e,i,r).getPoints(s);return this.strokePoints(h,!0)},fillEllipseShape:function(t,e){void 0===e&&(e=32);var i=t.getPoints(e);return this.fillPoints(i,!0)},fillEllipse:function(t,e,i,r,s){void 0===s&&(s=32);var h=new n(t,e,i,r).getPoints(s);return this.fillPoints(h,!0)},arc:function(t,e,r,n,s,h){return this.commandBuffer.push(i.ARC,t,e,r,n,s,h),this},save:function(){return this.commandBuffer.push(i.SAVE),this},restore:function(){return this.commandBuffer.push(i.RESTORE),this},translate:function(t,e){return this.commandBuffer.push(i.TRANSLATE,t,e),this},scale:function(t,e){return this.commandBuffer.push(i.SCALE,t,e),this},rotate:function(t){return this.commandBuffer.push(i.ROTATE,t),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(t,e,i){var r,n,s=this.scene.sys;if(void 0===e&&(e=s.game.config.width),void 0===i&&(i=s.game.config.height),u.TargetCamera.setViewport(0,0,e,i),u.TargetCamera.scrollX=this.x,u.TargetCamera.scrollY=this.y,"string"==typeof t)if(s.textures.exists(t)){var h=(r=s.textures.get(t)).getSourceImage();h instanceof HTMLCanvasElement&&(n=h.getContext("2d"))}else n=(r=s.textures.createCanvas(t,e,i)).getSourceImage().getContext("2d");else t instanceof HTMLCanvasElement&&(n=t.getContext("2d"));return n&&(this.renderCanvas(s.game.renderer,this,0,u.TargetCamera,n),s.game.renderer.gl&&r&&(r.source[0].glTexture=s.game.renderer.canvasToTexture(n.canvas,r.source[0].glTexture,!0,0))),this}});u.TargetCamera=new t(0,0,0,0),module.exports=u;
},{"../../cameras/2d/Camera.js":377,"../../utils/Class":8,"./Commands":352,"../components":509,"../../geom/ellipse/":512,"../GameObject":208,"../../utils/object/GetValue":53,"../../math/const":40,"./GraphicsRender":394}],400:[function(require,module,exports) {
var r=require("../object/GetValue"),e=require("./Shuffle"),a=function(r,e,a){for(var t=[],o=0;o<r.length;o++)for(var n=0;n<e.length;n++)for(var f=0;f<a;f++)t.push({a:r[o],b:e[n]});return t},t=function(t,o,n){var f=r(n,"max",0),l=r(n,"qty",1),u=r(n,"random",!1),c=r(n,"randomB",!1),v=r(n,"repeat",0),i=r(n,"yoyo",!1),h=[];if(c&&e(o),-1===v)if(0===f)v=0;else{var s=t.length*o.length*l;i&&(s*=2),v=Math.ceil(f/s)}for(var g=0;g<=v;g++){var m=a(t,o,l);u&&e(m),h=h.concat(m),i&&(m.reverse(),h=h.concat(m))}return f&&h.splice(f),h};module.exports=t;
},{"../object/GetValue":53,"./Shuffle":370}],283:[function(require,module,exports) {
var e=require("../../actions/"),t=require("../../utils/Class"),i=require("../../utils/object/GetFastValue"),r=require("../../utils/object/GetValue"),s=require("../../utils/array/Range"),a=require("../../structs/Set"),n=require("../sprite/Sprite"),l=new t({initialize:function(e,t,r){void 0!==r||Array.isArray(t)||"object"!=typeof t||(r=t,t=null),this.scene=e,this.children=new a(t),this.isParent=!0,this.classType=i(r,"classType",n),this.active=i(r,"active",!0),this.maxSize=i(r,"maxSize",-1),this.defaultKey=i(r,"defaultKey",null),this.defaultFrame=i(r,"defaultFrame",null),this.runChildUpdate=i(r,"runChildUpdate",!1),this.createCallback=i(r,"createCallback",null),this.removeCallback=i(r,"removeCallback",null),this.createMultipleCallback=i(r,"createMultipleCallback",null),r&&this.createMultiple(r)},create:function(e,t,i,r,s,a){if(void 0===i&&(i=this.defaultKey),void 0===r&&(r=this.defaultFrame),void 0===s&&(s=!0),void 0===a&&(a=!0),this.isFull())return null;var n=new this.classType(this.scene,e,t,i,r);return this.scene.sys.displayList.add(n),n.preUpdate&&this.scene.sys.updateList.add(n),n.visible=s,n.setActive(a),this.add(n),n},createMultiple:function(e){Array.isArray(e)||(e=[e]);for(var t=[],i=0;i<e.length;i++){var r=this.createFromConfig(e[i]);t=t.concat(r)}return t},createFromConfig:function(t){this.classType=i(t,"classType",this.classType);var a=i(t,"key",void 0),n=i(t,"frame",null),l=i(t,"visible",!0),c=i(t,"active",!0),h=[];if(void 0===a)return h;Array.isArray(a)||(a=[a]),Array.isArray(n)||(n=[n]);for(var o=i(t,"repeat",0),u=i(t,"randomKey",!1),d=i(t,"randomFrame",!1),v=i(t,"yoyo",!1),p=i(t,"frameQuantity",1),f=i(t,"max",0),y=s(a,n,{max:f,qty:p,random:u,randomB:d,repeat:o,yoyo:v}),m=0;m<y.length;m++)h.push(this.create(0,0,y[m].a,y[m].b,l,c));var g=r(t,"setXY.x",0),A=r(t,"setXY.y",0),b=r(t,"setXY.stepX",0),C=r(t,"setXY.stepY",0);e.SetXY(h,g,A,b,C);var S=r(t,"setRotation.value",0),k=r(t,"setRotation.step",0);e.SetRotation(h,S,k);var F=r(t,"setScale.x",1),x=r(t,"setScale.y",F),z=r(t,"setScale.stepX",0),T=r(t,"setScale.stepY",0);e.SetScale(h,F,x,z,T);var U=r(t,"setAlpha.value",1),L=r(t,"setAlpha.step",0);e.SetAlpha(h,U,L);var q=i(t,"hitArea",null),M=i(t,"hitAreaCallback",null);q&&e.SetHitArea(h,q,M);var X=i(t,"gridAlign",!1);return X&&e.GridAlign(h,X),this.createMultipleCallback&&this.createMultipleCallback.call(this,h),h},preUpdate:function(e,t){if(this.runChildUpdate&&0!==this.children.size)for(var i=this.children.entries.slice(),r=0;r<i.length;r++){var s=i[r];s.active&&s.update(e,t)}},add:function(e,t){return void 0===t&&(t=!1),this.children.set(e),this.createCallback&&this.createCallback.call(this,e),t&&(this.scene.sys.displayList.add(e),e.preUpdate&&this.scene.sys.updateList.add(e)),e.on("destroy",this.remove,this),this},addMultiple:function(e,t){if(void 0===t&&(t=!1),Array.isArray(e))for(var i=0;i<e.length;i++)this.add(e[i],t);return this},remove:function(e,t){return void 0===t&&(t=!1),this.children.delete(e),this.removeCallback&&this.removeCallback.call(this,e),t&&(this.scene.sys.displayList.remove(e),e.preUpdate&&this.scene.sys.updateList.remove(e)),e.off("destroy",this.remove,this),this},clear:function(e){void 0===e&&(e=!1);for(var t=this.children,i=0;i<t.size;i++){var r=t.entries[i];r.off("destroy",this.remove,this),e&&(this.scene.sys.displayList.remove(r),r.preUpdate&&this.scene.sys.updateList.remove(r))}return this.children.clear(),this},contains:function(e){return this.children.contains(e)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getFirst:function(e,t,i,r,s,a,n){var l;void 0===e&&(e=!1),void 0===t&&(t=!1);for(var c=this.children.entries,h=0;h<c.length;h++)if((l=c[h]).active===e)return"number"==typeof i&&(l.x=i),"number"==typeof r&&(l.y=r),l;return t?this.create(i,r,s,a,n):null},get:function(e,t,i,r,s){return this.getFirst(!1,!0,e,t,i,r,s)},getFirstAlive:function(e,t,i,r,s,a){return this.getFirst(!0,e,t,i,r,s,a)},getFirstDead:function(e,t,i,r,s,a){return this.getFirst(!1,e,t,i,r,s,a)},playAnimation:function(t,i){return e.PlayAnimation(this.children.entries,t,i),this},isFull:function(){return-1!==this.maxSize&&this.children.size===this.maxSize},countActive:function(e){void 0===e&&(e=!0);for(var t=0,i=0;i<this.children.size;i++)this.children.entries[i].active===e&&t++;return t},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var e=this.getTotalUsed();return(-1===this.maxSize?999999999999:this.maxSize)-e},setDepth:function(t,i){return e.SetDepth(this.children.entries,t,i),this},kill:function(e){this.children.contains(e)&&e.setActive(!1)},killAndHide:function(e){this.children.contains(e)&&(e.setActive(!1),e.setVisible(!1))},toggleVisible:function(){return e.ToggleVisible(this.children.entries),this},destroy:function(){this.children.clear(),this.scene=void 0,this.children=void 0}});module.exports=l;
},{"../../actions/":69,"../../utils/Class":8,"../../utils/object/GetFastValue":102,"../../utils/object/GetValue":53,"../../utils/array/Range":400,"../../structs/Set":266,"../sprite/Sprite":289}],399:[function(require,module,exports) {
var e=require("../../utils/NOOP"),r=require("../../utils/NOOP");WEBGL_RENDERER&&(e=require("./ImageWebGLRenderer")),CANVAS_RENDERER&&(r=require("./ImageCanvasRenderer")),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../utils/NOOP":30,"./ImageWebGLRenderer":476,"./ImageCanvasRenderer":477}],284:[function(require,module,exports) {
var e=require("../../utils/Class"),i=require("../components"),t=require("../GameObject"),r=require("./ImageRender"),n=new e({Extends:t,Mixins:[i.Alpha,i.BlendMode,i.Depth,i.Flip,i.GetBounds,i.Origin,i.Pipeline,i.ScaleMode,i.ScrollFactor,i.Size,i.Texture,i.Tint,i.Transform,i.Visible,r],initialize:function(e,i,r,n,s){t.call(this,e,"Image"),this.setTexture(n,s),this.setPosition(i,r),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline("TextureTintPipeline")}});module.exports=n;
},{"../../utils/Class":8,"../components":509,"../GameObject":208,"./ImageRender":399}],402:[function(require,module,exports) {
var i=require("../../utils/Class"),t=require("../../utils/object/GetFastValue"),e=new i({initialize:function(i,e,s,o,r){if("object"==typeof i){var n=i;i=t(n,"x",0),e=t(n,"y",0),s=t(n,"power",0),o=t(n,"epsilon",100),r=t(n,"gravity",50)}else void 0===i&&(i=0),void 0===e&&(e=0),void 0===s&&(s=0),void 0===o&&(o=100),void 0===r&&(r=50);this.x=i,this.y=e,this.active=!0,this._gravity=r,this._power=0,this._epsilon=0,this.power=s,this.epsilon=o},update:function(i,t){var e=this.x-i.x,s=this.y-i.y,o=e*e+s*s;if(0!==o){var r=Math.sqrt(o);o<this._epsilon&&(o=this._epsilon);var n=this._power*t/(o*r)*100;i.velocityX+=e*n,i.velocityY+=s*n}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(i){this._epsilon=i*i}},power:{get:function(){return this._power/this._gravity},set:function(i){this._power=i*this._gravity}},gravity:{get:function(){return this._gravity},set:function(i){var t=this.power;this._gravity=i,this.power=t}}});module.exports=e;
},{"../../utils/Class":8,"../../utils/object/GetFastValue":102}],496:[function(require,module,exports) {
var i=require("../../../utils/Class"),n=new i({initialize:function(i,n){this.source=i,this.killOnEnter=n},willKill:function(i){var n=this.source.contains(i.x,i.y);return n&&this.killOnEnter||!n&&!this.killOnEnter}});module.exports=n;
},{"../../../utils/Class":8}],497:[function(require,module,exports) {
var t=require("../../../utils/Class"),i=new t({initialize:function(t,i,s,h,e){void 0===h&&(h=!1),void 0===e&&(e=!0),this.source=t,this.points=[],this.quantity=i,this.stepRate=s,this.yoyo=h,this.counter=-1,this.seamless=e,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var t=this.points[0],i=this.points[this.points.length-1];t.x===i.x&&t.y===i.y&&this.points.pop()}var s=this._length;return this._length=this.points.length,this._length<s&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(t){return this.source=t,this.updateSource()},getPoint:function(t){0===this._direction?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,-1===this.counter&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var i=this.points[this.counter];i&&(t.x=i.x,t.y=i.y)}});module.exports=i;
},{"../../../utils/Class":8}],231:[function(require,module,exports) {
var r=function(r,n){return Math.random()*(n-r)+r};module.exports=r;
},{}],945:[function(require,module,exports) {
var o=function(o,r){return void 0===r&&(r=1.70158),o*o*((r+1)*o-r)};module.exports=o;
},{}],946:[function(require,module,exports) {
var o=function(o,r){return void 0===r&&(r=1.70158),--o*o*((r+1)*o+r)+1};module.exports=o;
},{}],947:[function(require,module,exports) {
var r=function(r,o){void 0===o&&(o=1.70158);var e=1.525*o;return(r*=2)<1?r*r*((e+1)*r-e)*.5:.5*((r-=2)*r*((e+1)*r+e)+2)};module.exports=r;
},{}],922:[function(require,module,exports) {
module.exports={In:require("./In"),Out:require("./Out"),InOut:require("./InOut")};
},{"./In":945,"./Out":946,"./InOut":947}],948:[function(require,module,exports) {
var r=function(r){return(r=1-r)<1/2.75?1-7.5625*r*r:r<2/2.75?1-(7.5625*(r-=1.5/2.75)*r+.75):r<2.5/2.75?1-(7.5625*(r-=2.25/2.75)*r+.9375):1-(7.5625*(r-=2.625/2.75)*r+.984375)};module.exports=r;
},{}],949:[function(require,module,exports) {
var r=function(r){return r<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375};module.exports=r;
},{}],950:[function(require,module,exports) {
var r=function(r){var e=!1;return r<.5?(r=1-2*r,e=!0):r=2*r-1,r<1/2.75?r*=7.5625*r:r=r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375,e?.5*(1-r):.5*r+.5};module.exports=r;
},{}],957:[function(require,module,exports) {
var r=function(r){return 1-Math.sqrt(1-r*r)};module.exports=r;
},{}],958:[function(require,module,exports) {
var r=function(r){return Math.sqrt(1- --r*r)};module.exports=r;
},{}],959:[function(require,module,exports) {
var t=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)};module.exports=t;
},{}],954:[function(require,module,exports) {
var r=function(r){return r*r*r};module.exports=r;
},{}],955:[function(require,module,exports) {
var r=function(r){return--r*r*r+1};module.exports=r;
},{}],956:[function(require,module,exports) {
var r=function(r){return(r*=2)<1?.5*r*r*r:.5*((r-=2)*r*r+2)};module.exports=r;
},{}],979:[function(require,module,exports) {
var t=function(t,r,a){if(void 0===r&&(r=.1),void 0===a&&(a=.1),0===t)return 0;if(1===t)return 1;var i=a/4;return r<1?r=1:i=a*Math.asin(1/r)/(2*Math.PI),-r*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/a)};module.exports=t;
},{}],980:[function(require,module,exports) {
var t=function(t,r,a){if(void 0===r&&(r=.1),void 0===a&&(a=.1),0===t)return 0;if(1===t)return 1;var i=a/4;return r<1?r=1:i=a*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*t)*Math.sin((t-i)*(2*Math.PI)/a)+1};module.exports=t;
},{}],981:[function(require,module,exports) {
var t=function(t,a,r){if(void 0===a&&(a=.1),void 0===r&&(r=.1),0===t)return 0;if(1===t)return 1;var h=r/4;return a<1?a=1:h=r*Math.asin(1/a)/(2*Math.PI),(t*=2)<1?a*Math.pow(2,10*(t-=1))*Math.sin((t-h)*(2*Math.PI)/r)*-.5:a*Math.pow(2,-10*(t-=1))*Math.sin((t-h)*(2*Math.PI)/r)*.5+1};module.exports=t;
},{}],973:[function(require,module,exports) {
var o=function(o){return Math.pow(2,10*(o-1))-.001};module.exports=o;
},{}],974:[function(require,module,exports) {
var o=function(o){return 1-Math.pow(2,-10*o)};module.exports=o;
},{}],975:[function(require,module,exports) {
var o=function(o){return(o*=2)<1?.5*Math.pow(2,10*(o-1)):.5*(2-Math.pow(2,-10*(o-1)))};module.exports=o;
},{}],960:[function(require,module,exports) {
var r=function(r){return r};module.exports=r;
},{}],927:[function(require,module,exports) {
module.exports=require("./Linear");
},{"./Linear":960}],976:[function(require,module,exports) {
var r=function(r){return r*r};module.exports=r;
},{}],977:[function(require,module,exports) {
var r=function(r){return r*(2-r)};module.exports=r;
},{}],978:[function(require,module,exports) {
var r=function(r){return(r*=2)<1?.5*r*r:-.5*(--r*(r-2)-1)};module.exports=r;
},{}],986:[function(require,module,exports) {
var r=function(r){return r*r*r*r};module.exports=r;
},{}],987:[function(require,module,exports) {
var r=function(r){return 1- --r*r*r*r};module.exports=r;
},{}],988:[function(require,module,exports) {
var r=function(r){return(r*=2)<1?.5*r*r*r*r:-.5*((r-=2)*r*r*r-2)};module.exports=r;
},{}],989:[function(require,module,exports) {
var r=function(r){return r*r*r*r*r};module.exports=r;
},{}],990:[function(require,module,exports) {
var r=function(r){return--r*r*r*r*r+1};module.exports=r;
},{}],991:[function(require,module,exports) {
var r=function(r){return(r*=2)<1?.5*r*r*r*r*r:.5*((r-=2)*r*r*r*r+2)};module.exports=r;
},{}],983:[function(require,module,exports) {
var t=function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)};module.exports=t;
},{}],984:[function(require,module,exports) {
var t=function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)};module.exports=t;
},{}],985:[function(require,module,exports) {
var t=function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))};module.exports=t;
},{}],982:[function(require,module,exports) {
var o=function(o,r){return void 0===r&&(r=1),o<=0?0:o>=1?1:1/r*(1+(r*o|0))};module.exports=o;
},{}],932:[function(require,module,exports) {
module.exports=require("./Stepped");
},{"./Stepped":982}],554:[function(require,module,exports) {
var e=require("./back"),u=require("./bounce"),t=require("./circular"),n=require("./cubic"),a=require("./elastic"),O=require("./expo"),r=require("./linear"),i=require("./quadratic"),I=require("./quartic"),s=require("./quintic"),c=require("./sine"),o=require("./stepped");module.exports={Power0:r,Power1:i.Out,Power2:n.Out,Power3:I.Out,Power4:s.Out,Linear:r,Quad:i.Out,Cubic:n.Out,Quart:I.Out,Quint:s.Out,Sine:c.Out,Expo:O.Out,Circ:t.Out,Elastic:a.Out,Back:e.Out,Bounce:u.Out,Stepped:o,"Quad.easeIn":i.In,"Cubic.easeIn":n.In,"Quart.easeIn":I.In,"Quint.easeIn":s.In,"Sine.easeIn":c.In,"Expo.easeIn":O.In,"Circ.easeIn":t.In,"Elastic.easeIn":a.In,"Back.easeIn":e.In,"Bounce.easeIn":u.In,"Quad.easeOut":i.Out,"Cubic.easeOut":n.Out,"Quart.easeOut":I.Out,"Quint.easeOut":s.Out,"Sine.easeOut":c.Out,"Expo.easeOut":O.Out,"Circ.easeOut":t.Out,"Elastic.easeOut":a.Out,"Back.easeOut":e.Out,"Bounce.easeOut":u.Out,"Quad.easeInOut":i.InOut,"Cubic.easeInOut":n.InOut,"Quart.easeInOut":I.InOut,"Quint.easeInOut":s.InOut,"Sine.easeInOut":c.InOut,"Expo.easeInOut":O.InOut,"Circ.easeInOut":t.InOut,"Elastic.easeInOut":a.InOut,"Back.easeInOut":e.InOut,"Bounce.easeInOut":u.InOut};
},{"./back":922,"./bounce":922,"./circular":922,"./cubic":922,"./elastic":922,"./expo":922,"./linear":927,"./quadratic":922,"./quartic":922,"./quintic":922,"./sine":922,"./stepped":932}],451:[function(require,module,exports) {
var r=require("../../math/easing/EaseMap"),e=function(e,t){if("string"==typeof e&&r.hasOwnProperty(e)){if(t){var n=t.slice(0);return n.unshift(0),function(t){return n[0]=t,r[e].apply(this,n)}}return r[e]}return"function"==typeof e?e:(Array.isArray(e)&&e.length,r.Power0)};module.exports=e;
},{"../../math/easing/EaseMap":554}],467:[function(require,module,exports) {
var t=require("../../utils/Class"),e=require("../../math/FloatBetween"),i=require("../../tweens/builders/GetEaseFunction"),s=require("../../utils/object/GetFastValue"),a=require("../../math/Wrap"),r=new t({initialize:function(t,e,i,s){void 0===s&&(s=!1),this.propertyKey=e,this.propertyValue=i,this.defaultValue=i,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=s,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(t)},loadConfig:function(t,e){void 0===t&&(t={}),e&&(this.propertyKey=e),this.propertyValue=s(t,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return JSON.stringify(this.propertyValue)},onChange:function(t){return this.propertyValue=t,this.setMethods()},setMethods:function(){var t=this.propertyValue,e=typeof t;if("number"===e)this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(t))this.onEmit=this.randomStaticValueEmit;else if("function"===e)this.emitOnly?this.onEmit=t:this.onUpdate=t;else if("object"===e&&(this.has(t,"random")||this.hasBoth(t,"start","end")||this.hasBoth(t,"min","max"))){this.start=this.has(t,"start")?t.start:t.min,this.end=this.has(t,"end")?t.end:t.max;var s=this.hasBoth(t,"min","max")||this.has(t,"random");if(s){var a=t.random;Array.isArray(a)&&(this.start=a[0],this.end=a[1]),this.onEmit=this.randomRangedValueEmit}if(this.has(t,"steps"))this.steps=t.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var r=this.has(t,"ease")?t.ease:"Linear";this.ease=i(r),s||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else"object"===e&&this.hasEither(t,"onEmit","onUpdate")&&(this.has(t,"onEmit")&&(this.onEmit=t.onEmit),this.has(t,"onUpdate")&&(this.onUpdate=t.onUpdate));return this},has:function(t,e){return t.hasOwnProperty(e)},hasBoth:function(t,e,i){return t.hasOwnProperty(e)&&t.hasOwnProperty(i)},hasEither:function(t,e,i){return t.hasOwnProperty(e)||t.hasOwnProperty(i)},defaultEmit:function(t,e,i){return i},defaultUpdate:function(t,e,i,s){return s},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var t=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[t]},randomRangedValueEmit:function(t,i){var s=e(this.start,this.end);return t&&t.data[i]&&(t.data[i].min=s),s},steppedEmit:function(){var t=this.counter,e=this.counter+(this.end-this.start)/this.steps;return this.counter=a(e,this.start,this.end),t},easedValueEmit:function(t,e){if(t&&t.data[e]){var i=t.data[e];i.min=this.start,i.max=this.end}return this.start},easeValueUpdate:function(t,e,i){var s=t.data[e];return(s.max-s.min)*this.ease(i)+s.min}});module.exports=r;
},{"../../utils/Class":8,"../../math/FloatBetween":231,"../../tweens/builders/GetEaseFunction":451,"../../utils/object/GetFastValue":102,"../../math/Wrap":254}],468:[function(require,module,exports) {
var o=function(o,r,n){void 0===r&&(r=0),void 0===n&&(n=o.length);var t=r+Math.floor(Math.random()*n);return void 0===o[t]?null:o[t]};module.exports=o;
},{}],469:[function(require,module,exports) {
var r=function(r,e){for(var n=0;n<e.length;n++)if(r.hasOwnProperty(e[n]))return!0;return!1};module.exports=r;
},{}],470:[function(require,module,exports) {
var r=function(r,e){return r.hasOwnProperty(e)};module.exports=r;
},{}],471:[function(require,module,exports) {
var t=require("../../utils/Class"),i=require("../../math/DegToRad"),e=require("../../math/distance/DistanceBetween"),s=new t({initialize:function(t){this.emitter=t,this.frame=null,this.index=0,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.scrollFactorX=1,this.scrollFactorY=1,this.tint=4294967295,this.color=4294967295,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return this.lifeCurrent>0},fire:function(t,s){var h=this.emitter;this.frame=h.getFrame(),h.emitZone&&h.emitZone.getPoint(this),void 0===t?(h.follow&&(this.x+=h.follow.x+h.followOffset.x),this.x+=h.x.onEmit(this,"x")):this.x+=t,void 0===s?(h.follow&&(this.y+=h.follow.y+h.followOffset.y),this.y+=h.y.onEmit(this,"y")):this.y+=s,this.life=h.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var a=h.speedX.onEmit(this,"speedX"),o=h.speedY?h.speedY.onEmit(this,"speedY"):a;if(h.radial){var l=i(h.angle.onEmit(this,"angle"));this.velocityX=Math.cos(l)*Math.abs(a),this.velocityY=Math.sin(l)*Math.abs(o)}else if(h.moveTo){var n=h.moveToX.onEmit(this,"moveToX"),c=h.moveToY?h.moveToY.onEmit(this,"moveToY"):n,r=Math.atan2(c-this.y,n-this.x),m=e(this.x,this.y,n,c)/(this.life/1e3);this.velocityX=Math.cos(r)*m,this.velocityY=Math.sin(r)*m}else this.velocityX=a,this.velocityY=o;h.acceleration&&(this.accelerationX=h.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=h.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=h.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=h.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=h.delay.onEmit(this,"delay"),this.scaleX=h.scaleX.onEmit(this,"scaleX"),this.scaleY=h.scaleY?h.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=h.rotate.onEmit(this,"rotate"),this.rotation=i(this.angle),this.bounce=h.bounce.onEmit(this,"bounce"),this.alpha=h.alpha.onEmit(this,"alpha"),this.tint=h.tint.onEmit(this,"tint"),this.color=16777215&this.tint|(255*this.alpha|0)<<24,this.index=h.alive.length},computeVelocity:function(t,i,e,s){var h=this.velocityX,a=this.velocityY,o=this.accelerationX,l=this.accelerationY,n=this.maxVelocityX,c=this.maxVelocityY;h+=t.gravityX*e,a+=t.gravityY*e,o&&(h+=o*e),l&&(a+=l*e),h>n?h=n:h<-n&&(h=-n),a>c?a=c:a<-c&&(a=-c),this.velocityX=h,this.velocityY=a;for(var r=0;r<s.length;r++)s[r].update(this,i,e)},checkBounds:function(t){var i=t.bounds,e=-this.bounce;this.x<i.x&&t.collideLeft?(this.x=i.x,this.velocityX*=e):this.x>i.right&&t.collideRight&&(this.x=i.right,this.velocityX*=e),this.y<i.y&&t.collideTop?(this.y=i.y,this.velocityY*=e):this.y>i.bottom&&t.collideBottom&&(this.y=i.bottom,this.velocityY*=e)},update:function(t,e,s){if(this.delayCurrent>0)return this.delayCurrent-=t,!1;var h=this.emitter,a=1-this.lifeCurrent/this.life;return this.lifeT=a,this.computeVelocity(h,t,e,s),this.x+=this.velocityX*e,this.y+=this.velocityY*e,h.bounds&&this.checkBounds(h),h.deathZone&&h.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=h.scaleX.onUpdate(this,"scaleX",a,this.scaleX),h.scaleY?this.scaleY=h.scaleY.onUpdate(this,"scaleY",a,this.scaleY):this.scaleY=this.scaleX,this.angle=h.rotate.onUpdate(this,"rotate",a,this.angle),this.rotation=i(this.angle),this.alpha=h.alpha.onUpdate(this,"alpha",a,this.alpha),this.tint=h.tint.onUpdate(this,"tint",a,this.tint),this.color=16777215&this.tint|(255*this.alpha|0)<<24,this.lifeCurrent-=t,this.lifeCurrent<=0)}});module.exports=s;
},{"../../utils/Class":8,"../../math/DegToRad":228,"../../math/distance/DistanceBetween":376}],498:[function(require,module,exports) {
var e=require("../../../utils/Class"),t=require("../../../math/Vector2"),i=new e({initialize:function(e){this.source=e,this._tempVec=new t},getPoint:function(e){var t=this._tempVec;this.source.getRandomPoint(t),e.x=t.x,e.y=t.y}});module.exports=i;
},{"../../../utils/Class":8,"../../../math/Vector2":96}],401:[function(require,module,exports) {
var t=require("../../renderer/BlendModes"),e=require("../../utils/Class"),i=require("../components"),s=require("./zones/DeathZone"),a=require("./zones/EdgeZone"),n=require("./EmitterOp"),r=require("../../utils/object/GetFastValue"),h=require("../../utils/array/GetRandomElement"),l=require("../../utils/object/HasAny"),o=require("../../utils/object/HasValue"),c=require("./Particle"),u=require("./zones/RandomZone"),f=require("../../geom/rectangle/Rectangle"),d=require("../../utils/array/StableSort"),m=require("../../math/Vector2"),p=require("../../math/Wrap"),g=new e({Mixins:[i.BlendMode,i.ScrollFactor,i.Visible],initialize:function(e,i){this.manager=e,this.texture=e.texture,this.frames=[e.defaultFrame],this.defaultFrame=e.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=c,this.x=new n(i,"x",0),this.y=new n(i,"y",0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new n(i,"accelerationX",0,!0),this.accelerationY=new n(i,"accelerationY",0,!0),this.maxVelocityX=new n(i,"maxVelocityX",1e4,!0),this.maxVelocityY=new n(i,"maxVelocityY",1e4,!0),this.speedX=new n(i,"speedX",0,!0),this.speedY=new n(i,"speedY",0,!0),this.moveTo=!1,this.moveToX=new n(i,"moveToX",0,!0),this.moveToY=new n(i,"moveToY",0,!0),this.bounce=new n(i,"bounce",0,!0),this.scaleX=new n(i,"scaleX",1),this.scaleY=new n(i,"scaleY",1),this.tint=new n(i,"tint",4294967295),this.alpha=new n(i,"alpha",1),this.lifespan=new n(i,"lifespan",1e3),this.angle=new n(i,"angle",{min:0,max:360}),this.rotate=new n(i,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new n(i,"quantity",1,!0),this.delay=new n(i,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=t.NORMAL,this.follow=null,this.followOffset=new m,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,i&&this.fromJSON(i)},fromJSON:function(t){if(!t)return this;var e=0,i="";for(e=0;e<this.configFastMap.length;e++)i=this.configFastMap[e],o(t,i)&&(this[i]=r(t,i));for(e=0;e<this.configOpMap.length;e++)i=this.configOpMap[e],o(t,i)&&this[i].loadConfig(t);if(this.acceleration=0!==this.accelerationX.propertyValue||0!==this.accelerationY.propertyValue,this.moveTo=0!==this.moveToX.propertyValue||0!==this.moveToY.propertyValue,o(t,"speed")&&(this.speedX.loadConfig(t,"speed"),this.speedY=null),(l(t,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),o(t,"scale")&&(this.scaleX.loadConfig(t,"scale"),this.scaleY=null),o(t,"callbackScope")){var s=r(t,"callbackScope",null);this.emitCallbackScope=s,this.deathCallbackScope=s}return o(t,"emitZone")&&this.setEmitZone(t.emitZone),o(t,"deathZone")&&this.setDeathZone(t.deathZone),o(t,"bounds")&&this.setBounds(t.bounds),o(t,"followOffset")&&this.followOffset.setFromObject(r(t,"followOffset",0)),o(t,"frame")&&this.setFrame(t.frame),this},toJSON:function(t){void 0===t&&(t={});var e=0,i="";for(e=0;e<this.configFastMap.length;e++)t[i=this.configFastMap[e]]=this[i];for(e=0;e<this.configOpMap.length;e++)this[i=this.configOpMap[e]]&&(t[i]=this[i].toJSON());return this.speedY||(delete t.speedX,t.speed=this.speedX.toJSON()),this.scaleY||(delete t.scaleX,t.scale=this.scaleX.toJSON()),t},startFollow:function(t,e,i,s){return void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=!1),this.follow=t,this.followOffset.set(e,i),this.trackVisible=s,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(1===this.frames.length)return this.defaultFrame;if(this.randomFrame)return h(this.frames);var t=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=p(this.currentFrame+1,0,this._frameLength)),t},setFrame:function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=1),this.randomFrame=e,this.frameQuantity=i,this.currentFrame=0,this._frameCounter=0;var s=typeof t;if(Array.isArray(t)||"string"===s||"number"===s)this.manager.setEmitterFrames(t,this);else if("object"===s){var a=t;(t=r(a,"frames",null))&&this.manager.setEmitterFrames(t,this);var n=r(a,"cycle",!1);this.randomFrame=!n,this.frameQuantity=r(a,"quantity",i)}return this._frameLength=this.frames.length,1===this._frameLength&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(t){return void 0===t&&(t=!0),this.radial=t,this},setPosition:function(t,e){return this.x.onChange(t),this.y.onChange(e),this},setBounds:function(t,e,i,s){if("object"==typeof t){var a=t;t=a.x,e=a.y,i=o(a,"w")?a.w:a.width,s=o(a,"h")?a.h:a.height}return this.bounds?this.bounds.setTo(t,e,i,s):this.bounds=new f(t,e,i,s),this},setSpeedX:function(t){return this.speedX.onChange(t),this.radial=!1,this},setSpeedY:function(t){return this.speedY&&(this.speedY.onChange(t),this.radial=!1),this},setSpeed:function(t){return this.speedX.onChange(t),this.speedY=null,this.radial=!0,this},setScaleX:function(t){return this.scaleX.onChange(t),this},setScaleY:function(t){return this.scaleY.onChange(t),this},setScale:function(t){return this.scaleX.onChange(t),this.scaleY=null,this},setGravityX:function(t){return this.gravityX=t,this},setGravityY:function(t){return this.gravityY=t,this},setGravity:function(t,e){return this.gravityX=t,this.gravityY=e,this},setAlpha:function(t){return this.alpha.onChange(t),this},setEmitterAngle:function(t){return this.angle.onChange(t),this},setAngle:function(t){return this.angle.onChange(t),this},setLifespan:function(t){return this.lifespan.onChange(t),this},setQuantity:function(t){return this.quantity.onChange(t),this},setFrequency:function(t,e){return this.frequency=t,this._counter=0,e&&this.quantity.onChange(e),this},setEmitZone:function(t){if(void 0===t)this.emitZone=null;else{var e=r(t,"type","random"),i=r(t,"source",null);if(i&&"function"==typeof i.getPoint)switch(e){case"random":this.emitZone=new u(i);break;case"edge":var s=r(t,"quantity",1),n=r(t,"stepRate",0),h=r(t,"yoyo",!1),l=r(t,"seamless",!0);this.emitZone=new a(i,s,n,h,l)}}return this},setDeathZone:function(t){if(void 0===t)this.deathZone=null;else{var e=r(t,"type","onEnter"),i=r(t,"source",null);if(i&&"function"==typeof i.contains){var a="onEnter"===e;this.deathZone=new s(i,a)}}return this},reserve:function(t){for(var e=this.dead,i=0;i<t;i++)e.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(t,e){return void 0===t?(this.emitCallback=null,this.emitCallbackScope=null):"function"==typeof t&&(this.emitCallback=t,e&&(this.emitCallbackScope=e)),this},onParticleDeath:function(t,e){return void 0===t?(this.deathCallback=null,this.deathCallbackScope=null):"function"==typeof t&&(this.deathCallback=t,e&&(this.deathCallbackScope=e)),this},killAll:function(){for(var t=this.dead,e=this.alive;e.length>0;)t.push(e.pop());return this},forEachAlive:function(t,e){for(var i=this.alive,s=i.length,a=0;a<s;++a)t.call(e,i[a],this);return this},forEachDead:function(t,e){for(var i=this.dead,s=i.length,a=0;a<s;++a)t.call(e,i[a],this);return this},start:function(){return this.on=!0,this._counter=0,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},depthSort:function(){return d.inplace(this.alive,this.depthSortCallback),this},flow:function(t,e){return void 0===e&&(e=1),this.frequency=t,this.quantity.onChange(e),this.start()},explode:function(t,e,i){return this.frequency=-1,this.emitParticle(t,e,i)},emitParticleAt:function(t,e,i){return this.emitParticle(i,t,e)},emitParticle:function(t,e,i){if(!this.atLimit()){void 0===t&&(t=this.quantity.onEmit());for(var s=this.dead,a=0;a<t;a++){var n;if((n=s.length>0?s.pop():new this.particleClass(this)).fire(e,i),this.particleBringToTop?this.alive.push(n):this.alive.unshift(n),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,n,this),this.atLimit())break}return n}},preUpdate:function(t,e){var i=(e*=this.timeScale)/1e3;this.trackVisible&&(this.visible=this.follow.visible);for(var s=this.manager.getProcessors(),a=this.alive,n=a.length,r=0;r<n;r++){var h=a[r];if(h.update(e,i,s)){var l=a[n-1];a[n-1]=h,a[r]=l,r-=1,n-=1}}var o=a.length-n;if(o>0){var c=a.splice(a.length-o,o),u=this.deathCallback,f=this.deathCallbackScope;if(u)for(var m=0;m<c.length;m++)u.call(f,c[m]);this.dead.concat(c),d.inplace(a,this.indexSortCallback)}this.on&&(0===this.frequency?this.emitParticle():this.frequency>0&&(this._counter-=e,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(t,e){return t.y-e.y},indexSortCallback:function(t,e){return t.index-e.index}});module.exports=g;
},{"../../renderer/BlendModes":14,"../../utils/Class":8,"../components":509,"./zones/DeathZone":496,"./zones/EdgeZone":497,"./EmitterOp":467,"../../utils/object/GetFastValue":102,"../../utils/array/GetRandomElement":468,"../../utils/object/HasAny":469,"../../utils/object/HasValue":470,"./Particle":471,"./zones/RandomZone":498,"../../geom/rectangle/Rectangle":62,"../../utils/array/StableSort":374,"../../math/Vector2":96,"../../math/Wrap":254}],472:[function(require,module,exports) {
var e=require("../GameObject"),r=function(r,t,a,i){0===t.emitters.length||e.RENDER_MASK!==t.renderFlags||t.cameraFilter>0&&t.cameraFilter&i._id||this.pipeline.drawEmitterManager(t,i)};module.exports=r;
},{"../GameObject":208}],473:[function(require,module,exports) {
var e=require("../GameObject"),r=function(r,l,a,o){var t=l.emitters.list;if(!(0===t.length||e.RENDER_MASK!==l.renderFlags||l.cameraFilter>0&&l.cameraFilter&o._id))for(var s=0;s<t.length;s++){var i=t[s],c=i.alive,d=c.length;if(i.visible&&0!==d){var n=r.currentContext,g=n.globalAlpha,h=o.scrollX*i.scrollFactorX,v=o.scrollY*i.scrollFactorY;r.currentBlendMode!==i.blendMode&&(r.currentBlendMode=i.blendMode,n.globalCompositeOperation=r.blendModes[i.blendMode]);for(var b=r.config.roundPixels,m=0;m<d;++m){var f=c[m],u=(f.color>>24&255)/255;if(!(u<=0)){var F=f.frame,M=.5*F.width,p=.5*F.height,x=F.canvasData,A=-M,X=-p,Y=f.x-h*f.scrollFactorX,w=f.y-v*f.scrollFactorY;b&&(Y|=0,w|=0),n.globalAlpha=u,n.save(),n.translate(Y,w),n.rotate(f.rotation),n.scale(f.scaleX,f.scaleY),n.drawImage(F.source.image,x.sx,x.sy,x.sWidth,x.sHeight,A,X,x.dWidth,x.dHeight),n.restore()}}n.globalAlpha=g}}};module.exports=r;
},{"../GameObject":208}],403:[function(require,module,exports) {
var e=require("../../utils/NOOP"),r=require("../../utils/NOOP");WEBGL_RENDERER&&(e=require("./ParticleManagerWebGLRenderer")),CANVAS_RENDERER&&(r=require("./ParticleManagerCanvasRenderer")),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../utils/NOOP":30,"./ParticleManagerWebGLRenderer":472,"./ParticleManagerCanvasRenderer":473}],285:[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../components"),r=require("../GameObject"),i=require("./GravityWell"),s=require("../../structs/List"),a=require("./ParticleEmitter"),n=require("./ParticleManagerRender"),u=new e({Extends:r,Mixins:[t.Depth,t.Visible,t.Pipeline,n],initialize:function(e,t,i,a){if(r.call(this,e,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],null===i||"object"!=typeof i&&!Array.isArray(i)||(a=i,i=null),this.setTexture(t,i),this.initPipeline("TextureTintPipeline"),this.emitters=new s(this),this.wells=new s(this),a){Array.isArray(a)||(a=[a]);for(var n=0;n<a.length;n++)this.createEmitter(a[n])}},setTexture:function(e,t){return this.texture=this.scene.sys.textures.get(e),this.setFrame(t)},setFrame:function(e){return this.frame=this.texture.get(e),this.frameNames=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),this.defaultFrame=this.frame,this},setEmitterFrames:function(e,t){Array.isArray(e)||(e=[e]);var r=t.frames;r.length=0;for(var i=0;i<e.length;i++){var s=e[i];-1!==this.frameNames.indexOf(s)&&r.push(this.texture.get(s))}return r.length>0?t.defaultFrame=r[0]:t.defaultFrame=this.defaultFrame,this},addEmitter:function(e){return this.emitters.add(e)},createEmitter:function(e){return this.addEmitter(new a(this,e))},addGravityWell:function(e){return this.wells.add(e)},createGravityWell:function(e){return this.addGravityWell(new i(e))},emitParticle:function(e,t,r){for(var i=this.emitters.list,s=0;s<i.length;s++){var a=i[s];a.active&&a.emitParticle(e,t,r)}return this},emitParticleAt:function(e,t,r){return this.emitParticle(r,e,t)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(e,t){t*=this.timeScale;for(var r=this.emitters.list,i=0;i<r.length;i++){var s=r[i];s.active&&s.preUpdate(e,t)}}});module.exports=u;
},{"../../utils/Class":8,"../components":509,"../GameObject":208,"./GravityWell":402,"../../structs/List":263,"./ParticleEmitter":401,"./ParticleManagerRender":403}],404:[function(require,module,exports) {
var r=function(r,e,n){return r&&r.hasOwnProperty(e)?r[e]:n};module.exports=r;
},{}],327:[function(require,module,exports) {
var E={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26};module.exports=E;
},{}],286:[function(require,module,exports) {
var t=require("../../utils/Class"),i=require("../../math/DegToRad"),s=require("../../tweens/builders/GetBoolean"),e=require("../../utils/object/GetValue"),a=require("../sprite/Sprite"),h=require("../../tweens/tween/const"),o=require("../../math/Vector2"),n=new t({Extends:a,initialize:function(t,i,s,e,n,r){a.call(this,t,s,e,n,r),this.path=i,this.rotateToPath=!1,this.pathRotationVerticalAdjust=!1,this.pathRotationOffset=0,this.pathOffset=new o(s,e),this.pathVector=new o,this.pathTween,this.pathConfig=null,this._prevDirection=h.PLAYING_FORWARD},setPath:function(t,i){void 0===i&&(i=this.pathConfig);var s=this.pathTween;return s&&s.isPlaying()&&s.stop(),this.path=t,i&&this.start(i),this},setRotateToPath:function(t,i,s){return void 0===i&&(i=0),void 0===s&&(s=!1),this.rotateToPath=t,this.pathRotationOffset=i,this.pathRotationVerticalAdjust=s,this},isFollowing:function(){var t=this.pathTween;return t&&t.isPlaying()},startFollow:function(t,a){void 0===t&&(t={}),void 0===a&&(a=0);var o=this.pathTween;o&&o.isPlaying()&&o.stop(),"number"==typeof t&&(t={duration:t}),t.from=0,t.to=1;var n=s(t,"positionOnPath",!1);if(this.rotateToPath=s(t,"rotateToPath",!1),this.pathRotationOffset=e(t,"rotationOffset",0),this.pathRotationVerticalAdjust=s(t,"verticalAdjust",!1),this.pathTween=this.scene.sys.tweens.addCounter(t),this.path.getStartPoint(this.pathOffset),n&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=h.PLAYING_FORWARD,this.rotateToPath){var r=this.path.getPoint(.1);this.rotation=Math.atan2(r.y-this.y,r.x-this.x)+i(this.pathRotationOffset)}return this.pathConfig=t,this},pauseFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.pause(),this},resumeFollow:function(){var t=this.pathTween;return t&&t.isPaused()&&t.resume(),this},stopFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.stop(),this},preUpdate:function(t,s){this.anims.update(t,s);var e=this.pathTween;if(e){var a=e.data[0];if(a.state!==h.PLAYING_FORWARD&&a.state!==h.PLAYING_BACKWARD)return;var o=this.pathVector;this.path.getPoint(e.getValue(),o),o.add(this.pathOffset);var n=this.x,r=this.y;this.setPosition(o.x,o.y);var p=this.x-n,f=this.y-r;if(0===p&&0===f)return;if(a.state!==this._prevDirection)return void(this._prevDirection=a.state);this.rotateToPath&&(this.rotation=Math.atan2(f,p)+i(this.pathRotationOffset),this.pathRotationVerticalAdjust&&(this.flipY=0!==this.rotation&&a.state===h.PLAYING_BACKWARD))}}});module.exports=n;
},{"../../utils/Class":8,"../../math/DegToRad":228,"../../tweens/builders/GetBoolean":404,"../../utils/object/GetValue":53,"../sprite/Sprite":289,"../../tweens/tween/const":327,"../../math/Vector2":96}],474:[function(require,module,exports) {
var e=require("../GameObject"),t=function(t,i,r,a){e.RENDER_MASK!==i.renderFlags||i.cameraFilter>0&&i.cameraFilter&a._id||this.pipeline.batchTexture(i,i.texture,i.texture.width,i.texture.height,i.x,i.y,i.width,i.height,i.scaleX,i.scaleY,i.rotation,i.flipX,i.flipY,i.scrollFactorX,i.scrollFactorY,i.displayOriginX,i.displayOriginY,0,0,i.texture.width,i.texture.height,4294967295,4294967295,4294967295,4294967295,0,0,a)};module.exports=t;
},{"../GameObject":208}],475:[function(require,module,exports) {
var e=require("../GameObject"),a=function(a,l,r,o){if(!(e.RENDER_MASK!==l.renderFlags||l.cameraFilter>0&&l.cameraFilter&o._id)){var c=a.currentContext;a.currentBlendMode!==l.blendMode&&(a.currentBlendMode=l.blendMode,c.globalCompositeOperation=a.blendModes[l.blendMode]),a.currentAlpha!==l.alpha&&(a.currentAlpha=l.alpha,c.globalAlpha=l.alpha),a.currentScaleMode!==l.scaleMode&&(a.currentScaleMode=l.scaleMode);var n=0,t=0,d=1,i=1;l.flipX?(d=-1,n-=l.canvas.width-l.displayOriginX):n-=l.displayOriginX,l.flipY?(i=-1,t-=l.canvas.height-l.displayOriginY):t-=l.displayOriginY,c.save(),c.translate(l.x-o.scrollX*l.scrollFactorX,l.y-o.scrollY*l.scrollFactorY),c.rotate(l.rotation),c.scale(l.scaleX,l.scaleY),c.scale(d,i),c.drawImage(l.canvas,n,t),c.restore()}};module.exports=a;
},{"../GameObject":208}],406:[function(require,module,exports) {
var e=require("../../utils/NOOP"),r=require("../../utils/NOOP");WEBGL_RENDERER&&(e=require("./RenderTextureWebGLRenderer")),CANVAS_RENDERER&&(r=require("./RenderTextureCanvasRenderer")),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../utils/NOOP":30,"./RenderTextureWebGLRenderer":474,"./RenderTextureCanvasRenderer":475}],405:[function(require,module,exports) {
var t={fill:function(t){var i=255&(t>>16|0),e=255&(t>>8|0),s=255&(0|t);return this.context.fillStyle="rgb("+i+","+e+","+s+")",this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this},clear:function(){return this.context.save(),this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.restore(),this},draw:function(t,i,e,s){var h=this.currentMatrix;return this.context.globalAlpha=this.globalAlpha,this.context.setTransform(h[0],h[1],h[2],h[3],h[4],h[5]),this.context.drawImage(t.source[i.sourceIndex].image,i.cutX,i.cutY,i.cutWidth,i.cutHeight,e,s,i.cutWidth,i.cutWidth),this}};module.exports=t;
},{}],407:[function(require,module,exports) {
var e={fill:function(e){var r=255&(e>>16|0),t=255&(e>>8|0),i=255&(0|e);this.renderer.setFramebuffer(this.framebuffer);var l=this.gl;return l.clearColor(r/255,t/255,i/255,1),l.clear(l.COLOR_BUFFER_BIT),this.renderer.setFramebuffer(null),this},clear:function(){this.renderer.setFramebuffer(this.framebuffer);var e=this.gl;return e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),this.renderer.setFramebuffer(null),this},draw:function(e,r,t,i){var l=e.source[r.sourceIndex].glTexture,s=(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16);return this.renderer.setFramebuffer(this.framebuffer),this.renderer.pipelines.TextureTintPipeline.drawTexture(l,t,i,s,this.globalAlpha,r.cutX,r.cutY,r.cutWidth,r.cutHeight,this.currentMatrix),this.renderer.setFramebuffer(null),this}};module.exports=e;
},{}],287:[function(require,module,exports) {
var e=require("../../display/canvas/CanvasPool"),r=require("../../utils/Class"),t=require("../components"),i=require("../../const"),s=require("../GameObject"),a=require("./RenderTextureRender"),l=require("./RenderTextureCanvas"),n=require("./RenderTextureWebGL"),h=new r({Extends:s,Mixins:[t.Alpha,t.BlendMode,t.Depth,t.Flip,t.GetBounds,t.MatrixStack,t.Origin,t.Pipeline,t.ScaleMode,t.ScrollFactor,t.Size,t.Tint,t.Transform,t.Visible,a],initialize:function(r,t,a,h,d){if(void 0===h&&(h=32),void 0===d&&(d=32),s.call(this,r,"RenderTexture"),this.initMatrixStack(),this.renderer=r.sys.game.renderer,this.globalTint=16777215,this.globalAlpha=1,this.renderer.type===i.WEBGL){var u=this.renderer.gl;this.gl=u,this.fill=n.fill,this.clear=n.clear,this.draw=n.draw,this.drawFrame=n.drawFrame,this.texture=this.renderer.createTexture2D(0,u.NEAREST,u.NEAREST,u.CLAMP_TO_EDGE,u.CLAMP_TO_EDGE,u.RGBA,null,h,d,!1),this.framebuffer=this.renderer.createFramebuffer(h,d,this.texture,!1)}else this.renderer.type===i.CANVAS&&(this.fill=l.fill,this.clear=l.clear,this.draw=l.draw,this.drawFrame=l.drawFrame,this.canvas=e.create2D(null,h,d),this.context=this.canvas.getContext("2d"));this.setPosition(t,a),this.setSize(h,d),this.initPipeline("TextureTintPipeline")},destroy:function(){s.destroy.call(this),this.renderer.type===i.WEBGL&&(this.renderer.deleteTexture(this.texture),this.renderer.deleteFramebuffer(this.framebuffer))},setGlobalTint:function(e){return this.globalTint=e,this},setGlobalAlpha:function(e){return this.globalAlpha=e,this}});module.exports=h;
},{"../../display/canvas/CanvasPool":33,"../../utils/Class":8,"../components":509,"../../const":12,"../GameObject":208,"./RenderTextureRender":406,"./RenderTextureCanvas":405,"./RenderTextureWebGL":407}],417:[function(require,module,exports) {
var e=function(e,t,n){var i=e.canvas,a=e.context,s=e.style,h=[],r=0,l=n.length;s.maxLines>0&&s.maxLines<n.length&&(l=s.maxLines),s.syncFont(i,a);for(var o=0;o<l;o++){var c=s.strokeThickness;c+=a.measureText(n[o]).width,s.wordWrap&&(c-=a.measureText(" ").width),h[o]=Math.ceil(c),r=Math.max(r,h[o])}var g=t.fontSize+s.strokeThickness,x=g*l,m=e._lineSpacing||0;return m<0&&Math.abs(m)>g&&(m=-g),0!==m&&(x+=m>0?m*n.length:m*(n.length-1)),{width:r,height:x,lines:l,lineWidths:h,lineSpacing:m,lineHeight:g}};module.exports=e;
},{}],546:[function(require,module,exports) {
var e=require("../../GameObject"),a=function(a,t,r,i){e.RENDER_MASK!==t.renderFlags||t.cameraFilter>0&&t.cameraFilter&i._id||""===t.text||(t.dirty&&(t.canvasTexture=a.canvasToTexture(t.canvas,t.canvasTexture,!0,t.scaleMode),t.dirty=!1),this.pipeline.batchText(this,i))};module.exports=a;
},{"../../GameObject":208}],548:[function(require,module,exports) {
var e=require("../../GameObject"),a=function(a,l,r,t){if(!(e.RENDER_MASK!==l.renderFlags||l.cameraFilter>0&&l.cameraFilter&t._id||""===l.text)){var o=a.currentContext;a.currentBlendMode!==l.blendMode&&(a.currentBlendMode=l.blendMode,o.globalCompositeOperation=a.blendModes[l.blendMode]),a.currentAlpha!==l.alpha&&(a.currentAlpha=l.alpha,o.globalAlpha=l.alpha),a.currentScaleMode!==l.scaleMode&&(a.currentScaleMode=l.scaleMode);var c=l.canvas;o.save();var i=l.x-t.scrollX*l.scrollFactorX,d=l.y-t.scrollY*l.scrollFactorY;a.config.roundPixels&&(i|=0,d|=0),o.translate(i,d),o.rotate(l.rotation),o.scale(l.scaleX,l.scaleY),o.translate(c.width*(l.flipX?1:0),c.height*(l.flipY?1:0)),o.scale(l.flipX?-1:1,l.flipY?-1:1),o.drawImage(c,0,0,c.width,c.height,-l.displayOriginX,-l.displayOriginY,c.width,c.height),o.restore()}};module.exports=a;
},{"../../GameObject":208}],421:[function(require,module,exports) {
var e=require("../../../utils/NOOP"),r=require("../../../utils/NOOP");WEBGL_RENDERER&&(e=require("./TextWebGLRenderer")),CANVAS_RENDERER&&(r=require("./TextCanvasRenderer")),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../../utils/NOOP":30,"./TextWebGLRenderer":546,"./TextCanvasRenderer":548}],499:[function(require,module,exports) {
var e=require("../../display/canvas/CanvasPool"),t=function(t){var a=e.create(this),n=a.getContext("2d");t.syncFont(a,n);var i=Math.ceil(n.measureText(t.testString).width*t.baselineX),r=i,s=2*r;r=r*t.baselineY|0,a.width=i,a.height=s,n.fillStyle="#f00",n.fillRect(0,0,i,s),n.font=t._font,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(t.testString,0,r);var f={ascent:0,descent:0,fontSize:0};if(!n.getImageData(0,0,i,s))return f.ascent=r,f.descent=r+6,f.fontSize=f.ascent+f.descent,e.remove(a),f;var l,o,c=n.getImageData(0,0,i,s).data,d=c.length,g=4*i,v=0,h=!1;for(l=0;l<r;l++){for(o=0;o<g;o+=4)if(255!==c[v+o]){h=!0;break}if(h)break;v+=g}for(f.ascent=r-l,v=d-g,h=!1,l=s;l>r;l--){for(o=0;o<g;o+=4)if(255!==c[v+o]){h=!0;break}if(h)break;v-=g}return f.descent=l-r,f.fontSize=f.ascent+f.descent,e.remove(a),f};module.exports=t;
},{"../../display/canvas/CanvasPool":33}],418:[function(require,module,exports) {
var t=require("../../utils/Class"),i=require("../../utils/object/GetAdvancedValue"),s=require("../../utils/object/GetValue"),e=require("./MeasureText"),o={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],rtl:["rtl",!1],testString:["testString","|MÃ‰qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},n=new t({initialize:function(t,i){this.parent=t,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.rtl,this.testString,this.baselineX,this.baselineY,this._font,this.setStyle(i,!1);var o=s(i,"metrics",!1);this.metrics=o?{ascent:s(o,"ascent",0),descent:s(o,"descent",0),fontSize:s(o,"fontSize",0)}:e(this)},setStyle:function(t,e){for(var n in void 0===e&&(e=!0),t&&t.hasOwnProperty("fontSize")&&"number"==typeof t.fontSize&&(t.fontSize=t.fontSize.toString()+"px"),o)this[n]="wordWrapCallback"===n||"wordWrapCallbackScope"===n?s(t,o[n][0],o[n][1]):i(t,o[n][0],o[n][1]);var r=s(t,"font",null);this._font=null===r?[this.fontStyle,this.fontSize,this.fontFamily].join(" "):r;var h=s(t,"fill",null);return null!==h&&(this.color=h),e?this.update(!0):this.parent},syncFont:function(t,i){i.font=this._font},syncStyle:function(t,i){i.textBaseline="alphabetic",i.fillStyle=this.color,i.strokeStyle=this.stroke,i.lineWidth=this.strokeThickness,i.lineCap="round",i.lineJoin="round"},syncShadow:function(t,i){i?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)},update:function(t){return t&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" "),this.metrics=e(this)),this.parent.updateText()},setFont:function(t){return"string"==typeof t?(this.fontFamily=t,this.fontSize="",this.fontStyle=""):(this.fontFamily=s(t,"fontFamily","Courier"),this.fontSize=s(t,"fontSize","16px"),this.fontStyle=s(t,"fontStyle","")),this.update(!0)},setFontFamily:function(t){return this.fontFamily=t,this.update(!0)},setFontStyle:function(t){return this.fontStyle=t,this.update(!0)},setFontSize:function(t){return"number"==typeof t&&(t=t.toString()+"px"),this.fontSize=t,this.update(!0)},setTestString:function(t){return this.testString=t,this.update(!0)},setFixedSize:function(t,i){return this.fixedWidth=t,this.fixedHeight=i,t&&(this.parent.width=t),i&&(this.parent.height=i),this.update(!1)},setBackgroundColor:function(t){return this.backgroundColor=t,this.update(!1)},setFill:function(t){return this.color=t,this.update(!1)},setColor:function(t){return this.color=t,this.update(!1)},setStroke:function(t,i){return void 0===t?this.strokeThickness=0:(void 0===i&&(i=this.strokeThickness),this.stroke=t,this.strokeThickness=i),this.update(!0)},setShadow:function(t,i,s,e,o,n){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s="#000"),void 0===e&&(e=0),void 0===o&&(o=!1),void 0===n&&(n=!0),this.shadowOffsetX=t,this.shadowOffsetY=i,this.shadowColor=s,this.shadowBlur=e,this.shadowStroke=o,this.shadowFill=n,this.update(!1)},setShadowOffset:function(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.shadowOffsetX=t,this.shadowOffsetY=i,this.update(!1)},setShadowColor:function(t){return void 0===t&&(t="#000"),this.shadowColor=t,this.update(!1)},setShadowBlur:function(t){return void 0===t&&(t=0),this.shadowBlur=t,this.update(!1)},setShadowStroke:function(t){return this.shadowStroke=t,this.update(!1)},setShadowFill:function(t){return this.shadowFill=t,this.update(!1)},setWordWrapWidth:function(t,i){return void 0===i&&(i=!1),this.wordWrapWidth=t,this.wordWrapUseAdvanced=i,this.update(!1)},setWordWrapCallback:function(t,i){return void 0===i&&(i=null),this.wordWrapCallback=t,this.wordWrapCallbackScope=i,this.update(!1)},setAlign:function(t){return void 0===t&&(t="left"),this.align=t,this.update(!1)},setMaxLines:function(t){return void 0===t&&(t=0),this.maxLines=t,this.update(!1)},getTextMetrics:function(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}},toJSON:function(){var t={};for(var i in o)t[i]=this[i];return t.metrics=this.getTextMetrics(),t},destroy:function(){this.parent=void 0}});module.exports=n;
},{"../../utils/Class":8,"../../utils/object/GetAdvancedValue":375,"../../utils/object/GetValue":53,"./MeasureText":499}],332:[function(require,module,exports) {
var t=require("../../../dom/AddToDOM"),e=require("../../../display/canvas/CanvasPool"),i=require("../../../utils/Class"),s=require("../../components"),n=require("../../../const"),r=require("../../GameObject"),o=require("../GetTextSize"),a=require("../../../utils/object/GetValue"),h=require("../../../dom/RemoveFromDOM"),l=require("./TextRender"),d=require("../TextStyle"),u=new i({Extends:r,Mixins:[s.Alpha,s.BlendMode,s.ComputedSize,s.Depth,s.Flip,s.GetBounds,s.Origin,s.Pipeline,s.ScaleMode,s.ScrollFactor,s.Tint,s.Transform,s.Visible,l],initialize:function(t,i,s,o,a){void 0===i&&(i=0),void 0===s&&(s=0),r.call(this,t,"Text"),this.setPosition(i,s),this.setOrigin(0,0),this.initPipeline("TextureTintPipeline"),this.canvas=e.create(this),this.context=this.canvas.getContext("2d"),this.style=new d(this,a),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this.text="",this.resolution=1,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.canvasTexture=null,this.dirty=!1,this.initRTL(),a&&a.padding&&this.setPadding(a.padding),a&&a.lineSpacing&&(this._lineSpacing=a.lineSpacing),this.setText(o),t.sys.game.config.renderType===n.WEBGL&&t.sys.game.renderer.onContextRestored(function(){this.canvasTexture=null,this.dirty=!0},this)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",t(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(t){var e=this.style;if(e.wordWrapCallback){var i=e.wordWrapCallback.call(e.wordWrapCallbackScope,t,this);return Array.isArray(i)&&(i=i.join("\n")),i}return e.wordWrapWidth?e.wordWrapUseAdvanced?this.advancedWordWrap(t,this.context,this.style.wordWrapWidth):this.basicWordWrap(t,this.context,this.style.wordWrapWidth):t},advancedWordWrap:function(t,e,i){for(var s="",n=t.replace(/ +/gi," ").split(this.splitRegExp),r=n.length,o=0;o<r;o++){var a=n[o],h="";if(a=a.replace(/^ *|\s*$/gi,""),e.measureText(a).width<i)s+=a+"\n";else{for(var l=i,d=a.split(" "),u=0;u<d.length;u++){var c=d[u],p=c+" ",g=e.measureText(p).width;if(g>l){if(0===u){for(var y=p;y.length&&(y=y.slice(0,-1),!((g=e.measureText(y).width)<=l)););if(!y.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var f=c.substr(y.length);d[u]=f,h+=y}var x=d[u].length?u:u+1,v=d.slice(x).join(" ").replace(/[ \n]*$/gi,"");n[o+1]=v+" "+(n[o+1]||""),r=n.length;break}h+=p,l-=g}s+=h.replace(/[ \n]*$/gi,"")+"\n"}}return s=s.replace(/[\s|\n]*$/gi,"")},basicWordWrap:function(t,e,i){for(var s="",n=t.split(this.splitRegExp),r=0;r<n.length;r++){for(var o=i,a=n[r].split(" "),h=0;h<a.length;h++){var l=e.measureText(a[h]).width,d=l+e.measureText(" ").width;d>o?(h>0&&(s+="\n"),s+=a[h]+" ",o=i-l):(o-=d,s+=a[h]+" ")}r<n.length-1&&(s+="\n")}return s},getWrappedText:function(t){return void 0===t&&(t=this.text),this.style.syncFont(this.canvas,this.context),this.runWordWrap(t).split(this.splitRegExp)},setText:function(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this.text&&(this.text=t.toString(),this.updateText()),this},setStyle:function(t){return this.style.setStyle(t)},setFont:function(t){return this.style.setFont(t)},setFontFamily:function(t){return this.style.setFontFamily(t)},setFontSize:function(t){return this.style.setFontSize(t)},setFontStyle:function(t){return this.style.setFontStyle(t)},setFixedSize:function(t,e){return this.style.setFixedSize(t,e)},setBackgroundColor:function(t){return this.style.setBackgroundColor(t)},setFill:function(t){return this.style.setFill(t)},setColor:function(t){return this.style.setColor(t)},setStroke:function(t,e){return this.style.setStroke(t,e)},setShadow:function(t,e,i,s,n,r){return this.style.setShadow(t,e,i,s,n,r)},setShadowOffset:function(t,e){return this.style.setShadowOffset(t,e)},setShadowColor:function(t){return this.style.setShadowColor(t)},setShadowBlur:function(t){return this.style.setShadowBlur(t)},setShadowStroke:function(t){return this.style.setShadowStroke(t)},setShadowFill:function(t){return this.style.setShadowFill(t)},setWordWrapWidth:function(t,e){return this.style.setWordWrapWidth(t,e)},setWordWrapCallback:function(t,e){return this.style.setWordWrapCallback(t,e)},setAlign:function(t){return this.style.setAlign(t)},setPadding:function(t,e,i,s){if("object"==typeof t){var n=t,r=a(n,"x",null);null!==r?(t=r,i=r):(t=a(n,"left",0),i=a(n,"right",t));var o=a(n,"y",null);null!==o?(e=o,s=o):(e=a(n,"top",0),s=a(n,"bottom",e))}else void 0===t&&(t=0),void 0===e&&(e=t),void 0===i&&(i=t),void 0===s&&(s=e);return this.padding.left=t,this.padding.top=e,this.padding.right=i,this.padding.bottom=s,this.updateText()},setMaxLines:function(t){return this.style.setMaxLines(t)},updateText:function(){var t=this.canvas,e=this.context,i=this.style,s=this.resolution,n=i.metrics;i.syncFont(t,e);var r=this.text;(i.wordWrapWidth||i.wordWrapCallback)&&(r=this.runWordWrap(this.text));var a,h,l=r.split(this.splitRegExp),d=o(this,n,l),u=this.padding,c=d.width+u.left+u.right,p=d.height+u.top+u.bottom;0===i.fixedWidth&&(this.width=c),0===i.fixedHeight&&(this.height=p),this.updateDisplayOrigin(),c*=s,p*=s,c=Math.max(c,1),p=Math.max(p,1),t.width!==c||t.height!==p?(t.width=c,t.height=p,i.syncFont(t,e)):e.clearRect(0,0,c,p),e.save(),i.backgroundColor&&(e.fillStyle=i.backgroundColor,e.fillRect(0,0,c,p)),i.syncStyle(t,e),e.textBaseline="alphabetic",e.translate(u.left,u.top);for(var g=0;g<d.lines;g++)a=i.strokeThickness/2,h=i.strokeThickness/2+g*d.lineHeight+n.ascent,g>0&&(h+=d.lineSpacing*g),i.rtl?a=c-a:"right"===i.align?a+=d.width-d.lineWidths[g]:"center"===i.align&&(a+=(d.width-d.lineWidths[g])/2),this.autoRound&&(a=Math.round(a),h=Math.round(h)),i.strokeThickness&&(this.style.syncShadow(e,i.shadowStroke),e.strokeText(l[g],a,h)),i.color&&(this.style.syncShadow(e,i.shadowFill),e.fillText(l[g],a,h));return e.restore(),this.dirty=!0,this},getTextMetrics:function(){return this.style.getTextMetrics()},toJSON:function(){var t=s.ToJSON(this),e={autoRound:this.autoRound,text:this.text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=e,t},preDestroy:function(){this.style.rtl&&h(this.canvas),e.remove(this.canvas)}});module.exports=u;
},{"../../../dom/AddToDOM":17,"../../../display/canvas/CanvasPool":33,"../../../utils/Class":8,"../../components":509,"../../../const":12,"../../GameObject":208,"../GetTextSize":417,"../../../utils/object/GetValue":53,"../../../dom/RemoveFromDOM":203,"./TextRender":421,"../TextStyle":418}],409:[function(require,module,exports) {
var r=function(r){var t=Math.log(r)/.6931471805599453;return 1<<Math.ceil(t)};module.exports=r;
},{}],480:[function(require,module,exports) {
var e=require("../GameObject"),i=function(i,r,t,a){e.RENDER_MASK!==r.renderFlags||r.cameraFilter>0&&r.cameraFilter&a._id||(r.updateTileTexture(),this.pipeline.batchTileSprite(this,a))};module.exports=i;
},{"../GameObject":208}],481:[function(require,module,exports) {
var e=require("../GameObject"),t=function(t,i,l,r){if(!(e.RENDER_MASK!==i.renderFlags||i.cameraFilter>0&&i.cameraFilter&r._id)){var a=t.currentContext,o=i.frame;i.updateTileTexture(),t.currentBlendMode!==i.blendMode&&(t.currentBlendMode=i.blendMode,a.globalCompositeOperation=t.blendModes[i.blendMode]),t.currentAlpha!==i.alpha&&(t.currentAlpha=i.alpha,a.globalAlpha=i.alpha),t.currentScaleMode!==i.scaleMode&&(t.currentScaleMode=i.scaleMode);var n=o.x-i.originX*i.width,s=o.y-i.originY*i.height,c=i.x-r.scrollX*i.scrollFactorX,h=i.y-r.scrollY*i.scrollFactorY,d=1,g=1;i.flipX&&(d=-1,n+=i.width),i.flipY&&(g=-1,s+=i.height),t.config.roundPixels&&(n|=0,s|=0,c|=0,h|=0),a.save(),a.translate(n,s),a.translate(c,h),a.scale(d,g),a.translate(i.originX*i.width,i.originY*i.height),a.rotate(d*g*i.rotation),a.scale(this.scaleX,this.scaleY),a.translate(-i.originX*i.width,-i.originY*i.height),a.translate(-this.tilePositionX,-this.tilePositionY),a.fillStyle=i.canvasPattern,a.fillRect(this.tilePositionX,this.tilePositionY,i.width,i.height),a.restore()}};module.exports=t;
},{"../GameObject":208}],410:[function(require,module,exports) {
var e=require("../../utils/NOOP"),r=require("../../utils/NOOP");WEBGL_RENDERER&&(e=require("./TileSpriteWebGLRenderer")),CANVAS_RENDERER&&(r=require("./TileSpriteCanvasRenderer")),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../utils/NOOP":30,"./TileSpriteWebGLRenderer":480,"./TileSpriteCanvasRenderer":481}],290:[function(require,module,exports) {
var t=require("../../display/canvas/CanvasPool"),e=require("../../utils/Class"),i=require("../components"),s=require("../../const"),r=require("../GameObject"),h=require("../../math/pow2/GetPowerOfTwo"),a=require("./TileSpriteRender"),n=new e({Extends:r,Mixins:[i.Alpha,i.BlendMode,i.Depth,i.Flip,i.GetBounds,i.Origin,i.Pipeline,i.ScaleMode,i.ScrollFactor,i.Size,i.Texture,i.Tint,i.Transform,i.Visible,a],initialize:function(e,i,a,n,u,l,f){var o=e.sys.game.renderer;r.call(this,e,"TileSprite"),this.tilePositionX=0,this.tilePositionY=0,this.dirty=!0,this.tileTexture=null,this.renderer=o,this.setTexture(l,f),this.setPosition(i,a),this.setSize(n,u),this.setOriginFromFrame(),this.initPipeline("TextureTintPipeline"),this.potWidth=h(this.frame.width),this.potHeight=h(this.frame.height),this.canvasPattern=null,this.canvasBuffer=t.create2D(null,this.potWidth,this.potHeight),this.canvasBufferCtx=this.canvasBuffer.getContext("2d"),this.oldFrame=null,this.updateTileTexture(),e.sys.game.config.renderType===s.WEBGL&&e.sys.game.renderer.onContextRestored(function(t){var e=t.gl;this.tileTexture=null,this.dirty=!0,this.tileTexture=t.createTexture2D(0,e.LINEAR,e.LINEAR,e.REPEAT,e.REPEAT,e.RGBA,this.canvasBuffer,this.potWidth,this.potHeight)},this)},setTilePosition:function(t,e){return void 0!==t&&(this.tilePositionX=t),void 0!==e&&(this.tilePositionY=e),this},updateTileTexture:function(){(this.dirty||this.oldFrame!==this.frame)&&(this.oldFrame=this.frame,this.canvasBufferCtx.clearRect(0,0,this.canvasBuffer.width,this.canvasBuffer.height),this.renderer.gl?(this.canvasBufferCtx.drawImage(this.frame.source.image,this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight,0,0,this.potWidth,this.potHeight),this.tileTexture=this.renderer.canvasToTexture(this.canvasBuffer,this.tileTexture,null===this.tileTexture,this.scaleMode)):(this.canvasBuffer.width=this.frame.cutWidth,this.canvasBuffer.height=this.frame.cutHeight,this.canvasBufferCtx.drawImage(this.frame.source.image,this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight,0,0,this.frame.cutWidth,this.frame.cutHeight),this.canvasPattern=this.canvasBufferCtx.createPattern(this.canvasBuffer,"repeat")),this.dirty=!1)},destroy:function(){this.renderer&&this.renderer.deleteTexture(this.tileTexture),t.remove(this.canvasBuffer),this.canvasPattern=null,this.canvasBufferCtx=null,this.canvasBuffer=null,this.renderer=null,this.visible=!1}});module.exports=n;
},{"../../display/canvas/CanvasPool":33,"../../utils/Class":8,"../components":509,"../../const":12,"../GameObject":208,"../../math/pow2/GetPowerOfTwo":409,"./TileSpriteRender":410}],292:[function(require,module,exports) {
var e=require("./Blitter"),r=require("../GameObjectFactory");r.register("blitter",function(r,t,i,s){return this.displayList.add(new e(this.scene,r,t,i,s))});
},{"./Blitter":282,"../GameObjectFactory":210}],333:[function(require,module,exports) {
var e=require("./DynamicBitmapText"),i=require("../../GameObjectFactory");i.register("dynamicBitmapText",function(i,t,r,a,n){return this.displayList.add(new e(this.scene,i,t,r,a,n))});
},{"./DynamicBitmapText":331,"../../GameObjectFactory":210}],293:[function(require,module,exports) {
var e=require("./Graphics"),r=require("../GameObjectFactory");r.register("graphics",function(r){return this.displayList.add(new e(this.scene,r))});
},{"./Graphics":211,"../GameObjectFactory":210}],294:[function(require,module,exports) {
var e=require("./Group"),r=require("../GameObjectFactory");r.register("group",function(r,t){return"object"==typeof r&&void 0===t&&(t=r,r=[]),this.updateList.add(new e(this.scene,r,t))});
},{"./Group":283,"../GameObjectFactory":210}],295:[function(require,module,exports) {
var e=require("./Image"),r=require("../GameObjectFactory");r.register("image",function(r,i,t,a){return this.displayList.add(new e(this.scene,r,i,t,a))});
},{"./Image":284,"../GameObjectFactory":210}],296:[function(require,module,exports) {
var e=require("../GameObjectFactory"),r=require("./ParticleEmitterManager");e.register("particles",function(e,t,i){var a=new r(this.scene,e,t,i);return this.displayList.add(a),this.updateList.add(a),a});
},{"../GameObjectFactory":210,"./ParticleEmitterManager":285}],297:[function(require,module,exports) {
var e=require("../GameObjectFactory"),r=require("./PathFollower");e.register("follower",function(e,t,i,a,s){var d=new r(this.scene,e,t,i,a,s);return this.displayList.add(d),this.updateList.add(d),d});
},{"../GameObjectFactory":210,"./PathFollower":286}],298:[function(require,module,exports) {
var e=require("../GameObjectFactory"),r=require("./RenderTexture");e.register("renderTexture",function(e,t,i,n){return this.displayList.add(new r(this.scene,e,t,i,n))});
},{"../GameObjectFactory":210,"./RenderTexture":287}],299:[function(require,module,exports) {
var e=require("./Sprite3D"),t=require("../GameObjectFactory");t.register("sprite3D",function(t,r,i,a,s){var c=new e(this.scene,t,r,i,a,s);return this.displayList.add(c.gameObject),this.updateList.add(c.gameObject),c});
},{"./Sprite3D":288,"../GameObjectFactory":210}],300:[function(require,module,exports) {
var e=require("../GameObjectFactory"),r=require("./Sprite");e.register("sprite",function(e,t,i,s){var a=new r(this.scene,e,t,i,s);return this.displayList.add(a),this.updateList.add(a),a});
},{"../GameObjectFactory":210,"./Sprite":289}],334:[function(require,module,exports) {
var e=require("./BitmapText"),t=require("../../GameObjectFactory");t.register("bitmapText",function(t,i,r,a,s){return this.displayList.add(new e(this.scene,t,i,r,a,s))});
},{"./BitmapText":330,"../../GameObjectFactory":210}],335:[function(require,module,exports) {
var e=require("./Text"),t=require("../../GameObjectFactory");t.register("text",function(t,r,i,s){return this.displayList.add(new e(this.scene,t,r,i,s))});
},{"./Text":332,"../../GameObjectFactory":210}],301:[function(require,module,exports) {
var e=require("./TileSprite"),i=require("../GameObjectFactory");i.register("tileSprite",function(i,r,t,s,a,n){return this.displayList.add(new e(this.scene,i,r,t,s,a,n))});
},{"./TileSprite":290,"../GameObjectFactory":210}],302:[function(require,module,exports) {
var e=require("./Zone"),r=require("../GameObjectFactory");r.register("zone",function(r,i,t,n){return this.displayList.add(new e(this.scene,r,i,t,n))});
},{"./Zone":291,"../GameObjectFactory":210}],303:[function(require,module,exports) {
var e=require("./Blitter"),r=require("../BuildGameObject"),t=require("../GameObjectCreator"),i=require("../../utils/object/GetAdvancedValue");t.register("blitter",function(t){var u=i(t,"key",null),l=i(t,"frame",null),n=new e(this.scene,0,0,u,l);return r(this.scene,n,t),n});
},{"./Blitter":282,"../BuildGameObject":209,"../GameObjectCreator":205,"../../utils/object/GetAdvancedValue":375}],336:[function(require,module,exports) {
var e=require("./DynamicBitmapText"),t=require("../../BuildGameObject"),i=require("../../GameObjectCreator"),r=require("../../../utils/object/GetAdvancedValue");i.register("dynamicBitmapText",function(i){var a=r(i,"font",""),n=r(i,"text",""),c=r(i,"size",!1),u=r(i,"align","left"),s=new e(this.scene,0,0,a,n,c,u);return t(this.scene,s,i),s});
},{"./DynamicBitmapText":331,"../../BuildGameObject":209,"../../GameObjectCreator":205,"../../../utils/object/GetAdvancedValue":375}],304:[function(require,module,exports) {
var e=require("../GameObjectCreator"),r=require("./Graphics");e.register("graphics",function(e){return new r(this.scene,e)});
},{"../GameObjectCreator":205,"./Graphics":211}],305:[function(require,module,exports) {
var e=require("../GameObjectCreator"),r=require("./Group");e.register("group",function(e){return new r(this.scene,null,e)});
},{"../GameObjectCreator":205,"./Group":283}],306:[function(require,module,exports) {
var e=require("../BuildGameObject"),r=require("../GameObjectCreator"),i=require("../../utils/object/GetAdvancedValue"),t=require("./Image");r.register("image",function(r){var u=i(r,"key",null),a=i(r,"frame",null),n=new t(this.scene,0,0,u,a);return e(this.scene,n,r),n});
},{"../BuildGameObject":209,"../GameObjectCreator":205,"../../utils/object/GetAdvancedValue":375,"./Image":284}],307:[function(require,module,exports) {
var e=require("../GameObjectCreator"),t=require("../../utils/object/GetAdvancedValue"),r=require("../../utils/object/GetFastValue"),a=require("./ParticleEmitterManager");e.register("particles",function(e){var i=t(e,"key",null),u=t(e,"frame",null),l=r(e,"emitters",null),s=new a(this.scene,i,u,l);return r(e,"add",!1)&&this.displayList.add(s),this.updateList.add(s),s});
},{"../GameObjectCreator":205,"../../utils/object/GetAdvancedValue":375,"../../utils/object/GetFastValue":102,"./ParticleEmitterManager":285}],308:[function(require,module,exports) {
var e=require("../BuildGameObject"),r=require("../GameObjectCreator"),t=require("../../utils/object/GetAdvancedValue"),i=require("./RenderTexture");r.register("renderTexture",function(r){var u=t(r,"x",0),n=t(r,"y",0),a=t(r,"width",32),c=t(r,"height",32),d=new i(this.scene,u,n,a,c);return e(this.scene,d,r),d});
},{"../BuildGameObject":209,"../GameObjectCreator":205,"../../utils/object/GetAdvancedValue":375,"./RenderTexture":287}],309:[function(require,module,exports) {
var e=require("../BuildGameObject"),r=require("../BuildGameObjectAnimation"),i=require("../GameObjectCreator"),t=require("../../utils/object/GetAdvancedValue"),u=require("./Sprite3D");i.register("sprite3D",function(i){var n=t(i,"key",null),a=t(i,"frame",null),c=new u(this.scene,0,0,n,a);return e(this.scene,c,i),r(c,i),c});
},{"../BuildGameObject":209,"../BuildGameObjectAnimation":207,"../GameObjectCreator":205,"../../utils/object/GetAdvancedValue":375,"./Sprite3D":288}],310:[function(require,module,exports) {
var e=require("../BuildGameObject"),r=require("../BuildGameObjectAnimation"),i=require("../GameObjectCreator"),t=require("../../utils/object/GetAdvancedValue"),u=require("./Sprite");i.register("sprite",function(i){var n=t(i,"key",null),a=t(i,"frame",null),c=new u(this.scene,0,0,n,a);return e(this.scene,c,i),r(c,i),c});
},{"../BuildGameObject":209,"../BuildGameObjectAnimation":207,"../GameObjectCreator":205,"../../utils/object/GetAdvancedValue":375,"./Sprite":289}],337:[function(require,module,exports) {
var e=require("./BitmapText"),t=require("../../BuildGameObject"),r=require("../../GameObjectCreator"),i=require("../../../utils/object/GetAdvancedValue"),u=require("../../../utils/object/GetValue");r.register("bitmapText",function(r){var a=u(r,"font",""),c=i(r,"text",""),n=i(r,"size",!1),s=new e(this.scene,0,0,a,c,n);return t(this.scene,s,r),s});
},{"./BitmapText":330,"../../BuildGameObject":209,"../../GameObjectCreator":205,"../../../utils/object/GetAdvancedValue":375,"../../../utils/object/GetValue":53}],338:[function(require,module,exports) {
var e=require("../../BuildGameObject"),t=require("../../GameObjectCreator"),r=require("../../../utils/object/GetAdvancedValue"),u=require("./Text");t.register("text",function(t){var n=r(t,"text",""),i=r(t,"style",null),a=r(t,"padding",null);null!==a&&(i.padding=a);var l=new u(this.scene,0,0,n,i);return e(this.scene,l,t),l.autoRound=r(t,"autoRound",!0),l.resolution=r(t,"resolution",1),l});
},{"../../BuildGameObject":209,"../../GameObjectCreator":205,"../../../utils/object/GetAdvancedValue":375,"./Text":332}],311:[function(require,module,exports) {
var e=require("../BuildGameObject"),r=require("../GameObjectCreator"),i=require("../../utils/object/GetAdvancedValue"),t=require("./TileSprite");r.register("tileSprite",function(r){var u=i(r,"x",0),a=i(r,"y",0),c=i(r,"width",512),n=i(r,"height",512),s=i(r,"key",""),h=i(r,"frame",""),l=new t(this.scene,u,a,c,n,s,h);return e(this.scene,l,r),l});
},{"../BuildGameObject":209,"../GameObjectCreator":205,"../../utils/object/GetAdvancedValue":375,"./TileSprite":290}],312:[function(require,module,exports) {
var e=require("../GameObjectCreator"),r=require("../../utils/object/GetAdvancedValue"),t=require("./Zone");e.register("zone",function(e){var i=r(e,"x",0),n=r(e,"y",0),u=r(e,"width",1),a=r(e,"height",u);return new t(this.scene,i,n,u,a)});
},{"../GameObjectCreator":205,"../../utils/object/GetAdvancedValue":375,"./Zone":291}],478:[function(require,module,exports) {
var e=require("../GameObject"),r=function(r,a,i,t){e.RENDER_MASK!==a.renderFlags||a.cameraFilter>0&&a.cameraFilter&t._id||this.pipeline.batchMesh(a,t)};module.exports=r;
},{"../GameObject":208}],411:[function(require,module,exports) {
var e=require("../../utils/NOOP"),r=require("../../utils/NOOP");WEBGL_RENDERER&&(e=require("./MeshWebGLRenderer")),CANVAS_RENDERER&&(r=require("./MeshCanvasRenderer")),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../utils/NOOP":30,"./MeshWebGLRenderer":478,"./MeshCanvasRenderer":30}],313:[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../components"),r=require("../GameObject"),i=require("./MeshRender"),n=new e({Extends:r,Mixins:[t.Alpha,t.BlendMode,t.Depth,t.Flip,t.GetBounds,t.Origin,t.Pipeline,t.ScaleMode,t.Size,t.Texture,t.Transform,t.Visible,t.ScrollFactor,i],initialize:function(e,t,i,n,s,o,h,l,a){if(r.call(this,e,"Mesh"),this.setTexture(l,a),this.setPosition(t,i),this.setSizeToFrame(),this.setOrigin(),this.initPipeline("TextureTintPipeline"),n.length!==s.length)throw new Error("Mesh Vertex count must match UV count");var u,c=n.length/2|0;if(o.length>0&&o.length<c)throw new Error("Mesh Color count must match Vertex count");if(h.length>0&&h.length<c)throw new Error("Mesh Alpha count must match Vertex count");if(0===o.length)for(u=0;u<c;++u)o[u]=16777215;if(0===h.length)for(u=0;u<c;++u)h[u]=1;this.vertices=new Float32Array(n),this.uv=new Float32Array(s),this.colors=new Uint32Array(o),this.alphas=new Float32Array(h)}});module.exports=n;
},{"../../utils/Class":8,"../components":509,"../GameObject":208,"./MeshRender":411}],314:[function(require,module,exports) {
var t=require("../../utils/Class"),i=require("../mesh/Mesh"),s=new t({Extends:i,initialize:function(t,s,e,o,h){i.call(this,t,s,e,[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,1,1,0,0,1,1,1,0],[16777215,16777215,16777215,16777215,16777215,16777215],[1,1,1,1,1,1],o,h),this.resetPosition()},topLeftX:{get:function(){return this.x+this.vertices[0]},set:function(t){this.vertices[0]=t-this.x,this.vertices[6]=t-this.x}},topLeftY:{get:function(){return this.y+this.vertices[1]},set:function(t){this.vertices[1]=t-this.y,this.vertices[7]=t-this.y}},topRightX:{get:function(){return this.x+this.vertices[10]},set:function(t){this.vertices[10]=t-this.x}},topRightY:{get:function(){return this.y+this.vertices[11]},set:function(t){this.vertices[11]=t-this.y}},bottomLeftX:{get:function(){return this.x+this.vertices[2]},set:function(t){this.vertices[2]=t-this.x}},bottomLeftY:{get:function(){return this.y+this.vertices[3]},set:function(t){this.vertices[3]=t-this.y}},bottomRightX:{get:function(){return this.x+this.vertices[4]},set:function(t){this.vertices[4]=t-this.x,this.vertices[8]=t-this.x}},bottomRightY:{get:function(){return this.y+this.vertices[5]},set:function(t){this.vertices[5]=t-this.y,this.vertices[9]=t-this.y}},topLeftAlpha:{get:function(){return this.alphas[0]},set:function(t){this.alphas[0]=t,this.alphas[3]=t}},topRightAlpha:{get:function(){return this.alphas[5]},set:function(t){this.alphas[5]=t}},bottomLeftAlpha:{get:function(){return this.alphas[1]},set:function(t){this.alphas[1]=t}},bottomRightAlpha:{get:function(){return this.alphas[2]},set:function(t){this.alphas[2]=t,this.alphas[4]=t}},topLeftColor:{get:function(){return this.colors[0]},set:function(t){this.colors[0]=t,this.colors[3]=t}},topRightColor:{get:function(){return this.colors[5]},set:function(t){this.colors[5]=t}},bottomLeftColor:{get:function(){return this.colors[1]},set:function(t){this.colors[1]=t}},bottomRightColor:{get:function(){return this.colors[2]},set:function(t){this.colors[2]=t,this.colors[4]=t}},setTopLeft:function(t,i){return this.topLeftX=t,this.topLeftY=i,this},setTopRight:function(t,i){return this.topRightX=t,this.topRightY=i,this},setBottomLeft:function(t,i){return this.bottomLeftX=t,this.bottomLeftY=i,this},setBottomRight:function(t,i){return this.bottomRightX=t,this.bottomRightY=i,this},resetPosition:function(){var t=this.x,i=this.y,s=Math.floor(this.width/2),e=Math.floor(this.height/2);return this.setTopLeft(t-s,i-e),this.setTopRight(t+s,i-e),this.setBottomLeft(t-s,i+e),this.setBottomRight(t+s,i+e),this},resetAlpha:function(){var t=this.alphas;return t[0]=1,t[1]=1,t[2]=1,t[3]=1,t[4]=1,t[5]=1,this},resetColors:function(){var t=this.colors;return t[0]=16777215,t[1]=16777215,t[2]=16777215,t[3]=16777215,t[4]=16777215,t[5]=16777215,this},reset:function(){return this.resetPosition(),this.resetAlpha(),this.resetColors()}});module.exports=s;
},{"../../utils/Class":8,"../mesh/Mesh":313}],315:[function(require,module,exports) {
var e=require("./Mesh"),r=require("../GameObjectFactory");WEBGL_RENDERER&&r.register("mesh",function(r,i,s,t,a,n,c,h){return this.displayList.add(new e(this.scene,r,i,s,t,a,n,c,h))});
},{"./Mesh":313,"../GameObjectFactory":210}],316:[function(require,module,exports) {
var e=require("./Quad"),r=require("../GameObjectFactory");WEBGL_RENDERER&&r.register("quad",function(r,i,t,a){return this.displayList.add(new e(this.scene,r,i,t,a))});
},{"./Quad":314,"../GameObjectFactory":210}],317:[function(require,module,exports) {
var e=require("../BuildGameObject"),r=require("../GameObjectCreator"),t=require("../../utils/object/GetAdvancedValue"),u=require("../../utils/object/GetValue"),i=require("./Mesh");r.register("mesh",function(r){var s=t(r,"key",null),a=t(r,"frame",null),l=u(r,"vertices",[]),c=u(r,"colors",[]),n=u(r,"alphas",[]),o=u(r,"uv",[]),h=new i(this.scene,0,0,l,o,c,n,s,a);return e(this.scene,h,r),h});
},{"../BuildGameObject":209,"../GameObjectCreator":205,"../../utils/object/GetAdvancedValue":375,"../../utils/object/GetValue":53,"./Mesh":313}],318:[function(require,module,exports) {
var e=require("../BuildGameObject"),r=require("../GameObjectCreator"),u=require("../../utils/object/GetAdvancedValue"),t=require("./Quad");r.register("quad",function(r){var a=u(r,"x",0),i=u(r,"y",0),n=u(r,"key",null),c=u(r,"frame",null),l=new t(this.scene,a,i,n,c);return e(this.scene,l,r),l});
},{"../BuildGameObject":209,"../GameObjectCreator":205,"../../utils/object/GetAdvancedValue":375,"./Quad":314}],319:[function(require,module,exports) {
var t=require("../../utils/Class"),i=require("../../renderer/webgl/Utils"),s=new t({initialize:function(t,i,s,r,h,n,o){this.x=t,this.y=i,this.radius=s,this.r=r,this.g=h,this.b=n,this.intensity=o,this.scrollFactorX=1,this.scrollFactorY=1},set:function(t,i,s,r,h,n,o){return this.x=t,this.y=i,this.radius=s,this.r=r,this.g=h,this.b=n,this.intensity=o,this.scrollFactorX=1,this.scrollFactorY=1,this},setScrollFactor:function(t,i){return void 0===t&&(t=1),void 0===i&&(i=t),this.scrollFactorX=t,this.scrollFactorY=i,this},setColor:function(t){var s=i.getFloatsFromUintRGB(t);return this.r=s[0],this.g=s[1],this.b=s[2],this},setIntensity:function(t){return this.intensity=t,this},setPosition:function(t,i){return this.x=t,this.y=i,this},setRadius:function(t){return this.radius=t,this}});module.exports=s;
},{"../../utils/Class":8,"../../renderer/webgl/Utils":116}],320:[function(require,module,exports) {
var t=require("../../utils/Class"),i=require("./Light"),h=require("../../renderer/webgl/pipelines/ForwardDiffuseLightPipeline"),s=require("../../renderer/webgl/Utils"),e=new t({initialize:function(){this.lightPool=[],this.lights=[],this.culledLights=[],this.ambientColor={r:.1,g:.1,b:.1},this.active=!1},enable:function(){return this.active=!0,this},disable:function(){return this.active=!1,this},cull:function(t){var i=this.lights,s=this.culledLights,e=i.length,r=t.x+t.width/2,l=t.y+t.height/2,o=(t.width+t.height)/2,n={x:0,y:0},g=t.matrix,u=this.systems.game.config.height;s.length=0;for(var a=0;a<e&&s.length<h.LIGHT_COUNT;++a){var c=i[a];g.transformPoint(c.x,c.y,n);var d=r-(n.x-t.scrollX*c.scrollFactorX*t.zoom),f=l-(u-(n.y-t.scrollY*c.scrollFactorY*t.zoom));Math.sqrt(d*d+f*f)<c.radius+o&&s.push(i[a])}return s},forEachLight:function(t){if(t){for(var i=this.lights,h=i.length,s=0;s<h;++s)t(i[s]);return this}},setAmbientColor:function(t){var i=s.getFloatsFromUintRGB(t);return this.ambientColor.r=i[0],this.ambientColor.g=i[1],this.ambientColor.b=i[2],this},getMaxVisibleLights:function(){return 10},getLightCount:function(){return this.lights.length},addLight:function(t,h,e,r,l){var o,n=null;return t=void 0===t?0:t,h=void 0===h?0:h,r=void 0===r?16777215:r,e=void 0===e?100:e,l=void 0===l?1:l,o=s.getFloatsFromUintRGB(r),n=null,this.lightPool.length>0?(n=this.lightPool.pop()).set(t,h,e,o[0],o[1],o[2],l):n=new i(t,h,e,o[0],o[1],o[2],l),this.lights.push(n),n},removeLight:function(t){var i=this.lights.indexOf(t);return i>=0&&(this.lightPool.push(t),this.lights.splice(i,1)),this},shutdown:function(){for(;this.lights.length>0;)this.lightPool.push(this.lights.pop());this.ambientColor={r:.1,g:.1,b:.1},this.culledLights.length=0,this.lights.length=0},destroy:function(){this.shutdown()}});module.exports=e;
},{"../../utils/Class":8,"./Light":319,"../../renderer/webgl/pipelines/ForwardDiffuseLightPipeline":129,"../../renderer/webgl/Utils":116}],321:[function(require,module,exports) {
var s=require("../../utils/Class"),t=require("./LightsManager"),i=require("../../boot/PluginManager"),e=new s({Extends:t,initialize:function(s){this.scene=s,this.systems=s.sys,s.sys.settings.isBooted||s.sys.events.once("boot",this.boot,this),t.call(this)},boot:function(){var s=this.systems.events;s.on("shutdown",this.shutdown,this),s.on("destroy",this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});i.register("LightsPlugin",e,"lights"),module.exports=e;
},{"../../utils/Class":8,"./LightsManager":320,"../../boot/PluginManager":16}],78:[function(require,module,exports) {
var e={DisplayList:require("./DisplayList"),GameObjectCreator:require("./GameObjectCreator"),GameObjectFactory:require("./GameObjectFactory"),UpdateList:require("./UpdateList"),Components:require("./components"),BuildGameObject:require("./BuildGameObject"),BuildGameObjectAnimation:require("./BuildGameObjectAnimation"),GameObject:require("./GameObject"),BitmapText:require("./bitmaptext/static/BitmapText"),Blitter:require("./blitter/Blitter"),DynamicBitmapText:require("./bitmaptext/dynamic/DynamicBitmapText"),Graphics:require("./graphics/Graphics.js"),Group:require("./group/Group"),Image:require("./image/Image"),Particles:require("./particles/ParticleEmitterManager"),PathFollower:require("./pathfollower/PathFollower"),RenderTexture:require("./rendertexture/RenderTexture"),Sprite3D:require("./sprite3d/Sprite3D"),Sprite:require("./sprite/Sprite"),Text:require("./text/static/Text"),TileSprite:require("./tilesprite/TileSprite"),Zone:require("./zone/Zone"),Factories:{Blitter:require("./blitter/BlitterFactory"),DynamicBitmapText:require("./bitmaptext/dynamic/DynamicBitmapTextFactory"),Graphics:require("./graphics/GraphicsFactory"),Group:require("./group/GroupFactory"),Image:require("./image/ImageFactory"),Particles:require("./particles/ParticleManagerFactory"),PathFollower:require("./pathfollower/PathFollowerFactory"),RenderTexture:require("./rendertexture/RenderTextureFactory"),Sprite3D:require("./sprite3d/Sprite3DFactory"),Sprite:require("./sprite/SpriteFactory"),StaticBitmapText:require("./bitmaptext/static/BitmapTextFactory"),Text:require("./text/static/TextFactory"),TileSprite:require("./tilesprite/TileSpriteFactory"),Zone:require("./zone/ZoneFactory")},Creators:{Blitter:require("./blitter/BlitterCreator"),DynamicBitmapText:require("./bitmaptext/dynamic/DynamicBitmapTextCreator"),Graphics:require("./graphics/GraphicsCreator"),Group:require("./group/GroupCreator"),Image:require("./image/ImageCreator"),Particles:require("./particles/ParticleManagerCreator"),RenderTexture:require("./rendertexture/RenderTextureCreator"),Sprite3D:require("./sprite3d/Sprite3DCreator"),Sprite:require("./sprite/SpriteCreator"),StaticBitmapText:require("./bitmaptext/static/BitmapTextCreator"),Text:require("./text/static/TextCreator"),TileSprite:require("./tilesprite/TileSpriteCreator"),Zone:require("./zone/ZoneCreator")}};WEBGL_RENDERER&&(e.Mesh=require("./mesh/Mesh"),e.Quad=require("./quad/Quad"),e.Factories.Mesh=require("./mesh/MeshFactory"),e.Factories.Quad=require("./quad/QuadFactory"),e.Creators.Mesh=require("./mesh/MeshCreator"),e.Creators.Quad=require("./quad/QuadCreator"),e.Light=require("./lights/Light"),require("./lights/LightsManager"),require("./lights/LightsPlugin")),module.exports=e;
},{"./DisplayList":204,"./GameObjectCreator":205,"./GameObjectFactory":210,"./UpdateList":206,"./components":509,"./BuildGameObject":209,"./BuildGameObjectAnimation":207,"./GameObject":208,"./bitmaptext/static/BitmapText":330,"./blitter/Blitter":282,"./bitmaptext/dynamic/DynamicBitmapText":331,"./graphics/Graphics.js":211,"./group/Group":283,"./image/Image":284,"./particles/ParticleEmitterManager":285,"./pathfollower/PathFollower":286,"./rendertexture/RenderTexture":287,"./sprite3d/Sprite3D":288,"./sprite/Sprite":289,"./text/static/Text":332,"./tilesprite/TileSprite":290,"./zone/Zone":291,"./blitter/BlitterFactory":292,"./bitmaptext/dynamic/DynamicBitmapTextFactory":333,"./graphics/GraphicsFactory":293,"./group/GroupFactory":294,"./image/ImageFactory":295,"./particles/ParticleManagerFactory":296,"./pathfollower/PathFollowerFactory":297,"./rendertexture/RenderTextureFactory":298,"./sprite3d/Sprite3DFactory":299,"./sprite/SpriteFactory":300,"./bitmaptext/static/BitmapTextFactory":334,"./text/static/TextFactory":335,"./tilesprite/TileSpriteFactory":301,"./zone/ZoneFactory":302,"./blitter/BlitterCreator":303,"./bitmaptext/dynamic/DynamicBitmapTextCreator":336,"./graphics/GraphicsCreator":304,"./group/GroupCreator":305,"./image/ImageCreator":306,"./particles/ParticleManagerCreator":307,"./rendertexture/RenderTextureCreator":308,"./sprite3d/Sprite3DCreator":309,"./sprite/SpriteCreator":310,"./bitmaptext/static/BitmapTextCreator":337,"./text/static/TextCreator":338,"./tilesprite/TileSpriteCreator":311,"./zone/ZoneCreator":312,"./mesh/Mesh":313,"./quad/Quad":314,"./mesh/MeshFactory":315,"./quad/QuadFactory":316,"./mesh/MeshCreator":317,"./quad/QuadCreator":318,"./lights/Light":319,"./lights/LightsManager":320,"./lights/LightsPlugin":321}],643:[function(require,module,exports) {
var r=function(r){return r.radius>0?Math.PI*r.radius*r.radius:0};module.exports=r;
},{}],644:[function(require,module,exports) {
var r=require("./Circle"),e=function(e){return new r(e.x,e.y,e.radius)};module.exports=e;
},{"./Circle":382}],647:[function(require,module,exports) {
var r=function(r,e){return e.setTo(r.x,r.y,r.radius)};module.exports=r;
},{}],648:[function(require,module,exports) {
var r=function(r,u){return r.x===u.x&&r.y===u.y&&r.radius===u.radius};module.exports=r;
},{}],649:[function(require,module,exports) {
var e=require("../rectangle/Rectangle"),t=function(t,r){return void 0===r&&(r=new e),r.x=t.left,r.y=t.top,r.width=t.diameter,r.height=t.diameter,r};module.exports=t;
},{"../rectangle/Rectangle":62}],511:[function(require,module,exports) {
var e=require("./Circle");e.Area=require("./Area"),e.Circumference=require("./Circumference"),e.CircumferencePoint=require("./CircumferencePoint"),e.Clone=require("./Clone"),e.Contains=require("./Contains"),e.ContainsPoint=require("./ContainsPoint"),e.ContainsRect=require("./ContainsRect"),e.CopyFrom=require("./CopyFrom"),e.Equals=require("./Equals"),e.GetBounds=require("./GetBounds"),e.GetPoint=require("./GetPoint"),e.GetPoints=require("./GetPoints"),e.Offset=require("./Offset"),e.OffsetPoint=require("./OffsetPoint"),e.Random=require("./Random"),module.exports=e;
},{"./Circle":382,"./Area":643,"./Circumference":551,"./CircumferencePoint":550,"./Clone":644,"./Contains":379,"./ContainsPoint":654,"./ContainsRect":655,"./CopyFrom":647,"./Equals":648,"./GetBounds":649,"./GetPoint":438,"./GetPoints":439,"./Offset":659,"./OffsetPoint":660,"./Random":367}],681:[function(require,module,exports) {
var e=require("../../math/distance/DistanceBetween"),r=function(r,t){return e(r.x,r.y,t.x,t.y)<=r.radius+t.radius};module.exports=r;
},{"../../math/distance/DistanceBetween":376}],682:[function(require,module,exports) {
var r=function(r,a){var i=a.width/2,t=a.height/2,u=Math.abs(r.x-a.x-i),s=Math.abs(r.y-a.y-t),d=i+r.radius,e=t+r.radius;if(u>d||s>e)return!1;if(u<=i||s<=t)return!0;var h=u-i,n=s-t;return h*h+n*n<=r.radius*r.radius};module.exports=r;
},{}],689:[function(require,module,exports) {
var t=function(t,h){return!(t.width<=0||t.height<=0||h.width<=0||h.height<=0)&&!(t.right<h.x||t.bottom<h.y||t.x>h.right||t.y>h.bottom)};module.exports=t;
},{}],686:[function(require,module,exports) {
var t=require("../rectangle/Rectangle"),e=require("./RectangleToRectangle"),a=function(a,r,i){return void 0===i&&(i=new t),e(a,r)&&(i.x=Math.max(a.x,r.x),i.y=Math.max(a.y,r.y),i.width=Math.min(a.right,r.right)-i.x,i.height=Math.min(a.bottom,r.bottom)-i.y),i};module.exports=a;
},{"../rectangle/Rectangle":62,"./RectangleToRectangle":689}],683:[function(require,module,exports) {
var r=require("../circle/Contains"),x=require("../point/Point"),y=new x,e=function(x,e,i){if(void 0===i&&(i=y),r(e,x.x1,x.y1))return i.x=x.x1,i.y=x.y1,!0;if(r(e,x.x2,x.y2))return i.x=x.x2,i.y=x.y2,!0;var n=x.x2-x.x1,t=x.y2-x.y1,o=e.x-x.x1,u=e.y-x.y1,a=n*n+t*t,f=n,v=t;if(a>0){var c=(o*n+u*t)/a;f*=c,v*=c}return i.x=x.x1+f,i.y=x.y1+v,f*f+v*v<=a&&f*n+v*t>=0&&r(e,i.x,i.y)};module.exports=e;
},{"../circle/Contains":379,"../point/Point":345}],684:[function(require,module,exports) {
var r=require("../point/Point"),e=function(e,n,i){void 0===i&&(i=new r);var o=e.x1,t=e.y1,x=e.x2,u=e.y2,y=n.x1,v=n.y1,a=n.x2,d=n.y2,f=(a-y)*(t-v)-(d-v)*(o-y),p=(x-o)*(t-v)-(u-t)*(o-y),c=(d-v)*(x-o)-(a-y)*(u-t);if(0===c)return!1;var l=f/c,m=p/c;return l>=0&&l<=1&&m>=0&&m<=1&&(i.x=o+l*(x-o),i.y=t+l*(u-t),!0)};module.exports=e;
},{"../point/Point":345}],687:[function(require,module,exports) {
var r=function(r,e){var t=r.x1,i=r.y1,f=r.x2,n=r.y2,u=e.x,o=e.y,x=e.right,l=e.bottom,s=0;if(t>=u&&t<=x&&i>=o&&i<=l||f>=u&&f<=x&&n>=o&&n<=l)return!0;if(t<u&&f>=u){if((s=i+(n-i)*(u-t)/(f-t))>o&&s<=l)return!0}else if(t>x&&f<=x&&(s=i+(n-i)*(x-t)/(f-t))>=o&&s<=l)return!0;if(i<o&&n>=o){if((s=t+(f-t)*(o-i)/(n-i))>=u&&s<=x)return!0}else if(i>l&&n<=l&&(s=t+(f-t)*(l-i)/(n-i))>=u&&s<=x)return!0;return!1};module.exports=r;
},{}],685:[function(require,module,exports) {
var x=function(x,r){return(x.x-r.x1)*(r.y2-r.y1)==(r.x2-r.x1)*(x.y-r.y1)};module.exports=x;
},{}],688:[function(require,module,exports) {
var r=require("./PointToLine"),t=function(t,x){if(!r(t,x))return!1;var a=Math.min(x.x1,x.x2),n=Math.max(x.x1,x.x2),e=Math.min(x.y1,x.y2),i=Math.max(x.y1,x.y2);return t.x>=a&&t.x<=n&&t.y>=e&&t.y<=i};module.exports=t;
},{"./PointToLine":685}],725:[function(require,module,exports) {
var x=function(x,y,o,r){void 0===o&&(o=!1),void 0===r&&(r=[]);for(var e,n,t,u,v,d,i=x.x3-x.x1,a=x.y3-x.y1,f=x.x2-x.x1,h=x.y2-x.y1,l=i*i+a*a,p=i*f+a*h,s=f*f+h*h,c=l*s-p*p,g=0===c?0:1/c,m=x.x1,b=x.y1,j=0;j<y.length&&(n=(l*(d=f*(t=y[j].x-m)+h*(u=y[j].y-b))-p*(v=i*t+a*u))*g,!((e=(s*v-p*d)*g)>=0&&n>=0&&e+n<1&&(r.push({x:y[j].x,y:y[j].y}),o)));j++);return r};module.exports=x;
},{}],743:[function(require,module,exports) {
var t=function(t,o){return void 0===o&&(o=[]),o.push({x:t.x,y:t.y}),o.push({x:t.right,y:t.y}),o.push({x:t.right,y:t.bottom}),o.push({x:t.x,y:t.bottom}),o};module.exports=t;
},{}],690:[function(require,module,exports) {
var e=require("./LineToLine"),r=require("../rectangle/Contains"),t=require("../triangle/ContainsArray"),n=require("../rectangle/Decompose"),i=function(i,o){if(o.left>i.right||o.right<i.left||o.top>i.bottom||o.bottom<i.top)return!1;var u=o.getLineA(),g=o.getLineB(),a=o.getLineC();if(r(i,u.x1,u.y1)||r(i,u.x2,u.y2))return!0;if(r(i,g.x1,g.y1)||r(i,g.x2,g.y2))return!0;if(r(i,a.x1,a.y1)||r(i,a.x2,a.y2))return!0;var f=i.getLineA(),L=i.getLineB(),l=i.getLineC(),x=i.getLineD();if(e(u,f)||e(u,L)||e(u,l)||e(u,x))return!0;if(e(g,f)||e(g,L)||e(g,l)||e(g,x))return!0;if(e(a,f)||e(a,L)||e(a,l)||e(a,x))return!0;var y=n(i);return t(o,y,!0).length>0};module.exports=i;
},{"./LineToLine":684,"../rectangle/Contains":113,"../triangle/ContainsArray":725,"../rectangle/Decompose":743}],691:[function(require,module,exports) {
var t=function(t,o,r,e,i,n){return void 0===n&&(n=0),!(o>t.right+n||r<t.left-n||e>t.bottom+n||i<t.top-n)};module.exports=t;
},{}],384:[function(require,module,exports) {
var x=function(x,r,y){var e=x.x3-x.x1,n=x.y3-x.y1,o=x.x2-x.x1,t=x.y2-x.y1,u=r-x.x1,a=y-x.y1,v=e*e+n*n,c=e*o+n*t,d=e*u+n*a,f=o*o+t*t,i=o*u+t*a,l=v*f-c*c,m=0===l?0:1/l,p=(f*d-c*i)*m,s=(v*i-c*d)*m;return p>=0&&s>=0&&p+s<1};module.exports=x;
},{}],692:[function(require,module,exports) {
var e=require("./LineToCircle"),t=require("../triangle/Contains"),i=function(i,r){return!(i.left>r.right||i.right<r.left||i.top>r.bottom||i.bottom<r.top)&&(!!t(i,r.x,r.y)||(!!e(i.getLineA(),r)||(!!e(i.getLineB(),r)||!!e(i.getLineC(),r))))};module.exports=i;
},{"./LineToCircle":683,"../triangle/Contains":384}],693:[function(require,module,exports) {
var e=require("../triangle/Contains"),n=require("./LineToLine"),i=function(i,t){return!(!e(i,t.getPointA())&&!e(i,t.getPointB()))||(!!n(i.getLineA(),t)||(!!n(i.getLineB(),t)||!!n(i.getLineC(),t)))};module.exports=i;
},{"../triangle/Contains":384,"./LineToLine":684}],728:[function(require,module,exports) {
var x=function(x,u){return void 0===u&&(u=[]),u.push({x:x.x1,y:x.y1}),u.push({x:x.x2,y:x.y2}),u.push({x:x.x3,y:x.y3}),u};module.exports=x;
},{}],694:[function(require,module,exports) {
var e=require("../triangle/ContainsArray"),t=require("../triangle/Decompose"),r=require("./LineToLine"),i=function(i,n){if(i.left>n.right||i.right<n.left||i.top>n.bottom||i.bottom<n.top)return!1;var o=i.getLineA(),g=i.getLineB(),u=i.getLineC(),L=n.getLineA(),a=n.getLineB(),f=n.getLineC();if(r(o,L)||r(o,a)||r(o,f))return!0;if(r(g,L)||r(g,a)||r(g,f))return!0;if(r(u,L)||r(u,a)||r(u,f))return!0;var l=t(i),h=e(n,l,!0);return h.length>0||(l=t(n),(h=e(i,l,!0)).length>0)};module.exports=i;
},{"../triangle/ContainsArray":725,"../triangle/Decompose":728,"./LineToLine":684}],514:[function(require,module,exports) {
module.exports={CircleToCircle:require("./CircleToCircle"),CircleToRectangle:require("./CircleToRectangle"),GetRectangleIntersection:require("./GetRectangleIntersection"),LineToCircle:require("./LineToCircle"),LineToLine:require("./LineToLine"),LineToRectangle:require("./LineToRectangle"),PointToLine:require("./PointToLine"),PointToLineSegment:require("./PointToLineSegment"),RectangleToRectangle:require("./RectangleToRectangle"),RectangleToTriangle:require("./RectangleToTriangle"),RectangleToValues:require("./RectangleToValues"),TriangleToCircle:require("./TriangleToCircle"),TriangleToLine:require("./TriangleToLine"),TriangleToTriangle:require("./TriangleToTriangle")};
},{"./CircleToCircle":681,"./CircleToRectangle":682,"./GetRectangleIntersection":686,"./LineToCircle":683,"./LineToLine":684,"./LineToRectangle":687,"./PointToLine":685,"./PointToLineSegment":688,"./RectangleToRectangle":689,"./RectangleToTriangle":690,"./RectangleToValues":691,"./TriangleToCircle":692,"./TriangleToLine":693,"./TriangleToTriangle":694}],661:[function(require,module,exports) {
var t=function(t){return Math.atan2(t.y2-t.y1,t.x2-t.x1)};module.exports=t;
},{}],662:[function(require,module,exports) {
var r=function(r,x,y){var e=x-(r.x1+r.x2)/2,n=y-(r.y1+r.y2)/2;return r.x1+=e,r.y1+=n,r.x2+=e,r.y2+=n,r};module.exports=r;
},{}],663:[function(require,module,exports) {
var e=require("./Line"),r=function(r){return new e(r.x1,r.y1,r.x2,r.y2)};module.exports=r;
},{"./Line":114}],664:[function(require,module,exports) {
var e=function(e,o){return o.setTo(e.x1,e.y1,e.x2,e.y2)};module.exports=e;
},{}],665:[function(require,module,exports) {
var x=function(x,r){return x.x1===r.x1&&x.y1===r.y1&&x.x2===r.x2&&x.y2===r.y2};module.exports=x;
},{}],666:[function(require,module,exports) {
var e=require("../point/Point"),n=function(n,o){return void 0===o&&(o=new e),o.x=(n.x1+n.x2)/2,o.y=(n.y1+n.y2)/2,o};module.exports=n;
},{"../point/Point":345}],667:[function(require,module,exports) {
var e=require("../../math/const"),r=require("./Angle"),n=require("../point/Point"),t=function(t,i){void 0===i&&(i=new n);var o=r(t)-e.TAU;return i.x=Math.cos(o),i.y=Math.sin(o),i};module.exports=t;
},{"../../math/const":40,"./Angle":661,"../point/Point":345}],668:[function(require,module,exports) {
var r=function(r){return Math.abs(r.y1-r.y2)};module.exports=r;
},{}],669:[function(require,module,exports) {
var r=require("../../math/const"),e=require("../../math/Wrap"),t=require("./Angle"),a=function(a){var u=t(a)-r.TAU;return e(u,-Math.PI,Math.PI)};module.exports=a;
},{"../../math/const":40,"../../math/Wrap":254,"./Angle":661}],670:[function(require,module,exports) {
var e=require("../../math/const"),r=require("./Angle"),t=function(t){return Math.cos(r(t)-e.TAU)};module.exports=t;
},{"../../math/const":40,"./Angle":661}],671:[function(require,module,exports) {
var e=require("../../math/const"),r=require("./Angle"),n=function(n){return Math.sin(r(n)-e.TAU)};module.exports=n;
},{"../../math/const":40,"./Angle":661}],672:[function(require,module,exports) {
var r=function(r,e,n){return r.x1+=e,r.y1+=n,r.x2+=e,r.y2+=n,r};module.exports=r;
},{}],673:[function(require,module,exports) {
var r=function(r){return-(r.x2-r.x1)/(r.y2-r.y1)};module.exports=r;
},{}],674:[function(require,module,exports) {
var e=require("./Angle"),r=require("./NormalAngle"),n=function(n,u){return 2*r(u)-Math.PI-e(n)};module.exports=n;
},{"./Angle":661,"./NormalAngle":669}],677:[function(require,module,exports) {
var r=function(r,t,x,a){var n=Math.cos(a),o=Math.sin(a),y=r.x1-t,e=r.y1-x;return r.x1=y*n-e*o+t,r.y1=y*o+e*n+x,y=r.x2-t,e=r.y2-x,r.x2=y*n-e*o+t,r.y2=y*o+e*n+x,r};module.exports=r;
},{}],675:[function(require,module,exports) {
var r=require("./RotateAroundXY"),e=function(e,o){var t=(e.x1+e.x2)/2,u=(e.y1+e.y2)/2;return r(e,t,u,o)};module.exports=e;
},{"./RotateAroundXY":677}],676:[function(require,module,exports) {
var r=require("./RotateAroundXY"),e=function(e,o,t){return r(e,o.x,o.y,t)};module.exports=e;
},{"./RotateAroundXY":677}],678:[function(require,module,exports) {
var t=function(t,n,o,r,a){return t.x1=n,t.y1=o,t.x2=n+Math.cos(r)*a,t.y2=o+Math.sin(r)*a,t};module.exports=t;
},{}],679:[function(require,module,exports) {
var r=function(r){return(r.y2-r.y1)/(r.x2-r.x1)};module.exports=r;
},{}],680:[function(require,module,exports) {
var r=function(r){return Math.abs(r.x1-r.x2)};module.exports=r;
},{}],513:[function(require,module,exports) {
var e=require("./Line");e.Angle=require("./Angle"),e.BresenhamPoints=require("./BresenhamPoints"),e.CenterOn=require("./CenterOn"),e.Clone=require("./Clone"),e.CopyFrom=require("./CopyFrom"),e.Equals=require("./Equals"),e.GetMidPoint=require("./GetMidPoint"),e.GetNormal=require("./GetNormal"),e.GetPoint=require("./GetPoint"),e.GetPoints=require("./GetPoints"),e.Height=require("./Height"),e.Length=require("./Length"),e.NormalAngle=require("./NormalAngle"),e.NormalX=require("./NormalX"),e.NormalY=require("./NormalY"),e.Offset=require("./Offset"),e.PerpSlope=require("./PerpSlope"),e.Random=require("./Random"),e.ReflectAngle=require("./ReflectAngle"),e.Rotate=require("./Rotate"),e.RotateAroundPoint=require("./RotateAroundPoint"),e.RotateAroundXY=require("./RotateAroundXY"),e.SetToAngle=require("./SetToAngle"),e.Slope=require("./Slope"),e.Width=require("./Width"),module.exports=e;
},{"./Line":114,"./Angle":661,"./BresenhamPoints":366,"./CenterOn":662,"./Clone":663,"./CopyFrom":664,"./Equals":665,"./GetMidPoint":666,"./GetNormal":667,"./GetPoint":346,"./GetPoints":342,"./Height":668,"./Length":432,"./NormalAngle":669,"./NormalX":670,"./NormalY":671,"./Offset":672,"./PerpSlope":673,"./Random":343,"./ReflectAngle":674,"./Rotate":675,"./RotateAroundPoint":676,"./RotateAroundXY":677,"./SetToAngle":678,"./Slope":679,"./Width":680}],695:[function(require,module,exports) {
var e=function(e){return e.setTo(Math.ceil(e.x),Math.ceil(e.y))};module.exports=e;
},{}],696:[function(require,module,exports) {
var e=require("./Point"),r=function(r){return new e(r.x,r.y)};module.exports=r;
},{"./Point":345}],697:[function(require,module,exports) {
var e=function(e,o){return o.setTo(e.x,e.y)};module.exports=e;
},{}],698:[function(require,module,exports) {
var r=function(r,e){return r.x===e.x&&r.y===e.y};module.exports=r;
},{}],699:[function(require,module,exports) {
var o=function(o){return o.setTo(Math.floor(o.x),Math.floor(o.y))};module.exports=o;
},{}],700:[function(require,module,exports) {
var r=require("./Point"),e=function(e,t){if(void 0===t&&(t=new r),!Array.isArray(e))throw new Error("GetCentroid points argument must be an array");var n=e.length;if(n<1)throw new Error("GetCentroid points array must not be empty");if(1===n)t.x=e[0].x,t.y=e[0].y;else{for(var o=0;o<n;o++)t.x+=e[o].x,t.y+=e[o].y;t.x/=n,t.y/=n}return t};module.exports=e;
},{"./Point":345}],701:[function(require,module,exports) {
var r=function(r){return Math.sqrt(r.x*r.x+r.y*r.y)};module.exports=r;
},{}],702:[function(require,module,exports) {
var r=function(r){return r.x*r.x+r.y*r.y};module.exports=r;
},{}],703:[function(require,module,exports) {
var I=require("../rectangle/Rectangle"),e=function(e,r){void 0===r&&(r=new I);for(var N=Number.NEGATIVE_INFINITY,t=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,T=Number.POSITIVE_INFINITY,n=0;n<e.length;n++){var x=e[n];x.x>N&&(N=x.x),x.x<t&&(t=x.x),x.y>u&&(u=x.y),x.y<T&&(T=x.y)}return r.x=t,r.y=T,r.width=N-t,r.height=u-T,r};module.exports=e;
},{"../rectangle/Rectangle":62}],704:[function(require,module,exports) {
var e=require("./Point"),o=function(o,r,i,n){return void 0===i&&(i=0),void 0===n&&(n=new e),n.x=o.x+(r.x-o.x)*i,n.y=o.y+(r.y-o.y)*i,n};module.exports=o;
},{"./Point":345}],705:[function(require,module,exports) {
var e=function(e){return e.setTo(e.y,e.x)};module.exports=e;
},{}],706:[function(require,module,exports) {
var e=require("./Point"),o=function(o,r){return void 0===r&&(r=new e),r.setTo(-o.x,-o.y)};module.exports=o;
},{"./Point":345}],707:[function(require,module,exports) {
var e=require("./Point"),r=require("./GetMagnitudeSq"),i=function(i,n,t){void 0===t&&(t=new e);var u=(i.x*n.x+i.y*n.y)/r(n);return 0!==u&&(t.x=u*n.x,t.y=u*n.y),t};module.exports=i;
},{"./Point":345,"./GetMagnitudeSq":702}],708:[function(require,module,exports) {
var r=require("./Point"),e=function(e,n,o){void 0===o&&(o=new r);var x=e.x*n.x+e.y*n.y;return 0!==x&&(o.x=x*n.x,o.y=x*n.y),o};module.exports=e;
},{"./Point":345}],709:[function(require,module,exports) {
var e=require("./GetMagnitude"),r=function(r,t){if(0!==r.x||0!==r.y){var u=e(r);r.x/=u,r.y/=u}return r.x*=t,r.y*=t,r};module.exports=r;
},{"./GetMagnitude":701}],515:[function(require,module,exports) {
var e=require("./Point");e.Ceil=require("./Ceil"),e.Clone=require("./Clone"),e.CopyFrom=require("./CopyFrom"),e.Equals=require("./Equals"),e.Floor=require("./Floor"),e.GetCentroid=require("./GetCentroid"),e.GetMagnitude=require("./GetMagnitude"),e.GetMagnitudeSq=require("./GetMagnitudeSq"),e.GetRectangleFromPoints=require("./GetRectangleFromPoints"),e.Interpolate=require("./Interpolate"),e.Invert=require("./Invert"),e.Negative=require("./Negative"),e.Project=require("./Project"),e.ProjectUnit=require("./ProjectUnit"),e.SetMagnitude=require("./SetMagnitude"),module.exports=e;
},{"./Point":345,"./Ceil":695,"./Clone":696,"./CopyFrom":697,"./Equals":698,"./Floor":699,"./GetCentroid":700,"./GetMagnitude":701,"./GetMagnitudeSq":702,"./GetRectangleFromPoints":703,"./Interpolate":704,"./Invert":705,"./Negative":706,"./Project":707,"./ProjectUnit":708,"./SetMagnitude":709}],712:[function(require,module,exports) {
var n=function(n,t,o){for(var i=!1,p=-1,r=n.points.length-1;++p<n.points.length;r=p){var s=n.points[p].x,e=n.points[p].y,a=n.points[r].x,l=n.points[r].y;(e<=o&&o<l||l<=o&&o<e)&&t<(a-s)*(o-e)/(l-e)+s&&(i=!i)}return i};module.exports=n;
},{}],711:[function(require,module,exports) {
var t=require("../../utils/Class"),i=require("./Contains"),s=new t({initialize:function(t){this.area=0,this.points=[],t&&this.setTo(t)},contains:function(t,s){return i(this,t,s)},setTo:function(t){if(this.area=0,this.points=[],!Array.isArray(t))return this;for(var i,s=Number.MAX_VALUE,r=0;r<t.length;r++)i={x:0,y:0},"number"==typeof t[r]?(i.x=t[r],i.y=t[r+1],r++):Array.isArray(void 0)?(i.x=t[r][0],i.y=t[r][1]):(i.x=t[r].x,i.y=t[r].y),this.points.push(i),i.y<s&&(s=i.y);return this.calculateArea(s),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var t,i,s=0,r=0;r<this.points.length-1;r++)t=this.points[r],s+=((i=this.points[r+1]).x-t.x)*(t.y+i.y);return t=this.points[0],i=this.points[this.points.length-1],s+=(t.x-i.x)*(i.y+t.y),this.area=.5*-s,this.area}});module.exports=s;
},{"../../utils/Class":8,"./Contains":712}],710:[function(require,module,exports) {
var e=require("./Polygon"),n=function(n){return new e(n.points)};module.exports=n;
},{"./Polygon":711}],714:[function(require,module,exports) {
var t=require("../rectangle/Rectangle"),e=function(e,n){void 0===n&&(n=new t);for(var a,i=1/0,r=1/0,h=-i,o=-r,x=0;x<e.points.length;x++)a=e.points[x],i=Math.min(i,a.x),r=Math.min(r,a.y),h=Math.max(h,a.x),o=Math.max(o,a.y);return n.x=i,n.y=r,n.width=h-i,n.height=o-r,n};module.exports=e;
},{"../rectangle/Rectangle":62}],715:[function(require,module,exports) {
var o=function(o,n){void 0===n&&(n=[]);for(var t=0;t<o.points.length;t++)n.push(o.points[t].x),n.push(o.points[t].y);return n};module.exports=o;
},{}],516:[function(require,module,exports) {
var e=require("./Polygon");e.Clone=require("./Clone"),e.Contains=require("./Contains"),e.ContainsPoint=require("./ContainsPoint"),e.GetAABB=require("./GetAABB"),e.GetNumberArray=require("./GetNumberArray"),module.exports=e;
},{"./Polygon":711,"./Clone":710,"./Contains":712,"./ContainsPoint":654,"./GetAABB":714,"./GetNumberArray":715}],736:[function(require,module,exports) {
var t=function(t){return t.width*t.height};module.exports=t;
},{}],737:[function(require,module,exports) {
var e=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e};module.exports=e;
},{}],738:[function(require,module,exports) {
var t=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t.width=Math.ceil(t.width),t.height=Math.ceil(t.height),t};module.exports=t;
},{}],739:[function(require,module,exports) {
var t=function(t,e,r){return t.x=e-t.width/2,t.y=r-t.height/2,t};module.exports=t;
},{}],740:[function(require,module,exports) {
var e=require("./Rectangle"),r=function(r){return new e(r.x,r.y,r.width,r.height)};module.exports=r;
},{"./Rectangle":62}],742:[function(require,module,exports) {
var t=function(t,o){return!(o.width*o.height>t.width*t.height)&&(o.x>t.x&&o.x<t.right&&o.right>t.x&&o.right<t.right&&o.y>t.y&&o.y<t.bottom&&o.bottom>t.y&&o.bottom<t.bottom)};module.exports=t;
},{}],750:[function(require,module,exports) {
var t=function(t){return 0===t.height?NaN:t.width/t.height};module.exports=t;
},{}],746:[function(require,module,exports) {
var e=require("./GetAspectRatio"),t=function(t,i){var h=e(t);return h<e(i)?t.setSize(i.height*h,i.height):t.setSize(i.width,i.width/h),t.setPosition(i.centerX-t.width/2,i.centerY-t.height/2)};module.exports=t;
},{"./GetAspectRatio":750}],747:[function(require,module,exports) {
var e=require("./GetAspectRatio"),t=function(t,i){var h=e(t);return h>e(i)?t.setSize(i.height*h,i.height):t.setSize(i.width,i.width/h),t.setPosition(i.centerX-t.width/2,i.centerY-t.height/2)};module.exports=t;
},{"./GetAspectRatio":750}],748:[function(require,module,exports) {
var o=function(o){return o.x=Math.floor(o.x),o.y=Math.floor(o.y),o};module.exports=o;
},{}],749:[function(require,module,exports) {
var o=function(o){return o.x=Math.floor(o.x),o.y=Math.floor(o.y),o.width=Math.floor(o.width),o.height=Math.floor(o.height),o};module.exports=o;
},{}],751:[function(require,module,exports) {
var e=require("../point/Point"),n=function(n,r){return void 0===r&&(r=new e),r.x=n.centerX,r.y=n.centerY,r};module.exports=n;
},{"../point/Point":345}],752:[function(require,module,exports) {
var e=require("../point/Point"),i=function(i,t){return void 0===t&&(t=new e),t.x=i.width,t.y=i.height,t};module.exports=i;
},{"../point/Point":345}],753:[function(require,module,exports) {
var e=require("./CenterOn"),r=function(r,t,n){var i=r.centerX,u=r.centerY;return r.setSize(r.width+2*t,r.height+2*n),e(r,i,u)};module.exports=r;
},{"./CenterOn":739}],754:[function(require,module,exports) {
var t=function(t,h){for(var a=t.x,r=t.right,x=t.y,i=t.bottom,m=0;m<h.length;m++)a=Math.min(a,h[m].x),r=Math.max(r,h[m].x),x=Math.min(x,h[m].y),i=Math.max(i,h[m].y);return t.x=a,t.y=x,t.width=r-a,t.height=i-x,t};module.exports=t;
},{}],755:[function(require,module,exports) {
var t=function(t,a){var h=Math.min(t.x,a.x),r=Math.max(t.right,a.right);t.x=h,t.width=r-h;var i=Math.min(t.y,a.y),m=Math.max(t.bottom,a.bottom);return t.y=i,t.height=m-i,t};module.exports=t;
},{}],756:[function(require,module,exports) {
var t=function(t,a,h){var r=Math.min(t.x,a),i=Math.max(t.right,a);t.x=r,t.width=i-r;var m=Math.min(t.y,h),n=Math.max(t.bottom,h);return t.y=m,t.height=n-m,t};module.exports=t;
},{}],759:[function(require,module,exports) {
var t=function(t,o){return t.x<o.right&&t.right>o.x&&t.y<o.bottom&&t.bottom>o.y};module.exports=t;
},{}],760:[function(require,module,exports) {
var t=require("../point/Point"),e=require("../../math/DegToRad"),h=function(h,i,r){void 0===r&&(r=new t),i=e(i);var a=Math.sin(i),n=Math.cos(i),o=n>0?h.width/2:h.width/-2,d=a>0?h.height/2:h.height/-2;return Math.abs(o*a)<Math.abs(d*n)?d=o*a/n:o=d*n/a,r.x=o+h.centerX,r.y=d+h.centerY,r};module.exports=h;
},{"../point/Point":345,"../../math/DegToRad":228}],761:[function(require,module,exports) {
var t=function(t,e,i){return void 0===i&&(i=e),t.width*=e,t.height*=i,t};module.exports=t;
},{}],762:[function(require,module,exports) {
var t=require("./Rectangle"),a=function(a,e,o){void 0===o&&(o=new t);var r=Math.min(a.x,e.x),i=Math.min(a.y,e.y);return o.setTo(r,i,Math.max(a.right,e.right)-r,Math.max(a.bottom,e.bottom)-i)};module.exports=a;
},{"./Rectangle":62}],517:[function(require,module,exports) {
var e=require("./Rectangle");e.Area=require("./Area"),e.Ceil=require("./Ceil"),e.CeilAll=require("./CeilAll"),e.CenterOn=require("./CenterOn"),e.Clone=require("./Clone"),e.Contains=require("./Contains"),e.ContainsPoint=require("./ContainsPoint"),e.ContainsRect=require("./ContainsRect"),e.CopyFrom=require("./CopyFrom"),e.Decompose=require("./Decompose"),e.Equals=require("./Equals"),e.FitInside=require("./FitInside"),e.FitOutside=require("./FitOutside"),e.Floor=require("./Floor"),e.FloorAll=require("./FloorAll"),e.FromPoints=require("./FromPoints"),e.GetAspectRatio=require("./GetAspectRatio"),e.GetCenter=require("./GetCenter"),e.GetPoint=require("./GetPoint"),e.GetPoints=require("./GetPoints"),e.GetSize=require("./GetSize"),e.Inflate=require("./Inflate"),e.MarchingAnts=require("./MarchingAnts"),e.MergePoints=require("./MergePoints"),e.MergeRect=require("./MergeRect"),e.MergeXY=require("./MergeXY"),e.Offset=require("./Offset"),e.OffsetPoint=require("./OffsetPoint"),e.Overlaps=require("./Overlaps"),e.Perimeter=require("./Perimeter"),e.PerimeterPoint=require("./PerimeterPoint"),e.Random=require("./Random"),e.Scale=require("./Scale"),e.Union=require("./Union"),module.exports=e;
},{"./Rectangle":62,"./Area":736,"./Ceil":737,"./CeilAll":738,"./CenterOn":739,"./Clone":740,"./Contains":113,"./ContainsPoint":654,"./ContainsRect":742,"./CopyFrom":656,"./Decompose":743,"./Equals":657,"./FitInside":746,"./FitOutside":747,"./Floor":748,"./FloorAll":749,"./FromPoints":373,"./GetAspectRatio":750,"./GetCenter":751,"./GetPoint":118,"./GetPoints":117,"./GetSize":752,"./Inflate":753,"./MarchingAnts":363,"./MergePoints":754,"./MergeRect":755,"./MergeXY":756,"./Offset":659,"./OffsetPoint":660,"./Overlaps":759,"./Perimeter":344,"./PerimeterPoint":760,"./Random":115,"./Scale":761,"./Union":762}],436:[function(require,module,exports) {
var e=require("../point/Point"),x=require("../line/Length"),y=function(y,n,r){void 0===r&&(r=new e);var i=y.getLineA(),t=y.getLineB(),o=y.getLineC();if(n<=0||n>=1)return r.x=i.x1,r.y=i.y1,r;var u=x(i),g=x(t),v=x(o),L=(u+g+v)*n,a=0;return L<u?(a=L/u,r.x=i.x1+(i.x2-i.x1)*a,r.y=i.y1+(i.y2-i.y1)*a):L>u+g?(a=(L-=u+g)/v,r.x=o.x1+(o.x2-o.x1)*a,r.y=o.y1+(o.y2-o.y1)*a):(a=(L-=u)/g,r.x=t.x1+(t.x2-t.x1)*a,r.y=t.y1+(t.y2-t.y1)*a),r};module.exports=y;
},{"../point/Point":345,"../line/Length":432}],437:[function(require,module,exports) {
var e=require("../line/Length"),x=require("../point/Point"),r=function(r,y,n,i){void 0===i&&(i=[]);var t=r.getLineA(),o=r.getLineB(),u=r.getLineC(),v=e(t),a=e(o),g=e(u),L=v+a+g;y||(y=L/n);for(var p=0;p<y;p++){var d=L*(p/y),f=0,h=new x;d<v?(f=d/v,h.x=t.x1+(t.x2-t.x1)*f,h.y=t.y1+(t.y2-t.y1)*f):d>v+a?(f=(d-=v+a)/g,h.x=u.x1+(u.x2-u.x1)*f,h.y=u.y1+(u.y2-u.y1)*f):(f=(d-=v)/a,h.x=o.x1+(o.x2-o.x1)*f,h.y=o.y1+(o.y2-o.y1)*f),i.push(h)}return i};module.exports=r;
},{"../line/Length":432,"../point/Point":345}],383:[function(require,module,exports) {
var t=require("../../utils/Class"),i=require("./Contains"),s=require("./GetPoint"),h=require("./GetPoints"),n=require("../line/Line"),e=require("./Random"),o=new t({initialize:function(t,i,s,h,n,e){void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===h&&(h=0),void 0===n&&(n=0),void 0===e&&(e=0),this.x1=t,this.y1=i,this.x2=s,this.y2=h,this.x3=n,this.y3=e},contains:function(t,s){return i(this,t,s)},getPoint:function(t,i){return s(this,t,i)},getPoints:function(t,i,s){return h(this,t,i,s)},getRandomPoint:function(t){return e(this,t)},setTo:function(t,i,s,h,n,e){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===h&&(h=0),void 0===n&&(n=0),void 0===e&&(e=0),this.x1=t,this.y1=i,this.x2=s,this.y2=h,this.x3=n,this.y3=e,this},getLineA:function(t){return void 0===t&&(t=new n),t.setTo(this.x1,this.y1,this.x2,this.y2),t},getLineB:function(t){return void 0===t&&(t=new n),t.setTo(this.x2,this.y2,this.x3,this.y3),t},getLineC:function(t){return void 0===t&&(t=new n),t.setTo(this.x3,this.y3,this.x1,this.y1),t},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(t){var i=0;i=this.x1<=this.x2&&this.x1<=this.x3?this.x1-t:this.x2<=this.x1&&this.x2<=this.x3?this.x2-t:this.x3-t,this.x1-=i,this.x2-=i,this.x3-=i}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(t){var i=0;i=this.x1>=this.x2&&this.x1>=this.x3?this.x1-t:this.x2>=this.x1&&this.x2>=this.x3?this.x2-t:this.x3-t,this.x1-=i,this.x2-=i,this.x3-=i}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(t){var i=0;i=this.y1<=this.y2&&this.y1<=this.y3?this.y1-t:this.y2<=this.y1&&this.y2<=this.y3?this.y2-t:this.y3-t,this.y1-=i,this.y2-=i,this.y3-=i}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(t){var i=0;i=this.y1>=this.y2&&this.y1>=this.y3?this.y1-t:this.y2>=this.y1&&this.y2>=this.y3?this.y2-t:this.y3-t,this.y1-=i,this.y2-=i,this.y3-=i}}});module.exports=o;
},{"../../utils/Class":8,"./Contains":384,"./GetPoint":436,"./GetPoints":437,"../line/Line":114,"./Random":369}],716:[function(require,module,exports) {
var r=function(r){var a=r.x1,t=r.y1,x=r.x2,e=r.y2,n=r.x3,o=r.y3;return Math.abs(((n-a)*(e-t)-(x-a)*(o-t))/2)};module.exports=r;
},{}],717:[function(require,module,exports) {
var r=require("./Triangle"),e=function(e,n,t){var a=t*(Math.sqrt(3)/2);return new r(e,n,e+t/2,n+a,e-t/2,n+a)};module.exports=e;
},{"./Triangle":383}],718:[function(require,module,exports) {
var r=require("../polygon/Earcut"),e=require("./Triangle"),o=function(o,i,n,u,l){void 0===i&&(i=null),void 0===n&&(n=1),void 0===u&&(u=1),void 0===l&&(l=[]);for(var v,d,t,a,g,p,c,f,h,q=r(o,i),s=0;s<q.length;s+=3)v=q[s],d=q[s+1],t=q[s+2],a=o[2*v]*n,g=o[2*v+1]*u,p=o[2*d]*n,c=o[2*d+1]*u,f=o[2*t]*n,h=o[2*t+1]*u,l.push(new e(a,g,p,c,f,h));return l};module.exports=o;
},{"../polygon/Earcut":353,"./Triangle":383}],719:[function(require,module,exports) {
var e=require("./Triangle"),r=function(r,n,i,o){return void 0===o&&(o=i),new e(r,n,r,n-o,r+i,n)};module.exports=r;
},{"./Triangle":383}],721:[function(require,module,exports) {
var e=require("../point/Point"),n=function(n,o){return void 0===o&&(o=new e),o.x=(n.x1+n.x2+n.x3)/3,o.y=(n.y1+n.y2+n.y3)/3,o};module.exports=n;
},{"../point/Point":345}],732:[function(require,module,exports) {
var r=function(r,x,e){return r.x1+=x,r.y1+=e,r.x2+=x,r.y2+=e,r.x3+=x,r.y3+=e,r};module.exports=r;
},{}],720:[function(require,module,exports) {
var r=require("./Centroid"),e=require("./Offset"),i=function(i,o,t,u){void 0===u&&(u=r);var n=u(i),d=o-n.x,f=t-n.y;return e(i,d,f)};module.exports=i;
},{"./Centroid":721,"./Offset":732}],722:[function(require,module,exports) {
var r=require("../../math/Vector2");function e(r,e,n,t){return r*t-e*n}var n=function(n,t){void 0===t&&(t=new r);var o=n.x3,u=n.y3,x=n.x1-o,a=n.y1-u,i=n.x2-o,v=n.y2-u,y=2*e(x,a,i,v),c=e(a,x*x+a*a,v,i*i+v*v),d=e(x,x*x+a*a,i,i*i+v*v);return t.x=o-c/y,t.y=u+d/y,t};module.exports=n;
},{"../../math/Vector2":96}],723:[function(require,module,exports) {
var a=require("../circle/Circle"),r=function(r,t){void 0===t&&(t=new a);var e,i,x=r.x1,h=r.y1,s=r.x2,M=r.y2,n=r.x3,u=r.y3,y=s-x,m=M-h,c=n-x,d=u-h,l=y*(x+s)+m*(h+M),o=c*(x+n)+d*(h+u),v=2*(y*(u-M)-m*(n-s));if(Math.abs(v)<1e-6){var q=Math.min(x,s,n),f=Math.min(h,M,u);e=.5*(Math.max(x,s,n)-q),i=.5*(Math.max(h,M,u)-f),t.x=q+e,t.y=f+i,t.radius=Math.sqrt(e*e+i*i)}else t.x=(d*l-m*o)/v,t.y=(y*o-c*l)/v,e=t.x-x,i=t.y-h,t.radius=Math.sqrt(e*e+i*i);return t};module.exports=r;
},{"../circle/Circle":382}],724:[function(require,module,exports) {
var e=require("./Triangle"),r=function(r){return new e(r.x1,r.y1,r.x2,r.y2,r.x3,r.y3)};module.exports=r;
},{"./Triangle":383}],727:[function(require,module,exports) {
var e=function(e,o){return o.setTo(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)};module.exports=e;
},{}],729:[function(require,module,exports) {
var x=function(x,y){return x.x1===y.x1&&x.y1===y.y1&&x.x2===y.x2&&x.y2===y.y2&&x.x3===y.x3&&x.y3===y.y3};module.exports=x;
},{}],730:[function(require,module,exports) {
var r=require("../point/Point");function n(r,n,t,e){var o=r-t,i=n-e,u=o*o+i*i;return Math.sqrt(u)}var t=function(t,e){void 0===e&&(e=new r);var o=t.x1,i=t.y1,u=t.x2,a=t.y2,v=t.x3,x=t.y3,y=n(v,x,u,a),c=n(o,i,v,x),d=n(u,a,o,i),f=y+c+d;return e.x=(o*y+u*c+v*d)/f,e.y=(i*y+a*c+x*d)/f,e};module.exports=t;
},{"../point/Point":345}],731:[function(require,module,exports) {
var e=require("../line/Length"),n=function(n){var r=n.getLineA(),t=n.getLineB(),i=n.getLineC();return e(r)+e(t)+e(i)};module.exports=n;
},{"../line/Length":432}],735:[function(require,module,exports) {
var x=function(x,y,r,t){var a=Math.cos(t),n=Math.sin(t),o=x.x1-y,e=x.y1-r;return x.x1=o*a-e*n+y,x.y1=o*n+e*a+r,o=x.x2-y,e=x.y2-r,x.x2=o*a-e*n+y,x.y2=o*n+e*a+r,o=x.x3-y,e=x.y3-r,x.x3=o*a-e*n+y,x.y3=o*n+e*a+r,x};module.exports=x;
},{}],733:[function(require,module,exports) {
var r=require("./RotateAroundXY"),e=require("./InCenter"),n=function(n,t){var u=e(n);return r(n,u.x,u.y,t)};module.exports=n;
},{"./RotateAroundXY":735,"./InCenter":730}],518:[function(require,module,exports) {
var e=require("./Triangle");e.Area=require("./Area"),e.BuildEquilateral=require("./BuildEquilateral"),e.BuildFromPolygon=require("./BuildFromPolygon"),e.BuildRight=require("./BuildRight"),e.CenterOn=require("./CenterOn"),e.Centroid=require("./Centroid"),e.CircumCenter=require("./CircumCenter"),e.CircumCircle=require("./CircumCircle"),e.Clone=require("./Clone"),e.Contains=require("./Contains"),e.ContainsArray=require("./ContainsArray"),e.ContainsPoint=require("./ContainsPoint"),e.CopyFrom=require("./CopyFrom"),e.Decompose=require("./Decompose"),e.Equals=require("./Equals"),e.GetPoint=require("./GetPoint"),e.GetPoints=require("./GetPoints"),e.InCenter=require("./InCenter"),e.Perimeter=require("./Perimeter"),e.Offset=require("./Offset"),e.Random=require("./Random"),e.Rotate=require("./Rotate"),e.RotateAroundPoint=require("./RotateAroundPoint"),e.RotateAroundXY=require("./RotateAroundXY"),module.exports=e;
},{"./Triangle":383,"./Area":716,"./BuildEquilateral":717,"./BuildFromPolygon":718,"./BuildRight":719,"./CenterOn":720,"./Centroid":721,"./CircumCenter":722,"./CircumCircle":723,"./Clone":724,"./Contains":384,"./ContainsArray":725,"./ContainsPoint":654,"./CopyFrom":727,"./Decompose":728,"./Equals":729,"./GetPoint":436,"./GetPoints":437,"./InCenter":730,"./Perimeter":731,"./Offset":732,"./Random":369,"./Rotate":733,"./RotateAroundPoint":676,"./RotateAroundXY":735}],79:[function(require,module,exports) {
module.exports={Circle:require("./circle"),Ellipse:require("./ellipse"),Intersects:require("./intersects"),Line:require("./line"),Point:require("./point"),Polygon:require("./polygon"),Rectangle:require("./rectangle"),Triangle:require("./triangle")};
},{"./circle":511,"./ellipse":512,"./intersects":514,"./line":513,"./point":515,"./polygon":516,"./rectangle":517,"./triangle":518}],951:[function(require,module,exports) {
module.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3};
},{}],952:[function(require,module,exports) {
module.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5};
},{}],953:[function(require,module,exports) {
module.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3};
},{}],923:[function(require,module,exports) {
module.exports={DUALSHOCK_4:require("./Sony_PlayStation_DualShock_4"),SNES_USB:require("./SNES_USB_Controller"),XBOX_360:require("./XBox360_Controller")};
},{"./Sony_PlayStation_DualShock_4":951,"./SNES_USB_Controller":952,"./XBox360_Controller":953}],519:[function(require,module,exports) {
module.exports={Axis:require("./Axis"),Button:require("./Button"),Gamepad:require("./Gamepad"),GamepadManager:require("./GamepadManager"),Configs:require("./configs/")};
},{"./Axis":341,"./Button":340,"./Gamepad":112,"./GamepadManager":58,"./configs/":923}],221:[function(require,module,exports) {
var a=function(a,r,e){return{gameObject:a,enabled:!0,draggable:!1,dropZone:!1,target:null,camera:null,hitArea:r,hitAreaCallback:e,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragX:0,dragY:0}};module.exports=a;
},{}],220:[function(require,module,exports) {
var t=require("../geom/circle/Circle"),e=require("../geom/circle/Contains"),i=require("../utils/Class"),r=require("../math/distance/DistanceBetween"),s=require("../geom/ellipse/Ellipse"),n=require("../geom/ellipse/Contains"),a=require("eventemitter3"),o=require("./InteractiveObject"),h=require("../boot/PluginManager"),g=require("../geom/rectangle/Rectangle"),l=require("../geom/rectangle/Contains"),d=require("../geom/triangle/Triangle"),u=require("../geom/triangle/Contains"),p=new i({Extends:a,initialize:function(t){a.call(this),this.scene=t,this.systems=t.sys,t.sys.settings.isBooted||t.sys.events.once("boot",this.boot,this),this.manager=t.sys.game.input,this.displayList,this.cameras,this.keyboard=this.manager.keyboard,this.mouse=this.manager.mouse,this.gamepad=this.manager.gamepad,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[]},this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"]},boot:function(){var t=this.systems.events;t.on("preupdate",this.preUpdate,this),t.on("update",this.update,this),t.on("shutdown",this.shutdown,this),t.on("destroy",this.destroy,this),this.cameras=this.systems.cameras,this.displayList=this.systems.displayList},preUpdate:function(){var t=this._pendingRemoval,e=this._pendingInsertion,i=t.length,r=e.length;if(0!==i||0!==r){for(var s=this._list,n=0;n<i;n++){var a=t[n],o=s.indexOf(a);o>-1&&(s.splice(o,1),this.clear(a))}t.length=0,this._list=s.concat(e.splice(0))}},clear:function(t){var e=t.input;e.gameObject=void 0,e.target=void 0,e.hitArea=void 0,e.hitAreaCallback=void 0,e.callbackContext=void 0,t.input=null;var i=this._draggable.indexOf(t);return i>-1&&this._draggable.splice(i,1),(i=this._drag[0].indexOf(t))>-1&&this._drag[0].splice(i,1),(i=this._over[0].indexOf(t))>-1&&this._over[0].splice(i,1),t},disable:function(t){t.input.enabled=!1},enable:function(t,e,i,r){return void 0===r&&(r=!1),t.input?t.input.enabled=!0:this.setHitArea(t,e,i),t.input.dropZone=r,this},hitTestPointer:function(t){var e=this.cameras.getCameraBelowPointer(t);if(e){t.camera=e;for(var i=this.manager.hitTest(t.x,t.y,this._list,e),r=0;r<i.length;r++){var s=i[r];s.input.dropZone&&this._tempZones.push(s)}return i}return[]},processDownEvents:function(t){var e=this._temp;this.emit("pointerdown",t,e);for(var i=0,r=0;r<e.length;r++){var s=e[r];s.input&&(i++,s.emit("pointerdown",t,s.input.localX,s.input.localY,t.camera),this.emit("gameobjectdown",t,s))}return i},processDragEvents:function(t,e){if(0===this._draggable.length)return 0;var i,s,n,a,o=this._temp;if(0===t.dragState&&t.primaryDown&&t.justDown&&o.length>0?t.dragState=1:t.dragState>0&&!t.primaryDown&&t.justUp&&(t.dragState=5),1===t.dragState){var h=[];for(i=0;i<o.length;i++)(s=o[i]).input.draggable&&h.push(s);if(0===h.length)return t.dragState=0,0;h.length>1&&(this.sortGameObjects(h),this.topOnly&&h.splice(1)),this._drag[t.id]=h,0===this.dragDistanceThreshold&&0===this.dragTimeThreshold?t.dragState=3:t.dragState=2}if(2===t.dragState&&(this.dragDistanceThreshold>0&&r(t.x,t.y,t.downX,t.downY)>=this.dragDistanceThreshold&&(t.dragState=3),this.dragTimeThreshold>0&&e>=t.downTime+this.dragTimeThreshold&&(t.dragState=3)),3===t.dragState){for(n=this._drag[t.id],i=0;i<n.length;i++)(a=(s=n[i]).input).dragState=2,a.dragX=t.x-s.x,a.dragY=t.y-s.y,a.dragStartX=s.x,a.dragStartY=s.y,s.emit("dragstart",t,a.dragX,a.dragY),this.emit("dragstart",t,s);return t.dragState=4,n.length}if(4===t.dragState&&t.justMoved){var g=this._tempZones;for(n=this._drag[t.id],i=0;i<n.length;i++){if((a=(s=n[i]).input).target){var l=g.indexOf(a.target);0===l?(s.emit("dragover",t,a.target),this.emit("dragover",t,s,a.target)):l>0?(s.emit("dragleave",t,a.target),this.emit("dragleave",t,s,a.target),a.target=g[0],s.emit("dragenter",t,a.target),this.emit("dragenter",t,s,a.target)):(s.emit("dragleave",t,a.target),this.emit("dragleave",t,s,a.target),g[0]?(a.target=g[0],s.emit("dragenter",t,a.target),this.emit("dragenter",t,s,a.target)):a.target=null)}else!a.target&&g[0]&&(a.target=g[0],s.emit("dragenter",t,a.target),this.emit("dragenter",t,s,a.target));var d=t.x-s.input.dragX,u=t.y-s.input.dragY;s.emit("drag",t,d,u),this.emit("drag",t,s,d,u)}return n.length}if(5===t.dragState){for(n=this._drag[t.id],i=0;i<n.length;i++){(a=(s=n[i]).input).dragState=0,a.dragX=a.localX-s.displayOriginX,a.dragY=a.localY-s.displayOriginY;var p=!1;a.target&&(s.emit("drop",t,a.target),this.emit("drop",t,s,a.target),a.target=null,p=!0),s.emit("dragend",t,a.dragX,a.dragY,p),this.emit("dragend",t,s,p)}t.dragState=0}return 0},processMoveEvents:function(t){var e=this._temp;this.emit("pointermove",t,e);for(var i=0,r=0;r<e.length;r++){var s=e[r];if(s.input&&(i++,s.emit("pointermove",t,s.input.localX,s.input.localY),this.emit("gameobjectmove",t,s),this.topOnly))break}return i},processOverOutEvents:function(t){var e,i,r=this._temp,s=[],n=[],a=[],o=this._over[t.id],h=this._drag[t.id];for(e=0;e<o.length;e++)i=o[e],-1===r.indexOf(i)&&-1===h.indexOf(i)?s.push(i):a.push(i);for(e=0;e<r.length;e++)i=r[e],-1===o.indexOf(i)&&n.push(i);var g=s.length,l=0;if(g>0)for(this.sortGameObjects(s),this.emit("pointerout",t,s),e=0;e<g;e++)(i=s[e]).input&&(this.emit("gameobjectout",t,i),i.emit("pointerout",t),l++);if((g=n.length)>0)for(this.sortGameObjects(n),this.emit("pointerover",t,n),e=0;e<g;e++)(i=n[e]).input&&(this.emit("gameobjectover",t,i),i.emit("pointerover",t,i.input.localX,i.input.localY),l++);return o=a.concat(n),this._over[t.id]=this.sortGameObjects(o),l},processUpEvents:function(t){var e=this._temp;this.emit("pointerup",t,e);for(var i=0;i<e.length;i++){var r=e[i];r.input&&(r.emit("pointerup",t,r.input.localX,r.input.localY),this.emit("gameobjectup",t,r))}return e.length},queueForInsertion:function(t){return-1===this._pendingInsertion.indexOf(t)&&-1===this._list.indexOf(t)&&this._pendingInsertion.push(t),this},queueForRemoval:function(t){return this._pendingRemoval.push(t),this},setDraggable:function(t,e){void 0===e&&(e=!0),Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var r=t[i];r.input.draggable=e;var s=this._draggable.indexOf(r);e&&-1===s?this._draggable.push(r):!e&&s>-1&&this._draggable.splice(s,1)}return this},setHitArea:function(t,e,i){if(void 0===e)return this.setHitAreaFromTexture(t);Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++){var s=t[r];s.input=o(s,e,i),this.queueForInsertion(s)}return this},setHitAreaCircle:function(i,r,s,n,a){void 0===a&&(a=e);var o=new t(r,s,n);return this.setHitArea(i,o,a)},setHitAreaEllipse:function(t,e,i,r,a,o){void 0===o&&(o=n);var h=new s(e,i,r,a);return this.setHitArea(t,h,o)},setHitAreaFromTexture:function(t,e){void 0===e&&(e=l),Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var r=t[i],s=r.frame,n=0,a=0;s?(n=s.realWidth,a=s.realHeight):r.width&&(n=r.width,a=r.height),0!==n&&0!==a&&(r.input=o(r,new g(0,0,n,a),e),this.queueForInsertion(r))}return this},setHitAreaRectangle:function(t,e,i,r,s,n){void 0===n&&(n=l);var a=new g(e,i,r,s);return this.setHitArea(t,a,n)},setHitAreaTriangle:function(t,e,i,r,s,n,a,o){void 0===o&&(o=u);var h=new d(e,i,r,s,n,a);return this.setHitArea(t,h,o)},setPollAlways:function(){return this.pollRate=0,this._pollTimer=0,this},setPollOnMove:function(){return this.pollRate=-1,this._pollTimer=0,this},setPollRate:function(t){return this.pollRate=t,this._pollTimer=0,this},setGlobalTopOnly:function(t){return this.manager.globalTopOnly=t,this},setTopOnly:function(t){return this.topOnly=t,this},sortGameObjects:function(t){return t.length<2?t:(this.scene.sys.depthSort(),t.sort(this.sortHandlerGO.bind(this)))},sortHandlerGO:function(t,e){var i=this.displayList.getIndex(t),r=this.displayList.getIndex(e);return i<r?1:i>r?-1:0},sortHandlerIO:function(t,e){var i=this.displayList.getIndex(t.gameObject),r=this.displayList.getIndex(e.gameObject);return i<r?1:i>r?-1:0},sortInteractiveObjects:function(t){return t.length<2?t:(this.scene.sys.depthSort(),t.sort(this.sortHandlerIO.bind(this)))},stopPropagation:function(){return this.manager.globalTopOnly&&(this.manager.ignoreEvents=!0),this},update:function(t,e){var i=this.manager;if(!i.globalTopOnly||!i.ignoreEvents){var r=i.activePointer,s=r.dirty||0===this.pollRate;if(this.pollRate>-1&&(this._pollTimer-=e,this._pollTimer<0&&(s=!0,this._pollTimer=this.pollRate)),s){this._tempZones=[],this._temp=this.hitTestPointer(r),this.sortGameObjects(this._temp),this.sortGameObjects(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1));var n=this.processDragEvents(r,t);r.wasTouch||(n+=this.processOverOutEvents(r)),r.justDown&&(n+=this.processDownEvents(r)),r.justUp&&(n+=this.processUpEvents(r)),r.justMoved&&(n+=this.processMoveEvents(r)),n>0&&i.globalTopOnly&&(i.ignoreEvents=!0)}}},shutdown:function(){this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;for(var t=0;t<10;t++)this._drag[t]=[],this._over[t]=[];this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=void 0,this.cameras=void 0,this.manager=void 0,this.events=void 0,this.keyboard=void 0,this.mouse=void 0,this.gamepad=void 0},activePointer:{get:function(){return this.manager.activePointer}},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}}});h.register("InputPlugin",p,"input"),module.exports=p;
},{"../geom/circle/Circle":382,"../geom/circle/Contains":379,"../utils/Class":8,"../math/distance/DistanceBetween":376,"../geom/ellipse/Ellipse":380,"../geom/ellipse/Contains":381,"eventemitter3":35,"./InteractiveObject":221,"../boot/PluginManager":16,"../geom/rectangle/Rectangle":62,"../geom/rectangle/Contains":113,"../geom/triangle/Triangle":383,"../geom/triangle/Contains":384}],868:[function(require,module,exports) {
var n=function(n){var o=!1;return n.isDown&&(o=n._justDown,n._justDown=!1),o};module.exports=n;
},{}],869:[function(require,module,exports) {
var r=function(r){var t=!1;return r.isDown&&(t=r._justUp,r._justUp=!1),t};module.exports=r;
},{}],870:[function(require,module,exports) {
var o=function(o,n){return void 0===n&&(n=50),o.isDown&&o.duration<n};module.exports=o;
},{}],871:[function(require,module,exports) {
var o=function(o,r){return void 0===r&&(r=50),o.isUp&&o.duration<r};module.exports=o;
},{}],520:[function(require,module,exports) {
module.exports={KeyboardManager:require("./KeyboardManager"),Key:require("./keys/Key"),KeyCodes:require("./keys/KeyCodes"),KeyCombo:require("./combo/KeyCombo"),JustDown:require("./keys/JustDown"),JustUp:require("./keys/JustUp"),DownDuration:require("./keys/DownDuration"),UpDuration:require("./keys/UpDuration")};
},{"./KeyboardManager":59,"./keys/Key":135,"./keys/KeyCodes":131,"./combo/KeyCombo":133,"./keys/JustDown":868,"./keys/JustUp":869,"./keys/DownDuration":870,"./keys/UpDuration":871}],521:[function(require,module,exports) {
module.exports={MouseManager:require("./MouseManager")};
},{"./MouseManager":60}],522:[function(require,module,exports) {
module.exports={TouchManager:require("./TouchManager")};
},{"./TouchManager":61}],80:[function(require,module,exports) {
module.exports={Gamepad:require("./gamepad"),InputManager:require("./InputManager"),InputPlugin:require("./InputPlugin"),InteractiveObject:require("./InteractiveObject"),Keyboard:require("./keyboard"),Mouse:require("./mouse"),Pointer:require("./Pointer"),Touch:require("./touch")};
},{"./gamepad":519,"./InputManager":25,"./InputPlugin":220,"./InteractiveObject":221,"./keyboard":520,"./mouse":521,"./Pointer":43,"./touch":522}],212:[function(require,module,exports) {
var E={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_WAITING_LINKFILE:15,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,TEXTURE_ATLAS_JSON_ARRAY:20,TEXTURE_ATLAS_JSON_HASH:21};module.exports=E;
},{}],214:[function(require,module,exports) {
var n={},o={install:function(o){for(var r in n)o[r]=n[r]},register:function(o,r){n[o]=r},destroy:function(){n={}}};module.exports=o;
},{}],215:[function(require,module,exports) {
var t=function(t,r){return!!t.url&&(t.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?t.url:r+t.url)};module.exports=t;
},{}],219:[function(require,module,exports) {
var e=function(e,o,d,i,r){return void 0===e&&(e=""),void 0===o&&(o=!0),void 0===d&&(d=""),void 0===i&&(i=""),void 0===r&&(r=0),{responseType:e,async:o,user:d,password:i,timeout:r,header:void 0,headerValue:void 0,overrideMimeType:void 0}};module.exports=e;
},{}],217:[function(require,module,exports) {
var global = (1,eval)("this");
var e=(0,eval)("this"),r=require("../utils/object/Extend"),i=require("./XHRSettings"),t=function(e,t){var o=void 0===e?i():r({},e);if(t)for(var n in t)void 0!==t[n]&&(o[n]=t[n]);return o};module.exports=t;
},{"../utils/object/Extend":13,"./XHRSettings":219}],218:[function(require,module,exports) {
var e=require("./MergeXHRSettings"),r=function(r,o){var n=e(o,r.xhrSettings),s=new XMLHttpRequest;return s.open("GET",r.src,n.async,n.user,n.password),s.responseType=r.xhrSettings.responseType,s.timeout=n.timeout,n.header&&n.headerValue&&s.setRequestHeader(n.header,n.headerValue),n.overrideMimeType&&s.overrideMimeType(n.overrideMimeType),s.onload=r.onLoad.bind(r),s.onerror=r.onError.bind(r),s.onprogress=r.onProgress.bind(r),s.send(),s};module.exports=r;
},{"./MergeXHRSettings":217}],213:[function(require,module,exports) {
var t=require("../utils/Class"),e=require("./const"),i=require("../utils/object/GetFastValue"),s=require("./GetURL"),r=require("./MergeXHRSettings"),o=require("./XHRLoader"),n=require("./XHRSettings"),h=new t({initialize:function(t){if(this.type=i(t,"type",!1),this.key=i(t,"key",!1),!this.type||!this.key)throw new Error("Error calling 'Loader."+this.type+"' invalid key provided.");this.url=i(t,"url"),void 0===this.url?this.url=i(t,"path","")+this.key+"."+i(t,"extension",""):"function"!=typeof this.url&&(this.url=i(t,"path","").concat(this.url)),this.src="",this.xhrSettings=n(i(t,"responseType",void 0)),i(t,"xhrSettings",!1)&&(this.xhrSettings=r(this.xhrSettings,i(t,"xhrSettings",{}))),this.loader=null,this.xhrLoader=null,this.state="function"==typeof this.url?e.FILE_POPULATED:e.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=i(t,"config",{}),this.linkFile=void 0,this.linkType="",this.linkParent=!1},setLinkFile:function(t,e){this.linkFile=t,t.linkFile=this,this.linkType=e,t.linkType=e,this.linkParent=!0},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(t){this.loader=t,this.state===e.FILE_POPULATED?(this.onComplete(),t.nextFile(this)):(this.src=s(this,t.baseURL),0===this.src.indexOf("data:")?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=o(this,t.xhr))},onLoad:function(t){this.resetXHR(),t.target&&200!==t.target.status?this.loader.nextFile(this,!1):this.loader.nextFile(this,!0)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(t){t.lengthComputable&&(this.bytesLoaded=t.loaded,this.bytesTotal=t.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit("fileprogress",this,this.percentComplete))},onProcess:function(t){this.state=e.FILE_PROCESSING,this.onComplete(),t(this)},onComplete:function(){this.linkFile?this.linkFile.state===e.FILE_WAITING_LINKFILE?(this.state=e.FILE_COMPLETE,this.linkFile.state=e.FILE_COMPLETE):this.state=e.FILE_WAITING_LINKFILE:this.state=e.FILE_COMPLETE}});h.createObjectURL=function(t,e,i){if("function"==typeof URL)t.src=URL.createObjectURL(e);else{var s=new FileReader;s.onload=function(){t.removeAttribute("crossOrigin"),t.src="data:"+(e.type||i)+";base64,"+s.result.split(",")[1]},s.onerror=t.onerror,s.readAsDataURL(e)}},h.revokeObjectURL=function(t){"function"==typeof URL&&URL.revokeObjectURL(t.src)},module.exports=h;
},{"../utils/Class":8,"./const":212,"../utils/object/GetFastValue":102,"./GetURL":215,"./MergeXHRSettings":217,"./XHRLoader":218,"./XHRSettings":219}],632:[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../const"),s=require("../File"),i=require("../FileTypesManager"),r=require("../../utils/object/GetFastValue"),n=new e({Extends:s,initialize:function(e,i,n,a){var o="string"==typeof e?e:r(e,"key",""),h={type:"json",extension:r(e,"extension","json"),responseType:"text",key:o,url:r(e,"file",i),path:n,xhrSettings:r(e,"xhr",a)};s.call(this,h),"object"==typeof h.url&&(this.data=h.url,this.state=t.FILE_POPULATED)},onProcess:function(e){this.state=t.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText),this.onComplete(),e(this)}});i.register("json",function(e,t,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)this.addFile(new n(e[i],t,this.path,s));else this.addFile(new n(e,t,this.path,s));return this}),module.exports=n;
},{"../../utils/Class":8,"../const":212,"../File":213,"../FileTypesManager":214,"../../utils/object/GetFastValue":102}],622:[function(require,module,exports) {
var e=require("../FileTypesManager"),i=require("./JSONFile.js"),r=function(e,r,t,a){var n=new i(e,r,t,a);return n.type="animationJSON",n};e.register("animation",function(e,i,t){if(Array.isArray(e))for(var a=0;a<e.length;a++)this.addFile(new r(e[a],i,this.path,t));else this.addFile(new r(e,i,this.path,t));return this}),module.exports=r;
},{"../FileTypesManager":214,"./JSONFile.js":632}],630:[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../const"),i=require("../File"),a=require("../FileTypesManager"),s=require("../../utils/object/GetFastValue"),r=new e({Extends:i,initialize:function(e,t,a,r,n){var h="string"==typeof e?e:s(e,"key",""),o={type:"image",extension:s(e,"extension","png"),responseType:"blob",key:h,url:s(e,"file",t),path:a,xhrSettings:s(e,"xhr",r),config:s(e,"config",n)};i.call(this,o)},onProcess:function(e){this.state=t.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var a=this;this.data.onload=function(){i.revokeObjectURL(a.data),a.onComplete(),e(a)},this.data.onerror=function(){i.revokeObjectURL(a.data),a.state=t.FILE_ERRORED,e(a)},i.createObjectURL(this.data,this.xhrLoader.response,"image/png")}});a.register("image",function(e,t,i){var a,n,h;if(Array.isArray(e))for(var o=0;o<e.length;o++)a=s(e[o],"file",t),Array.isArray(a)&&2===a.length?(n=this.addFile(new r(e[o],a[0],this.path,i)),h=this.addFile(new r(e[o],a[1],this.path,i)),n.setLinkFile(h,"dataimage")):this.addFile(new r(e[o],t,this.path,i));else a=s(e,"file",t),Array.isArray(a)&&2===a.length?(n=this.addFile(new r(e,a[0],this.path,i)),h=this.addFile(new r(e,a[1],this.path,i)),n.setLinkFile(h,"dataimage")):this.addFile(new r(e,t,this.path,i));return this}),module.exports=r;
},{"../../utils/Class":8,"../const":212,"../File":213,"../FileTypesManager":214,"../../utils/object/GetFastValue":102}],623:[function(require,module,exports) {
var e=require("../FileTypesManager"),t=require("./ImageFile.js"),a=require("./JSONFile.js"),i=function(e,i,r,n,l,s){var u=new t(e,i,n,l),d=new a(e,r,n,s);return u.linkFile=d,d.linkFile=u,u.linkType="atlasjson",d.linkType="atlasjson",{texture:u,data:d}};e.register("atlas",function(e,t,a,r,n){var l;return l="object"==typeof e&&null!==e?new i(e.key,e.texture,e.data,this.path,r,n):new i(e,t,a,this.path,r,n),this.addFile(l.texture),this.addFile(l.data),this}),module.exports=i;
},{"../FileTypesManager":214,"./ImageFile.js":630,"./JSONFile.js":632}],629:[function(require,module,exports) {
var t=require("../../utils/Class"),e=require("../File"),i=require("../../utils/object/GetFastValue"),s=require("../GetURL"),o=new t({Extends:e,initialize:function(t,s,o,a,r){this.locked=r,this.loaded=!1;var l={type:"audio",extension:i(s,"type",""),key:t,url:i(s,"uri",s),path:o,config:a};e.call(this,l)},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var t=0;t<this.data.length;t++){var e=this.data[t];e.oncanplaythrough=null,e.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(t){var e=t.target;e.oncanplaythrough=null,e.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit("fileprogress",this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(t){this.loader=t,this.data=[];var e=this.config&&this.config.instances||1;this.filesTotal=e,this.filesLoaded=0,this.percentComplete=0;for(var i=0;i<e;i++){var o=new Audio;o.dataset.name=this.key+("0"+i).slice(-2),o.dataset.used="false",this.locked||(o.preload="auto",o.oncanplaythrough=this.onProgress.bind(this),o.onerror=this.onError.bind(this)),this.data.push(o)}for(i=0;i<this.data.length;i++)(o=this.data[i]).src=s(this,t.baseURL),this.locked||o.load();this.locked&&setTimeout(this.onLoad.bind(this))}});module.exports=o;
},{"../../utils/Class":8,"../File":213,"../../utils/object/GetFastValue":102,"../GetURL":215}],624:[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../../const"),i=require("../File"),r=require("../FileTypesManager"),o=require("../../utils/object/GetFastValue"),n=require("./HTML5AudioFile"),a=new e({Extends:i,initialize:function(e,t,r,n,a){this.context=a;var u={type:"audio",extension:o(t,"type",""),responseType:"arraybuffer",key:e,url:o(t,"uri",t),path:r,xhrSettings:n};i.call(this,u)},onProcess:function(e){this.state=t.FILE_PROCESSING;var i=this;this.context.decodeAudioData(this.xhrLoader.response,function(t){i.data=t,i.onComplete(),e(i)},function(r){console.error("Error with decoding audio data for '"+this.key+"':",r.message),i.state=t.FILE_ERRORED,e(i)}),this.context=null}});a.create=function(e,t,i,r,o){var u=e.systems.game,s=u.config.audio,d=u.device.audio;if(s&&s.noAudio||!d.webAudio&&!d.audioData)return null;var c=a.findAudioURL(u,i);return c?!d.webAudio||s&&s.disableWebAudio?new n(t,c,e.path,r,u.sound.locked):new a(t,c,e.path,o,u.sound.context):null},r.register("audio",function(e,t,i,r){var o=a.create(this,e,t,i,r);return o&&this.addFile(o),this}),a.findAudioURL=function(e,t){t.constructor!==Array&&(t=[t]);for(var i=0;i<t.length;i++){var r=o(t[i],"uri",t[i]);if(0===r.indexOf("blob:")||0===r.indexOf("data:"))return r;var n=r.match(/\.([a-zA-Z0-9]+)($|\?)/);if(n=o(t[i],"type",n?n[1]:"").toLowerCase(),e.device.audio[n])return{uri:r,type:n}}return null},module.exports=a;
},{"../../utils/Class":8,"../../const":12,"../File":213,"../FileTypesManager":214,"../../utils/object/GetFastValue":102,"./HTML5AudioFile":629}],625:[function(require,module,exports) {
var e=require("./AudioFile.js"),i=require("../const"),r=require("../FileTypesManager"),t=require("./JSONFile.js");r.register("audioSprite",function(r,a,s,n,l,u){var d,p=e.create(this,r,a,n,l);p&&("string"==typeof s?(d=new t(r,s,this.path,u),this.addFile(d)):d={type:"json",key:r,data:s,state:i.FILE_WAITING_LINKFILE},p.linkFile=d,d.linkFile=p,p.linkType="audioSprite",d.linkType="audioSprite",this.addFile(p));return this});
},{"./AudioFile.js":624,"../const":212,"../FileTypesManager":214,"./JSONFile.js":632}],627:[function(require,module,exports) {
var e=require("../../utils/Class"),i=require("../const"),t=require("../File"),r=require("../FileTypesManager"),s=require("../../utils/object/GetFastValue"),n=new e({Extends:t,initialize:function(e,i,r,n){var a="string"==typeof e?e:s(e,"key",""),h={type:"binary",extension:s(e,"extension","bin"),responseType:"arraybuffer",key:a,url:s(e,"file",i),path:r,xhrSettings:s(e,"xhr",n)};t.call(this,h)},onProcess:function(e){this.state=i.FILE_PROCESSING,this.data=this.xhrLoader.response,this.onComplete(),e(this)}});r.register("binary",function(e,i,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new n(e[r],i,this.path,t));else this.addFile(new n(e,i,this.path,t));return this}),module.exports=n;
},{"../../utils/Class":8,"../const":212,"../File":213,"../FileTypesManager":214,"../../utils/object/GetFastValue":102}],642:[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../const"),i=require("../File"),r=require("../FileTypesManager"),s=require("../../utils/object/GetFastValue"),n=require("../../dom/ParseXML"),a=new e({Extends:i,initialize:function(e,t,r,n){var a="string"==typeof e?e:s(e,"key",""),l={type:"xml",extension:s(e,"extension","xml"),responseType:"text",key:a,url:s(e,"file",t),path:r,xhrSettings:s(e,"xhr",n)};i.call(this,l)},onProcess:function(e){if(this.state=t.FILE_PROCESSING,this.data=n(this.xhrLoader.responseText),null===this.data)throw new Error("XMLFile: Invalid XML");this.onComplete(),e(this)}});r.register("xml",function(e,t,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.addFile(new a(e[r],t,this.path,i));else this.addFile(new a(e,t,this.path,i));return this}),module.exports=a;
},{"../../utils/Class":8,"../const":212,"../File":213,"../FileTypesManager":214,"../../utils/object/GetFastValue":102,"../../dom/ParseXML":202}],626:[function(require,module,exports) {
var e=require("../FileTypesManager"),i=require("./ImageFile.js"),t=require("./XMLFile.js"),r=function(e,r,n,a,l,u){var s=new i(e,r,a,l),p=new t(e,n,a,u);return s.linkFile=p,p.linkFile=s,s.linkType="bitmapfont",p.linkType="bitmapfont",{texture:s,data:p}};e.register("bitmapFont",function(e,i,t,n,a){var l=new r(e,i,t,this.path,n,a);return this.addFile(l.texture),this.addFile(l.data),this}),module.exports=r;
},{"../FileTypesManager":214,"./ImageFile.js":630,"./XMLFile.js":642}],628:[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../const"),i=require("../File"),s=require("../FileTypesManager"),r=require("../../utils/object/GetFastValue"),n=new e({Extends:i,initialize:function(e,t,s,n){var l="string"==typeof e?e:r(e,"key",""),a={type:"glsl",extension:r(e,"extension","glsl"),responseType:"text",key:l,url:r(e,"file",t),path:s,xhrSettings:r(e,"xhr",n)};i.call(this,a)},onProcess:function(e){this.state=t.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onComplete(),e(this)}});s.register("glsl",function(e,t,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new n(e[s],t,this.path,i));else this.addFile(new n(e,t,this.path,i));return this}),module.exports=n;
},{"../../utils/Class":8,"../const":212,"../File":213,"../FileTypesManager":214,"../../utils/object/GetFastValue":102}],631:[function(require,module,exports) {
var t=require("../../utils/Class"),e=require("../const"),i=require("../File"),s=require("../FileTypesManager"),r=require("../../utils/object/GetFastValue"),h=new t({Extends:i,initialize:function(t,e,s,h,n,a){void 0===s&&(s=512),void 0===h&&(h=512);var o="string"==typeof t?t:r(t,"key",""),l={type:"html",extension:r(t,"extension","html"),responseType:"text",key:o,url:r(t,"file",e),path:n,xhrSettings:r(t,"xhr",a),config:{width:s,height:h}};i.call(this,l)},onProcess:function(t){this.state=e.FILE_PROCESSING;var s=this.config.width,r=this.config.height,h=[];h.push('<svg width="'+s+'px" height="'+r+'px" viewBox="0 0 '+s+" "+r+'" xmlns="http://www.w3.org/2000/svg">'),h.push('<foreignObject width="100%" height="100%">'),h.push('<body xmlns="http://www.w3.org/1999/xhtml">'),h.push(this.xhrLoader.responseText),h.push("</body>"),h.push("</foreignObject>"),h.push("</svg>");var n=[h.join("\n")],a=this;try{var o=new window.Blob(n,{type:"image/svg+xml;charset=utf-8"})}catch(i){return a.state=e.FILE_ERRORED,void t(a)}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){i.revokeObjectURL(a.data),a.onComplete(),t(a)},this.data.onerror=function(){i.revokeObjectURL(a.data),a.state=e.FILE_ERRORED,t(a)},i.createObjectURL(this.data,o,"image/svg+xml")}});s.register("html",function(t,e,i,s,r){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new h(t[n],e,i,s,this.path,r));else this.addFile(new h(t,e,i,s,this.path,r));return this}),module.exports=h;
},{"../../utils/Class":8,"../const":212,"../File":213,"../FileTypesManager":214,"../../utils/object/GetFastValue":102}],857:[function(require,module,exports) {
var r=function(r,t,o,n){for(var e=[],u=r;u<=t;u++)if(o||n){var a=o?o+u.toString():u.toString();n&&(a=a.concat(n)),e.push(a)}else e.push(u);return e};module.exports=r;
},{}],633:[function(require,module,exports) {
var r=require("../FileTypesManager"),i=require("./ImageFile.js"),t=require("./JSONFile.js"),e=require("../../utils/array/NumberArray");r.register("multiatlas",function(r,s,a,l,u){if("number"==typeof s){var h=s,n=void 0===a?"":a;s=e(0,h,r+n,".png"),a=e(0,h,r+n,".json")}else Array.isArray(s)||(s=[s]),Array.isArray(a)||(a=[a]);var _,g,o=0;for(this._multilist[r]=[],o=0;o<s.length;o++)g="_MA_IMG_"+r+"_"+o.toString(),_=new i(g,s[o],this.path,l),this.addFile(_),this._multilist[r].push(g);for(o=0;o<a.length;o++)g="_MA_JSON_"+r+"_"+o.toString(),_=new t(g,a[o],this.path,u),this.addFile(_),this._multilist[r].push(g);return this});
},{"../FileTypesManager":214,"./ImageFile.js":630,"./JSONFile.js":632,"../../utils/array/NumberArray":857}],634:[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../const"),i=require("../File"),s=require("../FileTypesManager"),r=require("../../utils/object/GetFastValue"),a=require("../../boot/PluginManager"),n=new e({Extends:i,initialize:function(e,t,s,n){"function"==typeof t&&(this.key=e,window[e]=t,window[e].register(a));var h="string"==typeof e?e:r(e,"key",""),o={type:"script",extension:r(e,"extension","js"),responseType:"text",key:h,url:r(e,"file",t),path:s,xhrSettings:r(e,"xhr",n)};i.call(this,o)},onProcess:function(e){this.state=t.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),window[this.key].register(a),this.onComplete(),e(this)}});s.register("plugin",function(e,t,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new n(e[s],t,this.path,i));else this.addFile(new n(e,t,this.path,i));return this}),module.exports=n;
},{"../../utils/Class":8,"../const":212,"../File":213,"../FileTypesManager":214,"../../utils/object/GetFastValue":102,"../../boot/PluginManager":16}],635:[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../const"),i=require("../File"),s=require("../FileTypesManager"),a=require("../../utils/object/GetFastValue"),r=new e({Extends:i,initialize:function(e,t,s,r){var n="string"==typeof e?e:a(e,"key",""),h={type:"script",extension:a(e,"extension","js"),responseType:"text",key:n,url:a(e,"file",t),path:s,xhrSettings:a(e,"xhr",r)};i.call(this,h)},onProcess:function(e){this.state=t.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onComplete(),e(this)}});s.register("script",function(e,t,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new r(e[s],t,this.path,i));else this.addFile(new r(e,t,this.path,i));return this}),module.exports=r;
},{"../../utils/Class":8,"../const":212,"../File":213,"../FileTypesManager":214,"../../utils/object/GetFastValue":102}],636:[function(require,module,exports) {
var e=require("../FileTypesManager"),r=require("./ImageFile.js"),t=function(e,t,i,s,a){var n=new r(e,t,s,a,i);return n.type="spritesheet",n};e.register("spritesheet",function(e,r,i,s){if(Array.isArray(e))for(var a=0;a<e.length;a++)this.addFile(new t(e[a],r,null,this.path,s));else this.addFile(new t(e,r,i,this.path,s));return this}),module.exports=t;
},{"../FileTypesManager":214,"./ImageFile.js":630}],637:[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../const"),i=require("../File"),s=require("../FileTypesManager"),r=require("../../utils/object/GetFastValue"),a=new e({Extends:i,initialize:function(e,t,s,a){var n="string"==typeof e?e:r(e,"key",""),o={type:"svg",extension:r(e,"extension","svg"),responseType:"text",key:n,url:r(e,"file",t),path:s,xhrSettings:r(e,"xhr",a)};i.call(this,o)},onProcess:function(e){this.state=t.FILE_PROCESSING;var s=[this.xhrLoader.responseText],r=this;try{var a=new window.Blob(s,{type:"image/svg+xml;charset=utf-8"})}catch(i){return r.state=t.FILE_ERRORED,void e(r)}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var n=!1;this.data.onload=function(){n||i.revokeObjectURL(r.data),r.onComplete(),e(r)},this.data.onerror=function(){n?(r.state=t.FILE_ERRORED,e(r)):(n=!0,i.revokeObjectURL(r.data),r.data.src="data:image/svg+xml,"+encodeURIComponent(s.join("")))},i.createObjectURL(this.data,a,"image/svg+xml")}});s.register("svg",function(e,t,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new a(e[s],t,this.path,i));else this.addFile(new a(e,t,this.path,i));return this}),module.exports=a;
},{"../../utils/Class":8,"../const":212,"../File":213,"../FileTypesManager":214,"../../utils/object/GetFastValue":102}],638:[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../const"),i=require("../File"),s=require("../FileTypesManager"),r=new e({Extends:i,initialize:function(e,t,s,r){var n={type:"text",extension:"txt",responseType:"text",key:e,url:t,path:s,xhrSettings:r};i.call(this,n)},onProcess:function(e){this.state=t.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onComplete(),e(this)}});s.register("text",function(e,t,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new r(e[s],t,this.path,i));else this.addFile(new r(e,t,this.path,i));return this}),module.exports=r;
},{"../../utils/Class":8,"../const":212,"../File":213,"../FileTypesManager":214}],277:[function(require,module,exports) {
module.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3};
},{}],639:[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../const"),i=require("../File"),s=require("../FileTypesManager"),r=require("../../tilemaps/Formats"),a=new e({Extends:i,initialize:function(e,t,s,r,a){var n={type:"tilemapCSV",extension:".csv",responseType:"text",key:e,url:t,path:s,xhrSettings:a};i.call(this,n),this.tilemapFormat=r},onProcess:function(e){this.state=t.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onComplete(),e(this)}});s.register("tilemapCSV",function(e,t,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(new a(e[s],t,this.path,r.CSV,i));else this.addFile(new a(e,t,this.path,r.CSV,i));return this}),module.exports=a;
},{"../../utils/Class":8,"../const":212,"../File":213,"../FileTypesManager":214,"../../tilemaps/Formats":277}],640:[function(require,module,exports) {
var e=require("../FileTypesManager"),i=require("./JSONFile.js"),r=require("../../tilemaps/Formats"),t=function(e,r,t,a,s){var l=new i(e,r,t,s);return l.type="tilemapJSON",l.tilemapFormat=a,l};e.register("tilemapTiledJSON",function(e,i,a){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(t(e[s],i,this.path,r.TILED_JSON,a));else this.addFile(t(e,i,this.path,r.TILED_JSON,a));return this}),e.register("tilemapWeltmeister",function(e,i,a){if(Array.isArray(e))for(var s=0;s<e.length;s++)this.addFile(t(e[s],i,this.path,r.WELTMEISTER,a));else this.addFile(t(e,i,this.path,r.WELTMEISTER,a));return this}),module.exports=t;
},{"../FileTypesManager":214,"./JSONFile.js":632,"../../tilemaps/Formats":277}],641:[function(require,module,exports) {
var e=require("../FileTypesManager"),i=require("./ImageFile.js"),t=require("./TextFile.js"),r=function(e,r,a,n,l,u){var s=new i(e,r,n,l),d=new t(e,a,n,u);return s.linkFile=d,d.linkFile=s,s.linkType="unityatlas",d.linkType="unityatlas",{texture:s,data:d}};e.register("unityAtlas",function(e,i,t,a,n){var l=new r(e,i,t,this.path,a,n);return this.addFile(l.texture),this.addFile(l.data),this}),module.exports=r;
},{"../FileTypesManager":214,"./ImageFile.js":630,"./TextFile.js":638}],510:[function(require,module,exports) {
module.exports={AnimationJSONFile:require("./AnimationJSONFile"),AtlasJSONFile:require("./AtlasJSONFile"),AudioFile:require("./AudioFile"),AudioSprite:require("./AudioSprite"),BinaryFile:require("./BinaryFile"),BitmapFontFile:require("./BitmapFontFile"),GLSLFile:require("./GLSLFile"),HTML5AudioFile:require("./HTML5AudioFile"),HTMLFile:require("./HTMLFile"),ImageFile:require("./ImageFile"),JSONFile:require("./JSONFile"),MultiAtlas:require("./MultiAtlas"),PluginFile:require("./PluginFile"),ScriptFile:require("./ScriptFile"),SpriteSheetFile:require("./SpriteSheetFile"),SVGFile:require("./SVGFile"),TextFile:require("./TextFile"),TilemapCSVFile:require("./TilemapCSVFile"),TilemapJSONFile:require("./TilemapJSONFile"),UnityAtlasFile:require("./UnityAtlasFile"),XMLFile:require("./XMLFile")};
},{"./AnimationJSONFile":622,"./AtlasJSONFile":623,"./AudioFile":624,"./AudioSprite":625,"./BinaryFile":627,"./BitmapFontFile":626,"./GLSLFile":628,"./HTML5AudioFile":629,"./HTMLFile":631,"./ImageFile":630,"./JSONFile":632,"./MultiAtlas":633,"./PluginFile":634,"./ScriptFile":635,"./SpriteSheetFile":636,"./SVGFile":637,"./TextFile":638,"./TilemapCSVFile":639,"./TilemapJSONFile":640,"./UnityAtlasFile":641,"./XMLFile":642}],216:[function(require,module,exports) {
var t=require("../utils/Class"),e=require("./const"),s=require("../structs/Set"),a=require("eventemitter3"),i=require("./FileTypesManager"),r=require("../utils/object/GetFastValue"),h=require("../gameobjects/bitmaptext/ParseXMLBitmapFont"),l=require("../boot/PluginManager"),o=require("./XHRSettings"),n=new t({Extends:a,initialize:function(t){a.call(this),this.scene=t,this.systems=t.sys,t.sys.settings.isBooted||t.sys.events.once("boot",this.boot,this),this._multilist={},i.install(this);var h=this.systems.game.config,l=this.systems.settings.loader;this.path="",this.baseURL="",this.setBaseURL(r(l,"baseURL",h.loaderBaseURL)),this.setPath(r(l,"path",h.loaderPath)),this.enableParallel=r(l,"enableParallel",h.loaderEnableParallel),this.maxParallelDownloads=r(l,"maxParallelDownloads",h.loaderMaxParallelDownloads),this.xhr=o(r(l,"responseType",h.loaderResponseType),r(l,"async",h.loaderAsync),r(l,"user",h.loaderUser),r(l,"password",h.loaderPassword),r(l,"timeout",h.loaderTimeout)),this.crossOrigin=r(l,"crossOrigin",h.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new s,this.inflight=new s,this.failed=new s,this.queue=new s,this.storage=new s,this.state=e.LOADER_IDLE},boot:function(){var t=this.systems.events;t.on("shutdown",this.shutdown,this),t.on("destroy",this.destroy,this)},setBaseURL:function(t){return""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.baseURL=t,this},setPath:function(t){return""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.path=t,this},setCORS:function(t){return this.crossOrigin=t,this},addFile:function(t){return this.isReady()?(t.path=this.path,this.list.set(t),t):-1},isLoading:function(){return this.state===e.LOADER_LOADING||this.state===e.LOADER_PROCESSING},isReady:function(){return this.state===e.LOADER_IDLE||this.state===e.LOADER_COMPLETE||this.state===e.LOADER_FAILED},start:function(){this.isReady()&&(this.progress=0,this.totalToLoad=this.list.size,this.emit("start",this),0===this.list.size?this.finishedLoading():(this.state=e.LOADER_LOADING,this.failed.clear(),this.inflight.clear(),this.queue.clear(),this.queue.debug=!0,this.updateProgress(),this.processLoadQueue()))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit("progress",this.progress)},processLoadQueue:function(){this.list.each(function(t){if((t.state===e.FILE_POPULATED||t.state===e.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(t),this.list.delete(t),this.loadFile(t)),this.inflight.size===this.maxParallelDownloads)return!1},this)},loadFile:function(t){t.crossOrigin||(t.crossOrigin=this.crossOrigin),t.load(this)},nextFile:function(t,e){e?(this.emit("load",t),this.queue.set(t)):(this.emit("loaderror",t),this.failed.set(t)),this.inflight.delete(t),this.updateProgress(),this.list.size>0?this.processLoadQueue():0===this.inflight.size&&this.finishedLoading()},finishedLoading:function(){this.state!==e.LOADER_PROCESSING&&(this.progress=1,this.state=e.LOADER_PROCESSING,this.storage.clear(),0===this.queue.size?this.processComplete():this.queue.each(function(t){t.onProcess(this.processUpdate.bind(this))},this))},processUpdate:function(t){if(t.state===e.FILE_ERRORED)return this.failed.set(t),t.linkFile&&this.queue.delete(t.linkFile),this.removeFromQueue(t);t.linkFile?t.state===e.FILE_COMPLETE&&t.linkFile.state===e.FILE_COMPLETE&&(this.storage.set({type:t.linkType,fileA:t,fileB:t.linkFile}),this.queue.delete(t.linkFile),this.removeFromQueue(t)):(this.storage.set(t),this.removeFromQueue(t))},removeFromQueue:function(t){this.queue.delete(t),0===this.queue.size&&this.state===e.LOADER_PROCESSING&&this.processComplete()},processComplete:function(){this.list.clear(),this.inflight.clear(),this.queue.clear(),this.processCallback(),this.state=e.LOADER_COMPLETE,this.emit("complete",this,this.storage.size,this.failed.size)},processCallback:function(){if(0!==this.storage.size){var t,e,s,a=this.scene.sys.cache,i=this.scene.sys.textures,r=this.scene.sys.anims;for(var l in this._multilist){for(var o=[],n=[],d=this._multilist[l],u=0;u<d.length;u++)(t=this.storage.get("key",d[u]))&&("image"===t.type?n.push(t.data):"json"===t.type&&o.push(t.data),this.storage.delete(t));n.length+o.length===d.length&&(Array.isArray(o[0].textures)||Array.isArray(o[0].frames)?i.addAtlasJSONArray(l,n,o):i.addAtlasJSONHash(l,n,o))}var c=[];this.storage.each(function(t){switch(t.type){case"animationJSON":c.push(t);break;case"image":case"svg":case"html":i.addImage(t.key,t.data);break;case"atlasjson":e=t.fileA,s=t.fileB,"image"===e.type?i.addAtlas(e.key,e.data,s.data):i.addAtlas(s.key,s.data,e.data);break;case"dataimage":e=t.fileA,s=t.fileB,e.linkParent?i.addImage(e.key,e.data,s.data):i.addImage(s.key,s.data,e.data);break;case"unityatlas":e=t.fileA,s=t.fileB,"image"===e.type?i.addUnityAtlas(e.key,e.data,s.data):i.addUnityAtlas(s.key,s.data,e.data);break;case"bitmapfont":e=t.fileA,s=t.fileB,"image"===e.type?(a.bitmapFont.add(s.key,{data:h(s.data),texture:e.key,frame:null}),i.addImage(e.key,e.data)):(a.bitmapFont.add(e.key,{data:h(e.data),texture:s.key,frame:null}),i.addImage(s.key,s.data));break;case"spritesheet":i.addSpriteSheet(t.key,t.data,t.config);break;case"json":a.json.add(t.key,t.data);break;case"xml":a.xml.add(t.key,t.data);break;case"text":a.text.add(t.key,t.data);break;case"obj":a.obj.add(t.key,t.data);break;case"binary":a.binary.add(t.key,t.data);break;case"audio":a.audio.add(t.key,t.data);break;case"audioSprite":[t.fileA,t.fileB].forEach(function(t){a[t.type].add(t.key,t.data)});break;case"glsl":a.shader.add(t.key,t.data);break;case"tilemapCSV":case"tilemapJSON":a.tilemap.add(t.key,{format:t.tilemapFormat,data:t.data})}}),c.forEach(function(t){r.fromJSON(t.data)}),this.storage.clear()}},saveJSON:function(t,e){return this.save(JSON.stringify(t),e)},save:function(t,e,s){void 0===e&&(e="file.json"),void 0===s&&(s="application/json");var a=new Blob([t],{type:s}),i=URL.createObjectURL(a),r=document.createElement("a");return r.download=e,r.textContent="Download "+e,r.href=i,r.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.failed.clear(),this.queue.clear(),this.storage.clear();var t=this.systems.game.config,s=this.systems.settings.loader;this.setBaseURL(r(s,"baseURL",t.loaderBaseURL)),this.setPath(r(s,"path",t.loaderPath)),this.state=e.LOADER_IDLE},loadArray:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this.file(t[e]);return this.list.size>0},file:function(t){var e,s=t.key;switch(t.type){case"spritesheet":e=this.spritesheet(s,t.url,t.config,t.xhrSettings);break;case"atlas":e=this.atlas(s,t.textureURL,t.atlasURL,t.textureXhrSettings,t.atlasXhrSettings);break;case"bitmapFont":e=this.bitmapFont(s,t.textureURL,t.xmlURL,t.textureXhrSettings,t.xmlXhrSettings);break;case"multiatlas":e=this.multiatlas(s,t.textureURLs,t.atlasURLs,t.textureXhrSettings,t.atlasXhrSettings);break;case"audioSprite":e=this.audioSprite(s,t.urls,t.json,t.config,t.audioXhrSettings,t.jsonXhrSettings);break;default:e=this[t.type](s,t.url,t.xhrSettings)}return e},shutdown:function(){this.reset(),this.state=e.LOADER_SHUTDOWN},destroy:function(){this.reset(),this.state=e.LOADER_DESTROYED}});l.register("Loader",n,"load"),module.exports=n;
},{"../utils/Class":8,"./const":212,"../structs/Set":266,"eventemitter3":35,"./FileTypesManager":214,"../utils/object/GetFastValue":102,"../gameobjects/bitmaptext/ParseXMLBitmapFont":378,"../boot/PluginManager":16,"./XHRSettings":219}],81:[function(require,module,exports) {
var e=require("./const"),r=require("../utils/object/Extend"),i={FileTypes:require("./filetypes"),File:require("./File"),FileTypesManager:require("./FileTypesManager"),GetURL:require("./GetURL"),LoaderPlugin:require("./LoaderPlugin"),MergeXHRSettings:require("./MergeXHRSettings"),XHRLoader:require("./XHRLoader"),XHRSettings:require("./XHRSettings")};i=r(!1,i,e),module.exports=i;
},{"./const":212,"../utils/object/Extend":13,"./filetypes":510,"./File":213,"./FileTypesManager":214,"./GetURL":215,"./LoaderPlugin":216,"./MergeXHRSettings":217,"./XHRLoader":218,"./XHRSettings":219}],764:[function(require,module,exports) {
var t=function(t,a,n,r){return Math.atan2(r-a,n-t)};module.exports=t;
},{}],765:[function(require,module,exports) {
var t=function(t,a,n,r){return Math.atan2(n-t,r-a)};module.exports=t;
},{}],763:[function(require,module,exports) {
var t=function(t,a){return Math.atan2(a.y-t.y,a.x-t.x)};module.exports=t;
},{}],766:[function(require,module,exports) {
var t=function(t,a){return Math.atan2(a.x-t.x,a.y-t.y)};module.exports=t;
},{}],770:[function(require,module,exports) {
var t=function(t){return(t%=2*Math.PI)>=0?t:t+2*Math.PI};module.exports=t;
},{}],767:[function(require,module,exports) {
var r=require("./Normalize"),e=function(e){return r(e+Math.PI)};module.exports=e;
},{"./Normalize":770}],768:[function(require,module,exports) {
var a=require("../const"),t=function(t,r,e){return void 0===e&&(e=.05),t===r?t:(Math.abs(r-t)<=e||Math.abs(r-t)>=a.PI2-e?t=r:(Math.abs(r-t)>Math.PI&&(r<t?r+=a.PI2:r-=a.PI2),r>t?t+=e:r<t&&(t-=e)),t)};module.exports=t;
},{"../const":40}],769:[function(require,module,exports) {
var r=function(r,o){var t=o-r;return 0===t?0:t-360*Math.floor((t- -180)/360)};module.exports=r;
},{}],523:[function(require,module,exports) {
module.exports={Between:require("./Between"),BetweenY:require("./BetweenY"),BetweenPoints:require("./BetweenPoints"),BetweenPointsY:require("./BetweenPointsY"),Reverse:require("./Reverse"),RotateTo:require("./RotateTo"),ShortestBetween:require("./ShortestBetween"),Normalize:require("./Normalize"),Wrap:require("./Wrap"),WrapDegrees:require("./WrapDegrees")};
},{"./Between":764,"./BetweenY":765,"./BetweenPoints":763,"./BetweenPointsY":766,"./Reverse":767,"./RotateTo":768,"./ShortestBetween":769,"./Normalize":770,"./Wrap":771,"./WrapDegrees":772}],773:[function(require,module,exports) {
var t=function(t,o,r,a,e){return void 0===e&&(e=2),Math.sqrt(Math.pow(r-t,e)+Math.pow(a-o,e))};module.exports=t;
},{}],774:[function(require,module,exports) {
var r=function(r,e,n,o){var t=r-n,u=e-o;return t*t+u*u};module.exports=r;
},{}],524:[function(require,module,exports) {
module.exports={Between:require("./DistanceBetween"),Power:require("./DistancePower"),Squared:require("./DistanceSquared")};
},{"./DistanceBetween":376,"./DistancePower":773,"./DistanceSquared":774}],525:[function(require,module,exports) {
module.exports={Back:require("./back"),Bounce:require("./bounce"),Circular:require("./circular"),Cubic:require("./cubic"),Elastic:require("./elastic"),Expo:require("./expo"),Linear:require("./linear"),Quadratic:require("./quadratic"),Quartic:require("./quartic"),Quintic:require("./quintic"),Sine:require("./sine"),Stepped:require("./stepped")};
},{"./back":922,"./bounce":922,"./circular":922,"./cubic":922,"./elastic":922,"./expo":922,"./linear":927,"./quadratic":922,"./quartic":922,"./quintic":922,"./sine":922,"./stepped":932}],776:[function(require,module,exports) {
var e=function(e,o){return void 0===o&&(o=1e-4),Math.ceil(e-o)};module.exports=e;
},{}],778:[function(require,module,exports) {
var e=function(e,o,r){return void 0===r&&(r=1e-4),Math.abs(e-o)<r};module.exports=e;
},{}],775:[function(require,module,exports) {
var o=function(o,r){return void 0===r&&(r=1e-4),Math.floor(o+r)};module.exports=o;
},{}],777:[function(require,module,exports) {
var e=function(e,o,r){return void 0===r&&(r=1e-4),e>o-r};module.exports=e;
},{}],779:[function(require,module,exports) {
var e=function(e,o,r){return void 0===r&&(r=1e-4),e<o+r};module.exports=e;
},{}],526:[function(require,module,exports) {
module.exports={Ceil:require("./Ceil"),Equal:require("./Equal"),Floor:require("./Floor"),GreaterThan:require("./GreaterThan"),LessThan:require("./LessThan")};
},{"./Ceil":776,"./Equal":778,"./Floor":775,"./GreaterThan":777,"./LessThan":779}],230:[function(require,module,exports) {
var r=function(r){if(0===r)return 1;for(var e=r;--r;)e*=r;return e};module.exports=r;
},{}],223:[function(require,module,exports) {
var r=require("./Factorial"),e=function(e,o){return r(e)/r(o)/r(e-o)};module.exports=e;
},{"./Factorial":230}],784:[function(require,module,exports) {
var r=require("../Bernstein"),e=function(e,t){for(var n=0,o=e.length-1,a=0;a<=o;a++)n+=Math.pow(1-t,o-a)*Math.pow(t,a)*e[a]*r(o,a);return n};module.exports=e;
},{"../Bernstein":223}],782:[function(require,module,exports) {
var r=require("../CatmullRom"),o=function(o,t){var e=o.length-1,l=e*t,a=Math.floor(l);return o[0]===o[e]?(t<0&&(a=Math.floor(l=e*(1+t))),r(l-a,o[(a-1+e)%e],o[a],o[(a+1)%e],o[(a+2)%e])):t<0?o[0]-(r(-l,o[0],o[0],o[1],o[1])-o[0]):t>1?o[e]-(r(l-e,o[e],o[e],o[e-1],o[e-1])-o[e]):r(l-a,o[a?a-1:0],o[a],o[e<a+1?e:a+1],o[e<a+2?e:a+2])};module.exports=o;
},{"../CatmullRom":225}],785:[function(require,module,exports) {
var r=require("../Linear"),e=function(e,n){var o=e.length-1,t=o*n,a=Math.floor(t);return n<0?r(e[0],e[1],t):n>1?r(e[o],e[o-1],o-t):r(e[a],e[a+1>o?o:a+1],t-a)};module.exports=e;
},{"../Linear":237}],527:[function(require,module,exports) {
module.exports={Bezier:require("./BezierInterpolation"),CatmullRom:require("./CatmullRomInterpolation"),CubicBezier:require("./CubicBezierInterpolation"),Linear:require("./LinearInterpolation"),QuadraticBezier:require("./QuadraticBezierInterpolation")};
},{"./BezierInterpolation":784,"./CatmullRomInterpolation":782,"./CubicBezierInterpolation":371,"./LinearInterpolation":785,"./QuadraticBezierInterpolation":372}],786:[function(require,module,exports) {
var r=function(r){return r>0&&0==(r&r-1)};module.exports=r;
},{}],529:[function(require,module,exports) {
module.exports={GetNext:require("./GetPowerOfTwo"),IsSize:require("./IsSizePowerOfTwo"),IsValue:require("./IsValuePowerOfTwo")};
},{"./GetPowerOfTwo":409,"./IsSizePowerOfTwo":110,"./IsValuePowerOfTwo":786}],780:[function(require,module,exports) {
var e=function(e,o,r){return void 0===r&&(r=0),0===o?e:(e-=r,r+(e=o*Math.ceil(e/o)))};module.exports=e;
},{}],781:[function(require,module,exports) {
var o=function(o,r,t){return void 0===t&&(t=0),0===r?o:(o-=t,t+(o=r*Math.floor(o/r)))};module.exports=o;
},{}],783:[function(require,module,exports) {
var o=function(o,r,n){return void 0===n&&(n=0),0===r?o:(o-=n,n+(o=r*Math.round(o/r)))};module.exports=o;
},{}],528:[function(require,module,exports) {
module.exports={Ceil:require("./SnapCeil"),Floor:require("./SnapFloor"),To:require("./SnapTo")};
},{"./SnapCeil":780,"./SnapFloor":781,"./SnapTo":783}],222:[function(require,module,exports) {
var r=function(r){for(var e=0,n=0;n<r.length;n++)e+=+r[n];return e/r.length};module.exports=r;
},{}],226:[function(require,module,exports) {
var o=function(o,r,t){void 0===r&&(r=0),void 0===t&&(t=10);var a=Math.pow(t,-r);return Math.ceil(o*a)/a};module.exports=o;
},{}],229:[function(require,module,exports) {
var r=function(r,t){return Math.abs(r-t)};module.exports=r;
},{}],232:[function(require,module,exports) {
var o=function(o,r,t){void 0===r&&(r=0),void 0===t&&(t=10);var a=Math.pow(t,-r);return Math.floor(o*a)/a};module.exports=o;
},{}],234:[function(require,module,exports) {
var e=function(e,r){return e/r/1e3};module.exports=e;
},{}],235:[function(require,module,exports) {
var o=function(o){return o==parseFloat(o)?!(o%2):void 0};module.exports=o;
},{}],236:[function(require,module,exports) {
var o=function(o){return o===parseFloat(o)?!(o%2):void 0};module.exports=o;
},{}],238:[function(require,module,exports) {
var n=function(n,r,t){return Math.min(n+r,t)};module.exports=n;
},{}],239:[function(require,module,exports) {
var r=function(r,t,a){return Math.max(r-t,a)};module.exports=r;
},{}],240:[function(require,module,exports) {
var o=function(o,r,v,d){void 0===v&&(v=r+1);var e=(o-r)/(v-r);return e>1?void 0!==d?(e=(d-o)/(d-v))<0&&(e=0):e=1:e<0&&(e=0),e};module.exports=o;
},{}],242:[function(require,module,exports) {
var a=function(a,t){void 0===t&&(t=1);var o=2*Math.random()*Math.PI;return a.x=Math.cos(o)*t,a.y=Math.sin(o)*t,a};module.exports=a;
},{}],245:[function(require,module,exports) {
var t=function(t,a){var n=t.x,o=t.y;return t.x=n*Math.cos(a)-o*Math.sin(a),t.y=n*Math.sin(a)+o*Math.cos(a),t};module.exports=t;
},{}],248:[function(require,module,exports) {
var o=function(o){return o>0?Math.ceil(o):Math.floor(o)};module.exports=o;
},{}],249:[function(require,module,exports) {
var o=function(o,r,t){void 0===r&&(r=0),void 0===t&&(t=10);var a=Math.pow(t,-r);return Math.round(o*a)/a};module.exports=o;
},{}],250:[function(require,module,exports) {
var o=function(o,r,i,n){void 0===r&&(r=1),void 0===i&&(i=1),void 0===n&&(n=1),n*=Math.PI/o;for(var t=[],v=[],d=0;d<o;d++)r+=(i-=r*n)*n,t[d]=i,v[d]=r;return{sin:v,cos:t,length:o}};module.exports=o;
},{}],253:[function(require,module,exports) {
var r=function(r,t,a){return Math.abs(r-t)<=a};module.exports=r;
},{}],82:[function(require,module,exports) {
var e=require("./const"),r=require("../utils/object/Extend"),i={Angle:require("./angle/"),Distance:require("./distance/"),Easing:require("./easing/"),Fuzzy:require("./fuzzy/"),Interpolation:require("./interpolation/"),Pow2:require("./pow2/"),Snap:require("./snap/"),Average:require("./Average"),Bernstein:require("./Bernstein"),Between:require("./Between"),CatmullRom:require("./CatmullRom"),CeilTo:require("./CeilTo"),Clamp:require("./Clamp"),DegToRad:require("./DegToRad"),Difference:require("./Difference"),Factorial:require("./Factorial"),FloatBetween:require("./FloatBetween"),FloorTo:require("./FloorTo"),FromPercent:require("./FromPercent"),GetSpeed:require("./GetSpeed"),IsEven:require("./IsEven"),IsEvenStrict:require("./IsEvenStrict"),Linear:require("./Linear"),MaxAdd:require("./MaxAdd"),MinSub:require("./MinSub"),Percent:require("./Percent"),RadToDeg:require("./RadToDeg"),RandomXY:require("./RandomXY"),RandomXYZ:require("./RandomXYZ"),RandomXYZW:require("./RandomXYZW"),Rotate:require("./Rotate"),RotateAround:require("./RotateAround"),RotateAroundDistance:require("./RotateAroundDistance"),RoundAwayFromZero:require("./RoundAwayFromZero"),RoundTo:require("./RoundTo"),SinCosTableGenerator:require("./SinCosTableGenerator"),SmootherStep:require("./SmootherStep"),SmoothStep:require("./SmoothStep"),TransformXY:require("./TransformXY"),Within:require("./Within"),Wrap:require("./Wrap"),Vector2:require("./Vector2"),Vector3:require("./Vector3"),Vector4:require("./Vector4"),Matrix3:require("./Matrix3"),Matrix4:require("./Matrix4"),Quaternion:require("./Quaternion"),RotateVec3:require("./RotateVec3")};i=r(!1,i,e),module.exports=i;
},{"./const":40,"../utils/object/Extend":13,"./angle/":523,"./distance/":524,"./easing/":525,"./fuzzy/":526,"./interpolation/":527,"./pow2/":529,"./snap/":528,"./Average":222,"./Bernstein":223,"./Between":224,"./CatmullRom":225,"./CeilTo":226,"./Clamp":227,"./DegToRad":228,"./Difference":229,"./Factorial":230,"./FloatBetween":231,"./FloorTo":232,"./FromPercent":233,"./GetSpeed":234,"./IsEven":235,"./IsEvenStrict":236,"./Linear":237,"./MaxAdd":238,"./MinSub":239,"./Percent":240,"./RadToDeg":241,"./RandomXY":242,"./RandomXYZ":243,"./RandomXYZW":244,"./Rotate":245,"./RotateAround":246,"./RotateAroundDistance":247,"./RoundAwayFromZero":248,"./RoundTo":249,"./SinCosTableGenerator":250,"./SmootherStep":251,"./SmoothStep":252,"./TransformXY":44,"./Within":253,"./Wrap":254,"./Vector2":96,"./Vector3":255,"./Vector4":256,"./Matrix3":257,"./Matrix4":258,"./Quaternion":259,"./RotateVec3":260}],787:[function(require,module,exports) {
module.exports={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};
},{}],1004:[function(require,module,exports) {
var t={setAcceleration:function(t,e){return this.body.acceleration.set(t,e),this},setAccelerationX:function(t){return this.body.acceleration.x=t,this},setAccelerationY:function(t){return this.body.acceleration.y=t,this}};module.exports=t;
},{}],1003:[function(require,module,exports) {
var t={setAngularVelocity:function(t){return this.body.angularVelocity=t,this},setAngularAcceleration:function(t){return this.body.angularAcceleration=t,this},setAngularDrag:function(t){return this.body.angularDrag=t,this}};module.exports=t;
},{}],1005:[function(require,module,exports) {
var o={setBounce:function(o,t){return this.body.bounce.set(o,t),this},setBounceX:function(o){return this.body.bounce.x=o,this},setBounceY:function(o){return this.body.bounce.y=o,this},setCollideWorldBounds:function(o){return this.body.collideWorldBounds=o,this}};module.exports=o;
},{}],1006:[function(require,module,exports) {
var o={setDebug:function(o,t,e){return this.debugShowBody=o,this.debugShowVelocity=t,this.debugBodyColor=e,this},setDebugBodyColor:function(o){return this.body.debugBodyColor=o,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(o){this.body.debugShowBody=o}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(o){this.body.debugShowVelocity=o}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(o){this.body.debugBodyColor=o}}};module.exports=o;
},{}],1009:[function(require,module,exports) {
var t={setDrag:function(t,r){return this.body.drag.set(t,r),this},setDragX:function(t){return this.body.drag.x=t,this},setDragY:function(t){return this.body.drag.y=t,this}};module.exports=t;
},{}],1007:[function(require,module,exports) {
var e={enableBody:function(e,t,i,o,b){return e&&this.body.reset(t,i),o&&(this.body.gameObject.active=!0),b&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(e,t){return void 0===e&&(e=!1),void 0===t&&(t=!1),this.body.stop(),this.body.enable=!1,e&&(this.body.gameObject.active=!1),t&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};module.exports=e;
},{}],1008:[function(require,module,exports) {
var t={setFriction:function(t,i){return this.body.friction.set(t,i),this},setFrictionX:function(t){return this.body.friction.x=t,this},setFrictionY:function(t){return this.body.friction.y=t,this}};module.exports=t;
},{}],1010:[function(require,module,exports) {
var t={setGravity:function(t,i){return this.body.gravity.set(t,i),this},setGravityX:function(t){return this.body.gravity.x=t,this},setGravityY:function(t){return this.body.gravity.y=t,this}};module.exports=t;
},{}],1011:[function(require,module,exports) {
var o={setImmovable:function(o){return void 0===o&&(o=!0),this.body.immovable=o,this}};module.exports=o;
},{}],1012:[function(require,module,exports) {
var s={setMass:function(s){return this.body.mass=s,this}};module.exports=s;
},{}],1014:[function(require,module,exports) {
var t={setOffset:function(t,e){return this.body.setOffset(t,e),this},setSize:function(t,e,s){return this.body.setSize(t,e,s),this},setCircle:function(t,e,s){return this.body.setCircle(t,e,s),this}};module.exports=t;
},{}],1013:[function(require,module,exports) {
var t={setVelocity:function(t,e){return this.body.velocity.set(t,e),this},setVelocityX:function(t){return this.body.velocity.x=t,this},setVelocityY:function(t){return this.body.velocity.y=t,this},setMaxVelocity:function(t,e){return this.body.maxVelocity.set(t,e),this}};module.exports=t;
},{}],940:[function(require,module,exports) {
module.exports={Acceleration:require("./Acceleration"),Angular:require("./Angular"),Bounce:require("./Bounce"),Debug:require("./Debug"),Drag:require("./Drag"),Enable:require("./Enable"),Friction:require("./Friction"),Gravity:require("./Gravity"),Immovable:require("./Immovable"),Mass:require("./Mass"),Size:require("./Size"),Velocity:require("./Velocity")};
},{"./Acceleration":1004,"./Angular":1003,"./Bounce":1005,"./Debug":1006,"./Drag":1009,"./Enable":1007,"./Friction":1008,"./Gravity":1010,"./Immovable":1011,"./Mass":1012,"./Size":1014,"./Velocity":1013}],793:[function(require,module,exports) {
var e=require("../../utils/Class"),i=require("./components"),a=require("../../gameobjects/image/Image"),n=new e({Extends:a,Mixins:[i.Acceleration,i.Angular,i.Bounce,i.Debug,i.Drag,i.Enable,i.Friction,i.Gravity,i.Immovable,i.Mass,i.Size,i.Velocity],initialize:function(e,i,n,r,t){a.call(this,e,i,n,r,t)}});module.exports=n;
},{"../../utils/Class":8,"./components":940,"../../gameobjects/image/Image":284}],794:[function(require,module,exports) {
var e=require("../../utils/Class"),i=require("./components"),r=require("../../gameobjects/sprite/Sprite"),t=new e({Extends:r,Mixins:[i.Acceleration,i.Angular,i.Bounce,i.Debug,i.Drag,i.Enable,i.Friction,i.Gravity,i.Immovable,i.Mass,i.Size,i.Velocity],initialize:function(e,i,t,n,a){r.call(this,e,i,t,n,a)}});module.exports=t;
},{"../../utils/Class":8,"./components":940,"../../gameobjects/sprite/Sprite":289}],792:[function(require,module,exports) {
var e=require("./ArcadeSprite"),t=require("../../utils/Class"),i=require("./const"),r=require("../../utils/object/GetFastValue"),o=require("../../gameobjects/group/Group"),l=new t({Extends:o,initialize:function(t,l,a,s){void 0!==s||Array.isArray(a)||"object"!=typeof a?void 0===s&&(s={}):(s=a,a=null),this.world=t,s.createCallback=this.createCallback,s.removeCallback=this.removeCallback,s.classType=r(s,"classType",e),this.physicsType=i.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:r(s,"collideWorldBounds",!1),setAccelerationX:r(s,"accelerationX",0),setAccelerationY:r(s,"accelerationY",0),setBounceX:r(s,"bounceX",0),setBounceY:r(s,"bounceY",0),setDragX:r(s,"dragX",0),setDragY:r(s,"dragY",0),setGravityX:r(s,"gravityX",0),setGravityY:r(s,"gravityY",0),setFrictionX:r(s,"frictionX",0),setFrictionY:r(s,"frictionY",0),setVelocityX:r(s,"velocityX",0),setVelocityY:r(s,"velocityY",0),setAngularVelocity:r(s,"angularVelocity",0),setAngularAcceleration:r(s,"angularAcceleration",0),setAngularDrag:r(s,"angularDrag",0),setMass:r(s,"mass",1),setImmovable:r(s,"immovable",!1)},o.call(this,l,a,s)},createCallback:function(e){e.body||this.world.enableBody(e,i.DYNAMIC_BODY);var t=e.body;for(var r in this.defaults)t[r](this.defaults[r])},removeCallback:function(e){e.body&&this.world.disableBody(e)},setVelocity:function(e,t,i){void 0===i&&(i=0);for(var r=this.getChildren(),o=0;o<r.length;o++)r[o].body.velocity.set(e+o*i,t+o*i);return this},setVelocityX:function(e,t){void 0===t&&(t=0);for(var i=this.getChildren(),r=0;r<i.length;r++)i[r].body.velocity.x=e+r*t;return this},setVelocityY:function(e,t){void 0===t&&(t=0);for(var i=this.getChildren(),r=0;r<i.length;r++)i[r].body.velocity.y=e+r*t;return this}});module.exports=l;
},{"./ArcadeSprite":794,"../../utils/Class":8,"./const":787,"../../utils/object/GetFastValue":102,"../../gameobjects/group/Group":283}],796:[function(require,module,exports) {
var e=require("./ArcadeSprite"),r=require("../../utils/Class"),l=require("./const"),t=require("../../gameobjects/group/Group"),a=new r({Extends:t,initialize:function(r,a,i,c){void 0!==c||Array.isArray(i)||"object"!=typeof i?void 0===c&&(c={}):(c=i,i=null),this.world=r,c.createCallback=this.createCallback,c.removeCallback=this.removeCallback,c.createMultipleCallback=this.createMultipleCallback,c.classType=e,this.physicsType=l.STATIC_BODY,t.call(this,a,i,c)},createCallback:function(e){e.body||this.world.enableBody(e,l.STATIC_BODY)},removeCallback:function(e){e.body&&this.world.disableBody(e)},createMultipleCallback:function(){this.refresh()},refresh:function(){for(var e=this.children.entries,r=0;r<e.length;r++)e[r].body.reset();return this}});module.exports=a;
},{"./ArcadeSprite":794,"../../utils/Class":8,"./const":787,"../../gameobjects/group/Group":283}],791:[function(require,module,exports) {
var s=require("./ArcadeImage"),e=require("./ArcadeSprite"),i=require("../../utils/Class"),t=require("./const"),r=require("./PhysicsGroup"),n=require("./StaticPhysicsGroup"),d=new i({initialize:function(s){this.world=s,this.scene=s.scene,this.sys=s.scene.sys},collider:function(s,e,i,t,r){return this.world.addCollider(s,e,i,t,r)},overlap:function(s,e,i,t,r){return this.world.addOverlap(s,e,i,t,r)},existing:function(s,e){var i=e?t.STATIC_BODY:t.DYNAMIC_BODY;return this.world.enableBody(s,i),s},staticImage:function(e,i,r,n){var d=new s(this.scene,e,i,r,n);return this.sys.displayList.add(d),this.world.enableBody(d,t.STATIC_BODY),d},image:function(e,i,r,n){var d=new s(this.scene,e,i,r,n);return this.sys.displayList.add(d),this.world.enableBody(d,t.DYNAMIC_BODY),d},staticSprite:function(s,i,r,n){var d=new e(this.scene,s,i,r,n);return this.sys.displayList.add(d),this.sys.updateList.add(d),this.world.enableBody(d,t.STATIC_BODY),d},sprite:function(s,i,r,n){var d=new e(this.scene,s,i,r,n);return this.sys.displayList.add(d),this.sys.updateList.add(d),this.world.enableBody(d,t.DYNAMIC_BODY),d},staticGroup:function(s,e){return this.sys.updateList.add(new n(this.world,this.world.scene,s,e))},group:function(s,e){return this.sys.updateList.add(new r(this.world,this.world.scene,s,e))}});module.exports=d;
},{"./ArcadeImage":793,"./ArcadeSprite":794,"../../utils/Class":8,"./const":787,"./PhysicsGroup":792,"./StaticPhysicsGroup":796}],866:[function(require,module,exports) {
var r=require("./Clone"),e=function(e,n){var o=r(e);for(var a in n)o.hasOwnProperty(a)||(o[a]=n[a]);return o};module.exports=e;
},{"./Clone":452}],790:[function(require,module,exports) {
var t=require("../../geom/circle/Contains"),i=require("../../utils/Class"),s=require("./const"),h=require("../../geom/rectangle/Rectangle"),e=require("../../geom/rectangle/Contains"),o=require("../../math/Vector2"),n=new i({initialize:function(t,i){this.world=t,this.gameObject=i,this.debugShowBody=t.defaults.debugShowBody,this.debugShowVelocity=t.defaults.debugShowVelocity,this.debugBodyColor=t.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new o,this.position=new o(i.x,i.y),this.prev=new o(this.position.x,this.position.y),this.allowRotation=!0,this.rotation=i.angle,this.preRotation=i.angle,this.width=i.width,this.height=i.height,this.sourceWidth=i.width,this.sourceHeight=i.height,i.frame&&(this.sourceWidth=i.frame.realWidth,this.sourceHeight=i.frame.realHeight),this.halfWidth=Math.abs(i.width/2),this.halfHeight=Math.abs(i.height/2),this.center=new o(i.x+this.halfWidth,i.y+this.halfHeight),this.velocity=new o,this.newVelocity=new o,this.deltaMax=new o,this.acceleration=new o,this.allowDrag=!0,this.drag=new o,this.allowGravity=!0,this.gravity=new o,this.bounce=new o,this.worldBounce=null,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new o(1e4,1e4),this.friction=new o(1,0),this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=s.FACING_NONE,this.immovable=!1,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.dirty=!1,this.syncBounds=!1,this.isMoving=!1,this.stopVelocityOnCollide=!0,this.physicsType=s.DYNAMIC_BODY,this._reset=!0,this._sx=i.scaleX,this._sy=i.scaleY,this._dx=0,this._dy=0,this._bounds=new h},updateBounds:function(){var t=this.gameObject;if(this.syncBounds){var i=t.getBounds(this._bounds);i.width===this.width&&i.height===this.height||(this.width=i.width,this.height=i.height,this._reset=!0)}else{var s=Math.abs(t.scaleX),h=Math.abs(t.scaleY);s===this._sx&&h===this._sy||(this.width=this.sourceWidth*s,this.height=this.sourceHeight*h,this._sx=s,this._sy=h,this._reset=!0)}this._reset&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},update:function(t){this.dirty=!0,this.wasTouching.none=this.touching.none,this.wasTouching.up=this.touching.up,this.wasTouching.down=this.touching.down,this.wasTouching.left=this.touching.left,this.wasTouching.right=this.touching.right,this.touching.none=!0,this.touching.up=!1,this.touching.down=!1,this.touching.left=!1,this.touching.right=!1,this.blocked.none=!0,this.blocked.up=!1,this.blocked.down=!1,this.blocked.left=!1,this.blocked.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1,this.updateBounds();var i=this.gameObject;this.position.x=i.x+i.scaleX*(this.offset.x-i.displayOriginX),this.position.y=i.y+i.scaleY*(this.offset.y-i.displayOriginY),this.updateCenter(),this.rotation=i.angle,this.preRotation=this.rotation,this._reset&&(this.prev.x=this.position.x,this.prev.y=this.position.y),this.moves&&(this.world.updateMotion(this),this.newVelocity.set(this.velocity.x*t,this.velocity.y*t),this.position.x+=this.newVelocity.x,this.position.y+=this.newVelocity.y,this.updateCenter(),this.position.x===this.prev.x&&this.position.y===this.prev.y||(this.angle=Math.atan2(this.velocity.y,this.velocity.x)),this.speed=Math.sqrt(this.velocity.x*this.velocity.x+this.velocity.y*this.velocity.y),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit("worldbounds",this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)),this._dx=this.deltaX(),this._dy=this.deltaY(),this._reset=!1},postUpdate:function(){this.enable&&this.dirty&&(this.dirty=!1,this._dx=this.deltaX(),this._dy=this.deltaY(),this._dx<0?this.facing=s.FACING_LEFT:this._dx>0&&(this.facing=s.FACING_RIGHT),this._dy<0?this.facing=s.FACING_UP:this._dy>0&&(this.facing=s.FACING_DOWN),this.moves&&(0!==this.deltaMax.x&&0!==this._dx&&(this._dx<0&&this._dx<-this.deltaMax.x?this._dx=-this.deltaMax.x:this._dx>0&&this._dx>this.deltaMax.x&&(this._dx=this.deltaMax.x)),0!==this.deltaMax.y&&0!==this._dy&&(this._dy<0&&this._dy<-this.deltaMax.y?this._dy=-this.deltaMax.y:this._dy>0&&this._dy>this.deltaMax.y&&(this._dy=this.deltaMax.y)),this.gameObject.x+=this._dx,this.gameObject.y+=this._dy,this._reset=!0),this.updateCenter(),this.allowRotation&&(this.gameObject.angle+=this.deltaZ()),this.prev.x=this.position.x,this.prev.y=this.position.y)},checkWorldBounds:function(){var t=this.position,i=this.world.bounds,s=this.world.checkCollision,h=this.worldBounce?-this.worldBounce.x:-this.bounce.x,e=this.worldBounce?-this.worldBounce.y:-this.bounce.y;return t.x<i.x&&s.left?(t.x=i.x,this.velocity.x*=h,this.blocked.left=!0,this.blocked.none=!1):this.right>i.right&&s.right&&(t.x=i.right-this.width,this.velocity.x*=h,this.blocked.right=!0,this.blocked.none=!1),t.y<i.y&&s.up?(t.y=i.y,this.velocity.y*=e,this.blocked.up=!0,this.blocked.none=!1):this.bottom>i.bottom&&s.down&&(t.y=i.bottom-this.height,this.velocity.y*=e,this.blocked.down=!0,this.blocked.none=!1),!this.blocked.none},setOffset:function(t,i){return void 0===i&&(i=t),this.offset.set(t,i),this},setSize:function(t,i,s){void 0===s&&(s=!0);var h=this.gameObject;if(this.sourceWidth=t,this.sourceHeight=i,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),s&&h.getCenter){var e=h.displayWidth/2,o=h.displayHeight/2;this.offset.set(e-this.halfWidth,o-this.halfHeight)}return this.isCircle=!1,this.radius=0,this},setCircle:function(t,i,s){return void 0===i&&(i=this.offset.x),void 0===s&&(s=this.offset.y),t>0?(this.isCircle=!0,this.radius=t,this.sourceWidth=2*t,this.sourceHeight=2*t,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(i,s),this.updateCenter()):this.isCircle=!1,this},reset:function(t,i){this.stop();var s=this.gameObject;s.setPosition(t,i),s.getTopLeft(this.position),this.prev.copy(this.position),this.rotation=s.angle,this.preRotation=s.angle,this.updateBounds(),this.updateCenter()},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(t){return t.x=this.x,t.y=this.y,t.right=this.right,t.bottom=this.bottom,t},hitTest:function(i,s){return this.isCircle?t(this,i,s):e(this,i,s)},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this.deltaX()>0?this.deltaX():-this.deltaX()},deltaAbsY:function(){return this.deltaY()>0?this.deltaY():-this.deltaY()},deltaX:function(){return this.position.x-this.prev.x},deltaY:function(){return this.position.y-this.prev.y},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(t){var i=this.position,s=i.x+this.halfWidth,h=i.y+this.halfHeight;this.debugShowBody&&(t.lineStyle(1,this.debugBodyColor),this.isCircle?t.strokeCircle(s,h,this.width/2):t.strokeRect(i.x,i.y,this.width,this.height)),this.debugShowVelocity&&(t.lineStyle(1,this.world.defaults.velocityDebugColor,1),t.lineBetween(s,h,s+this.velocity.x/2,h+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(t){return this.collideWorldBounds=t,this},setVelocity:function(t,i){return this.velocity.set(t,i),this},setVelocityX:function(t){return this.velocity.x=t,this},setVelocityY:function(t){return this.velocity.y=t,this},setBounce:function(t,i){return this.bounce.set(t,i),this},setBounceX:function(t){return this.bounce.x=t,this},setBounceY:function(t){return this.bounce.y=t,this},setAcceleration:function(t,i){return this.acceleration.set(t,i),this},setAccelerationX:function(t){return this.acceleration.x=t,this},setAccelerationY:function(t){return this.acceleration.y=t,this},setDrag:function(t,i){return this.drag.set(t,i),this},setDragX:function(t){return this.drag.x=t,this},setDragY:function(t){return this.drag.y=t,this},setGravity:function(t,i){return this.gravity.set(t,i),this},setGravityX:function(t){return this.gravity.x=t,this},setGravityY:function(t){return this.gravity.y=t,this},setFriction:function(t,i){return this.friction.set(t,i),this},setFrictionX:function(t){return this.friction.x=t,this},setFrictionY:function(t){return this.friction.y=t,this},setAngularVelocity:function(t){return this.angularVelocity=t,this},setAngularAcceleration:function(t){return this.angularAcceleration=t,this},setAngularDrag:function(t){return this.angularDrag=t,this},setMass:function(t){return this.mass=t,this},setImmovable:function(t){return this.immovable=t,this},x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});module.exports=n;
},{"../../geom/circle/Contains":379,"../../utils/Class":8,"./const":787,"../../geom/rectangle/Rectangle":62,"../../geom/rectangle/Contains":113,"../../math/Vector2":96}],789:[function(require,module,exports) {
var t=require("../../utils/Class"),l=new t({initialize:function(t,l,i,s,e,c,o){this.world=t,this.name="",this.active=!0,this.overlapOnly=l,this.object1=i,this.object2=s,this.collideCallback=e,this.processCallback=c,this.callbackContext=o},setName:function(t){return this.name=t,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});module.exports=l;
},{"../../utils/Class":8}],872:[function(require,module,exports) {
var e=function(e,t,o,i){var l=0,n=e.deltaAbsX()+t.deltaAbsX()+i;return 0===e.deltaX()&&0===t.deltaX()?(e.embedded=!0,t.embedded=!0):e.deltaX()>t.deltaX()?(l=e.right-t.x)>n&&!o||!1===e.checkCollision.right||!1===t.checkCollision.left?l=0:(e.touching.none=!1,e.touching.right=!0,t.touching.none=!1,t.touching.left=!0):e.deltaX()<t.deltaX()&&(-(l=e.x-t.width-t.x)>n&&!o||!1===e.checkCollision.left||!1===t.checkCollision.right?l=0:(e.touching.none=!1,e.touching.left=!0,t.touching.none=!1,t.touching.right=!0)),e.overlapX=l,t.overlapX=l,l};module.exports=e;
},{}],873:[function(require,module,exports) {
var o=function(o,e,n,t){var d=0,l=o.deltaAbsY()+e.deltaAbsY()+t;return 0===o.deltaY()&&0===e.deltaY()?(o.embedded=!0,e.embedded=!0):o.deltaY()>e.deltaY()?(d=o.bottom-e.y)>l&&!n||!1===o.checkCollision.down||!1===e.checkCollision.up?d=0:(o.touching.none=!1,o.touching.down=!0,e.touching.none=!1,e.touching.up=!0):o.deltaY()<e.deltaY()&&(-(d=o.y-e.bottom)>l&&!n||!1===o.checkCollision.up||!1===e.checkCollision.down?d=0:(o.touching.none=!1,o.touching.up=!0,e.touching.none=!1,e.touching.down=!0)),o.overlapY=d,e.overlapY=d,d};module.exports=o;
},{}],264:[function(require,module,exports) {
var t=require("../utils/Class"),i=new t({initialize:function(){this._pending=[],this._active=[],this._destroy=[],this._toProcess=0},add:function(t){return this._pending.push(t),this._toProcess++,this},remove:function(t){return this._destroy.push(t),this._toProcess++,this},update:function(){if(0===this._toProcess)return this._active;var t,i,s=this._destroy,e=this._active;for(t=0;t<s.length;t++){i=s[t];var n=e.indexOf(i);-1!==n&&e.splice(n,1)}for(s.length=0,s=this._pending,t=0;t<s.length;t++)i=s[t],this._active.push(i);return s.length=0,this._toProcess=0,this._active},getActive:function(){return this._active},destroy:function(){this._pending=[],this._active=[],this._destroy=[]}});module.exports=i;
},{"../utils/Class":8}],888:[function(require,module,exports) {
var l=function(l,a){return l.collisionCallback?!l.collisionCallback.call(l.collisionCallbackContext,a,l):!l.layer.callbacks[l.index]||!l.layer.callbacks[l.index].callback.call(l.layer.callbacks[l.index].callbackContext,a,l)};module.exports=l;
},{}],388:[function(require,module,exports) {
var o=function(a,f,n,h,M){for(n=n||0,h=h||a.length-1,M=M||t;h>n;){if(h-n>600){var e=h-n+1,i=f-n+1,l=Math.log(e),u=.5*Math.exp(2*l/3),v=.5*Math.sqrt(l*u*(e-u)/e)*(i-e/2<0?-1:1),c=Math.max(n,Math.floor(f-i*u/e+v)),m=Math.min(h,Math.floor(f+(e-i)*u/e+v));o(a,f,c,m,M)}var x=a[f],g=n,p=h;for(r(a,n,f),M(a[h],x)>0&&r(a,n,h);g<p;){for(r(a,g,p),g++,p--;M(a[g],x)<0;)g++;for(;M(a[p],x)>0;)p--}0===M(a[n],x)?r(a,n,p):r(a,++p,h),p<=f&&(n=p+1),f<=p&&(h=p-1)}};function r(o,r,t){var a=o[r];o[r]=o[t],o[t]=a}function t(o,r){return o<r?-1:o>r?1:0}module.exports=o;
},{}],265:[function(require,module,exports) {
var t=require("../utils/array/QuickSelect");function i(t,n){if(!(this instanceof i))return new i(t,n);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),n&&this._initFormat(n),this.clear()}function n(t,i,n){if(!n)return i.indexOf(t);for(var a=0;a<i.length;a++)if(n(t,i[a]))return a;return-1}function a(t,i){h(t,0,t.children.length,i,t)}function h(t,i,n,a,h){h||(h=x(null)),h.minX=1/0,h.minY=1/0,h.maxX=-1/0,h.maxY=-1/0;for(var e,o=i;o<n;o++)e=t.children[o],r(h,t.leaf?a(e):e);return h}function r(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function e(t,i){return t.minX-i.minX}function o(t,i){return t.minY-i.minY}function s(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function l(t){return t.maxX-t.minX+(t.maxY-t.minY)}function m(t,i){return(Math.max(i.maxX,t.maxX)-Math.min(i.minX,t.minX))*(Math.max(i.maxY,t.maxY)-Math.min(i.minY,t.minY))}function u(t,i){var n=Math.max(t.minX,i.minX),a=Math.max(t.minY,i.minY),h=Math.min(t.maxX,i.maxX),r=Math.min(t.maxY,i.maxY);return Math.max(0,h-n)*Math.max(0,r-a)}function c(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function f(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function x(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(i,n,a,h,r){for(var e,o=[n,a];o.length;)(a=o.pop())-(n=o.pop())<=h||(e=n+Math.ceil((a-n)/h/2)*h,t(i,e,n,a,r),o.push(n,e,e,a))}i.prototype={all:function(){return this._all(this.data,[])},search:function(t){var i=this.data,n=[],a=this.toBBox;if(!f(t,i))return n;for(var h,r,e,o,s=[];i;){for(h=0,r=i.children.length;h<r;h++)e=i.children[h],f(t,o=i.leaf?a(e):e)&&(i.leaf?n.push(e):c(t,o)?this._all(e,n):s.push(e));i=s.pop()}return n},collides:function(t){var i=this.data,n=this.toBBox;if(!f(t,i))return!1;for(var a,h,r,e,o=[];i;){for(a=0,h=i.children.length;a<h;a++)if(r=i.children[a],f(t,e=i.leaf?n(r):r)){if(i.leaf||c(t,e))return!0;o.push(r)}i=o.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}var a=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===a.height)this._splitRoot(this.data,a);else{if(this.data.height<a.height){var h=this.data;this.data=a,a=h}this._insert(a,this.data.height-a.height-1,!0)}else this.data=a;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=x([]),this},remove:function(t,i){if(!t)return this;for(var a,h,r,e,o=this.data,s=this.toBBox(t),l=[],m=[];o||l.length;){if(o||(o=l.pop(),h=l[l.length-1],a=m.pop(),e=!0),o.leaf&&-1!==(r=n(t,o.children,i)))return o.children.splice(r,1),l.push(o),this._condense(l),this;e||o.leaf||!c(o,s)?h?(a++,o=h.children[a],e=!1):o=null:(l.push(o),m.push(a),a=0,h=o,o=o.children[0])}return this},toBBox:function(t){return t},compareMinX:e,compareMinY:o,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},_build:function(t,i,n,h){var r,e=n-i+1,o=this._maxEntries;if(e<=o)return a(r=x(t.slice(i,n+1)),this.toBBox),r;h||(h=Math.ceil(Math.log(e)/Math.log(o)),o=Math.ceil(e/Math.pow(o,h-1))),(r=x([])).leaf=!1,r.height=h;var s,l,m,u,c=Math.ceil(e/o),f=c*Math.ceil(Math.sqrt(o));for(d(t,i,n,f,this.compareMinX),s=i;s<=n;s+=f)for(d(t,s,m=Math.min(s+f-1,n),c,this.compareMinY),l=s;l<=m;l+=c)u=Math.min(l+c-1,m),r.children.push(this._build(t,l,u,h-1));return a(r,this.toBBox),r},_chooseSubtree:function(t,i,n,a){for(var h,r,e,o,l,u,c,f;a.push(i),!i.leaf&&a.length-1!==n;){for(c=f=1/0,h=0,r=i.children.length;h<r;h++)l=s(e=i.children[h]),(u=m(t,e)-l)<f?(f=u,c=l<c?l:c,o=e):u===f&&l<c&&(c=l,o=e);i=o||i.children[0]}return i},_insert:function(t,i,n){var a=this.toBBox,h=n?t:a(t),e=[],o=this._chooseSubtree(h,this.data,i,e);for(o.children.push(t),r(o,h);i>=0&&e[i].children.length>this._maxEntries;)this._split(e,i),i--;this._adjustParentBBoxes(h,e,i)},_split:function(t,i){var n=t[i],h=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,h);var e=this._chooseSplitIndex(n,r,h),o=x(n.children.splice(e,n.children.length-e));o.height=n.height,o.leaf=n.leaf,a(n,this.toBBox),a(o,this.toBBox),i?t[i-1].children.push(o):this._splitRoot(n,o)},_splitRoot:function(t,i){this.data=x([t,i]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(t,i,n){var a,r,e,o,l,m,c,f;for(m=c=1/0,a=i;a<=n-i;a++)o=u(r=h(t,0,a,this.toBBox),e=h(t,a,n,this.toBBox)),l=s(r)+s(e),o<m?(m=o,f=a,c=l<c?l:c):o===m&&l<c&&(c=l,f=a);return f},_chooseSplitAxis:function(t,i,n){var a=t.leaf?this.compareMinX:e,h=t.leaf?this.compareMinY:o;this._allDistMargin(t,i,n,a)<this._allDistMargin(t,i,n,h)&&t.children.sort(a)},_allDistMargin:function(t,i,n,a){t.children.sort(a);var e,o,s=this.toBBox,m=h(t,0,i,s),u=h(t,n-i,n,s),c=l(m)+l(u);for(e=i;e<n-i;e++)o=t.children[e],r(m,t.leaf?s(o):o),c+=l(m);for(e=n-i-1;e>=i;e--)o=t.children[e],r(u,t.leaf?s(o):o),c+=l(u);return c},_adjustParentBBoxes:function(t,i,n){for(var a=n;a>=0;a--)r(i[a],t)},_condense:function(t){for(var i,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(i=t[n-1].children).splice(i.indexOf(t[n]),1):this.clear():a(t[n],this.toBBox)},_initFormat:function(t){var i=["return a"," - b",";"];this.compareMinX=new Function("a","b",i.join(t[0])),this.compareMinY=new Function("a","b",i.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}},module.exports=i;
},{"../utils/array/QuickSelect":388}],943:[function(require,module,exports) {
var o=function(o,e){e<0?o.blocked.left=!0:e>0&&(o.blocked.right=!0),o.position.x-=e,0===o.bounce.x?o.velocity.x=0:o.velocity.x=-o.velocity.x*o.bounce.x};module.exports=o;
},{}],919:[function(require,module,exports) {
var e=require("./ProcessTileSeparationX"),t=function(t,l,i,o,r){var c=0;return t.deltaX()<0&&!t.blocked.left&&l.collideRight&&t.checkCollision.left?l.faceRight&&t.x<o&&(c=t.x-o)<-r&&(c=0):t.deltaX()>0&&!t.blocked.right&&l.collideLeft&&t.checkCollision.right&&l.faceLeft&&t.right>i&&(c=t.right-i)>r&&(c=0),0!==c&&(t.customSeparateX?t.overlapX=c:e(t,c)),c};module.exports=t;
},{"./ProcessTileSeparationX":943}],944:[function(require,module,exports) {
var o=function(o,e){e<0?o.blocked.up=!0:e>0&&(o.blocked.down=!0),o.position.y-=e,0===o.bounce.y?o.velocity.y=0:o.velocity.y=-o.velocity.y*o.bounce.y};module.exports=o;
},{}],920:[function(require,module,exports) {
var o=require("./ProcessTileSeparationY"),e=function(e,l,t,c,a){var r=0;return e.deltaY()<0&&!e.blocked.up&&l.collideDown&&e.checkCollision.up?l.faceBottom&&e.y<c&&(r=e.y-c)<-a&&(r=0):e.deltaY()>0&&!e.blocked.down&&l.collideUp&&e.checkCollision.down&&l.faceTop&&e.bottom>t&&(r=e.bottom-t)>a&&(r=0),0!==r&&(e.customSeparateY?e.overlapY=r:o(e,r)),r};module.exports=e;
},{"./ProcessTileSeparationY":944}],887:[function(require,module,exports) {
var t=function(t,o){return!(o.right<=t.left||o.bottom<=t.top||o.position.x>=t.right||o.position.y>=t.bottom)};module.exports=t;
},{}],889:[function(require,module,exports) {
var t=require("./TileCheckX"),e=require("./TileCheckY"),a=require("./TileIntersectsBody"),r=function(r,i,o,s,l,f){var h=s.left,n=s.top,b=s.right,u=s.bottom,c=o.faceLeft||o.faceRight,d=o.faceTop||o.faceBottom;if(!c&&!d)return!1;var m=0,M=0,p=0,A=1;if(i.deltaAbsX()>i.deltaAbsY()?p=-1:i.deltaAbsX()<i.deltaAbsY()&&(A=-1),0!==i.deltaX()&&0!==i.deltaY()&&c&&d&&(p=Math.min(Math.abs(i.position.x-b),Math.abs(i.right-h)),A=Math.min(Math.abs(i.position.y-u),Math.abs(i.bottom-n))),p<A){if(c&&0!==(m=t(i,o,h,b,f))&&!a(s,i))return!0;d&&(M=e(i,o,n,u,f))}else{if(d&&0!==(M=e(i,o,n,u,f))&&!a(s,i))return!0;c&&(m=t(i,o,h,b,f))}return 0!==m||0!==M};module.exports=r;
},{"./TileCheckX":919,"./TileCheckY":920,"./TileIntersectsBody":887}],874:[function(require,module,exports) {
var e=require("./GetOverlapX"),o=function(o,m,t,a){var r=e(o,m,t,a);if(t||0===r||o.immovable&&m.immovable||o.customSeparateX||m.customSeparateX)return 0!==r||o.embedded&&m.embedded;var v=o.velocity.x,i=m.velocity.x;if(o.immovable||m.immovable)o.immovable?(m.x+=r,m.velocity.x=v-i*m.bounce.x,o.moves&&(m.y+=(o.y-o.prev.y)*o.friction.y)):(o.x-=r,o.velocity.x=i-v*o.bounce.x,m.moves&&(o.y+=(m.y-m.prev.y)*m.friction.y));else{r*=.5,o.x-=r,m.x+=r;var s=Math.sqrt(i*i*m.mass/o.mass)*(i>0?1:-1),c=Math.sqrt(v*v*o.mass/m.mass)*(v>0?1:-1),x=.5*(s+c);s-=x,c-=x,o.velocity.x=x+s*o.bounce.x,m.velocity.x=x+c*m.bounce.x}return!0};module.exports=o;
},{"./GetOverlapX":872}],875:[function(require,module,exports) {
var e=require("./GetOverlapY"),o=function(o,m,t,a){var r=e(o,m,t,a);if(t||0===r||o.immovable&&m.immovable||o.customSeparateY||m.customSeparateY)return 0!==r||o.embedded&&m.embedded;var v=o.velocity.y,y=m.velocity.y;if(o.immovable||m.immovable)o.immovable?(m.y+=r,m.velocity.y=v-y*m.bounce.y,o.moves&&(m.x+=(o.x-o.prev.x)*o.friction.x)):(o.y-=r,o.velocity.y=y-v*o.bounce.y,m.moves&&(o.x+=(m.x-m.prev.x)*m.friction.x));else{r*=.5,o.y-=r,m.y+=r;var i=Math.sqrt(y*y*m.mass/o.mass)*(y>0?1:-1),s=Math.sqrt(v*v*o.mass/m.mass)*(v>0?1:-1),c=.5*(i+s);i-=c,s-=c,o.velocity.y=c+i*o.bounce.y,m.velocity.y=c+s*m.bounce.y}return!0};module.exports=o;
},{"./GetOverlapY":873}],795:[function(require,module,exports) {
var t=require("../../geom/circle/Contains"),i=require("../../utils/Class"),s=require("./const"),e=require("../../geom/rectangle/Contains"),h=require("../../math/Vector2"),o=new i({initialize:function(t,i){this.world=t,this.gameObject=i,this.debugShowBody=t.defaults.debugShowStaticBody,this.debugBodyColor=t.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new h,this.position=new h(i.x-i.displayOriginX,i.y-i.displayOriginY),this.width=i.displayWidth,this.height=i.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new h(i.x+this.halfWidth,i.y+this.halfHeight),this.velocity=h.ZERO,this.allowGravity=!1,this.gravity=h.ZERO,this.bounce=h.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=s.STATIC_BODY},setGameObject:function(t,i){return t&&t!==this.gameObject&&(this.gameObject.body=null,t.body=this,this.gameObject=t),i&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var t=this.gameObject;return t.getTopLeft(this.position),this.width=t.displayWidth,this.height=t.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setSize:function(t,i,s,e){return void 0===s&&(s=this.offset.x),void 0===e&&(e=this.offset.y),this.world.staticTree.remove(this),this.width=t,this.height=i,this.halfWidth=Math.floor(t/2),this.halfHeight=Math.floor(i/2),this.offset.set(s,e),this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(t,i,s){return void 0===i&&(i=this.offset.x),void 0===s&&(s=this.offset.y),t>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=t,this.width=2*t,this.height=2*t,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(i,s),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(t,i){var s=this.gameObject;void 0===t&&(t=s.x),void 0===i&&(i=s.y),this.world.staticTree.remove(this),s.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(t){return t.x=this.x,t.y=this.y,t.right=this.right,t.bottom=this.bottom,t},hitTest:function(i,s){return this.isCircle?t(this,i,s):e(this,i,s)},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(t){var i=this.position;this.debugShowBody&&(t.lineStyle(1,this.debugBodyColor,1),t.strokeRect(i.x,i.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(t){return t<=0&&(t=.1),this.mass=t,this},x:{get:function(){return this.position.x},set:function(t){this.world.staticTree.remove(this),this.position.x=t,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(t){this.world.staticTree.remove(this),this.position.y=t,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});module.exports=o;
},{"../../geom/circle/Contains":379,"../../utils/Class":8,"./const":787,"../../geom/rectangle/Contains":113,"../../math/Vector2":96}],797:[function(require,module,exports) {
var e=require("./Body"),t=require("../../math/Clamp"),i=require("../../utils/Class"),r=require("./Collider"),o=require("./const"),s=require("../../math/distance/DistanceBetween"),l=require("eventemitter3"),a=require("./GetOverlapX"),n=require("./GetOverlapY"),h=require("../../utils/object/GetValue"),c=require("../../structs/ProcessQueue"),d=require("./tilemap/ProcessTileCallbacks"),y=require("../../geom/rectangle/Rectangle"),u=require("../../structs/RTree"),b=require("./tilemap/SeparateTile"),v=require("./SeparateX"),p=require("./SeparateY"),g=require("../../structs/Set"),m=require("./StaticBody"),f=require("./tilemap/TileIntersectsBody"),x=require("../../math/Vector2"),C=require("../../math/Wrap"),w=new i({Extends:l,initialize:function(e,t){l.call(this),this.scene=e,this.bodies=new g,this.staticBodies=new g,this.pendingDestroy=new g,this.colliders=new c,this.gravity=new x(h(t,"gravity.x",0),h(t,"gravity.y",0)),this.bounds=new y(h(t,"x",0),h(t,"y",0),h(t,"width",e.sys.game.config.width),h(t,"height",e.sys.game.config.height)),this.checkCollision={up:h(t,"checkCollision.up",!0),down:h(t,"checkCollision.down",!0),left:h(t,"checkCollision.left",!0),right:h(t,"checkCollision.right",!0)},this.OVERLAP_BIAS=h(t,"overlapBias",4),this.TILE_BIAS=h(t,"tileBias",16),this.forceX=h(t,"forceX",!1),this.isPaused=h(t,"isPaused",!1),this._total=0,this.drawDebug=h(t,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:h(t,"debugShowBody",!0),debugShowStaticBody:h(t,"debugShowStaticBody",!0),debugShowVelocity:h(t,"debugShowVelocity",!0),bodyDebugColor:h(t,"debugBodyColor",16711935),staticBodyDebugColor:h(t,"debugStaticBodyColor",255),velocityDebugColor:h(t,"debugVelocityColor",65280)},this.maxEntries=h(t,"maxEntries",16),this.tree=new u(this.maxEntries,[".left",".top",".right",".bottom"]),this.staticTree=new u(this.maxEntries,[".left",".top",".right",".bottom"]),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this.drawDebug&&this.createDebugGraphic()},enable:function(e,t){void 0===t&&(t=o.DYNAMIC_BODY);var i=1;if(Array.isArray(e))for(i=e.length;i--;)e[i].hasOwnProperty("children")?this.enable(e[i].children.entries,t):this.enableBody(e[i],t);else e.hasOwnProperty("children")?this.enable(e.children.entries,t):this.enableBody(e,t)},enableBody:function(t,i){return null===t.body&&(i===o.DYNAMIC_BODY?(t.body=new e(this,t),this.bodies.set(t.body)):i===o.STATIC_BODY&&(t.body=new m(this,t),this.staticBodies.set(t.body),this.staticTree.insert(t.body))),t},remove:function(e){this.disableBody(e)},disable:function(e){var t=1;if(Array.isArray(e))for(t=e.length;t--;)e[t].hasOwnProperty("children")?this.disable(e[t].children.entries):this.disableGameObjectBody(e[t]);else e.hasOwnProperty("children")?this.disable(e.children.entries):this.disableGameObjectBody(e)},disableGameObjectBody:function(e){return e.body&&(e.body.physicsType===o.DYNAMIC_BODY?this.bodies.delete(e.body):e.body.physicsType===o.STATIC_BODY&&(this.staticBodies.delete(e.body),this.staticTree.remove(e.body)),e.body.enable=!1),e},disableBody:function(e){e.physicsType===o.DYNAMIC_BODY?(this.tree.remove(e),this.bodies.delete(e)):e.physicsType===o.STATIC_BODY&&(this.staticBodies.delete(e),this.staticTree.remove(e)),e.enable=!1},createDebugGraphic:function(){var e=this.scene.sys.add.graphics({x:0,y:0});return e.setDepth(Number.MAX_VALUE),this.debugGraphic=e,this.drawDebug=!0,e},setBounds:function(e,t,i,r,o,s,l,a){return this.bounds.setTo(e,t,i,r),void 0!==o&&this.setBoundsCollision(o,s,l,a),this},setBoundsCollision:function(e,t,i,r){return void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===r&&(r=!0),this.checkCollision.left=e,this.checkCollision.right=t,this.checkCollision.up=i,this.checkCollision.down=r,this},pause:function(){return this.isPaused=!0,this.emit("pause"),this},resume:function(){return this.isPaused=!1,this.emit("resume"),this},addCollider:function(e,t,i,o,s){void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=i);var l=new r(this,!1,e,t,i,o,s);return this.colliders.add(l),l},addOverlap:function(e,t,i,o,s){void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=i);var l=new r(this,!0,e,t,i,o,s);return this.colliders.add(l),l},removeCollider:function(e){return this.colliders.remove(e),this},update:function(e,t){if(!this.isPaused&&0!==this.bodies.size){var i,r;t/=1e3,this.delta=t;var o=this.bodies.entries,s=o.length;for(i=0;i<s;i++)(r=o[i]).enable&&r.update(t);this.tree.clear(),this.tree.load(o);var l=this.colliders.update();for(i=0;i<l.length;i++){var a=l[i];a.active&&a.update()}}},postUpdate:function(){var e,t,i=this.bodies,r=this.staticBodies,s=this.pendingDestroy,l=i.entries,a=l.length;for(e=0;e<a;e++)(t=l[e]).enable&&t.postUpdate();if(this.drawDebug){var n=this.debugGraphic;for(n.clear(),e=0;e<a;e++)(t=l[e]).willDrawDebug()&&t.drawDebug(n);for(a=(l=r.entries).length,e=0;e<a;e++)(t=l[e]).willDrawDebug()&&t.drawDebug(n)}if(s.size>0){var h=this.tree,c=this.staticTree;for(a=(l=s.entries).length,e=0;e<a;e++)(t=l[e]).physicsType===o.DYNAMIC_BODY?(h.remove(t),i.delete(t)):t.physicsType===o.STATIC_BODY&&(c.remove(t),r.delete(t)),t.world=void 0,t.gameObject=void 0;s.clear()}},updateMotion:function(e){if(e.allowRotation){var t=this.computeVelocity(0,e,e.angularVelocity,e.angularAcceleration,e.angularDrag,e.maxAngular)-e.angularVelocity;e.angularVelocity+=t,e.rotation+=e.angularVelocity*this.delta}e.velocity.x=this.computeVelocity(1,e,e.velocity.x,e.acceleration.x,e.drag.x,e.maxVelocity.x),e.velocity.y=this.computeVelocity(2,e,e.velocity.y,e.acceleration.y,e.drag.y,e.maxVelocity.y)},computeVelocity:function(e,t,i,r,o,s){return void 0===s&&(s=1e4),1===e&&t.allowGravity?i+=(this.gravity.x+t.gravity.x)*this.delta:2===e&&t.allowGravity&&(i+=(this.gravity.y+t.gravity.y)*this.delta),r?i+=r*this.delta:o&&t.allowDrag&&(i-(o*=this.delta)>0?i-=o:i+o<0?i+=o:i=0),i>s?i=s:i<-s&&(i=-s),i},separate:function(e,t,i,r,o){if(!e.enable||!t.enable||e.checkCollision.none||t.checkCollision.none||!this.intersects(e,t))return!1;if(i&&!1===i.call(r,e.gameObject,t.gameObject))return!1;if(e.isCircle&&t.isCircle)return this.separateCircle(e,t,o);if(e.isCircle!==t.isCircle){var s=e.isCircle?t:e,l=e.isCircle?e:t,a={x:s.x,y:s.y,right:s.right,bottom:s.bottom},n=l.center;if((n.y<a.y||n.y>a.bottom)&&(n.x<a.x||n.x>a.right))return this.separateCircle(e,t,o)}var h=!1,c=!1;this.forceX||Math.abs(this.gravity.y+e.gravity.y)<Math.abs(this.gravity.x+e.gravity.x)?(h=v(e,t,o,this.OVERLAP_BIAS),this.intersects(e,t)&&(c=p(e,t,o,this.OVERLAP_BIAS))):(c=p(e,t,o,this.OVERLAP_BIAS),this.intersects(e,t)&&(h=v(e,t,o,this.OVERLAP_BIAS)));var d=h||c;return d&&(o&&(e.onOverlap||t.onOverlap)?this.emit("overlap",e.gameObject,t.gameObject,e,t):(e.onCollide||t.onCollide)&&this.emit("collide",e.gameObject,t.gameObject,e,t)),d},separateCircle:function(e,t,i,r){a(e,t,!1,r),n(e,t,!1,r);var o=t.center.x-e.center.x,l=t.center.y-e.center.y,h=Math.atan2(l,o),c=0;if(e.isCircle!==t.isCircle){var d={x:t.isCircle?e.position.x:t.position.x,y:t.isCircle?e.position.y:t.position.y,right:t.isCircle?e.right:t.right,bottom:t.isCircle?e.bottom:t.bottom},y={x:e.isCircle?e.center.x:t.center.x,y:e.isCircle?e.center.y:t.center.y,radius:e.isCircle?e.halfWidth:t.halfWidth};y.y<d.y?y.x<d.x?c=s(y.x,y.y,d.x,d.y)-y.radius:y.x>d.right&&(c=s(y.x,y.y,d.right,d.y)-y.radius):y.y>d.bottom&&(y.x<d.x?c=s(y.x,y.y,d.x,d.bottom)-y.radius:y.x>d.right&&(c=s(y.x,y.y,d.right,d.bottom)-y.radius)),c*=-1}else c=e.halfWidth+t.halfWidth-s(e.center.x,e.center.y,t.center.x,t.center.y);if(i||0===c||e.immovable&&t.immovable||e.customSeparateX||t.customSeparateX)return 0!==c&&(e.onOverlap||t.onOverlap)&&this.emit("overlap",e.gameObject,t.gameObject,e,t),0!==c;var u=e.velocity.x,b=e.velocity.y,v=e.mass,p=t.velocity.x,g=t.velocity.y,m=t.mass,f=u*Math.cos(h)+b*Math.sin(h),x=u*Math.sin(h)-b*Math.cos(h),C=p*Math.cos(h)+g*Math.sin(h),w=p*Math.sin(h)-g*Math.cos(h),O=((v-m)*f+2*m*C)/(v+m),B=(2*v*f+(m-v)*C)/(v+m);return e.immovable||(e.velocity.x=(O*Math.cos(h)-x*Math.sin(h))*e.bounce.x,e.velocity.y=(x*Math.cos(h)+O*Math.sin(h))*e.bounce.y,u=e.velocity.x,b=e.velocity.y),t.immovable||(t.velocity.x=(B*Math.cos(h)-w*Math.sin(h))*t.bounce.x,t.velocity.y=(w*Math.cos(h)+B*Math.sin(h))*t.bounce.y,p=t.velocity.x,g=t.velocity.y),Math.abs(h)<Math.PI/2?u>0&&!e.immovable&&p>u?e.velocity.x*=-1:p<0&&!t.immovable&&u<p?t.velocity.x*=-1:b>0&&!e.immovable&&g>b?e.velocity.y*=-1:g<0&&!t.immovable&&b<g&&(t.velocity.y*=-1):Math.abs(h)>Math.PI/2&&(u<0&&!e.immovable&&p<u?e.velocity.x*=-1:p>0&&!t.immovable&&u>p?t.velocity.x*=-1:b<0&&!e.immovable&&g<b?e.velocity.y*=-1:g>0&&!t.immovable&&u>g&&(t.velocity.y*=-1)),e.immovable||(e.x+=e.velocity.x*this.delta-c*Math.cos(h),e.y+=e.velocity.y*this.delta-c*Math.sin(h)),t.immovable||(t.x+=t.velocity.x*this.delta+c*Math.cos(h),t.y+=t.velocity.y*this.delta+c*Math.sin(h)),(e.onCollide||t.onCollide)&&this.emit("collide",e.gameObject,t.gameObject,e,t),!0},intersects:function(e,t){return e!==t&&(e.isCircle?t.isCircle?s(e.center.x,e.center.y,t.center.x,t.center.y)<=e.halfWidth+t.halfWidth:this.circleBodyIntersects(e,t):t.isCircle?this.circleBodyIntersects(t,e):!(e.right<=t.position.x)&&(!(e.bottom<=t.position.y)&&(!(e.position.x>=t.right)&&!(e.position.y>=t.bottom))))},circleBodyIntersects:function(e,i){var r=t(e.center.x,i.left,i.right),o=t(e.center.y,i.top,i.bottom);return(e.center.x-r)*(e.center.x-r)+(e.center.y-o)*(e.center.y-o)<=e.halfWidth*e.halfWidth},overlap:function(e,t,i,r,o){return void 0===i&&(i=null),void 0===r&&(r=null),void 0===o&&(o=i),this.collideObjects(e,t,i,r,o,!0)},collide:function(e,t,i,r,o){return void 0===i&&(i=null),void 0===r&&(r=null),void 0===o&&(o=i),this.collideObjects(e,t,i,r,o,!1)},collideObjects:function(e,t,i,r,o,s){var l;e=e.isParent&&void 0===e.physicsType?e.children.entries:e,t=t.isParent&&void 0===t.physicsType?t.children.entries:t;var a=Array.isArray(e),n=Array.isArray(t);if(this._total=0,a||n)if(!a&&n)for(l=0;l<t.length;l++)this.collideHandler(e,t[l],i,r,o,s);else if(a&&!n)for(l=0;l<e.length;l++)this.collideHandler(e[l],t,i,r,o,s);else for(l=0;l<e.length;l++)for(var h=0;h<t.length;h++)this.collideHandler(e[l],t[h],i,r,o,s);else this.collideHandler(e,t,i,r,o,s);return this._total>0},collideHandler:function(e,t,i,r,o,s){if(void 0===t&&e.isParent)return this.collideGroupVsGroup(e,e,i,r,o,s);if(!e||!t)return!1;if(e.body){if(t.body)return this.collideSpriteVsSprite(e,t,i,r,o,s);if(t.isParent)return this.collideSpriteVsGroup(e,t,i,r,o,s);if(t.isTilemap)return this.collideSpriteVsTilemapLayer(e,t,i,r,o,s)}else if(e.isParent){if(t.body)return this.collideSpriteVsGroup(t,e,i,r,o,s);if(t.isParent)return this.collideGroupVsGroup(e,t,i,r,o,s);if(t.isTilemap)return this.collideGroupVsTilemapLayer(e,t,i,r,o,s)}else if(e.isTilemap){if(t.body)return this.collideSpriteVsTilemapLayer(t,e,i,r,o,s);if(t.isParent)return this.collideGroupVsTilemapLayer(t,e,i,r,o,s)}},collideSpriteVsSprite:function(e,t,i,r,o,s){return!(!e.body||!t.body)&&(this.separate(e.body,t.body,r,o,s)&&(i&&i.call(o,e,t),this._total++),!0)},collideSpriteVsGroup:function(e,t,i,r,s,l){var a=e.body;if(0!==t.length&&a){var n=this.treeMinMax;n.minX=a.left,n.minY=a.top,n.maxX=a.right,n.maxY=a.bottom;var h=t.physicsType===o.DYNAMIC_BODY?this.tree.search(n):this.staticTree.search(n);if(0!==h.length)for(var c=t.getChildren(),d=0;d<c.length;d++){var y=c[d].body;y&&a!==y&&-1!==h.indexOf(y)&&(this.separate(a,y,r,s,l)&&(i&&i.call(s,a.gameObject,y.gameObject),this._total++))}}},collideGroupVsTilemapLayer:function(e,t,i,r,o,s){var l=e.getChildren();if(0===l.length)return!1;for(var a=!1,n=0;n<l.length;n++)l[n].body&&this.collideSpriteVsTilemapLayer(l[n],t,i,r,o,s)&&(a=!0);return a},collideSpriteVsTilemapLayer:function(e,t,i,r,o,s){var l=e.body;if(!l.enable)return!1;var a=l.position.x,n=l.position.y,h=l.width,c=l.height,y=t.layer;if(y.tileWidth>y.baseTileWidth){var u=(y.tileWidth-y.baseTileWidth)*t.scaleX;a-=u,h+=u}y.tileHeight>y.baseTileHeight&&(c+=(y.tileHeight-y.baseTileHeight)*t.scaleY);var v,p=t.getTilesWithinWorldXY(a,n,h,c);if(0===p.length)return!1;for(var g={left:0,right:0,top:0,bottom:0},m=0;m<p.length;m++)v=p[m],g.left=t.tileToWorldX(v.x),g.top=t.tileToWorldY(v.y),v.baseHeight!==v.height&&(g.top-=(v.height-v.baseHeight)*t.scaleY),g.right=g.left+v.width*t.scaleX,g.bottom=g.top+v.height*t.scaleY,f(g,l)&&(!r||r.call(o,e,v))&&d(v,e)&&(s||b(m,l,v,g,t,this.TILE_BIAS))&&(this._total++,i&&i.call(o,e,v),s&&l.onOverlap?e.emit("overlap",l.gameObject,v,l,null):l.onCollide&&e.emit("collide",l.gameObject,v,l,null))},collideGroupVsGroup:function(e,t,i,r,o,s){if(0!==e.length&&0!==t.length)for(var l=e.getChildren(),a=0;a<l.length;a++)this.collideSpriteVsGroup(l[a],t,i,r,o,s)},wrap:function(e,t){e.body?this.wrapObject(e,t):e.getChildren?this.wrapArray(e.getChildren(),t):Array.isArray(e)?this.wrapArray(e,t):this.wrapObject(e,t)},wrapArray:function(e,t){if(0!==e.length)for(var i=0,r=e.length;i<r;i++)this.wrapObject(e[i],t)},wrapObject:function(e,t){void 0===t&&(t=0),e.x=C(e.x,this.bounds.left-t,this.bounds.right+t),e.y=C(e.y,this.bounds.top-t,this.bounds.bottom+t)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()}});module.exports=w;
},{"./Body":790,"../../math/Clamp":227,"../../utils/Class":8,"./Collider":789,"./const":787,"../../math/distance/DistanceBetween":376,"eventemitter3":35,"./GetOverlapX":872,"./GetOverlapY":873,"../../utils/object/GetValue":53,"../../structs/ProcessQueue":264,"./tilemap/ProcessTileCallbacks":888,"../../geom/rectangle/Rectangle":62,"../../structs/RTree":265,"./tilemap/SeparateTile":889,"./SeparateX":874,"./SeparateY":875,"../../structs/Set":266,"./StaticBody":795,"./tilemap/TileIntersectsBody":887,"../../math/Vector2":96,"../../math/Wrap":254}],788:[function(require,module,exports) {
var t=require("../../utils/Class"),e=require("./Factory"),o=require("../../utils/object/GetFastValue"),i=require("../../utils/object/Merge"),s=require("../../boot/PluginManager"),r=require("./World"),n=require("../../math/distance/DistanceBetween"),u=require("../../math/DegToRad"),l=new t({initialize:function(t){this.scene=t,this.systems=t.sys,t.sys.settings.isBooted||t.sys.events.once("boot",this.boot,this),this.config=this.getConfig(),this.world,this.add},getConfig:function(){var t=this.systems.game.config.physics,e=this.systems.settings.physics;return i(o(e,"arcade",{}),o(t,"arcade",{}))},boot:function(){this.world=new r(this.scene,this.config),this.add=new e(this.world);var t=this.systems.events;t.on("update",this.world.update,this.world),t.on("postupdate",this.world.postUpdate,this.world),t.on("shutdown",this.shutdown,this),t.on("destroy",this.destroy,this)},overlap:function(t,e,o,i,s){return void 0===o&&(o=null),void 0===i&&(i=null),void 0===s&&(s=o),this.world.collideObjects(t,e,o,i,s,!0)},collide:function(t,e,o,i,s){return void 0===o&&(o=null),void 0===i&&(i=null),void 0===s&&(s=o),this.world.collideObjects(t,e,o,i,s,!1)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(t,e,o,i,s,r){void 0===i&&(i=60);var n=Math.atan2(o-t.y,e-t.x);return t.body.acceleration.setToPolar(n,i),void 0!==s&&void 0!==r&&t.body.maxVelocity.set(s,r),n},accelerateToObject:function(t,e,o,i,s){return this.accelerateTo(t,e.x,e.y,o,i,s)},closest:function(t){for(var e=this.tree.all(),o=Number.MAX_VALUE,i=null,s=t.x,r=t.y,u=e.length-1;u>=0;u--){var l=e[u],a=n(s,r,l.x,l.y);a<o&&(i=l,o=a)}return i},furthest:function(t){for(var e=this.tree.all(),o=-1,i=null,s=t.x,r=t.y,u=e.length-1;u>=0;u--){var l=e[u],a=n(s,r,l.x,l.y);a>o&&(i=l,o=a)}return i},moveTo:function(t,e,o,i,s){void 0===i&&(i=60),void 0===s&&(s=0);var r=Math.atan2(o-t.y,e-t.x);return s>0&&(i=n(t.x,t.y,e,o)/(s/1e3)),t.body.velocity.setToPolar(r,i),r},moveToObject:function(t,e,o,i){return this.moveTo(t,e.x,e.y,o,i)},velocityFromAngle:function(t,e,o){return void 0===e&&(e=60),o.setToPolar(u(t),e)},velocityFromRotation:function(t,e,o){return void 0===e&&(e=60),o.setToPolar(t,e)},shutdown:function(){this.world.shutdown()},destroy:function(){this.world.destroy()}});s.register("ArcadePhysics",l,"arcadePhysics"),module.exports=l;
},{"../../utils/Class":8,"./Factory":791,"../../utils/object/GetFastValue":102,"../../utils/object/Merge":866,"../../boot/PluginManager":16,"./World":797,"../../math/distance/DistanceBetween":376,"../../math/DegToRad":228}],530:[function(require,module,exports) {
var r=require("./const"),e=require("../../utils/object/Extend"),i={ArcadePhysics:require("./ArcadePhysics"),Body:require("./Body"),Collider:require("./Collider"),Factory:require("./Factory"),Group:require("./PhysicsGroup"),Image:require("./ArcadeImage"),Sprite:require("./ArcadeSprite"),StaticBody:require("./StaticBody"),StaticGroup:require("./StaticPhysicsGroup"),World:require("./World")};i=e(!1,i,r),module.exports=i;
},{"./const":787,"../../utils/object/Extend":13,"./ArcadePhysics":788,"./Body":790,"./Collider":789,"./Factory":791,"./PhysicsGroup":792,"./ArcadeImage":793,"./ArcadeSprite":794,"./StaticBody":795,"./StaticPhysicsGroup":796,"./World":797}],798:[function(require,module,exports) {
module.exports={NEVER:0,LITE:1,PASSIVE:2,ACTIVE:4,FIXED:8};
},{}],876:[function(require,module,exports) {
var r=require("../../math/Clamp"),e=function(e,t,u,n,a){if(u)return r(t+u*e,-a,a);if(n){var i=n*e;return t-i>0?t-i:t+i<0?t+i:0}return r(t,-a,a)};module.exports=e;
},{"../../math/Clamp":227}],806:[function(require,module,exports) {
module.exports={NONE:0,A:1,B:2,BOTH:3};
},{}],877:[function(require,module,exports) {
var n=function(n,e){if(n.standing=!1,e.collision.y&&(n.bounciness>0&&Math.abs(n.vel.y)>n.minBounceVelocity?n.vel.y*=-n.bounciness:(n.vel.y>0&&(n.standing=!0),n.vel.y=0)),e.collision.x&&(n.bounciness>0&&Math.abs(n.vel.x)>n.minBounceVelocity?n.vel.x*=-n.bounciness:n.vel.x=0),e.collision.slope){var l=e.collision.slope;if(n.bounciness>0){var s=n.vel.x*l.nx+n.vel.y*l.ny;n.vel.x=(n.vel.x-l.nx*s*2)*n.bounciness,n.vel.y=(n.vel.y-l.ny*s*2)*n.bounciness}else{var o=l.x*l.x+l.y*l.y,i=(n.vel.x*l.x+n.vel.y*l.y)/o;n.vel.x=l.x*i,n.vel.y=l.y*i;var v=Math.atan2(l.x,l.y);v>n.slopeStanding.min&&v<n.slopeStanding.max&&(n.standing=!0)}}n.pos.x=e.pos.x,n.pos.y=e.pos.y};module.exports=n;
},{}],800:[function(require,module,exports) {
var i=require("../../utils/Class"),t=require("./COLLIDES"),s=require("./GetVelocity"),e=require("./TYPE"),h=require("./UpdateMotion"),l=new i({initialize:function(i,s,h,l,o){void 0===l&&(l=16),void 0===o&&(o=l),this.world=i,this.gameObject=null,this.enabled=!0,this.parent,this.id=i.getNextID(),this.name="",this.size={x:l,y:o},this.offset={x:0,y:0},this.pos={x:s,y:h},this.last={x:s,y:h},this.vel={x:0,y:0},this.accel={x:0,y:0},this.friction={x:0,y:0},this.maxVel={x:i.defaults.maxVelocityX,y:i.defaults.maxVelocityY},this.standing=!1,this.gravityFactor=i.defaults.gravityFactor,this.bounciness=i.defaults.bounciness,this.minBounceVelocity=i.defaults.minBounceVelocity,this.accelGround=0,this.accelAir=0,this.jumpSpeed=0,this.type=e.NONE,this.checkAgainst=e.NONE,this.collides=t.NEVER,this.debugShowBody=i.defaults.debugShowBody,this.debugShowVelocity=i.defaults.debugShowVelocity,this.debugBodyColor=i.defaults.bodyDebugColor,this.updateCallback,this.slopeStanding={min:.767944870877505,max:2.3736477827122884}},reset:function(i,s){this.pos={x:i,y:s},this.last={x:i,y:s},this.vel={x:0,y:0},this.accel={x:0,y:0},this.friction={x:0,y:0},this.maxVel={x:100,y:100},this.standing=!1,this.gravityFactor=1,this.bounciness=0,this.minBounceVelocity=40,this.accelGround=0,this.accelAir=0,this.jumpSpeed=0,this.type=e.NONE,this.checkAgainst=e.NONE,this.collides=t.NEVER},update:function(i){var t=this.pos;this.last.x=t.x,this.last.y=t.y,this.vel.y+=this.world.gravity*i*this.gravityFactor,this.vel.x=s(i,this.vel.x,this.accel.x,this.friction.x,this.maxVel.x),this.vel.y=s(i,this.vel.y,this.accel.y,this.friction.y,this.maxVel.y);var e=this.vel.x*i,l=this.vel.y*i,o=this.world.collisionMap.trace(t.x,t.y,e,l,this.size.x,this.size.y);this.handleMovementTrace(o)&&h(this,o);var c=this.gameObject;c&&(c.x=t.x-this.offset.x+c.displayOriginX*c.scaleX,c.y=t.y-this.offset.y+c.displayOriginY*c.scaleY),this.updateCallback&&this.updateCallback(this)},drawDebug:function(i){var t=this.pos;if(this.debugShowBody&&(i.lineStyle(1,this.debugBodyColor,1),i.strokeRect(t.x,t.y,this.size.x,this.size.y)),this.debugShowVelocity){var s=t.x+this.size.x/2,e=t.y+this.size.y/2;i.lineStyle(1,this.world.defaults.velocityDebugColor,1),i.lineBetween(s,e,s+this.vel.x,e+this.vel.y)}},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},skipHash:function(){return!this.enabled||0===this.type&&0===this.checkAgainst&&0===this.collides},touches:function(i){return!(this.pos.x>=i.pos.x+i.size.x||this.pos.x+this.size.x<=i.pos.x||this.pos.y>=i.pos.y+i.size.y||this.pos.y+this.size.y<=i.pos.y)},resetSize:function(i,t,s,e){return this.pos.x=i,this.pos.y=t,this.size.x=s,this.size.y=e,this},toJSON:function(){return{name:this.name,size:{x:this.size.x,y:this.size.y},pos:{x:this.pos.x,y:this.pos.y},vel:{x:this.vel.x,y:this.vel.y},accel:{x:this.accel.x,y:this.accel.y},friction:{x:this.friction.x,y:this.friction.y},maxVel:{x:this.maxVel.x,y:this.maxVel.y},gravityFactor:this.gravityFactor,bounciness:this.bounciness,minBounceVelocity:this.minBounceVelocity,type:this.type,checkAgainst:this.checkAgainst,collides:this.collides}},fromJSON:function(){},check:function(){},collideWith:function(i,t){this.parent&&this.parent._collideCallback&&this.parent._collideCallback.call(this.parent._callbackScope,this,i,t)},handleMovementTrace:function(){return!0},destroy:function(){this.world.remove(this),this.enabled=!1,this.world=null,this.gameObject=null,this.parent=null}});module.exports=l;
},{"../../utils/Class":8,"./COLLIDES":798,"./GetVelocity":876,"./TYPE":806,"./UpdateMotion":877}],878:[function(require,module,exports) {
var e=.5,o=1/3,r=2/3;module.exports={2:[0,1,1,0,!0],3:[0,1,1,e,!0],4:[0,e,1,0,!0],5:[0,1,1,r,!0],6:[0,r,1,o,!0],7:[0,o,1,0,!0],8:[e,1,0,0,!0],9:[1,0,e,1,!0],10:[e,1,1,0,!0],11:[0,0,e,1,!0],12:[0,0,1,0,!1],13:[1,1,0,0,!0],14:[1,e,0,0,!0],15:[1,1,0,e,!0],16:[1,o,0,0,!0],17:[1,r,0,o,!0],18:[1,1,0,r,!0],19:[1,1,e,0,!0],20:[e,0,0,1,!0],21:[0,1,e,0,!0],22:[e,0,1,1,!0],23:[1,1,0,1,!1],24:[0,0,1,1,!0],25:[0,0,1,e,!0],26:[0,e,1,1,!0],27:[0,0,1,o,!0],28:[0,o,1,r,!0],29:[0,r,1,1,!0],30:[o,1,0,0,!0],31:[1,0,r,1,!0],32:[r,1,1,0,!0],33:[0,0,o,1,!0],34:[1,0,1,1,!1],35:[1,0,0,1,!0],36:[1,e,0,1,!0],37:[1,0,0,e,!0],38:[1,r,0,1,!0],39:[1,o,0,r,!0],40:[1,0,0,o,!0],41:[r,1,o,0,!0],42:[r,0,o,1,!0],43:[o,1,r,0,!0],44:[o,0,r,1,!0],45:[0,1,0,0,!1],52:[1,1,r,0,!0],53:[o,0,0,1,!0],54:[0,1,o,0,!0],55:[r,0,1,1,!0]};
},{}],799:[function(require,module,exports) {
var i=require("../../utils/Class"),t=require("./DefaultDefs"),s=new i({initialize:function(i,s){void 0===i&&(i=32),this.tilesize=i,this.data=Array.isArray(s)?s:[],this.width=Array.isArray(s)?s[0].length:0,this.height=Array.isArray(s)?s.length:0,this.lastSlope=55,this.tiledef=t},trace:function(i,t,s,e,a,o){var l={collision:{x:!1,y:!1,slope:!1},pos:{x:i+s,y:t+e},tile:{x:0,y:0}};if(!this.data)return l;var h=Math.ceil(Math.max(Math.abs(s),Math.abs(e))/this.tilesize);if(h>1)for(var r=s/h,f=e/h,n=0;n<h&&(r||f)&&(this.step(l,i,t,r,f,a,o,s,e,n),i=l.pos.x,t=l.pos.y,l.collision.x&&(r=0,s=0),l.collision.y&&(f=0,e=0),!l.collision.slope);n++);else this.step(l,i,t,s,e,a,o,s,e,0);return l},step:function(i,t,s,e,a,o,l,h,r,f){var n,p,c=0,x=this.tilesize,y=this.width,M=this.height;if(e){var u=e>0?o:0,v=e<0?x:0,d=Math.max(Math.floor(s/x),0),k=Math.min(Math.ceil((s+l)/x),M);n=Math.floor((i.pos.x+u)/x);var D=Math.floor((t+u)/x);if((f>0||n===D||D<0||D>=y)&&(D=-1),n>=0&&n<y)for(p=d;p<k&&!(-1!==D&&(c=this.data[p][D])>1&&c<=this.lastSlope&&this.checkDef(i,c,t,s,h,r,o,l,D,p));p++)if(1===(c=this.data[p][n])||c>this.lastSlope||c>1&&this.checkDef(i,c,t,s,h,r,o,l,n,p)){if(c>1&&c<=this.lastSlope&&i.collision.slope)break;i.collision.x=!0,i.tile.x=c,i.pos.x=n*x-u+v,t=i.pos.x,h=0;break}}if(a){var S=a>0?l:0,b=a<0?x:0,m=Math.max(Math.floor(i.pos.x/x),0),A=Math.min(Math.ceil((i.pos.x+o)/x),y);p=Math.floor((i.pos.y+S)/x);var z=Math.floor((s+S)/x);if((f>0||p===z||z<0||z>=M)&&(z=-1),p>=0&&p<M)for(n=m;n<A&&!(-1!==z&&(c=this.data[z][n])>1&&c<=this.lastSlope&&this.checkDef(i,c,t,s,h,r,o,l,n,z));n++)if(1===(c=this.data[p][n])||c>this.lastSlope||c>1&&this.checkDef(i,c,t,s,h,r,o,l,n,p)){if(c>1&&c<=this.lastSlope&&i.collision.slope)break;i.collision.y=!0,i.tile.y=c,i.pos.y=p*x-S+b;break}}},checkDef:function(i,t,s,e,a,o,l,h,r,f){var n=this.tiledef[t];if(!n)return!1;var p=this.tilesize,c=(r+n[0])*p,x=(f+n[1])*p,y=(n[2]-n[0])*p,M=(n[3]-n[1])*p,u=n[4],v=s+a+(M<0?l:0)-c,d=e+o+(y>0?h:0)-x;if(y*d-M*v>0){if(a*-M+o*y<0)return u;var k=Math.sqrt(y*y+M*M),D=M/k,S=-y/k,b=v*D+d*S,m=D*b,A=S*b;return m*m+A*A>=a*a+o*o?u||y*(d-o)-M*(v-a)<.5:(i.pos.x=s+a-m,i.pos.y=e+o-A,i.collision.slope={x:y,y:M,nx:D,ny:S},!0)}return!1}});module.exports=s;
},{"../../utils/Class":8,"./DefaultDefs":878}],1015:[function(require,module,exports) {
var t={setAccelerationX:function(t){return this.accel.x=t,this},setAccelerationY:function(t){return this.accel.y=t,this},setAcceleration:function(t,e){return this.accel.x=t,this.accel.y=e,this}};module.exports=t;
},{}],1016:[function(require,module,exports) {
var e={setBodySize:function(e,t){return void 0===t&&(t=e),this.body.size.x=Math.round(e),this.body.size.y=Math.round(t),this},setBodyScale:function(e,t){void 0===t&&(t=e);var i=this.body.gameObject;return i?(i.setScale(e,t),this.setBodySize(i.width*i.scaleX,i.height*i.scaleY)):this.setBodySize(this.body.size.x*e,this.body.size.y*t)}};module.exports=e;
},{}],1017:[function(require,module,exports) {
var t=require("../TYPE"),e={getBodyType:function(){return this.body.type},setTypeNone:function(){return this.body.type=t.NONE,this},setTypeA:function(){return this.body.type=t.A,this},setTypeB:function(){return this.body.type=t.B,this}};module.exports=e;
},{"../TYPE":806}],1019:[function(require,module,exports) {
var n={setBounce:function(n){return this.body.bounciness=n,this},setMinBounceVelocity:function(n){return this.body.minBounceVelocity=n,this},bounce:{get:function(){return this.body.bounciness},set:function(n){this.body.bounciness=n}}};module.exports=n;
},{}],1018:[function(require,module,exports) {
var t=require("../TYPE"),s={setAvsB:function(){return this.setTypeA(),this.setCheckAgainstB()},setBvsA:function(){return this.setTypeB(),this.setCheckAgainstA()},setCheckAgainstNone:function(){return this.body.checkAgainst=t.NONE,this},setCheckAgainstA:function(){return this.body.checkAgainst=t.A,this},setCheckAgainstB:function(){return this.body.checkAgainst=t.B,this},checkAgainst:{get:function(){return this.body.checkAgainst},set:function(t){this.body.checkAgainst=t}}};module.exports=s;
},{"../TYPE":806}],1020:[function(require,module,exports) {
var t=require("../COLLIDES"),i={_collideCallback:null,_callbackScope:null,setCollideCallback:function(t,i){return this._collideCallback=t,i&&(this._callbackScope=i),this},setCollidesNever:function(){return this.body.collides=t.NEVER,this},setLite:function(){return this.body.collides=t.LITE,this},setPassive:function(){return this.body.collides=t.PASSIVE,this},setActive:function(){return this.body.collides=t.ACTIVE,this},setFixed:function(){return this.body.collides=t.FIXED,this},collides:{get:function(){return this.body.collides},set:function(t){this.body.collides=t}}};module.exports=i;
},{"../COLLIDES":798}],1022:[function(require,module,exports) {
var i={setFrictionX:function(i){return this.friction.x=i,this},setFrictionY:function(i){return this.friction.y=i,this},setFriction:function(i,t){return this.friction.x=i,this.friction.y=t,this}};module.exports=i;
},{}],1023:[function(require,module,exports) {
var t={setGravity:function(t){return this.body.gravityFactor=t,this},gravity:{get:function(){return this.body.gravityFactor},set:function(t){this.body.gravityFactor=t}}};module.exports=t;
},{}],1024:[function(require,module,exports) {
var t={setOffset:function(t,s,e,o){return this.body.offset.x=t,this.body.offset.y=s,e&&this.setBodySize(e,o),this}};module.exports=t;
},{}],1025:[function(require,module,exports) {
var e={setGameObject:function(e,t){return void 0===t&&(t=!0),e?(this.body.gameObject=e,t&&this.syncGameObject()):this.body.gameObject=null,this},syncGameObject:function(){var e=this.body.gameObject;return e&&this.setBodySize(e.width*e.scaleX,e.height*e.scaleY),this}};module.exports=e;
},{}],1026:[function(require,module,exports) {
var t={setVelocityX:function(t){return this.vel.x=t,this},setVelocityY:function(t){return this.vel.y=t,this},setVelocity:function(t,e){return void 0===e&&(e=t),this.vel.x=t,this.vel.y=e,this},setMaxVelocity:function(t,e){return void 0===e&&(e=t),this.maxVel.x=t,this.maxVel.y=e,this}};module.exports=t;
},{}],942:[function(require,module,exports) {
module.exports={Acceleration:require("./Acceleration"),BodyScale:require("./BodyScale"),BodyType:require("./BodyType"),Bounce:require("./Bounce"),CheckAgainst:require("./CheckAgainst"),Collides:require("./Collides"),Debug:require("./Debug"),Friction:require("./Friction"),Gravity:require("./Gravity"),Offset:require("./Offset"),SetGameObject:require("./SetGameObject"),Velocity:require("./Velocity")};
},{"./Acceleration":1015,"./BodyScale":1016,"./BodyType":1017,"./Bounce":1019,"./CheckAgainst":1018,"./Collides":1020,"./Debug":1006,"./Friction":1022,"./Gravity":1023,"./Offset":1024,"./SetGameObject":1025,"./Velocity":1026}],803:[function(require,module,exports) {
var i=require("../../utils/Class"),e=require("./components"),t=new i({Mixins:[e.Acceleration,e.BodyScale,e.BodyType,e.Bounce,e.CheckAgainst,e.Collides,e.Debug,e.Friction,e.Gravity,e.Offset,e.SetGameObject,e.Velocity],initialize:function(i,e,t,s,o){this.body=i.create(e,t,s,o),this.body.parent=this,this.size=this.body.size,this.offset=this.body.offset,this.vel=this.body.vel,this.accel=this.body.accel,this.friction=this.body.friction,this.maxVel=this.body.maxVel}});module.exports=t;
},{"../../utils/Class":8,"./components":942}],801:[function(require,module,exports) {
var e=require("../../utils/Class"),i=require("./components"),t=require("../../gameobjects/image/Image"),s=new e({Extends:t,Mixins:[i.Acceleration,i.BodyScale,i.BodyType,i.Bounce,i.CheckAgainst,i.Collides,i.Debug,i.Friction,i.Gravity,i.Offset,i.SetGameObject,i.Velocity],initialize:function(e,i,s,h,o){t.call(this,e.scene,i,s,h,o),this.body=e.create(i-this.frame.centerX,s-this.frame.centerY,this.width,this.height),this.body.parent=this,this.body.gameObject=this,this.size=this.body.size,this.offset=this.body.offset,this.vel=this.body.vel,this.accel=this.body.accel,this.friction=this.body.friction,this.maxVel=this.body.maxVel}});module.exports=s;
},{"../../utils/Class":8,"./components":942,"../../gameobjects/image/Image":284}],805:[function(require,module,exports) {
var e=require("../../utils/Class"),i=require("./components"),t=require("../../gameobjects/sprite/Sprite"),s=new e({Extends:t,Mixins:[i.Acceleration,i.BodyScale,i.BodyType,i.Bounce,i.CheckAgainst,i.Collides,i.Debug,i.Friction,i.Gravity,i.Offset,i.SetGameObject,i.Velocity],initialize:function(e,i,s,h,o){t.call(this,e.scene,i,s,h,o),this.body=e.create(i-this.frame.centerX,s-this.frame.centerY,this.width,this.height),this.body.parent=this,this.body.gameObject=this,this.size=this.body.size,this.offset=this.body.offset,this.vel=this.body.vel,this.accel=this.body.accel,this.friction=this.body.friction,this.maxVel=this.body.maxVel}});module.exports=s;
},{"../../utils/Class":8,"./components":942,"../../gameobjects/sprite/Sprite":289}],802:[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("./ImpactBody"),i=require("./ImpactImage"),r=require("./ImpactSprite"),s=new e({initialize:function(e){this.world=e,this.sys=e.scene.sys},body:function(e,i,r,s){return new t(this.world,e,i,r,s)},existing:function(e){var t=e.x-e.frame.centerX,i=e.y-e.frame.centerY,r=e.width,s=e.height;return e.body=this.world.create(t,i,r,s),e.body.parent=e,e.body.gameObject=e,e},image:function(e,t,r,s){var n=new i(this.world,e,t,r,s);return this.sys.displayList.add(n),n},sprite:function(e,t,i,s){var n=new r(this.world,e,t,i,s);return this.sys.displayList.add(n),this.sys.updateList.add(n),n}});module.exports=s;
},{"../../utils/Class":8,"./ImpactBody":803,"./ImpactImage":801,"./ImpactSprite":805}],917:[function(require,module,exports) {
var s=function(s,o,e,x){var p=o.pos.x+o.size.x-e.pos.x;if(x){var i=o===x?e:o;x.vel.x=-x.vel.x*x.bounciness+i.vel.x;var l=s.collisionMap.trace(x.pos.x,x.pos.y,x===o?-p:p,0,x.size.x,x.size.y);x.pos.x=l.pos.x}else{var a=(o.vel.x-e.vel.x)/2;o.vel.x=-a,e.vel.x=a;var v=s.collisionMap.trace(o.pos.x,o.pos.y,-p/2,0,o.size.x,o.size.y);o.pos.x=Math.floor(v.pos.x);var r=s.collisionMap.trace(e.pos.x,e.pos.y,p/2,0,e.size.x,e.size.y);e.pos.x=Math.ceil(r.pos.x)}};module.exports=s;
},{}],916:[function(require,module,exports) {
var s=function(s,e,o,y){var i,l,p=e.pos.y+e.size.y-o.pos.y;if(y){var a=e===y?o:e;y.vel.y=-y.vel.y*y.bounciness+a.vel.y,i=0,y===e&&Math.abs(y.vel.y-a.vel.y)<y.minBounceVelocity&&(y.standing=!0,i=a.vel.x*s.delta);var n=s.collisionMap.trace(y.pos.x,y.pos.y,i,y===e?-p:p,y.size.x,y.size.y);y.pos.y=n.pos.y,y.pos.x=n.pos.x}else if(s.gravity&&(o.standing||e.vel.y>0))l=s.collisionMap.trace(e.pos.x,e.pos.y,0,-(e.pos.y+e.size.y-o.pos.y),e.size.x,e.size.y),e.pos.y=l.pos.y,e.bounciness>0&&e.vel.y>e.minBounceVelocity?e.vel.y*=-e.bounciness:(e.standing=!0,e.vel.y=0);else{var v=(e.vel.y-o.vel.y)/2;e.vel.y=-v,o.vel.y=v,i=o.vel.x*s.delta,l=s.collisionMap.trace(e.pos.x,e.pos.y,i,-p/2,e.size.x,e.size.y),e.pos.y=l.pos.y;var c=s.collisionMap.trace(o.pos.x,o.pos.y,0,p/2,o.size.x,o.size.y);o.pos.y=c.pos.y}};module.exports=s;
},{}],881:[function(require,module,exports) {
var l=require("./COLLIDES"),e=require("./SeperateX"),i=require("./SeperateY"),t=function(t,s,a){var o=null;s.collides===l.LITE||a.collides===l.FIXED?o=s:a.collides!==l.LITE&&s.collides!==l.FIXED||(o=a),s.last.x+s.size.x>a.last.x&&s.last.x<a.last.x+a.size.x?(s.last.y<a.last.y?i(t,s,a,o):i(t,a,s,o),s.collideWith(a,"y"),a.collideWith(s,"y"),t.emit("collide",s,a,"y")):s.last.y+s.size.y>a.last.y&&s.last.y<a.last.y+a.size.y&&(s.last.x<a.last.x?e(t,s,a,o):e(t,a,s,o),s.collideWith(a,"x"),a.collideWith(s,"x"),t.emit("collide",s,a,"x"))};module.exports=t;
},{"./COLLIDES":798,"./SeperateX":917,"./SeperateY":916}],807:[function(require,module,exports) {
var e=require("./Body"),t=require("../../utils/Class"),i=require("./COLLIDES"),s=require("./CollisionMap"),o=require("eventemitter3"),l=require("../../utils/object/GetFastValue"),r=require("../../utils/object/HasValue"),n=require("../../structs/Set"),a=require("./Solver"),h=require("../../tilemaps/Formats"),c=require("./TYPE"),u=new t({Extends:o,initialize:function(e,t){o.call(this),this.scene=e,this.bodies=new n,this.gravity=l(t,"gravity",0),this.cellSize=l(t,"cellSize",64),this.collisionMap=new s,this.timeScale=l(t,"timeScale",1),this.maxStep=l(t,"maxStep",.05),this.enabled=!0,this.drawDebug=l(t,"debug",!1),this.debugGraphic;var i=l(t,"maxVelocity",100);if(this.defaults={debugShowBody:l(t,"debugShowBody",!0),debugShowVelocity:l(t,"debugShowVelocity",!0),bodyDebugColor:l(t,"debugBodyColor",16711935),velocityDebugColor:l(t,"debugVelocityColor",65280),maxVelocityX:l(t,"maxVelocityX",i),maxVelocityY:l(t,"maxVelocityY",i),minBounceVelocity:l(t,"minBounceVelocity",40),gravityFactor:l(t,"gravityFactor",1),bounciness:l(t,"bounciness",0)},this.walls={left:null,right:null,top:null,bottom:null},this.delta=0,this._lastId=0,l(t,"setBounds",!1)){var r=t.setBounds;if("boolean"==typeof r)this.setBounds();else{var a=l(r,"x",0),h=l(r,"y",0),c=l(r,"width",e.sys.game.config.width),u=l(r,"height",e.sys.game.config.height),d=l(r,"thickness",64),f=l(r,"left",!0),g=l(r,"right",!0),p=l(r,"top",!0),v=l(r,"bottom",!0);this.setBounds(a,h,c,u,d,f,g,p,v)}}this.drawDebug&&this.createDebugGraphic()},setCollisionMap:function(e,t){if("string"==typeof e){var i=this.scene.cache.tilemap.get(e);if(!i||i.format!==h.WELTMEISTER)return console.warn("The specified key does not correspond to a Weltmeister tilemap: "+e),null;for(var o,l=i.data.layer,r=0;r<l.length;r++)if("collision"===l[r].name){o=l[r];break}void 0===t&&(t=o.tilesize),this.collisionMap=new s(t,o.data)}else Array.isArray(e)?this.collisionMap=new s(t,e):console.warn("Invalid Weltmeister collision map data: "+e);return this.collisionMap},setCollisionMapFromTilemapLayer:function(e,t){void 0===t&&(t={});for(var i=l(t,"slopeProperty",null),o=l(t,"slopeMap",null),n=l(t,"defaultCollidingSlope",null),a=l(t,"defaultNonCollidingSlope",0),h=e.layer,c=h.baseTileWidth,u=[],d=0;d<h.height;d++){u[d]=[];for(var f=0;f<h.width;f++){var g=h.data[d][f];g&&g.collides?null!==i&&r(g.properties,i)?u[d][f]=parseInt(g.properties[i],10):null!==o&&r(o,g.index)?u[d][f]=o[g.index]:u[d][f]=null!==n?n:g.index:u[d][f]=a}}return this.collisionMap=new s(c,u),this.collisionMap},setBounds:function(e,t,i,s,o,l,r,n,a){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=this.scene.sys.game.config.width),void 0===s&&(s=this.scene.sys.game.config.height),void 0===o&&(o=64),void 0===l&&(l=!0),void 0===r&&(r=!0),void 0===n&&(n=!0),void 0===a&&(a=!0),this.updateWall(l,"left",e-o,t,o,s),this.updateWall(r,"right",e+i,t,o,s),this.updateWall(n,"top",e,t-o,i,o),this.updateWall(a,"bottom",e,t+s,i,o),this},updateWall:function(e,t,s,o,l,r){var n=this.walls[t];e?n?n.resetSize(s,o,l,r):(this.walls[t]=this.create(s,o,l,r),this.walls[t].name=t,this.walls[t].gravityFactor=0,this.walls[t].collides=i.FIXED):(n&&this.bodies.remove(n),this.walls[t]=null)},createDebugGraphic:function(){var e=this.scene.sys.add.graphics({x:0,y:0});return e.setDepth(Number.MAX_VALUE),this.debugGraphic=e,this.drawDebug=!0,e},getNextID:function(){return this._lastId++},create:function(t,i,s,o){var l=new e(this,t,i,s,o);return this.bodies.set(l),l},remove:function(e){this.bodies.delete(e)},pause:function(){return this.enabled=!1,this.emit("pause"),this},resume:function(){return this.enabled=!0,this.emit("resume"),this},update:function(e,t){if(this.enabled&&0!==this.bodies.size){var i,s,o=Math.min(t/1e3,this.maxStep)*this.timeScale;this.delta=o;var l=this.bodies.entries,r=l.length,n={},a=this.cellSize;for(i=0;i<r;i++)(s=l[i]).enabled&&s.update(o);for(i=0;i<r;i++)(s=l[i]).skipHash()||this.checkHash(s,n,a);if(this.drawDebug){var h=this.debugGraphic;for(h.clear(),i=0;i<r;i++)(s=l[i]).willDrawDebug()&&s.drawDebug(h)}}},checkHash:function(e,t,i){for(var s={},o=Math.floor(e.pos.x/i),l=Math.floor(e.pos.y/i),r=Math.floor((e.pos.x+e.size.x)/i)+1,n=Math.floor((e.pos.y+e.size.y)/i)+1,a=o;a<r;a++)for(var h=l;h<n;h++)if(t[a])if(t[a][h]){for(var c=t[a][h],u=0;u<c.length;u++)e.touches(c[u])&&!s[c[u].id]&&(s[c[u].id]=!0,this.checkBodies(e,c[u]));c.push(e)}else t[a][h]=[e];else t[a]={},t[a][h]=[e]},checkBodies:function(e,t){e.collides===i.FIXED&&t.collides===i.FIXED||(e.checkAgainst&t.type&&e.check(t),t.checkAgainst&e.type&&t.check(e),e.collides&&t.collides&&e.collides+t.collides>i.ACTIVE&&a(this,e,t))},setCollidesNever:function(e){for(var t=0;t<e.length;t++)e[t].collides=i.NEVER;return this},setLite:function(e){for(var t=0;t<e.length;t++)e[t].collides=i.LITE;return this},setPassive:function(e){for(var t=0;t<e.length;t++)e[t].collides=i.PASSIVE;return this},setActive:function(e){for(var t=0;t<e.length;t++)e[t].collides=i.ACTIVE;return this},setFixed:function(e){for(var t=0;t<e.length;t++)e[t].collides=i.FIXED;return this},setTypeNone:function(e){for(var t=0;t<e.length;t++)e[t].type=c.NONE;return this},setTypeA:function(e){for(var t=0;t<e.length;t++)e[t].type=c.A;return this},setTypeB:function(e){for(var t=0;t<e.length;t++)e[t].type=c.B;return this},setAvsB:function(e){for(var t=0;t<e.length;t++)e[t].type=c.A,e[t].checkAgainst=c.B;return this},setBvsA:function(e){for(var t=0;t<e.length;t++)e[t].type=c.B,e[t].checkAgainst=c.A;return this},setCheckAgainstNone:function(e){for(var t=0;t<e.length;t++)e[t].checkAgainst=c.NONE;return this},setCheckAgainstA:function(e){for(var t=0;t<e.length;t++)e[t].checkAgainst=c.A;return this},setCheckAgainstB:function(e){for(var t=0;t<e.length;t++)e[t].checkAgainst=c.B;return this},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners(),this.scene=null,this.bodies.clear(),this.bodies=null,this.collisionMap=null}});module.exports=u;
},{"./Body":800,"../../utils/Class":8,"./COLLIDES":798,"./CollisionMap":799,"eventemitter3":35,"../../utils/object/GetFastValue":102,"../../utils/object/HasValue":470,"../../structs/Set":266,"./Solver":881,"../../tilemaps/Formats":277,"./TYPE":806}],804:[function(require,module,exports) {
var s=require("../../utils/Class"),t=require("./Factory"),i=require("../../utils/object/GetFastValue"),e=require("../../utils/object/Merge"),o=require("../../boot/PluginManager"),r=require("./World"),n=new s({initialize:function(s){this.scene=s,this.systems=s.sys,s.sys.settings.isBooted||s.sys.events.once("boot",this.boot,this),this.config=this.getConfig(),this.world,this.add},getConfig:function(){var s=this.systems.game.config.physics,t=this.systems.settings.physics;return e(i(t,"impact",{}),i(s,"impact",{}))},boot:function(){this.world=new r(this.scene,this.config),this.add=new t(this.world);var s=this.systems.events;s.on("update",this.world.update,this.world),s.on("shutdown",this.shutdown,this),s.on("destroy",this.destroy,this)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},shutdown:function(){this.world.shutdown()},destroy:function(){this.world.destroy()}});o.register("ImpactPhysics",n,"impactPhysics"),module.exports=n;
},{"../../utils/Class":8,"./Factory":802,"../../utils/object/GetFastValue":102,"../../utils/object/Merge":866,"../../boot/PluginManager":16,"./World":807}],531:[function(require,module,exports) {
module.exports={Body:require("./Body"),COLLIDES:require("./COLLIDES"),CollisionMap:require("./CollisionMap"),Factory:require("./Factory"),Image:require("./ImpactImage"),ImpactBody:require("./ImpactBody"),ImpactPhysics:require("./ImpactPhysics"),Sprite:require("./ImpactSprite"),TYPE:require("./TYPE"),World:require("./World")};
},{"./Body":800,"./COLLIDES":798,"./CollisionMap":799,"./Factory":802,"./ImpactImage":801,"./ImpactBody":803,"./ImpactPhysics":804,"./ImpactSprite":805,"./TYPE":806,"./World":807}],912:[function(require,module,exports) {
var n={};module.exports=n,n.create=function(n,t){return{x:n||0,y:t||0}},n.clone=function(n){return{x:n.x,y:n.y}},n.magnitude=function(n){return Math.sqrt(n.x*n.x+n.y*n.y)},n.magnitudeSquared=function(n){return n.x*n.x+n.y*n.y},n.rotate=function(n,t,r){var e=Math.cos(t),x=Math.sin(t);r||(r={});var y=n.x*e-n.y*x;return r.y=n.x*x+n.y*e,r.x=y,r},n.rotateAbout=function(n,t,r,e){var x=Math.cos(t),y=Math.sin(t);e||(e={});var u=r.x+((n.x-r.x)*x-(n.y-r.y)*y);return e.y=r.y+((n.x-r.x)*y+(n.y-r.y)*x),e.x=u,e},n.normalise=function(t){var r=n.magnitude(t);return 0===r?{x:0,y:0}:{x:t.x/r,y:t.y/r}},n.dot=function(n,t){return n.x*t.x+n.y*t.y},n.cross=function(n,t){return n.x*t.y-n.y*t.x},n.cross3=function(n,t,r){return(t.x-n.x)*(r.y-n.y)-(t.y-n.y)*(r.x-n.x)},n.add=function(n,t,r){return r||(r={}),r.x=n.x+t.x,r.y=n.y+t.y,r},n.sub=function(n,t,r){return r||(r={}),r.x=n.x-t.x,r.y=n.y-t.y,r},n.mult=function(n,t){return{x:n.x*t,y:n.y*t}},n.div=function(n,t){return{x:n.x/t,y:n.y/t}},n.perp=function(n,t){return{x:(t=!0===t?-1:1)*-n.y,y:t*n.x}},n.neg=function(n){return{x:-n.x,y:-n.y}},n.angle=function(n,t){return Math.atan2(t.y-n.y,t.x-n.x)},n._temp=[n.create(),n.create(),n.create(),n.create(),n.create(),n.create()];
},{}],902:[function(require,module,exports) {
var n={};module.exports=n,function(){n._nextId=0,n._seed=0,n._nowStartTime=+new Date,n.extend=function(e,r){var t,o;"boolean"==typeof r?(t=2,o=r):(t=1,o=!0);for(var c=t;c<arguments.length;c++){var a=arguments[c];if(a)for(var i in a)o&&a[i]&&a[i].constructor===Object?e[i]&&e[i].constructor!==Object?e[i]=a[i]:(e[i]=e[i]||{},n.extend(e[i],o,a[i])):e[i]=a[i]}return e},n.clone=function(e,r){return n.extend({},r,e)},n.keys=function(n){if(Object.keys)return Object.keys(n);var e=[];for(var r in n)e.push(r);return e},n.values=function(n){var e=[];if(Object.keys){for(var r=Object.keys(n),t=0;t<r.length;t++)e.push(n[r[t]]);return e}for(var o in n)e.push(n[o]);return e},n.get=function(n,e,r,t){e=e.split(".").slice(r,t);for(var o=0;o<e.length;o+=1)n=n[e[o]];return n},n.set=function(e,r,t,o,c){var a=r.split(".").slice(o,c);return n.get(e,r,0,-1)[a[a.length-1]]=t,t},n.shuffle=function(e){for(var r=e.length-1;r>0;r--){var t=Math.floor(n.random()*(r+1)),o=e[r];e[r]=e[t],e[t]=o}return e},n.choose=function(e){return e[Math.floor(n.random()*e.length)]},n.isElement=function(n){return n instanceof HTMLElement},n.isArray=function(n){return"[object Array]"===Object.prototype.toString.call(n)},n.isFunction=function(n){return"function"==typeof n},n.isPlainObject=function(n){return"object"==typeof n&&n.constructor===Object},n.isString=function(n){return"[object String]"===Object.prototype.toString.call(n)},n.clamp=function(n,e,r){return n<e?e:n>r?r:n},n.sign=function(n){return n<0?-1:1},n.now=function(){if(window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-n._nowStartTime},n.random=function(n,r){return n=void 0!==n?n:0,r=void 0!==r?r:1,n+e()*(r-n)};var e=function(){return n._seed=(9301*n._seed+49297)%233280,n._seed/233280};n.colorToNumber=function(n){return 3==(n=n.replace("#","")).length&&(n=n.charAt(0)+n.charAt(0)+n.charAt(1)+n.charAt(1)+n.charAt(2)+n.charAt(2)),parseInt(n,16)},n.logLevel=1,n.log=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.info=function(){console&&n.logLevel>0&&n.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.warn=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.nextId=function(){return n._nextId++},n.map=function(n,e){if(n.map)return n.map(e);for(var r=[],t=0;t<n.length;t+=1)r.push(e(n[t]));return r},n.topologicalSort=function(n){var e=[],t=[],o=[];for(var c in n)t[c]||o[c]||r(c,t,o,n,e);return e};var r=function(n,e,t,o,c){var a=o[n]||[];t[n]=!0;for(var i=0;i<a.length;i+=1){var u=a[i];t[u]||(e[u]||r(u,e,t,o,c))}t[n]=!1,e[n]=!0,c.push(n)};n.chain=function(){for(var n=[],e=0;e<arguments.length;e+=1){var r=arguments[e];r._chained?n.push.apply(n,r._chained):n.push(r)}var t=function(){for(var e,r=new Array(arguments.length),t=0,o=arguments.length;t<o;t++)r[t]=arguments[t];for(t=0;t<n.length;t+=1){var c=n[t].apply(e,r);void 0!==c&&(e=c)}return e};return t._chained=n,t},n.chainPathBefore=function(e,r,t){return n.set(e,r,n.chain(t,n.get(e,r)))},n.chainPathAfter=function(e,r,t){return n.set(e,r,n.chain(n.get(e,r),t))}}();
},{}],913:[function(require,module,exports) {
var r={};module.exports=r;var t=require("../geometry/Vector"),n=require("../core/Common");r.create=function(r,t){for(var n=[],e=0;e<r.length;e++){var o=r[e],a={x:o.x,y:o.y,index:e,body:t,isInternal:!1,contact:null};a.contact={vertex:a,normalImpulse:0,tangentImpulse:0},n.push(a)}return n},r.fromPath=function(t,n){var e=[];return t.replace(/L?\s*([\-\d\.e]+)[\s,]*([\-\d\.e]+)*/gi,function(r,t,n){e.push({x:parseFloat(t),y:parseFloat(n)})}),r.create(e,n)},r.centre=function(n){for(var e,o,a,l=r.area(n,!0),u={x:0,y:0},h=0;h<n.length;h++)a=(h+1)%n.length,e=t.cross(n[h],n[a]),o=t.mult(t.add(n[h],n[a]),e),u=t.add(u,o);return t.div(u,6*l)},r.mean=function(r){for(var n={x:0,y:0},e=0;e<r.length;e++)n.x+=r[e].x,n.y+=r[e].y;return t.div(n,r.length)},r.area=function(r,t){for(var n=0,e=r.length-1,o=0;o<r.length;o++)n+=(r[e].x-r[o].x)*(r[e].y+r[o].y),e=o;return t?n/2:Math.abs(n)/2},r.inertia=function(r,n){for(var e,o,a=0,l=0,u=r,h=0;h<u.length;h++)o=(h+1)%u.length,a+=(e=Math.abs(t.cross(u[o],u[h])))*(t.dot(u[o],u[o])+t.dot(u[o],u[h])+t.dot(u[h],u[h])),l+=e;return n/6*(a/l)},r.translate=function(r,t,n){var e;if(n)for(e=0;e<r.length;e++)r[e].x+=t.x*n,r[e].y+=t.y*n;else for(e=0;e<r.length;e++)r[e].x+=t.x,r[e].y+=t.y;return r},r.rotate=function(r,t,n){if(0!==t){for(var e=Math.cos(t),o=Math.sin(t),a=0;a<r.length;a++){var l=r[a],u=l.x-n.x,h=l.y-n.y;l.x=n.x+(u*e-h*o),l.y=n.y+(u*o+h*e)}return r}},r.contains=function(r,t){for(var n=0;n<r.length;n++){var e=r[n],o=r[(n+1)%r.length];if((t.x-e.x)*(o.y-e.y)+(t.y-e.y)*(e.x-o.x)>0)return!1}return!0},r.scale=function(n,e,o,a){if(1===e&&1===o)return n;var l,u;a=a||r.centre(n);for(var h=0;h<n.length;h++)l=n[h],u=t.sub(l,a),n[h].x=a.x+u.x*e,n[h].y=a.y+u.y*o;return n},r.chamfer=function(r,e,o,a,l){(e="number"==typeof e?[e]:e||[8]).length||(e=[e]),o=void 0!==o?o:-1,a=a||2,l=l||14;for(var u=[],h=0;h<r.length;h++){var c=r[h-1>=0?h-1:r.length-1],f=r[h],s=r[(h+1)%r.length],i=e[h<e.length?h:e.length-1];if(0!==i){var x=t.normalise({x:f.y-c.y,y:c.x-f.x}),y=t.normalise({x:s.y-f.y,y:f.x-s.x}),g=Math.sqrt(2*Math.pow(i,2)),v=t.mult(n.clone(x),i),p=t.normalise(t.mult(t.add(x,y),.5)),d=t.sub(f,t.mult(p,g)),m=o;-1===o&&(m=1.75*Math.pow(i,.32)),(m=n.clamp(m,a,l))%2==1&&(m+=1);for(var M=Math.acos(t.dot(x,y))/m,b=0;b<m;b++)u.push(t.add(t.rotate(v,M*b),d))}else u.push(f)}return u},r.clockwiseSort=function(n){var e=r.mean(n);return n.sort(function(r,n){return t.angle(e,r)-t.angle(e,n)}),n},r.isConvex=function(r){var t,n,e,o,a=0,l=r.length;if(l<3)return null;for(t=0;t<l;t++)if(e=(t+2)%l,o=(r[n=(t+1)%l].x-r[t].x)*(r[e].y-r[n].y),(o-=(r[n].y-r[t].y)*(r[e].x-r[n].x))<0?a|=1:o>0&&(a|=2),3===a)return!1;return 0!==a||null},r.hull=function(r){var n,e,o=[],a=[];for((r=r.slice(0)).sort(function(r,t){var n=r.x-t.x;return 0!==n?n:r.y-t.y}),e=0;e<r.length;e+=1){for(n=r[e];a.length>=2&&t.cross3(a[a.length-2],a[a.length-1],n)<=0;)a.pop();a.push(n)}for(e=r.length-1;e>=0;e-=1){for(n=r[e];o.length>=2&&t.cross3(o[o.length-2],o[o.length-1],n)<=0;)o.pop();o.push(n)}return o.pop(),a.pop(),o.concat(a)};
},{"../geometry/Vector":912,"../core/Common":902}],904:[function(require,module,exports) {
var e={};module.exports=e;var n=require("./Common");e.on=function(e,n,t){for(var r,s=n.split(" "),v=0;v<s.length;v++)r=s[v],e.events=e.events||{},e.events[r]=e.events[r]||[],e.events[r].push(t);return t},e.off=function(e,t,r){if(t){"function"==typeof t&&(r=t,t=n.keys(e.events).join(" "));for(var s=t.split(" "),v=0;v<s.length;v++){var o=e.events[s[v]],f=[];if(r&&o)for(var i=0;i<o.length;i++)o[i]!==r&&f.push(o[i]);e.events[s[v]]=f}}else e.events={}},e.trigger=function(e,t,r){var s,v,o,f;if(e.events){r||(r={}),s=t.split(" ");for(var i=0;i<s.length;i++)if(v=s[i],o=e.events[v]){(f=n.clone(r,!1)).name=v,f.source=e;for(var l=0;l<o.length;l++)o[l].apply(e,[f])}}};
},{"./Common":902}],905:[function(require,module,exports) {
var e={};module.exports=e;var i=require("./Events");e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(i,o){for(var s=o*o*o,n=0;n<i.length;n++){var t=i[n],r=t.speed*t.speed+t.angularSpeed*t.angularSpeed;if(0===t.force.x&&0===t.force.y){var l=Math.min(t.motion,r),p=Math.max(t.motion,r);t.motion=e._minBias*l+(1-e._minBias)*p,t.sleepThreshold>0&&t.motion<e._motionSleepThreshold*s?(t.sleepCounter+=1,t.sleepCounter>=t.sleepThreshold&&e.set(t,!0)):t.sleepCounter>0&&(t.sleepCounter-=1)}else e.set(t,!1)}},e.afterCollisions=function(i,o){for(var s=o*o*o,n=0;n<i.length;n++){var t=i[n];if(t.isActive){var r=t.collision,l=r.bodyA.parent,p=r.bodyB.parent;if(!(l.isSleeping&&p.isSleeping||l.isStatic||p.isStatic)&&(l.isSleeping||p.isSleeping)){var a=l.isSleeping&&!l.isStatic?l:p,g=a===l?p:l;!a.isStatic&&g.motion>e._motionWakeThreshold*s&&e.set(a,!1)}}}},e.set=function(e,o){var s=e.isSleeping;o?(e.isSleeping=!0,e.sleepCounter=e.sleepThreshold,e.positionImpulse.x=0,e.positionImpulse.y=0,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.anglePrev=e.angle,e.speed=0,e.angularSpeed=0,e.motion=0,s||i.trigger(e,"sleepStart")):(e.isSleeping=!1,e.sleepCounter=0,s&&i.trigger(e,"sleepEnd"))};
},{"./Events":904}],911:[function(require,module,exports) {
var x={};module.exports=x,x.create=function(m){var n={min:{x:0,y:0},max:{x:0,y:0}};return m&&x.update(n,m),n},x.update=function(x,m,n){x.min.x=1/0,x.max.x=-1/0,x.min.y=1/0,x.max.y=-1/0;for(var y=0;y<m.length;y++){var a=m[y];a.x>x.max.x&&(x.max.x=a.x),a.x<x.min.x&&(x.min.x=a.x),a.y>x.max.y&&(x.max.y=a.y),a.y<x.min.y&&(x.min.y=a.y)}n&&(n.x>0?x.max.x+=n.x:x.min.x+=n.x,n.y>0?x.max.y+=n.y:x.min.y+=n.y)},x.contains=function(x,m){return m.x>=x.min.x&&m.x<=x.max.x&&m.y>=x.min.y&&m.y<=x.max.y},x.overlaps=function(x,m){return x.min.x<=m.max.x&&x.max.x>=m.min.x&&x.max.y>=m.min.y&&x.min.y<=m.max.y},x.translate=function(x,m){x.min.x+=m.x,x.max.x+=m.x,x.min.y+=m.y,x.max.y+=m.y},x.shift=function(x,m){var n=x.max.x-x.min.x,y=x.max.y-x.min.y;x.min.x=m.x,x.max.x=m.x+n,x.min.y=m.y,x.max.y=m.y+y};
},{}],907:[function(require,module,exports) {
var r={};module.exports=r;var e=require("../geometry/Vector"),o=require("../core/Common");r.fromVertices=function(r){for(var t={},n=0;n<r.length;n++){var a=(n+1)%r.length,i=e.normalise({x:r[a].y-r[n].y,y:r[n].x-r[a].x}),x=0===i.y?1/0:i.x/i.y;t[x=x.toFixed(3).toString()]=i}return o.values(t)},r.rotate=function(r,e){if(0!==e)for(var o=Math.cos(e),t=Math.sin(e),n=0;n<r.length;n++){var a,i=r[n];a=i.x*o-i.y*t,i.y=i.x*t+i.y*o,i.x=a}};
},{"../geometry/Vector":912,"../core/Common":902}],890:[function(require,module,exports) {
var e={};module.exports=e;var t=require("../geometry/Vertices"),i=require("../geometry/Vector"),s=require("../core/Sleeping"),r=require("../core/Common"),n=require("../geometry/Bounds"),a=require("../geometry/Axes");!function(){e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e.create=function(e){var i={id:r.nextId(),type:"body",label:"Body",gameObject:null,parts:[],plugin:{},angle:0,vertices:t.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},previousPositionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,ignoreGravity:!1,ignorePointer:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0},lineWidth:0},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},s=r.extend(i,e);return o(s,e),s},e.nextGroup=function(t){return t?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var o=function(s,o){o=o||{},e.set(s,{bounds:s.bounds||n.create(s.vertices),positionPrev:s.positionPrev||i.clone(s.position),anglePrev:s.anglePrev||s.angle,vertices:s.vertices,parts:s.parts||[s],isStatic:s.isStatic,isSleeping:s.isSleeping,parent:s.parent||s}),t.rotate(s.vertices,s.angle,s.position),a.rotate(s.axes,s.angle),n.update(s.bounds,s.vertices,s.velocity),e.set(s,{axes:o.axes||s.axes,area:o.area||s.area,mass:o.mass||s.mass,inertia:o.inertia||s.inertia});var l=s.isStatic?"#2e2b44":r.choose(["#006BA6","#0496FF","#FFBC42","#D81159","#8F2D56"]);s.render.fillStyle=s.render.fillStyle||l,s.render.strokeStyle=s.render.strokeStyle||"#000",s.render.sprite.xOffset+=-(s.bounds.min.x-s.position.x)/(s.bounds.max.x-s.bounds.min.x),s.render.sprite.yOffset+=-(s.bounds.min.y-s.position.y)/(s.bounds.max.y-s.bounds.min.y)};e.set=function(t,i){var r,n;for(r in"string"==typeof i&&(r=i,(i={})[r]=n),i)if(i.hasOwnProperty(r))switch(n=i[r],r){case"isStatic":e.setStatic(t,n);break;case"isSleeping":s.set(t,n);break;case"mass":e.setMass(t,n);break;case"density":e.setDensity(t,n);break;case"inertia":e.setInertia(t,n);break;case"vertices":e.setVertices(t,n);break;case"position":e.setPosition(t,n);break;case"angle":e.setAngle(t,n);break;case"velocity":e.setVelocity(t,n);break;case"angularVelocity":e.setAngularVelocity(t,n);break;case"parts":e.setParts(t,n);break;default:t[r]=n}},e.setStatic=function(e,t){for(var i=0;i<e.parts.length;i++){var s=e.parts[i];s.isStatic=t,t?(s._original={restitution:s.restitution,friction:s.friction,mass:s.mass,inertia:s.inertia,density:s.density,inverseMass:s.inverseMass,inverseInertia:s.inverseInertia},s.restitution=0,s.friction=1,s.mass=s.inertia=s.density=1/0,s.inverseMass=s.inverseInertia=0,s.positionPrev.x=s.position.x,s.positionPrev.y=s.position.y,s.anglePrev=s.angle,s.angularVelocity=0,s.speed=0,s.angularSpeed=0,s.motion=0):s._original&&(s.restitution=s._original.restitution,s.friction=s._original.friction,s.mass=s._original.mass,s.inertia=s._original.inertia,s.density=s._original.density,s.inverseMass=s._original.inverseMass,s.inverseInertia=s._original.inverseInertia,s._original=null)}},e.setMass=function(e,t){var i=e.inertia/(e.mass/6);e.inertia=i*(t/6),e.inverseInertia=1/e.inertia,e.mass=t,e.inverseMass=1/e.mass,e.density=e.mass/e.area},e.setDensity=function(t,i){e.setMass(t,i*t.area),t.density=i},e.setInertia=function(e,t){e.inertia=t,e.inverseInertia=1/e.inertia},e.setVertices=function(i,s){s[0].body===i?i.vertices=s:i.vertices=t.create(s,i),i.axes=a.fromVertices(i.vertices),i.area=t.area(i.vertices),e.setMass(i,i.density*i.area);var r=t.centre(i.vertices);t.translate(i.vertices,r,-1),e.setInertia(i,e._inertiaScale*t.inertia(i.vertices,i.mass)),t.translate(i.vertices,i.position),n.update(i.bounds,i.vertices,i.velocity)},e.setParts=function(i,s,r){var n;for(s=s.slice(0),i.parts.length=0,i.parts.push(i),i.parent=i,n=0;n<s.length;n++){var a=s[n];a!==i&&(a.parent=i,i.parts.push(a))}if(1!==i.parts.length){if(r=void 0===r||r){var o=[];for(n=0;n<s.length;n++)o=o.concat(s[n].vertices);t.clockwiseSort(o);var c=t.hull(o),p=t.centre(c);e.setVertices(i,c),t.translate(i.vertices,p)}var y=l(i);i.area=y.area,i.parent=i,i.position.x=y.centre.x,i.position.y=y.centre.y,i.positionPrev.x=y.centre.x,i.positionPrev.y=y.centre.y,e.setMass(i,y.mass),e.setInertia(i,y.inertia),e.setPosition(i,y.centre)}},e.setPosition=function(e,s){var r=i.sub(s,e.position);e.positionPrev.x+=r.x,e.positionPrev.y+=r.y;for(var a=0;a<e.parts.length;a++){var o=e.parts[a];o.position.x+=r.x,o.position.y+=r.y,t.translate(o.vertices,r),n.update(o.bounds,o.vertices,e.velocity)}},e.setAngle=function(e,s){var r=s-e.angle;e.anglePrev+=r;for(var o=0;o<e.parts.length;o++){var l=e.parts[o];l.angle+=r,t.rotate(l.vertices,r,e.position),a.rotate(l.axes,r),n.update(l.bounds,l.vertices,e.velocity),o>0&&i.rotateAbout(l.position,r,e.position,l.position)}},e.setVelocity=function(e,t){e.positionPrev.x=e.position.x-t.x,e.positionPrev.y=e.position.y-t.y,e.velocity.x=t.x,e.velocity.y=t.y,e.speed=i.magnitude(e.velocity)},e.setAngularVelocity=function(e,t){e.anglePrev=e.angle-t,e.angularVelocity=t,e.angularSpeed=Math.abs(e.angularVelocity)},e.translate=function(t,s){e.setPosition(t,i.add(t.position,s))},e.rotate=function(t,i,s){if(s){var r=Math.cos(i),n=Math.sin(i),a=t.position.x-s.x,o=t.position.y-s.y;e.setPosition(t,{x:s.x+(a*r-o*n),y:s.y+(a*n+o*r)}),e.setAngle(t,t.angle+i)}else e.setAngle(t,t.angle+i)},e.scale=function(i,s,r,o){o=o||i.position;for(var c=0;c<i.parts.length;c++){var p=i.parts[c];p.position.x=o.x+(p.position.x-o.x)*s,p.position.y=o.y+(p.position.y-o.y)*r,t.scale(p.vertices,s,r,o),p.axes=a.fromVertices(p.vertices),i.isStatic||(p.area=t.area(p.vertices),e.setMass(p,i.density*p.area),t.translate(p.vertices,{x:-p.position.x,y:-p.position.y}),e.setInertia(p,t.inertia(p.vertices,p.mass)),t.translate(p.vertices,{x:p.position.x,y:p.position.y})),n.update(p.bounds,p.vertices,i.velocity)}if(i.circleRadius&&(s===r?i.circleRadius*=s:i.circleRadius=null),!i.isStatic){var y=l(i);i.area=y.area,e.setMass(i,y.mass),e.setInertia(i,y.inertia)}},e.update=function(e,s,r,o){var l=Math.pow(s*r*e.timeScale,2),c=1-e.frictionAir*r*e.timeScale,p=e.position.x-e.positionPrev.x,y=e.position.y-e.positionPrev.y;e.velocity.x=p*c*o+e.force.x/e.mass*l,e.velocity.y=y*c*o+e.force.y/e.mass*l,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.position.x+=e.velocity.x,e.position.y+=e.velocity.y,e.angularVelocity=(e.angle-e.anglePrev)*c*o+e.torque/e.inertia*l,e.anglePrev=e.angle,e.angle+=e.angularVelocity,e.speed=i.magnitude(e.velocity),e.angularSpeed=Math.abs(e.angularVelocity);for(var v=0;v<e.parts.length;v++){var u=e.parts[v];t.translate(u.vertices,e.velocity),v>0&&(u.position.x+=e.velocity.x,u.position.y+=e.velocity.y),0!==e.angularVelocity&&(t.rotate(u.vertices,e.angularVelocity,e.position),a.rotate(u.axes,e.angularVelocity),v>0&&i.rotateAbout(u.position,e.angularVelocity,e.position,u.position)),n.update(u.bounds,u.vertices,e.velocity)}},e.applyForce=function(e,t,i){e.force.x+=i.x,e.force.y+=i.y;var s=t.x-e.position.x,r=t.y-e.position.y;e.torque+=s*i.y-r*i.x};var l=function(e){for(var t={mass:0,area:0,inertia:0,centre:{x:0,y:0}},s=1===e.parts.length?0:1;s<e.parts.length;s++){var r=e.parts[s],n=r.mass!==1/0?r.mass:1;t.mass+=r.mass,t.area+=r.area,t.inertia+=r.inertia,t.centre=i.add(t.centre,i.mult(r.position,n))}return t.centre=i.div(t.centre,t.mass),t}}();
},{"../geometry/Vertices":913,"../geometry/Vector":912,"../core/Sleeping":905,"../core/Common":902,"../geometry/Bounds":911,"../geometry/Axes":907}],936:[function(require,module,exports) {
function r(r,n,t){t=t||0;var e,u,f,o,h,i,a,l=[0,0];return e=r[1][1]-r[0][1],u=r[0][0]-r[1][0],f=e*r[0][0]+u*r[0][1],o=n[1][1]-n[0][1],h=n[0][0]-n[1][0],i=o*n[0][0]+h*n[0][1],N(a=e*h-o*u,0,t)||(l[0]=(h*f-u*i)/a,l[1]=(e*i-o*f)/a),l}function n(r,n,t,e){var u=n[0]-r[0],f=n[1]-r[1],o=e[0]-t[0],h=e[1]-t[1];if(o*f-h*u==0)return!1;var i=(u*(t[1]-r[1])+f*(r[0]-t[0]))/(o*f-h*u),a=(o*(r[1]-t[1])+h*(t[0]-r[0]))/(h*u-o*f);return i>=0&&i<=1&&a>=0&&a<=1}function t(r,n,t){return(n[0]-r[0])*(t[1]-r[1])-(t[0]-r[0])*(n[1]-r[1])}function e(r,n,e){return t(r,n,e)>0}function u(r,n,e){return t(r,n,e)>=0}function f(r,n,e){return t(r,n,e)<0}function o(r,n,e){return t(r,n,e)<=0}module.exports={decomp:q,quickDecomp:E,isSimple:y,removeCollinearPoints:L,makeCCW:s};var h=[],i=[];function a(r,n,e,u){if(u){var f=h,o=i;f[0]=n[0]-r[0],f[1]=n[1]-r[1],o[0]=e[0]-n[0],o[1]=e[1]-n[1];var a=f[0]*o[0]+f[1]*o[1],l=Math.sqrt(f[0]*f[0]+f[1]*f[1]),c=Math.sqrt(o[0]*o[0]+o[1]*o[1]);return Math.acos(a/(l*c))<u}return 0===t(r,n,e)}function l(r,n){var t=n[0]-r[0],e=n[1]-r[1];return t*t+e*e}function c(r,n){var t=r.length;return r[n<0?n%t+t:n%t]}function g(r){r.length=0}function v(r,n,t,e){for(var u=t;u<e;u++)r.push(n[u])}function s(r){for(var n=0,t=r,u=1;u<r.length;++u)(t[u][1]<t[n][1]||t[u][1]===t[n][1]&&t[u][0]>t[n][0])&&(n=u);e(c(r,n-1),c(r,n),c(r,n+1))||p(r)}function p(r){for(var n=[],t=r.length,e=0;e!==t;e++)n.push(r.pop());for(e=0;e!==t;e++)r[e]=n[e]}function m(r,n){return f(c(r,n-1),c(r,n),c(r,n+1))}var A=[],M=[];function d(n,t,e){var f,h,i=A,a=M;if(u(c(n,t+1),c(n,t),c(n,e))&&o(c(n,t-1),c(n,t),c(n,e)))return!1;h=l(c(n,t),c(n,e));for(var g=0;g!==n.length;++g)if((g+1)%n.length!==t&&g!==t&&u(c(n,t),c(n,e),c(n,g+1))&&o(c(n,t),c(n,e),c(n,g))&&(i[0]=c(n,t),i[1]=c(n,e),a[0]=c(n,g),a[1]=c(n,g+1),f=r(i,a),l(c(n,t),f)<h))return!1;return!0}function b(r,n,t,e){var u=e||[];if(g(u),n<t)for(var f=n;f<=t;f++)u.push(r[f]);else{for(f=0;f<=t;f++)u.push(r[f]);for(f=n;f<r.length;f++)u.push(r[f])}return u}function k(r){for(var n=[],t=[],e=[],u=[],f=Number.MAX_VALUE,o=0;o<r.length;++o)if(m(r,o))for(var h=0;h<r.length;++h)if(d(r,o,h)){t=k(b(r,o,h,u)),e=k(b(r,h,o,u));for(var i=0;i<e.length;i++)t.push(e[i]);t.length<f&&(n=t,f=t.length,n.push([c(r,o),c(r,h)]))}return n}function q(r){var n=k(r);return n.length>0?x(r,n):[r]}function x(r,n){if(0===n.length)return[r];if(n instanceof Array&&n.length&&n[0]instanceof Array&&2===n[0].length&&n[0][0]instanceof Array){for(var t=[r],e=0;e<n.length;e++)for(var u=n[e],f=0;f<t.length;f++){var o=x(t[f],u);if(o){t.splice(f,1),t.push(o[0],o[1]);break}}return t}u=n,e=r.indexOf(u[0]),f=r.indexOf(u[1]);return-1!==e&&-1!==f&&[b(r,e,f),b(r,f,e)]}function y(r){var t,e=r;for(t=0;t<e.length-1;t++)for(var u=0;u<t-1;u++)if(n(e[t],e[t+1],e[u],e[u+1]))return!1;for(t=1;t<e.length-2;t++)if(n(e[0],e[e.length-1],e[t],e[t+1]))return!1;return!0}function C(r,n,t,e,u){u=u||0;var f=n[1]-r[1],o=r[0]-n[0],h=f*r[0]+o*r[1],i=e[1]-t[1],a=t[0]-e[0],l=i*t[0]+a*t[1],c=f*a-i*o;return N(c,0,u)?[0,0]:[(a*h-o*l)/c,(f*l-i*h)/c]}function E(r,n,t,h,i,a,g){a=a||100,g=g||0,i=i||25,n=void 0!==n?n:[],t=t||[],h=h||[];var s=[0,0],p=[0,0],A=[0,0],M=0,d=0,b=0,k=0,q=0,x=0,y=0,L=[],N=[],U=r,V=r;if(V.length<3)return n;if(++g>a)return console.warn("quickDecomp: max level ("+a+") reached."),n;for(var X=0;X<r.length;++X)if(m(U,X)){t.push(U[X]),M=d=Number.MAX_VALUE;for(var _=0;_<r.length;++_)e(c(U,X-1),c(U,X),c(U,_))&&o(c(U,X-1),c(U,X),c(U,_-1))&&(A=C(c(U,X-1),c(U,X),c(U,_),c(U,_-1)),f(c(U,X+1),c(U,X),A)&&(b=l(U[X],A))<d&&(d=b,p=A,x=_)),e(c(U,X+1),c(U,X),c(U,_+1))&&o(c(U,X+1),c(U,X),c(U,_))&&(A=C(c(U,X+1),c(U,X),c(U,_),c(U,_+1)),e(c(U,X-1),c(U,X),A)&&(b=l(U[X],A))<M&&(M=b,s=A,q=_));if(x===(q+1)%r.length)A[0]=(p[0]+s[0])/2,A[1]=(p[1]+s[1])/2,h.push(A),X<q?(v(L,U,X,q+1),L.push(A),N.push(A),0!==x&&v(N,U,x,U.length),v(N,U,0,X+1)):(0!==X&&v(L,U,X,U.length),v(L,U,0,q+1),L.push(A),N.push(A),v(N,U,x,X+1));else{if(x>q&&(q+=r.length),k=Number.MAX_VALUE,q<x)return n;for(_=x;_<=q;++_)u(c(U,X-1),c(U,X),c(U,_))&&o(c(U,X+1),c(U,X),c(U,_))&&(b=l(c(U,X),c(U,_)))<k&&(k=b,y=_%r.length);X<y?(v(L,U,X,y+1),0!==y&&v(N,U,y,V.length),v(N,U,0,X+1)):(0!==X&&v(L,U,X,V.length),v(L,U,0,y+1),v(N,U,y,X+1))}return L.length<N.length?(E(L,n,t,h,i,a,g),E(N,n,t,h,i,a,g)):(E(N,n,t,h,i,a,g),E(L,n,t,h,i,a,g)),n}return n.push(r),n}function L(r,n){for(var t=0,e=r.length-1;r.length>3&&e>=0;--e)a(c(r,e-1),c(r,e),c(r,e+1),n)&&(r.splice(e%r.length,1),t++);return t}function N(r,n,t){return t=t||0,Math.abs(r-n)<t}
},{}],909:[function(require,module,exports) {
var e={};module.exports=e;var r=require("../geometry/Vertices"),t=require("../core/Common"),i=require("../body/Body"),a=require("../geometry/Bounds"),o=require("../geometry/Vector"),n=require("../../poly-decomp");e.rectangle=function(e,a,o,n,c){c=c||{};var l={label:"Rectangle Body",position:{x:e,y:a},vertices:r.fromPath("L 0 0 L "+o+" 0 L "+o+" "+n+" L 0 "+n)};if(c.chamfer){var s=c.chamfer;l.vertices=r.chamfer(l.vertices,s.radius,s.quality,s.qualityMin,s.qualityMax),delete c.chamfer}return i.create(t.extend({},l,c))},e.trapezoid=function(e,a,o,n,c,l){l=l||{};var s,u=o*(c*=.5),v=u+(1-2*c)*o,d=v+u;s=c<.5?"L 0 0 L "+u+" "+-n+" L "+v+" "+-n+" L "+d+" 0":"L 0 0 L "+v+" "+-n+" L "+d+" 0";var f={label:"Trapezoid Body",position:{x:e,y:a},vertices:r.fromPath(s)};if(l.chamfer){var h=l.chamfer;f.vertices=r.chamfer(f.vertices,h.radius,h.quality,h.qualityMin,h.qualityMax),delete l.chamfer}return i.create(t.extend({},f,l))},e.circle=function(r,i,a,o,n){o=o||{};var c={label:"Circle Body",circleRadius:a};n=n||25;var l=Math.ceil(Math.max(10,Math.min(n,a)));return l%2==1&&(l+=1),e.polygon(r,i,l,a,t.extend({},c,o))},e.polygon=function(a,o,n,c,l){if(l=l||{},n<3)return e.circle(a,o,c,l);for(var s=2*Math.PI/n,u="",v=.5*s,d=0;d<n;d+=1){var f=v+d*s,h=Math.cos(f)*c,m=Math.sin(f)*c;u+="L "+h.toFixed(3)+" "+m.toFixed(3)+" "}var y={label:"Polygon Body",position:{x:a,y:o},vertices:r.fromPath(u)};if(l.chamfer){var p=l.chamfer;y.vertices=r.chamfer(y.vertices,p.radius,p.quality,p.qualityMin,p.qualityMax),delete l.chamfer}return i.create(t.extend({},y,l))},e.fromVertices=function(e,c,l,s,u,v,d){var f,h,m,y,p,x,g,q,L;for(s=s||{},h=[],u=void 0!==u&&u,v=void 0!==v?v:.01,d=void 0!==d?d:10,n||t.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),t.isArray(l[0])||(l=[l]),q=0;q<l.length;q+=1)if(y=l[q],(m=r.isConvex(y))||!n)y=m?r.clockwiseSort(y):r.hull(y),h.push({position:{x:e,y:c},vertices:y});else{var M=y.map(function(e){return[e.x,e.y]});n.makeCCW(M),!1!==v&&n.removeCollinearPoints(M,v);var b=n.quickDecomp(M);for(p=0;p<b.length;p++){var B=b[p].map(function(e){return{x:e[0],y:e[1]}});d>0&&r.area(B)<d||h.push({position:r.centre(B),vertices:B})}}for(p=0;p<h.length;p++)h[p]=i.create(t.extend(h[p],s));if(u)for(p=0;p<h.length;p++){var C=h[p];for(x=p+1;x<h.length;x++){var P=h[x];if(a.overlaps(C.bounds,P.bounds)){var k=C.vertices,V=P.vertices;for(g=0;g<C.vertices.length;g++)for(L=0;L<P.vertices.length;L++){var F=o.magnitudeSquared(o.sub(k[(g+1)%k.length],V[L])),I=o.magnitudeSquared(o.sub(k[g],V[(L+1)%V.length]));F<5&&I<5&&(k[g].isInternal=!0,V[L].isInternal=!0)}}}}return h.length>1?(f=i.create(t.extend({parts:h.slice(0)},s)),i.setPosition(f,{x:e,y:c}),f):h[0]};
},{"../geometry/Vertices":913,"../core/Common":902,"../body/Body":890,"../geometry/Bounds":911,"../geometry/Vector":912,"../../poly-decomp":936}],892:[function(require,module,exports) {
var e={};module.exports=e;var o=require("../core/Events"),t=require("../core/Common"),i=require("./Body");e.create=function(e){return t.extend({id:t.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},e)},e.setModified=function(o,t,i,n){if(o.isModified=t,i&&o.parent&&e.setModified(o.parent,t,i,n),n)for(var r=0;r<o.composites.length;r++){var s=o.composites[r];e.setModified(s,t,i,n)}},e.add=function(i,n){var r=[].concat(n);o.trigger(i,"beforeAdd",{object:n});for(var s=0;s<r.length;s++){var a=r[s];switch(a.type){case"body":if(a.parent!==a){t.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(i,a);break;case"constraint":e.addConstraint(i,a);break;case"composite":e.addComposite(i,a);break;case"mouseConstraint":e.addConstraint(i,a.constraint)}}return o.trigger(i,"afterAdd",{object:n}),i},e.remove=function(t,i,n){var r=[].concat(i);o.trigger(t,"beforeRemove",{object:i});for(var s=0;s<r.length;s++){var a=r[s];switch(a.type){case"body":e.removeBody(t,a,n);break;case"constraint":e.removeConstraint(t,a,n);break;case"composite":e.removeComposite(t,a,n);break;case"mouseConstraint":e.removeConstraint(t,a.constraint)}}return o.trigger(t,"afterRemove",{object:i}),t},e.addComposite=function(o,t){return o.composites.push(t),t.parent=o,e.setModified(o,!0,!0,!1),o},e.removeComposite=function(o,t,i){var n=o.composites.indexOf(t);if(-1!==n&&(e.removeCompositeAt(o,n),e.setModified(o,!0,!0,!1)),i)for(var r=0;r<o.composites.length;r++)e.removeComposite(o.composites[r],t,!0);return o},e.removeCompositeAt=function(o,t){return o.composites.splice(t,1),e.setModified(o,!0,!0,!1),o},e.addBody=function(o,t){return o.bodies.push(t),e.setModified(o,!0,!0,!1),o},e.removeBody=function(o,t,i){var n=o.bodies.indexOf(t);if(-1!==n&&(e.removeBodyAt(o,n),e.setModified(o,!0,!0,!1)),i)for(var r=0;r<o.composites.length;r++)e.removeBody(o.composites[r],t,!0);return o},e.removeBodyAt=function(o,t){return o.bodies.splice(t,1),e.setModified(o,!0,!0,!1),o},e.addConstraint=function(o,t){return o.constraints.push(t),e.setModified(o,!0,!0,!1),o},e.removeConstraint=function(o,t,i){var n=o.constraints.indexOf(t);if(-1!==n&&e.removeConstraintAt(o,n),i)for(var r=0;r<o.composites.length;r++)e.removeConstraint(o.composites[r],t,!0);return o},e.removeConstraintAt=function(o,t){return o.constraints.splice(t,1),e.setModified(o,!0,!0,!1),o},e.clear=function(o,t,i){if(i)for(var n=0;n<o.composites.length;n++)e.clear(o.composites[n],t,!0);return t?o.bodies=o.bodies.filter(function(e){return e.isStatic}):o.bodies.length=0,o.constraints.length=0,o.composites.length=0,e.setModified(o,!0,!0,!1),o},e.allBodies=function(o){for(var t=[].concat(o.bodies),i=0;i<o.composites.length;i++)t=t.concat(e.allBodies(o.composites[i]));return t},e.allConstraints=function(o){for(var t=[].concat(o.constraints),i=0;i<o.composites.length;i++)t=t.concat(e.allConstraints(o.composites[i]));return t},e.allComposites=function(o){for(var t=[].concat(o.composites),i=0;i<o.composites.length;i++)t=t.concat(e.allComposites(o.composites[i]));return t},e.get=function(o,t,i){var n,r;switch(i){case"body":n=e.allBodies(o);break;case"constraint":n=e.allConstraints(o);break;case"composite":n=e.allComposites(o).concat(o)}return n?0===(r=n.filter(function(e){return e.id.toString()===t.toString()})).length?null:r[0]:null},e.move=function(o,t,i){return e.remove(o,t),e.add(i,t),o},e.rebase=function(o){for(var i=e.allBodies(o).concat(e.allConstraints(o)).concat(e.allComposites(o)),n=0;n<i.length;n++)i[n].id=t.nextId();return e.setModified(o,!0,!0,!1),o},e.translate=function(o,t,n){for(var r=n?e.allBodies(o):o.bodies,s=0;s<r.length;s++)i.translate(r[s],t);return e.setModified(o,!0,!0,!1),o},e.rotate=function(o,t,n,r){for(var s=Math.cos(t),a=Math.sin(t),c=r?e.allBodies(o):o.bodies,d=0;d<c.length;d++){var f=c[d],l=f.position.x-n.x,u=f.position.y-n.y;i.setPosition(f,{x:n.x+(l*s-u*a),y:n.y+(l*a+u*s)}),i.rotate(f,t)}return e.setModified(o,!0,!0,!1),o},e.scale=function(o,t,n,r,s){for(var a=s?e.allBodies(o):o.bodies,c=0;c<a.length;c++){var d=a[c],f=d.position.x-r.x,l=d.position.y-r.y;i.setPosition(d,{x:r.x+f*t,y:r.y+l*n}),i.scale(d,t,n)}return e.setModified(o,!0,!0,!1),o},e.bounds=function(e){for(var o=Matter.Composite.allBodies(e),t=[],i=0;i<o.length;i+=1){var n=o[i];t.push(n.bounds.min,n.bounds.max)}return Matter.Bounds.create(t)};
},{"../core/Events":904,"../core/Common":902,"./Body":890}],901:[function(require,module,exports) {
var e={};module.exports=e;var n=require("../geometry/Vertices"),i=require("../geometry/Vector"),t=require("../core/Sleeping"),o=require("../geometry/Bounds"),s=require("../geometry/Axes"),a=require("../core/Common");e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(e){var n=e;n.bodyA&&!n.pointA&&(n.pointA={x:0,y:0}),n.bodyB&&!n.pointB&&(n.pointB={x:0,y:0});var t=n.bodyA?i.add(n.bodyA.position,n.pointA):n.pointA,o=n.bodyB?i.add(n.bodyB.position,n.pointB):n.pointB,s=i.magnitude(i.sub(t,o));n.length=void 0!==n.length?n.length:s,n.id=n.id||a.nextId(),n.label=n.label||"Constraint",n.type="constraint",n.stiffness=n.stiffness||(n.length>0?1:.7),n.damping=n.damping||0,n.angularStiffness=n.angularStiffness||0,n.angleA=n.bodyA?n.bodyA.angle:n.angleA,n.angleB=n.bodyB?n.bodyB.angle:n.angleB,n.plugin={};var r={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return 0===n.length&&n.stiffness>.1?(r.type="pin",r.anchors=!1):n.stiffness<.9&&(r.type="spring"),n.render=a.extend(r,n.render),n},e.preSolveAll=function(e){for(var n=0;n<e.length;n+=1){var i=e[n],t=i.constraintImpulse;i.isStatic||0===t.x&&0===t.y&&0===t.angle||(i.position.x+=t.x,i.position.y+=t.y,i.angle+=t.angle)}},e.solveAll=function(n,i){for(var t=0;t<n.length;t+=1){var o=n[t],s=!o.bodyA||o.bodyA&&o.bodyA.isStatic,a=!o.bodyB||o.bodyB&&o.bodyB.isStatic;(s||a)&&e.solve(n[t],i)}for(t=0;t<n.length;t+=1)s=!(o=n[t]).bodyA||o.bodyA&&o.bodyA.isStatic,a=!o.bodyB||o.bodyB&&o.bodyB.isStatic,s||a||e.solve(n[t],i)},e.solve=function(n,t){var o=n.bodyA,s=n.bodyB,a=n.pointA,r=n.pointB;if(o||s){o&&!o.isStatic&&(i.rotate(a,o.angle-n.angleA,a),n.angleA=o.angle),s&&!s.isStatic&&(i.rotate(r,s.angle-n.angleB,r),n.angleB=s.angle);var l=a,p=r;if(o&&(l=i.add(o.position,a)),s&&(p=i.add(s.position,r)),l&&p){var g=i.sub(l,p),d=i.magnitude(g);d<e._minLength&&(d=e._minLength);var y,v,f,u,c,m=(d-n.length)/d,b=n.stiffness<1?n.stiffness*t:n.stiffness,x=i.mult(g,m*b),A=(o?o.inverseMass:0)+(s?s.inverseMass:0),B=A+((o?o.inverseInertia:0)+(s?s.inverseInertia:0));if(n.damping){var S=i.create();f=i.div(g,d),c=i.sub(s&&i.sub(s.position,s.positionPrev)||S,o&&i.sub(o.position,o.positionPrev)||S),u=i.dot(f,c)}o&&!o.isStatic&&(v=o.inverseMass/A,o.constraintImpulse.x-=x.x*v,o.constraintImpulse.y-=x.y*v,o.position.x-=x.x*v,o.position.y-=x.y*v,n.damping&&(o.positionPrev.x-=n.damping*f.x*u*v,o.positionPrev.y-=n.damping*f.y*u*v),y=i.cross(a,x)/B*e._torqueDampen*o.inverseInertia*(1-n.angularStiffness),o.constraintImpulse.angle-=y,o.angle-=y),s&&!s.isStatic&&(v=s.inverseMass/A,s.constraintImpulse.x+=x.x*v,s.constraintImpulse.y+=x.y*v,s.position.x+=x.x*v,s.position.y+=x.y*v,n.damping&&(s.positionPrev.x+=n.damping*f.x*u*v,s.positionPrev.y+=n.damping*f.y*u*v),y=i.cross(r,x)/B*e._torqueDampen*s.inverseInertia*(1-n.angularStiffness),s.constraintImpulse.angle+=y,s.angle+=y)}}},e.postSolveAll=function(a){for(var r=0;r<a.length;r++){var l=a[r],p=l.constraintImpulse;if(!(l.isStatic||0===p.x&&0===p.y&&0===p.angle)){t.set(l,!1);for(var g=0;g<l.parts.length;g++){var d=l.parts[g];n.translate(d.vertices,p),g>0&&(d.position.x+=p.x,d.position.y+=p.y),0!==p.angle&&(n.rotate(d.vertices,p.angle,l.position),s.rotate(d.axes,p.angle),g>0&&i.rotateAbout(d.position,p.angle,l.position,d.position)),o.update(d.bounds,d.vertices,l.velocity)}p.angle*=e._warming,p.x*=e._warming,p.y*=e._warming}}};
},{"../geometry/Vertices":913,"../geometry/Vector":912,"../core/Sleeping":905,"../geometry/Bounds":911,"../geometry/Axes":907,"../core/Common":902}],908:[function(require,module,exports) {
var n={};module.exports=n;var e=require("../body/Composite"),r=require("../constraint/Constraint"),o=require("../core/Common"),t=require("../body/Body"),a=require("./Bodies");n.stack=function(n,r,o,a,d,i,s){for(var c,u=e.create({label:"Stack"}),y=n,b=r,l=0,x=0;x<a;x++){for(var f=0,m=0;m<o;m++){var B=s(y,b,m,x,c,l);if(B){var C=B.bounds.max.y-B.bounds.min.y,p=B.bounds.max.x-B.bounds.min.x;C>f&&(f=C),t.translate(B,{x:.5*p,y:.5*C}),y=B.bounds.max.x+d,e.addBody(u,B),c=B,l+=1}else y+=d}b+=f+i,y=n}return u},n.chain=function(n,t,a,d,i,s){for(var c=n.bodies,u=1;u<c.length;u++){var y=c[u-1],b=c[u],l=y.bounds.max.y-y.bounds.min.y,x=y.bounds.max.x-y.bounds.min.x,f=b.bounds.max.y-b.bounds.min.y,m={bodyA:y,pointA:{x:x*t,y:l*a},bodyB:b,pointB:{x:(b.bounds.max.x-b.bounds.min.x)*d,y:f*i}},B=o.extend(m,s);e.addConstraint(n,r.create(B))}return n.label+=" Chain",n},n.mesh=function(n,t,a,d,i){var s,c,u,y,b,l=n.bodies;for(s=0;s<a;s++){for(c=1;c<t;c++)u=l[c-1+s*t],y=l[c+s*t],e.addConstraint(n,r.create(o.extend({bodyA:u,bodyB:y},i)));if(s>0)for(c=0;c<t;c++)u=l[c+(s-1)*t],y=l[c+s*t],e.addConstraint(n,r.create(o.extend({bodyA:u,bodyB:y},i))),d&&c>0&&(b=l[c-1+(s-1)*t],e.addConstraint(n,r.create(o.extend({bodyA:b,bodyB:y},i)))),d&&c<t-1&&(b=l[c+1+(s-1)*t],e.addConstraint(n,r.create(o.extend({bodyA:b,bodyB:y},i))))}return n.label+=" Mesh",n},n.pyramid=function(e,r,o,a,d,i,s){return n.stack(e,r,o,a,d,i,function(n,r,i,c,u,y){var b=Math.min(a,Math.ceil(o/2)),l=u?u.bounds.max.x-u.bounds.min.x:0;if(!(c>b||i<(c=b-c)||i>o-1-c))return 1===y&&t.translate(u,{x:(i+(o%2==1?1:-1))*l,y:0}),s(e+(u?i*l:0)+i*d,r,i,c,u,y)})},n.newtonsCradle=function(n,o,t,d,i){for(var s=e.create({label:"Newtons Cradle"}),c=0;c<t;c++){var u=a.circle(n+c*(1.9*d),o+i,d,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),y=r.create({pointA:{x:n+c*(1.9*d),y:o},bodyB:u});e.addBody(s,u),e.addConstraint(s,y)}return s},n.car=function(n,o,d,i,s){var c=t.nextGroup(!0),u=.5*-d+20,y=.5*d-20,b=e.create({label:"Car"}),l=a.rectangle(n,o,d,i,{collisionFilter:{group:c},chamfer:{radius:.5*i},density:2e-4}),x=a.circle(n+u,o+0,s,{collisionFilter:{group:c},friction:.8}),f=a.circle(n+y,o+0,s,{collisionFilter:{group:c},friction:.8}),m=r.create({bodyB:l,pointB:{x:u,y:0},bodyA:x,stiffness:1,length:0}),B=r.create({bodyB:l,pointB:{x:y,y:0},bodyA:f,stiffness:1,length:0});return e.addBody(b,l),e.addBody(b,x),e.addBody(b,f),e.addConstraint(b,m),e.addConstraint(b,B),b},n.softBody=function(e,r,t,d,i,s,c,u,y,b){y=o.extend({inertia:1/0},y),b=o.extend({stiffness:.2,render:{type:"line",anchors:!1}},b);var l=n.stack(e,r,t,d,i,s,function(n,e){return a.circle(n,e,u,y)});return n.mesh(l,t,d,c,b),l.label="Soft Body",l};
},{"../body/Composite":892,"../constraint/Constraint":901,"../core/Common":902,"../body/Body":890,"./Bodies":909}],1029:[function(require,module,exports) {
var t={setBounce:function(t){return this.body.restitution=t,this}};module.exports=t;
},{}],1027:[function(require,module,exports) {
var i={setCollisionCategory:function(i){return this.body.collisionFilter.category=i,this},setCollisionGroup:function(i){return this.body.collisionFilter.group=i,this},setCollidesWith:function(i){var o=0;if(Array.isArray(i))for(var t=0;t<i.length;t++)o|=i[t];else o=i;return this.body.collisionFilter.mask=o,this}};module.exports=i;
},{}],1028:[function(require,module,exports) {
var t=require("../lib/body/Body"),i={applyForce:function(i){return this._tempVec2.set(this.body.position.x,this.body.position.y),t.applyForce(this.body,this._tempVec2,i),this},applyForceFrom:function(i,s){return t.applyForce(this.body,i,s),this},thrust:function(i){var s=this.body.angle;return this._tempVec2.set(i*Math.cos(s),i*Math.sin(s)),t.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(i){var s=this.body.angle-Math.PI/2;return this._tempVec2.set(i*Math.cos(s),i*Math.sin(s)),t.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(i){var s=this.body.angle+Math.PI/2;return this._tempVec2.set(i*Math.cos(s),i*Math.sin(s)),t.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(i){var s=this.body.angle-Math.PI;return this._tempVec2.set(i*Math.cos(s),i*Math.sin(s)),t.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};module.exports=i;
},{"../lib/body/Body":890}],1030:[function(require,module,exports) {
var i={setFriction:function(i,t,o){return this.body.friction=i,void 0!==t&&(this.body.frictionAir=t),void 0!==o&&(this.body.frictionStatic=o),this},setFrictionAir:function(i){return this.body.frictionAir=i,this},setFrictionStatic:function(i){return this.body.frictionStatic=i,this}};module.exports=i;
},{}],1031:[function(require,module,exports) {
var r={setIgnoreGravity:function(r){return this.body.ignoreGravity=r,this}};module.exports=r;
},{}],1032:[function(require,module,exports) {
var s=require("../lib/body/Body"),t={setMass:function(t){return s.setMass(this.body,t),this},setDensity:function(t){return s.setDensity(this.body,t),this}};module.exports=t;
},{"../lib/body/Body":890}],1033:[function(require,module,exports) {
var t=require("../lib/body/Body"),i={setStatic:function(i){return t.setStatic(this.body,i),this},isStatic:function(){return this.body.isStatic}};module.exports=i;
},{"../lib/body/Body":890}],1034:[function(require,module,exports) {
var s={setSensor:function(s){return this.body.isSensor=s,this},isSensor:function(){return this.body.isSensor}};module.exports=s;
},{}],1035:[function(require,module,exports) {
var e=require("../lib/factory/Bodies"),t=require("../lib/body/Body"),i=require("../../../utils/object/GetFastValue"),r={setRectangle:function(e,t,i){return this.setBody({type:"rectangle",width:e,height:t},i)},setCircle:function(e,t){return this.setBody({type:"circle",radius:e},t)},setPolygon:function(e,t,i){return this.setBody({type:"polygon",sides:t,radius:e},i)},setTrapezoid:function(e,t,i,r){return this.setBody({type:"trapezoid",width:e,height:t,slope:i},r)},setExistingBody:function(e,t){void 0===t&&(t=!0),this.body&&this.world.remove(this.body),this.body=e,this.body.gameObject=this;var i=this;return this.body.destroy=function(){i.world.remove(i.body),i.body.gameObject=null},t&&this.world.add(this.body),this.setOrigin(e.render.sprite.xOffset,e.render.sprite.yOffset),this},setBody:function(r,s){if(!r)return this;var o;"string"==typeof r&&(r={type:r});var d=i(r,"type","rectangle"),a=i(r,"x",this._tempVec2.x),h=i(r,"y",this._tempVec2.y),n=i(r,"width",this.width),y=i(r,"height",this.height);switch(d){case"rectangle":o=e.rectangle(a,h,n,y,s);break;case"circle":var c=i(r,"radius",Math.max(n,y)/2),l=i(r,"maxSides",25);o=e.circle(a,h,c,s,l);break;case"trapezoid":var u=i(r,"slope",.5);o=e.trapezoid(a,h,n,y,u,s);break;case"polygon":var b=i(r,"sides",5),p=i(r,"radius",Math.max(n,y)/2);o=e.polygon(a,h,b,p,s);break;case"fromVertices":case"fromVerts":var g=i(r,"verts",[]);if(this.body)t.setVertices(this.body,g),o=this.body;else{var f=i(r,"flagInternal",!1),m=i(r,"removeCollinear",.01),v=i(r,"minimumArea",10);o=e.fromVertices(a,h,g,s,f,m,v)}}return this.setExistingBody(o,r.addToWorld),this}};module.exports=r;
},{"../lib/factory/Bodies":909,"../lib/body/Body":890,"../../../utils/object/GetFastValue":102}],1036:[function(require,module,exports) {
var e=require("../lib/core/Events"),t={setSleepThreshold:function(e){return void 0===e&&(e=60),this.body.sleepThreshold=e,this},setSleepEvents:function(e,t){return this.setSleepStartEvent(e),this.setSleepEndEvent(t),this},setSleepStartEvent:function(t){if(t){var s=this.world;e.on(this.body,"sleepStart",function(e){s.emit("sleepstart",e,this)})}else e.off(this.body,"sleepStart");return this},setSleepEndEvent:function(t){if(t){var s=this.world;e.on(this.body,"sleepEnd",function(e){s.emit("sleepend",e,this)})}else e.off(this.body,"sleepEnd");return this}};module.exports=t;
},{"../lib/core/Events":904}],1037:[function(require,module,exports) {
var t=require("../lib/body/Body"),e=require("../../../math/const"),i=require("../../../math/angle/Wrap"),s=require("../../../math/angle/WrapDegrees"),n=4,o={x:{get:function(){return this.body.position.x},set:function(e){this._tempVec2.set(e,this.y),t.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(e){this._tempVec2.set(this.x,e),t.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(e){this._scaleX=e,0===this._scaleX?this.renderFlags&=~n:this.renderFlags|=n,t.scale(this.body,e,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(e){this._scaleY=e,0===this._scaleY?this.renderFlags&=~n:this.renderFlags|=n,t.scale(this.body,this._scaleX,e)}},angle:{get:function(){return s(this.body.angle*e.RAD_TO_DEG)},set:function(t){this.rotation=s(t)*e.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(e){this._rotation=i(e),t.setAngle(this.body,this._rotation)}},setPosition:function(e,i){return void 0===e&&(e=0),void 0===i&&(i=e),this._tempVec2.set(e,i),t.setPosition(this.body,this._tempVec2),this},setRotation:function(e){return void 0===e&&(e=0),this._rotation=i(e),t.setAngle(this.body,e),this},setFixedRotation:function(){return t.setInertia(this.body,1/0),this},setAngle:function(e){return void 0===e&&(e=0),this.angle=e,t.setAngle(this.body,this.rotation),this},setScale:function(e,i,s){return void 0===e&&(e=1),void 0===i&&(i=e),this._scaleX=e,this._scaleY=i,t.scale(this.body,e,i,s),this}};module.exports=o;
},{"../lib/body/Body":890,"../../../math/const":40,"../../../math/angle/Wrap":771,"../../../math/angle/WrapDegrees":772}],1038:[function(require,module,exports) {
var t=require("../lib/body/Body"),e={setAngularVelocity:function(e){return t.setAngularVelocity(this.body,e),this},setVelocityX:function(e){return this._tempVec2.set(e,this.body.velocity.y),t.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(e){return this._tempVec2.set(this.body.velocity.x,e),t.setVelocity(this.body,this._tempVec2),this},setVelocity:function(e,i){return this._tempVec2.set(e,i),t.setVelocity(this.body,this._tempVec2),this}};module.exports=e;
},{"../lib/body/Body":890}],941:[function(require,module,exports) {
module.exports={Bounce:require("./Bounce"),Collision:require("./Collision"),Force:require("./Force"),Friction:require("./Friction"),Gravity:require("./Gravity"),Mass:require("./Mass"),Static:require("./Static"),Sensor:require("./Sensor"),SetBody:require("./SetBody"),Sleep:require("./Sleep"),Transform:require("./Transform"),Velocity:require("./Velocity")};
},{"./Bounce":1029,"./Collision":1027,"./Force":1028,"./Friction":1030,"./Gravity":1031,"./Mass":1032,"./Static":1033,"./Sensor":1034,"./SetBody":1035,"./Sleep":1036,"./Transform":1037,"./Velocity":1038}],879:[function(require,module,exports) {
var e=require("./components"),t=require("../../utils/object/GetFastValue"),o=require("../../math/Vector2");function r(e){return!!e.get&&"function"==typeof e.get||!!e.set&&"function"==typeof e.set}var n=function(n,i,c){void 0===c&&(c={});var a=i.x,s=i.y;i.body={position:{x:a,y:s}},[e.Bounce,e.Collision,e.Force,e.Friction,e.Gravity,e.Mass,e.Sensor,e.SetBody,e.Sleep,e.Static,e.Transform,e.Velocity].forEach(function(e){for(var t in e)r(e[t])?Object.defineProperty(i,t,{get:e[t].get,set:e[t].set}):Object.defineProperty(i,t,{value:e[t]})}),i.world=n,i._tempVec2=new o(a,s);var u=t(c,"shape",null);return u||(u="rectangle"),i.setBody(u,c),i};module.exports=n;
},{"./components":941,"../../utils/object/GetFastValue":102,"../../math/Vector2":96}],810:[function(require,module,exports) {
var e=require("./lib/factory/Bodies"),i=require("../../utils/Class"),t=require("./components"),s=require("../../gameobjects/GameObject"),r=require("../../utils/object/GetFastValue"),o=require("../../gameobjects/image/Image"),a=require("../../gameobjects/components/Pipeline"),n=require("../../math/Vector2"),l=new i({Extends:o,Mixins:[t.Bounce,t.Collision,t.Force,t.Friction,t.Gravity,t.Mass,t.Sensor,t.SetBody,t.Sleep,t.Static,t.Transform,t.Velocity,a],initialize:function(i,t,o,a,l,c){s.call(this,i.scene,"Image"),this.setTexture(a,l),this.setSizeToFrame(),this.setOrigin(),this.world=i,this._tempVec2=new n(t,o);var h=r(c,"shape",null);h?this.setBody(h,c):(this.body=e.rectangle(t,o,this.width,this.height,c),this.body.gameObject=this,r(c,"addToWorld",!0)&&i.add(this.body)),this.setPosition(t,o),this.initPipeline("TextureTintPipeline")}});module.exports=l;
},{"./lib/factory/Bodies":909,"../../utils/Class":8,"./components":941,"../../gameobjects/GameObject":208,"../../utils/object/GetFastValue":102,"../../gameobjects/image/Image":284,"../../gameobjects/components/Pipeline":610,"../../math/Vector2":96}],812:[function(require,module,exports) {
var e=require("../../gameobjects/components/Animation"),i=require("./lib/factory/Bodies"),t=require("../../utils/Class"),s=require("./components"),r=require("../../gameobjects/GameObject"),o=require("../../utils/object/GetFastValue"),n=require("../../gameobjects/components/Pipeline"),a=require("../../gameobjects/sprite/Sprite"),c=require("../../math/Vector2"),h=new t({Extends:a,Mixins:[s.Bounce,s.Collision,s.Force,s.Friction,s.Gravity,s.Mass,s.Sensor,s.SetBody,s.Sleep,s.Static,s.Transform,s.Velocity,n],initialize:function(t,s,n,a,h,l){r.call(this,t.scene,"Image"),this.anims=new e(this),this.setTexture(a,h),this.setSizeToFrame(),this.setOrigin(),this.world=t,this._tempVec2=new c(s,n);var u=o(l,"shape",null);u?this.setBody(u,l):(this.body=i.rectangle(s,n,this.width,this.height,l),this.body.gameObject=this,o(l,"addToWorld",!0)&&t.add(this.body)),this.setPosition(s,n),this.initPipeline("TextureTintPipeline")}});module.exports=h;
},{"../../gameobjects/components/Animation":602,"./lib/factory/Bodies":909,"../../utils/Class":8,"./components":941,"../../gameobjects/GameObject":208,"../../utils/object/GetFastValue":102,"../../gameobjects/components/Pipeline":610,"../../gameobjects/sprite/Sprite":289,"../../math/Vector2":96}],813:[function(require,module,exports) {
var t=require("./lib/factory/Bodies"),e=require("./lib/body/Body"),i=require("../../utils/Class"),o=require("./components"),s=require("../../utils/object/GetFastValue"),r=require("../../utils/object/HasValue"),l=require("./lib/geometry/Vertices"),d=new i({Mixins:[o.Bounce,o.Collision,o.Friction,o.Gravity,o.Mass,o.Sensor,o.Sleep,o.Static],initialize:function(t,e,i){this.tile=e,this.world=t,e.physics.matterBody&&e.physics.matterBody.destroy(),e.physics.matterBody=this;var o=s(i,"body",null),r=s(i,"addToWorld",!0);if(o)this.setBody(o,r);else{var l=e.getCollisionGroup();s(l,"objects",[]).length>0?this.setFromTileCollision(i):this.setFromTileRectangle(i)}},setFromTileRectangle:function(e){void 0===e&&(e={}),r(e,"isStatic")||(e.isStatic=!0),r(e,"addToWorld")||(e.addToWorld=!0);var i=this.tile.getBounds(),o=i.x+i.width/2,s=i.y+i.height/2,l=t.rectangle(o,s,i.width,i.height,e);return this.setBody(l,e.addToWorld),this},setFromTileCollision:function(i){void 0===i&&(i={}),r(i,"isStatic")||(i.isStatic=!0),r(i,"addToWorld")||(i.addToWorld=!0);for(var o=this.tile.tilemapLayer.scaleX,d=this.tile.tilemapLayer.scaleY,a=this.tile.getLeft(),h=this.tile.getTop(),n=this.tile.getCollisionGroup(),y=s(n,"objects",[]),c=[],u=0;u<y.length;u++){var g=y[u],m=a+g.x*o,p=h+g.y*d,v=g.width*o,b=g.height*d,f=null;if(g.rectangle)f=t.rectangle(m+v/2,p+b/2,v,b,i);else if(g.ellipse)f=t.circle(m+v/2,p+b/2,v/2,i);else if(g.polygon||g.polyline){var B=(g.polygon?g.polygon:g.polyline).map(function(t){return{x:t.x*o,y:t.y*d}}),T=l.create(B);if(l.isConvex(B)){var x=l.centre(T);m+=x.x,p+=x.y}f=t.fromVertices(m,p,T,i)}f&&c.push(f)}return 1===c.length?this.setBody(c[0],i.addToWorld):c.length>1&&(i.parts=c,this.setBody(e.create(i),i.addToWorld)),this},setBody:function(t,e){return void 0===e&&(e=!0),this.body&&this.removeBody(),this.body=t,this.body.gameObject=this,e&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0}});module.exports=d;
},{"./lib/factory/Bodies":909,"./lib/body/Body":890,"../../utils/Class":8,"./components":941,"../../utils/object/GetFastValue":102,"../../utils/object/HasValue":470,"./lib/geometry/Vertices":913}],900:[function(require,module,exports) {
var e={};module.exports=e;var r=require("../geometry/Vertices"),t=require("../geometry/Vector");!function(){e.collides=function(e,i,o){var s,d,l,p,x=!1;if(o){var v=e.parent,u=i.parent,c=v.speed*v.speed+v.angularSpeed*v.angularSpeed+u.speed*u.speed+u.angularSpeed*u.angularSpeed;x=o&&o.collided&&c<.2,p=o}else p={collided:!1,bodyA:e,bodyB:i};if(o&&x){var y=p.axisBody,m=y===e?i:e,g=[y.axes[o.axisNumber]];if(l=a(y.vertices,m.vertices,g),p.reused=!0,l.overlap<=0)return p.collided=!1,p}else{if((s=a(e.vertices,i.vertices,e.axes)).overlap<=0)return p.collided=!1,p;if((d=a(i.vertices,e.vertices,i.axes)).overlap<=0)return p.collided=!1,p;s.overlap<d.overlap?(l=s,p.axisBody=e):(l=d,p.axisBody=i),p.axisNumber=l.axisNumber}p.bodyA=e.id<i.id?e:i,p.bodyB=e.id<i.id?i:e,p.collided=!0,p.depth=l.overlap,p.parentA=p.bodyA.parent,p.parentB=p.bodyB.parent,e=p.bodyA,i=p.bodyB,t.dot(l.axis,t.sub(i.position,e.position))<0?p.normal={x:l.axis.x,y:l.axis.y}:p.normal={x:-l.axis.x,y:-l.axis.y},p.tangent=t.perp(p.normal),p.penetration=p.penetration||{},p.penetration.x=p.normal.x*p.depth,p.penetration.y=p.normal.y*p.depth;var h=n(e,i,p.normal),b=[];if(r.contains(e.vertices,h[0])&&b.push(h[0]),r.contains(e.vertices,h[1])&&b.push(h[1]),b.length<2){var f=n(i,e,t.neg(p.normal));r.contains(i.vertices,f[0])&&b.push(f[0]),b.length<2&&r.contains(i.vertices,f[1])&&b.push(f[1])}return b.length<1&&(b=[h[0]]),p.supports=b,p};var a=function(e,r,a){for(var n,o,s=t._temp[0],d=t._temp[1],l={overlap:Number.MAX_VALUE},p=0;p<a.length;p++){if(o=a[p],i(s,e,o),i(d,r,o),(n=Math.min(s.max-d.min,d.max-s.min))<=0)return l.overlap=n,l;n<l.overlap&&(l.overlap=n,l.axis=o,l.axisNumber=p)}return l},i=function(e,r,a){for(var i=t.dot(r[0],a),n=i,o=1;o<r.length;o+=1){var s=t.dot(r[o],a);s>n?n=s:s<i&&(i=s)}e.min=i,e.max=n},n=function(e,r,a){for(var i,n,o,s,d=Number.MAX_VALUE,l=t._temp[0],p=r.vertices,x=e.position,v=0;v<p.length;v++)n=p[v],l.x=n.x-x.x,l.y=n.y-x.y,(i=-t.dot(a,l))<d&&(d=i,o=n);return n=p[o.index-1>=0?o.index-1:p.length-1],l.x=n.x-x.x,l.y=n.y-x.y,d=-t.dot(a,l),s=n,n=p[(o.index+1)%p.length],l.x=n.x-x.x,l.y=n.y-x.y,(i=-t.dot(a,l))<d&&(s=n),[o,s]}}();
},{"../geometry/Vertices":913,"../geometry/Vector":912}],897:[function(require,module,exports) {
var t={};module.exports=t,t.create=function(i,e){var n=i.bodyA,s=i.bodyB,o={id:t.id(n,s),bodyA:n,bodyB:s,activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:n.isSensor||s.isSensor,timeCreated:e,timeUpdated:e,collision:null,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return t.update(o,i,e),o},t.update=function(i,e,n){if(i.collision=e,e.collided){var s=e.supports,o=i.activeContacts,a=e.parentA,r=e.parentB;i.inverseMass=a.inverseMass+r.inverseMass,i.friction=Math.min(a.friction,r.friction),i.frictionStatic=Math.max(a.frictionStatic,r.frictionStatic),i.restitution=Math.max(a.restitution,r.restitution),i.slop=Math.max(a.slop,r.slop);for(var c=0;c<s.length;c++)o[c]=s[c].contact;var d=s.length;d<o.length&&(o.length=d),i.separation=e.depth,t.setActive(i,!0,n)}else!0===i.isActive&&t.setActive(i,!1,n)},t.setActive=function(t,i,e){i?(t.isActive=!0,t.timeUpdated=e):(t.isActive=!1,t.activeContacts.length=0)},t.id=function(t,i){return t.id<i.id?"A"+t.id+"B"+i.id:"A"+i.id+"B"+t.id};
},{}],894:[function(require,module,exports) {
var r={};module.exports=r;var e=require("./SAT"),s=require("./Pair"),o=require("../geometry/Bounds");r.collisions=function(i,a){for(var t=[],l=a.pairs.table,n=a.metrics,u=0;u<i.length;u++){var p=i[u][0],c=i[u][1];if((!p.isStatic&&!p.isSleeping||!c.isStatic&&!c.isSleeping)&&r.canCollide(p.collisionFilter,c.collisionFilter)&&(n.midphaseTests+=1,o.overlaps(p.bounds,c.bounds)))for(var d=p.parts.length>1?1:0;d<p.parts.length;d++)for(var g=p.parts[d],v=c.parts.length>1?1:0;v<c.parts.length;v++){var h=c.parts[v];if(g===p&&h===c||o.overlaps(g.bounds,h.bounds)){var f,m=l[s.id(g,h)];f=m&&m.isActive?m.collision:null;var b=e.collides(g,h,f);n.narrowphaseTests+=1,b.reused&&(n.narrowReuseCount+=1),b.collided&&(t.push(b),n.narrowDetections+=1)}}}return t},r.canCollide=function(r,e){return r.group===e.group&&0!==r.group?r.group>0:0!=(r.mask&e.category)&&0!=(e.mask&r.category)};
},{"./SAT":900,"./Pair":897,"../geometry/Bounds":911}],880:[function(require,module,exports) {
var t=require("./lib/geometry/Bounds"),i=require("../../utils/Class"),e=require("./lib/body/Composite"),o=require("./lib/constraint/Constraint"),n=require("./lib/collision/Detector"),s=require("../../utils/object/GetFastValue"),r=require("../../utils/object/Merge"),a=require("./lib/core/Sleeping"),l=require("../../math/Vector2"),u=require("./lib/geometry/Vertices"),p=new i({initialize:function(t,i,e){void 0===e&&(e={});this.scene=t,this.world=i;var n=s(e,"camera",null);n?(this.camera=n,delete e.camera):this.camera=t.sys.cameras.main,this.pointer=null,this.active=!0,this.position=new l,this.constraint=o.create(r(e,{label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},damping:0,length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}})),this.world.on("beforeupdate",this.update,this),t.sys.input.on("pointerdown",this.onDown,this),t.sys.input.on("pointerup",this.onUp,this)},onDown:function(t){this.pointer=t},onUp:function(){this.pointer=null},getBodyPart:function(t,i){for(var e=this.constraint,o=t.parts.length>1?1:0;o<t.parts.length;o++){var n=t.parts[o];if(u.contains(n.vertices,i))return e.bodyB=t,e.pointA.x=i.x,e.pointA.y=i.y,e.pointB.x=i.x-t.position.x,e.pointB.y=i.y-t.position.y,e.angleB=t.angle,a.set(t,!1),!0}return!1},update:function(){if(this.active){var i=this.pointer,o=this.constraint;if(i){var s=this.position;if(this.camera.getWorldPoint(i.x,i.y,s),o.bodyB)a.set(o.bodyB,!1),o.pointA.x=s.x,o.pointA.y=s.y;else for(var r=e.allBodies(this.world.localWorld),l=0;l<r.length;l++){var u=r[l];if(!u.ignorePointer&&t.contains(u.bounds,s)&&n.canCollide(u.collisionFilter,o.collisionFilter)&&this.getBodyPart(u,s))break}}else o.bodyB&&(o.bodyB=null)}},destroy:function(){this.world.removeConstraint(this.constraint),this.constraint=null,this.world.off("beforeupdate",this.update),this.scene.sys.input.off("pointerdown",this.onDown,this),this.scene.sys.input.off("pointerup",this.onUp,this)}});module.exports=p;
},{"./lib/geometry/Bounds":911,"../../utils/Class":8,"./lib/body/Composite":892,"./lib/constraint/Constraint":901,"./lib/collision/Detector":894,"../../utils/object/GetFastValue":102,"../../utils/object/Merge":866,"./lib/core/Sleeping":905,"../../math/Vector2":96,"./lib/geometry/Vertices":913}],809:[function(require,module,exports) {
var t=require("./lib/factory/Bodies"),r=require("../../utils/Class"),n=require("./lib/factory/Composites"),i=require("./lib/constraint/Constraint"),e=require("./MatterGameObject"),o=require("./MatterImage"),d=require("./MatterSprite"),s=require("./MatterTileBody"),a=require("./PointerConstraint"),u=new r({initialize:function(t){this.world=t,this.scene=t.scene,this.sys=t.scene.sys},rectangle:function(r,n,i,e,o){var d=t.rectangle(r,n,i,e,o);return this.world.add(d),d},trapezoid:function(r,n,i,e,o,d){var s=t.trapezoid(r,n,i,e,o,d);return this.world.add(s),s},circle:function(r,n,i,e,o){var d=t.circle(r,n,i,e,o);return this.world.add(d),d},polygon:function(r,n,i,e,o){var d=t.polygon(r,n,i,e,o);return this.world.add(d),d},fromVertices:function(r,n,i,e,o,d,s){var a=t.fromVertices(r,n,i,e,o,d,s);return this.world.add(a),a},imageStack:function(t,r,i,e,d,s,a,u,c){void 0===a&&(a=0),void 0===u&&(u=0),void 0===c&&(c={});var l=this.world,h=this.sys.displayList;c.addToWorld=!1;var f=n.stack(i,e,d,s,a,u,function(n,i){var e=new o(l,n,i,t,r,c);return h.add(e),e.body});return l.add(f),f},stack:function(t,r,i,e,o,d,s){var a=n.stack(t,r,i,e,o,d,s);return this.world.add(a),a},pyramid:function(t,r,i,e,o,d,s){var a=n.pyramid(t,r,i,e,o,d,s);return this.world.add(a),a},chain:function(t,r,i,e,o,d){return n.chain(t,r,i,e,o,d)},mesh:function(t,r,i,e,o){return n.mesh(t,r,i,e,o)},newtonsCradle:function(t,r,i,e,o){var d=n.newtonsCradle(t,r,i,e,o);return this.world.add(d),d},car:function(t,r,i,e,o){var d=n.car(t,r,i,e,o);return this.world.add(d),d},softBody:function(t,r,i,e,o,d,s,a,u,c){var l=n.softBody(t,r,i,e,o,d,s,a,u,c);return this.world.add(l),l},joint:function(t,r,n,i,e){return this.constraint(t,r,n,i,e)},spring:function(t,r,n,i,e){return this.constraint(t,r,n,i,e)},constraint:function(t,r,n,e,o){void 0===e&&(e=1),void 0===o&&(o={}),o.bodyA="body"===t.type?t:t.body,o.bodyB="body"===r.type?r:r.body,o.length=n,o.stiffness=e;var d=i.create(o);return this.world.add(d),d},worldConstraint:function(t,r,n,e){void 0===n&&(n=1),void 0===e&&(e={}),e.bodyB="body"===t.type?t:t.body,e.length=r,e.stiffness=n;var o=i.create(e);return this.world.add(o),o},mouseSpring:function(t){return this.pointerConstraint(t)},pointerConstraint:function(t){var r=new a(this.scene,this.world,t);return this.world.add(r.constraint),r},image:function(t,r,n,i,e){var d=new o(this.world,t,r,n,i,e);return this.sys.displayList.add(d),d},tileBody:function(t,r){return new s(this.world,t,r)},sprite:function(t,r,n,i,e){var o=new d(this.world,t,r,n,i,e);return this.sys.displayList.add(o),this.sys.updateList.add(o),o},gameObject:function(t,r){return e(this.world,t,r)}});module.exports=u;
},{"./lib/factory/Bodies":909,"../../utils/Class":8,"./lib/factory/Composites":908,"./lib/constraint/Constraint":901,"./MatterGameObject":879,"./MatterImage":810,"./MatterSprite":812,"./MatterTileBody":813,"./PointerConstraint":880}],906:[function(require,module,exports) {
var e={};module.exports=e;var n=require("./Common");e._registry={},e.register=function(r){if(e.isPlugin(r)||n.warn("Plugin.register:",e.toString(r),"does not implement all required fields."),r.name in e._registry){var i=e._registry[r.name],t=e.versionParse(r.version).number,s=e.versionParse(i.version).number;t>s?(n.warn("Plugin.register:",e.toString(i),"was upgraded to",e.toString(r)),e._registry[r.name]=r):t<s?n.warn("Plugin.register:",e.toString(i),"can not be downgraded to",e.toString(r)):r!==i&&n.warn("Plugin.register:",e.toString(r),"is already registered to different plugin object")}else e._registry[r.name]=r;return r},e.resolve=function(n){return e._registry[e.dependencyParse(n).name]},e.toString=function(e){return"string"==typeof e?e:(e.name||"anonymous")+"@"+(e.version||e.range||"0.0.0")},e.isPlugin=function(e){return e&&e.name&&e.version&&e.install},e.isUsed=function(e,n){return e.used.indexOf(n)>-1},e.isFor=function(n,r){var i=n.for&&e.dependencyParse(n.for);return!n.for||r.name===i.name&&e.versionSatisfies(r.version,i.range)},e.use=function(r,i){if(r.uses=(r.uses||[]).concat(i||[]),0!==r.uses.length){for(var t=e.dependencies(r),s=n.topologicalSort(t),a=[],o=0;o<s.length;o+=1)if(s[o]!==r.name){var u=e.resolve(s[o]);u?e.isUsed(r,u.name)||(e.isFor(u,r)||(n.warn("Plugin.use:",e.toString(u),"is for",u.for,"but installed on",e.toString(r)+"."),u._warned=!0),u.install?u.install(r):(n.warn("Plugin.use:",e.toString(u),"does not specify an install function."),u._warned=!0),u._warned?(a.push("🔶 "+e.toString(u)),delete u._warned):a.push("✅ "+e.toString(u)),r.used.push(u.name)):a.push("❌ "+s[o])}a.length>0&&!u.silent&&n.info(a.join("  "))}else n.warn("Plugin.use:",e.toString(r),"does not specify any dependencies to install.")},e.dependencies=function(r,i){var t=e.dependencyParse(r),s=t.name;if(!(s in(i=i||{}))){r=e.resolve(r)||r,i[s]=n.map(r.uses||[],function(i){e.isPlugin(i)&&e.register(i);var s=e.dependencyParse(i),a=e.resolve(i);return a&&!e.versionSatisfies(a.version,s.range)?(n.warn("Plugin.dependencies:",e.toString(a),"does not satisfy",e.toString(s),"used by",e.toString(t)+"."),a._warned=!0,r._warned=!0):a||(n.warn("Plugin.dependencies:",e.toString(i),"used by",e.toString(t),"could not be resolved."),r._warned=!0),s.name});for(var a=0;a<i[s].length;a+=1)e.dependencies(i[s][a],i);return i}},e.dependencyParse=function(e){return n.isString(e)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/.test(e)||n.warn("Plugin.dependencyParse:",e,"is not a valid dependency string."),{name:e.split("@")[0],range:e.split("@")[1]||"*"}):{name:e.name,range:e.range||e.version}},e.versionParse=function(e){/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/.test(e)||n.warn("Plugin.versionParse:",e,"is not a valid version or range.");var r=e.split("-");e=r[0];var i=isNaN(Number(e[0])),t=i?e.substr(1):e,s=n.map(t.split("."),function(e){return Number(e)});return{isRange:i,version:t,range:e,operator:i?e[0]:"",parts:s,prerelease:r[1],number:1e8*s[0]+1e4*s[1]+s[2]}},e.versionSatisfies=function(n,r){r=r||"*";var i=e.versionParse(r),t=i.parts,s=e.versionParse(n),a=s.parts;if(i.isRange){if("*"===i.operator||"*"===n)return!0;if("~"===i.operator)return a[0]===t[0]&&a[1]===t[1]&&a[2]>=t[2];if("^"===i.operator)return t[0]>0?a[0]===t[0]&&s.number>=i.number:t[1]>0?a[1]===t[1]&&a[2]>=t[2]:a[2]===t[2]}return n===r||"*"===n};
},{"./Common":902}],891:[function(require,module,exports) {
var e={};module.exports=e;var r=require("./Plugin"),t=require("./Common");e.name="matter-js",e.version="0.13.1",e.uses=[],e.used=[],e.use=function(){r.use(e,Array.prototype.slice.call(arguments))},e.before=function(r,a){return r=r.replace(/^Matter./,""),t.chainPathBefore(e,r,a)},e.after=function(r,a){return r=r.replace(/^Matter./,""),t.chainPathAfter(e,r,a)};
},{"./Plugin":906,"./Common":902}],893:[function(require,module,exports) {
var e={};module.exports=e;var r=require("./Composite"),o=require("../constraint/Constraint"),t=require("../core/Common");e.create=function(e){var o=r.create(),a={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}};return t.extend(o,a,e)};
},{"./Composite":892,"../constraint/Constraint":901,"../core/Common":902}],895:[function(require,module,exports) {
var r={};module.exports=r;var t=require("./Pair"),o=require("./Detector"),n=require("../core/Common");!function(){r.create=function(t){var e={controller:r,detector:o.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return n.extend(e,t)},r.update=function(r,t,o,n){var a,f,h,b,m,g=o.world,p=r.buckets,v=!1,x=o.metrics;for(x.broadphaseTests=0,a=0;a<t.length;a++){var C=t[a];if((!C.isSleeping||n)&&!(C.bounds.max.x<g.bounds.min.x||C.bounds.min.x>g.bounds.max.x||C.bounds.max.y<g.bounds.min.y||C.bounds.min.y>g.bounds.max.y)){var w=i(r,C);if(!C.region||w.id!==C.region.id||n){x.broadphaseTests+=1,C.region&&!n||(C.region=w);var R=e(w,C.region);for(f=R.startCol;f<=R.endCol;f++)for(h=R.startRow;h<=R.endRow;h++){b=p[m=s(f,h)];var k=f>=w.startCol&&f<=w.endCol&&h>=w.startRow&&h<=w.endRow,M=f>=C.region.startCol&&f<=C.region.endCol&&h>=C.region.startRow&&h<=C.region.endRow;!k&&M&&M&&b&&c(r,b,C),(C.region===w||k&&!M||n)&&(b||(b=u(p,m)),d(r,b,C))}C.region=w,v=!0}}}v&&(r.pairsList=l(r))},r.clear=function(r){r.buckets={},r.pairs={},r.pairsList=[]};var e=function(r,t){var o=Math.min(r.startCol,t.startCol),n=Math.max(r.endCol,t.endCol),e=Math.min(r.startRow,t.startRow),i=Math.max(r.endRow,t.endRow);return a(o,n,e,i)},i=function(r,t){var o=t.bounds,n=Math.floor(o.min.x/r.bucketWidth),e=Math.floor(o.max.x/r.bucketWidth),i=Math.floor(o.min.y/r.bucketHeight),s=Math.floor(o.max.y/r.bucketHeight);return a(n,e,i,s)},a=function(r,t,o,n){return{id:r+","+t+","+o+","+n,startCol:r,endCol:t,startRow:o,endRow:n}},s=function(r,t){return"C"+r+"R"+t},u=function(r,t){return r[t]=[]},d=function(r,o,n){for(var e=0;e<o.length;e++){var i=o[e];if(!(n.id===i.id||n.isStatic&&i.isStatic)){var a=t.id(n,i),s=r.pairs[a];s?s[2]+=1:r.pairs[a]=[n,i,1]}}o.push(n)},c=function(r,o,n){o.splice(o.indexOf(n),1);for(var e=0;e<o.length;e++){var i=o[e],a=t.id(n,i),s=r.pairs[a];s&&(s[2]-=1)}},l=function(r){var t,o,e=[];t=n.keys(r.pairs);for(var i=0;i<t.length;i++)(o=r.pairs[t[i]])[2]>0?e.push(o):delete r.pairs[t[i]];return e}}();
},{"./Pair":897,"./Detector":894,"../core/Common":902}],896:[function(require,module,exports) {
var e={};module.exports=e;var i=require("./Pair"),t=require("../core/Common");e.create=function(e){return t.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},e)},e.update=function(e,t,l){var o,n,c,r,s=e.list,d=e.table,a=e.collisionStart,h=e.collisionEnd,u=e.collisionActive;for(a.length=0,h.length=0,u.length=0,r=0;r<s.length;r++)s[r].confirmedActive=!1;for(r=0;r<t.length;r++)(o=t[r]).collided&&((c=d[n=i.id(o.bodyA,o.bodyB)])?(c.isActive?u.push(c):a.push(c),i.update(c,o,l),c.confirmedActive=!0):(c=i.create(o,l),d[n]=c,a.push(c),s.push(c)));for(r=0;r<s.length;r++)(c=s[r]).confirmedActive||(i.setActive(c,!1,l),h.push(c))},e.removeOld=function(e,i){var t,l,o,n,c=e.list,r=e.table,s=[];for(n=0;n<c.length;n++)(l=(t=c[n]).collision).bodyA.isSleeping||l.bodyB.isSleeping?t.timeUpdated=i:i-t.timeUpdated>1e3&&s.push(n);for(n=0;n<s.length;n++)delete r[(t=c[o=s[n]-n]).id],c.splice(o,1)},e.clear=function(e){return e.table={},e.list.length=0,e.collisionStart.length=0,e.collisionActive.length=0,e.collisionEnd.length=0,e};
},{"./Pair":897,"../core/Common":902}],898:[function(require,module,exports) {
var r={};module.exports=r;var e=require("../geometry/Vector"),o=require("./SAT"),n=require("../geometry/Bounds"),a=require("../factory/Bodies"),t=require("../geometry/Vertices");r.ray=function(r,t,s,u){u=u||1e-100;for(var i=e.angle(t,s),l=e.magnitude(e.sub(t,s)),d=.5*(s.x+t.x),v=.5*(s.y+t.y),g=a.rectangle(d,v,l,u,{angle:i}),f=[],p=0;p<r.length;p++){var b=r[p];if(n.overlaps(b.bounds,g.bounds))for(var c=1===b.parts.length?0:1;c<b.parts.length;c++){var h=b.parts[c];if(n.overlaps(h.bounds,g.bounds)){var y=o.collides(h,g);if(y.collided){y.body=y.bodyA=y.bodyB=b,f.push(y);break}}}}return f},r.region=function(r,e,o){for(var a=[],t=0;t<r.length;t++){var s=r[t],u=n.overlaps(s.bounds,e);(u&&!o||!u&&o)&&a.push(s)}return a},r.point=function(r,e){for(var o=[],a=0;a<r.length;a++){var s=r[a];if(n.contains(s.bounds,e))for(var u=1===s.parts.length?0:1;u<s.parts.length;u++){var i=s.parts[u];if(n.contains(i.bounds,e)&&t.contains(i.vertices,e)){o.push(s);break}}}return o};
},{"../geometry/Vector":912,"./SAT":900,"../geometry/Bounds":911,"../factory/Bodies":909,"../geometry/Vertices":913}],899:[function(require,module,exports) {
var i={};module.exports=i;var e=require("../geometry/Vertices"),t=require("../geometry/Vector"),o=require("../core/Common"),s=require("../geometry/Bounds");i._restingThresh=4,i._restingThreshTangent=6,i._positionDampen=.9,i._positionWarming=.8,i._frictionNormalMultiplier=5,i.preSolvePosition=function(i){var e,t,o;for(e=0;e<i.length;e++)(t=i[e]).isActive&&(o=t.activeContacts.length,t.collision.parentA.totalContacts+=o,t.collision.parentB.totalContacts+=o)},i.solvePosition=function(e,t,o){var s,n,r,p,a,l,v,m,c,u,y,g,I,x,P,f,h=o*i._positionDampen;for(s=0;s<t.length;s++){var S=t[s];S.previousPositionImpulse.x=S.positionImpulse.x,S.previousPositionImpulse.y=S.positionImpulse.y}for(s=0;s<e.length;s++)(p=e[s]).isActive&&!p.isSensor&&(l=(a=p.collision).parentA,v=a.parentB,m=a.normal,y=l.previousPositionImpulse,g=v.previousPositionImpulse,u=a.penetration,x=g.x-y.x+u.x,P=g.y-y.y+u.y,c=(n=m.x)*x+(r=m.y)*P,p.separation=c,f=(c-p.slop)*h,(l.isStatic||v.isStatic)&&(f*=2),l.isStatic||l.isSleeping||(I=f/l.totalContacts,l.positionImpulse.x+=n*I,l.positionImpulse.y+=r*I),v.isStatic||v.isSleeping||(I=f/v.totalContacts,v.positionImpulse.x-=n*I,v.positionImpulse.y-=r*I))},i.postSolvePosition=function(o){for(var n=0;n<o.length;n++){var r=o[n];if(r.totalContacts=0,0!==r.positionImpulse.x||0!==r.positionImpulse.y){for(var p=0;p<r.parts.length;p++){var a=r.parts[p];e.translate(a.vertices,r.positionImpulse),s.update(a.bounds,a.vertices,r.velocity),a.position.x+=r.positionImpulse.x,a.position.y+=r.positionImpulse.y}r.positionPrev.x+=r.positionImpulse.x,r.positionPrev.y+=r.positionImpulse.y,t.dot(r.positionImpulse,r.velocity)<0?(r.positionImpulse.x=0,r.positionImpulse.y=0):(r.positionImpulse.x*=i._positionWarming,r.positionImpulse.y*=i._positionWarming)}}},i.preSolveVelocity=function(i){var e,o,s,n,r,p,a,l,v,m,c,u,y,g,I=t._temp[0],x=t._temp[1];for(e=0;e<i.length;e++)if((s=i[e]).isActive&&!s.isSensor)for(n=s.activeContacts,p=(r=s.collision).parentA,a=r.parentB,l=r.normal,v=r.tangent,o=0;o<n.length;o++)c=(m=n[o]).vertex,u=m.normalImpulse,y=m.tangentImpulse,0===u&&0===y||(I.x=l.x*u+v.x*y,I.y=l.y*u+v.y*y,p.isStatic||p.isSleeping||(g=t.sub(c,p.position,x),p.positionPrev.x+=I.x*p.inverseMass,p.positionPrev.y+=I.y*p.inverseMass,p.anglePrev+=t.cross(g,I)*p.inverseInertia),a.isStatic||a.isSleeping||(g=t.sub(c,a.position,x),a.positionPrev.x-=I.x*a.inverseMass,a.positionPrev.y-=I.y*a.inverseMass,a.anglePrev-=t.cross(g,I)*a.inverseInertia))},i.solveVelocity=function(e,s){for(var n=s*s,r=t._temp[0],p=t._temp[1],a=t._temp[2],l=t._temp[3],v=t._temp[4],m=t._temp[5],c=0;c<e.length;c++){var u=e[c];if(u.isActive&&!u.isSensor){var y=u.collision,g=y.parentA,I=y.parentB,x=y.normal,P=y.tangent,f=u.activeContacts,h=1/f.length;g.velocity.x=g.position.x-g.positionPrev.x,g.velocity.y=g.position.y-g.positionPrev.y,I.velocity.x=I.position.x-I.positionPrev.x,I.velocity.y=I.position.y-I.positionPrev.y,g.angularVelocity=g.angle-g.anglePrev,I.angularVelocity=I.angle-I.anglePrev;for(var S=0;S<f.length;S++){var _=f[S],M=_.vertex,d=t.sub(M,g.position,p),C=t.sub(M,I.position,a),A=t.add(g.velocity,t.mult(t.perp(d),g.angularVelocity),l),V=t.add(I.velocity,t.mult(t.perp(C),I.angularVelocity),v),b=t.sub(A,V,m),T=t.dot(x,b),B=t.dot(P,b),q=Math.abs(B),W=o.sign(B),D=(1+u.restitution)*T,N=o.clamp(u.separation+T,0,1)*i._frictionNormalMultiplier,j=B,k=1/0;q>u.friction*u.frictionStatic*N*n&&(k=q,j=o.clamp(u.friction*W*n,-k,k));var w=t.cross(d,x),z=t.cross(C,x),E=h/(g.inverseMass+I.inverseMass+g.inverseInertia*w*w+I.inverseInertia*z*z);if(D*=E,j*=E,T<0&&T*T>i._restingThresh*n)_.normalImpulse=0;else{var F=_.normalImpulse;_.normalImpulse=Math.min(_.normalImpulse+D,0),D=_.normalImpulse-F}if(B*B>i._restingThreshTangent*n)_.tangentImpulse=0;else{var G=_.tangentImpulse;_.tangentImpulse=o.clamp(_.tangentImpulse+j,-k,k),j=_.tangentImpulse-G}r.x=x.x*D+P.x*j,r.y=x.y*D+P.y*j,g.isStatic||g.isSleeping||(g.positionPrev.x+=r.x*g.inverseMass,g.positionPrev.y+=r.y*g.inverseMass,g.anglePrev+=t.cross(d,r)*g.inverseInertia),I.isStatic||I.isSleeping||(I.positionPrev.x-=r.x*I.inverseMass,I.positionPrev.y-=r.y*I.inverseMass,I.anglePrev-=t.cross(C,r)*I.inverseInertia)}}}};
},{"../geometry/Vertices":913,"../geometry/Vector":912,"../core/Common":902,"../geometry/Bounds":911}],939:[function(require,module,exports) {
var e={};module.exports=e;var s=require("../body/Composite"),r=require("./Common");e.create=function(e){return r.extend({extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0},!1,e)},e.reset=function(e){e.extended&&(e.narrowDetections=0,e.narrowphaseTests=0,e.narrowReuse=0,e.narrowReuseCount=0,e.midphaseTests=0,e.broadphaseTests=0,e.narrowEff=0,e.midEff=0,e.broadEff=0,e.collisions=0,e.buckets=0,e.pairs=0,e.bodies=0)},e.update=function(e,r){if(e.extended){var o=r.world,t=s.allBodies(o);e.collisions=e.narrowDetections,e.pairs=r.pairs.list.length,e.bodies=t.length,e.midEff=(e.narrowDetections/(e.midphaseTests||1)).toFixed(2),e.narrowEff=(e.narrowDetections/(e.narrowphaseTests||1)).toFixed(2),e.broadEff=(1-e.broadphaseTests/(t.length||1)).toFixed(2),e.narrowReuse=(e.narrowReuseCount/(e.narrowphaseTests||1)).toFixed(2)}};
},{"../body/Composite":892,"./Common":902}],903:[function(require,module,exports) {
var e={};module.exports=e;var r=require("../body/World"),i=require("./Sleeping"),t=require("../collision/Resolver"),o=require("../collision/Pairs"),l=require("./Metrics"),a=require("../collision/Grid"),n=require("./Events"),s=require("../body/Composite"),c=require("../constraint/Constraint"),d=require("./Common"),p=require("../body/Body");!function(){e.create=function(e,i){i=d.isElement(e)?i:e,e=d.isElement(e)?e:null,i=i||{},(e||i.render)&&d.warn("Engine.create: engine.render is deprecated (see docs)");var t={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:a}},n=d.extend(t,i);return n.world=i.world||r.create(n.world),n.pairs=o.create(),n.broadphase=n.broadphase.controller.create(n.broadphase),n.metrics=n.metrics||{extended:!1},n.metrics=l.create(n.metrics),n},e.update=function(e,r,a){r=r||1e3/60,a=a||1;var d,p=e.world,g=e.timing,f=e.broadphase,S=[];g.timestamp+=r*g.timeScale;var b={timestamp:g.timestamp};n.trigger(e,"beforeUpdate",b);var y=s.allBodies(p),h=s.allConstraints(p);for(l.reset(e.metrics),e.enableSleeping&&i.update(y,g.timeScale),m(y,p.gravity),u(y,r,g.timeScale,a,p.bounds),c.preSolveAll(y),d=0;d<e.constraintIterations;d++)c.solveAll(h,g.timeScale);c.postSolveAll(y),f.controller?(p.isModified&&f.controller.clear(f),f.controller.update(f,y,e,p.isModified),S=f.pairsList):S=y,p.isModified&&s.setModified(p,!1,!1,!0);var q=f.detector(S,e),w=e.pairs,x=g.timestamp;for(o.update(w,q,x),o.removeOld(w,x),e.enableSleeping&&i.afterCollisions(w.list,g.timeScale),w.collisionStart.length>0&&n.trigger(e,"collisionStart",{pairs:w.collisionStart}),t.preSolvePosition(w.list),d=0;d<e.positionIterations;d++)t.solvePosition(w.list,y,g.timeScale);for(t.postSolvePosition(y),c.preSolveAll(y),d=0;d<e.constraintIterations;d++)c.solveAll(h,g.timeScale);for(c.postSolveAll(y),t.preSolveVelocity(w.list),d=0;d<e.velocityIterations;d++)t.solveVelocity(w.list,g.timeScale);return w.collisionActive.length>0&&n.trigger(e,"collisionActive",{pairs:w.collisionActive}),w.collisionEnd.length>0&&n.trigger(e,"collisionEnd",{pairs:w.collisionEnd}),l.update(e.metrics,e),v(y),n.trigger(e,"afterUpdate",b),e},e.merge=function(r,t){if(d.extend(r,t),t.world){r.world=t.world,e.clear(r);for(var o=s.allBodies(r.world),l=0;l<o.length;l++){var a=o[l];i.set(a,!1),a.id=d.nextId()}}},e.clear=function(e){var r=e.world;o.clear(e.pairs);var i=e.broadphase;if(i.controller){var t=s.allBodies(r);i.controller.clear(i),i.controller.update(i,t,e,!0)}};var v=function(e){for(var r=0;r<e.length;r++){var i=e[r];i.force.x=0,i.force.y=0,i.torque=0}},m=function(e,r){var i=void 0!==r.scale?r.scale:.001;if((0!==r.x||0!==r.y)&&0!==i)for(var t=0;t<e.length;t++){var o=e[t];o.ignoreGravity||o.isStatic||o.isSleeping||(o.force.y+=o.mass*r.y*i,o.force.x+=o.mass*r.x*i)}},u=function(e,r,i,t,o){for(var l=0;l<e.length;l++){var a=e[l];a.isStatic||a.isSleeping||p.update(a,r,i,t)}}}();
},{"../body/World":893,"./Sleeping":905,"../collision/Resolver":899,"../collision/Pairs":896,"./Metrics":939,"../collision/Grid":895,"./Events":904,"../body/Composite":892,"../constraint/Constraint":901,"./Common":902,"../body/Body":890}],910:[function(require,module,exports) {
var e={};module.exports=e;var a=require("../geometry/Bounds");!function(){e.pathToVertices=function(e,t){var r,c,s,i,o,n,g,h,S,p,b,l=[],m=0,u=0,y=0;t=t||15;var A=function(e,a,t){var r=t%2==1&&t>1;if(!S||e!=S.x||a!=S.y){S&&r?(p=S.x,b=S.y):(p=0,b=0);var c={x:p+e,y:b+a};!r&&S||(S=c),l.push(c),u=p+e,y=b+a}},f=function(e){var a=e.pathSegTypeAsLetter.toUpperCase();if("Z"!==a){switch(a){case"M":case"L":case"T":case"C":case"S":case"Q":u=e.x,y=e.y;break;case"H":u=e.x;break;case"V":y=e.y}A(u,y,e.pathSegType)}};for(a(e),s=e.getTotalLength(),n=[],r=0;r<e.pathSegList.numberOfItems;r+=1)n.push(e.pathSegList.getItem(r));for(g=n.concat();m<s;){if((o=n[e.getPathSegAtLength(m)])!=h){for(;g.length&&g[0]!=o;)f(g.shift());h=o}switch(o.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":i=e.getPointAtLength(m),A(i.x,i.y,0)}m+=t}for(r=0,c=g.length;r<c;++r)f(g[r]);return l};var a=function(e){for(var a,t,r,c,s,i,o=e.pathSegList,n=0,g=0,h=o.numberOfItems,S=0;S<h;++S){var p=o.getItem(S),b=p.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(b))"x"in p&&(n=p.x),"y"in p&&(g=p.y);else switch("x1"in p&&(r=n+p.x1),"x2"in p&&(s=n+p.x2),"y1"in p&&(c=g+p.y1),"y2"in p&&(i=g+p.y2),"x"in p&&(n+=p.x),"y"in p&&(g+=p.y),b){case"m":o.replaceItem(e.createSVGPathSegMovetoAbs(n,g),S);break;case"l":o.replaceItem(e.createSVGPathSegLinetoAbs(n,g),S);break;case"h":o.replaceItem(e.createSVGPathSegLinetoHorizontalAbs(n),S);break;case"v":o.replaceItem(e.createSVGPathSegLinetoVerticalAbs(g),S);break;case"c":o.replaceItem(e.createSVGPathSegCurvetoCubicAbs(n,g,r,c,s,i),S);break;case"s":o.replaceItem(e.createSVGPathSegCurvetoCubicSmoothAbs(n,g,s,i),S);break;case"q":o.replaceItem(e.createSVGPathSegCurvetoQuadraticAbs(n,g,r,c),S);break;case"t":o.replaceItem(e.createSVGPathSegCurvetoQuadraticSmoothAbs(n,g),S);break;case"a":o.replaceItem(e.createSVGPathSegArcAbs(n,g,p.r1,p.r2,p.angle,p.largeArcFlag,p.sweepFlag),S);break;case"z":case"Z":n=a,g=t}"M"!=b&&"m"!=b||(a=n,t=g)}}}();
},{"../geometry/Bounds":911}],808:[function(require,module,exports) {
var e=require("./lib/core/Matter");e.Body=require("./lib/body/Body"),e.Composite=require("./lib/body/Composite"),e.World=require("./lib/body/World"),e.Detector=require("./lib/collision/Detector"),e.Grid=require("./lib/collision/Grid"),e.Pairs=require("./lib/collision/Pairs"),e.Pair=require("./lib/collision/Pair"),e.Query=require("./lib/collision/Query"),e.Resolver=require("./lib/collision/Resolver"),e.SAT=require("./lib/collision/SAT"),e.Constraint=require("./lib/constraint/Constraint"),e.Common=require("./lib/core/Common"),e.Engine=require("./lib/core/Engine"),e.Events=require("./lib/core/Events"),e.Sleeping=require("./lib/core/Sleeping"),e.Plugin=require("./lib/core/Plugin"),e.Bodies=require("./lib/factory/Bodies"),e.Composites=require("./lib/factory/Composites"),e.Axes=require("./lib/geometry/Axes"),e.Bounds=require("./lib/geometry/Bounds"),e.Svg=require("./lib/geometry/Svg"),e.Vector=require("./lib/geometry/Vector"),e.Vertices=require("./lib/geometry/Vertices"),e.World.add=e.Composite.add,e.World.remove=e.Composite.remove,e.World.addComposite=e.Composite.addComposite,e.World.addBody=e.Composite.addBody,e.World.addConstraint=e.Composite.addConstraint,e.World.clear=e.Composite.clear,module.exports=e;
},{"./lib/core/Matter":891,"./lib/body/Body":890,"./lib/body/Composite":892,"./lib/body/World":893,"./lib/collision/Detector":894,"./lib/collision/Grid":895,"./lib/collision/Pairs":896,"./lib/collision/Pair":897,"./lib/collision/Query":898,"./lib/collision/Resolver":899,"./lib/collision/SAT":900,"./lib/constraint/Constraint":901,"./lib/core/Common":902,"./lib/core/Engine":903,"./lib/core/Events":904,"./lib/core/Sleeping":905,"./lib/core/Plugin":906,"./lib/factory/Bodies":909,"./lib/factory/Composites":908,"./lib/geometry/Axes":907,"./lib/geometry/Bounds":911,"./lib/geometry/Svg":910,"./lib/geometry/Vector":912,"./lib/geometry/Vertices":913}],914:[function(require,module,exports) {
var t=require("../../CustomMain"),o={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.13.1",silent:!0,install:function(t){t.after("Body.create",function(){o.Body.init(this)}),t.before("Engine.update",function(t){o.Engine.update(t)})},Body:{init:function(t){t.plugin.attractors=t.plugin.attractors||[]}},Engine:{update:function(o){for(var n=o.world,r=t.Composite.allBodies(n),i=0;i<r.length;i+=1){var a=r[i],e=a.plugin.attractors;if(e&&e.length>0)for(var s=i+1;s<r.length;s+=1)for(var c=r[s],u=0;u<e.length;u+=1){var l=e[u],p=l;t.Common.isFunction(l)&&(p=l(a,c)),p&&t.Body.applyForce(c,c.position,p)}}}},Attractors:{gravityConstant:.001,gravity:function(n,r){var i=t.Vector.sub(r.position,n.position),a=t.Vector.magnitudeSquared(i)||1e-4,e=t.Vector.normalise(i),s=-o.Attractors.gravityConstant*(n.mass*r.mass/a),c=t.Vector.mult(e,s);t.Body.applyForce(n,n.position,t.Vector.neg(c)),t.Body.applyForce(r,r.position,c)}}};module.exports=o;
},{"../../CustomMain":808}],915:[function(require,module,exports) {
var n=require("../../CustomMain"),o={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.13.1",silent:!0,install:function(n){n.after("Engine.update",function(){o.Engine.update(this)})},Engine:{update:function(a){for(var i=a.world,r=n.Composite.allBodies(i),t=n.Composite.allComposites(i),e=0;e<r.length;e+=1){var m=r[e];m.plugin.wrap&&o.Body.wrap(m,m.plugin.wrap)}for(e=0;e<t.length;e+=1){var u=t[e];u.plugin.wrap&&o.Composite.wrap(u,u.plugin.wrap)}}},Bounds:{wrap:function(n,o){var a=null,i=null;if(void 0!==o.min.x&&void 0!==o.max.x&&(n.min.x>o.max.x?a=o.min.x-n.max.x:n.max.x<o.min.x&&(a=o.max.x-n.min.x)),void 0!==o.min.y&&void 0!==o.max.y&&(n.min.y>o.max.y?i=o.min.y-n.max.y:n.max.y<o.min.y&&(i=o.max.y-n.min.y)),null!==a||null!==i)return{x:a||0,y:i||0}}},Body:{wrap:function(a,i){var r=o.Bounds.wrap(a.bounds,i);return r&&n.Body.translate(a,r),r}},Composite:{bounds:function(o){for(var a=n.Composite.allBodies(o),i=[],r=0;r<a.length;r+=1){var t=a[r];i.push(t.bounds.min,t.bounds.max)}return n.Bounds.create(i)},wrap:function(a,i){var r=o.Bounds.wrap(o.Composite.bounds(a),i);return r&&n.Composite.translate(a,r),r}}};module.exports=o;
},{"../../CustomMain":808}],814:[function(require,module,exports) {
var t=require("./lib/factory/Bodies"),e=require("../../utils/Class"),i=require("./lib/body/Composite"),o=require("./lib/core/Engine"),r=require("eventemitter3"),l=require("../../utils/object/GetFastValue"),s=require("../../utils/object/GetValue"),n=require("./lib/body/Body"),a=require("./lib/core/Events"),d=require("./lib/body/World"),u=require("./MatterTileBody"),h=new e({Extends:r,initialize:function(t,e){r.call(this),this.scene=t,this.engine=o.create(e),this.localWorld=this.engine.world;var i=s(e,"gravity",null);if(i&&this.setGravity(i.x,i.y,i.scale),this.walls={left:null,right:null,top:null,bottom:null},l(e,"setBounds",!1)){var n=e.setBounds;if("boolean"==typeof n)this.setBounds();else{var a=l(n,"x",0),d=l(n,"y",0),u=l(n,"width",t.sys.game.config.width),h=l(n,"height",t.sys.game.config.height),c=l(n,"thickness",64),g=l(n,"left",!0),v=l(n,"right",!0),y=l(n,"top",!0),b=l(n,"bottom",!0);this.setBounds(a,d,u,h,c,g,v,y,b)}}this.enabled=s(e,"enabled",!0),this.drawDebug=s(e,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:s(e,"debugShowBody",!0),debugShowStaticBody:s(e,"debugShowStaticBody",!0),debugShowVelocity:s(e,"debugShowVelocity",!0),bodyDebugColor:s(e,"debugBodyColor",16711935),staticBodyDebugColor:s(e,"debugBodyColor",255),velocityDebugColor:s(e,"debugVelocityColor",65280)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy()},setEventsProxy:function(){var t=this,e=this.engine;a.on(e,"beforeUpdate",function(e){t.emit("beforeupdate",e)}),a.on(e,"afterUpdate",function(e){t.emit("afterupdate",e)}),a.on(e,"collisionStart",function(e){var i,o,r=e.pairs;r.length>0&&(i=r[0].bodyA,o=r[0].bodyB),t.emit("collisionstart",e,i,o)}),a.on(e,"collisionActive",function(e){var i,o,r=e.pairs;r.length>0&&(i=r[0].bodyA,o=r[0].bodyB),t.emit("collisionactive",e,i,o)}),a.on(e,"collisionEnd",function(e){var i,o,r=e.pairs;r.length>0&&(i=r[0].bodyA,o=r[0].bodyB),t.emit("collisionend",e,i,o)})},setBounds:function(t,e,i,o,r,l,s,n,a){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.scene.sys.game.config.width),void 0===o&&(o=this.scene.sys.game.config.height),void 0===r&&(r=128),void 0===l&&(l=!0),void 0===s&&(s=!0),void 0===n&&(n=!0),void 0===a&&(a=!0),this.updateWall(l,"left",t-r,e,r,o),this.updateWall(s,"right",t+i,e,r,o),this.updateWall(n,"top",t,e-r,i,r),this.updateWall(a,"bottom",t,e+o,i,r),this},updateWall:function(t,e,i,o,r,l){var s=this.walls[e];t?(s&&d.remove(this.localWorld,s),i+=r/2,o+=l/2,this.walls[e]=this.create(i,o,r,l,{isStatic:!0,friction:0,frictionStatic:0})):(s&&d.remove(this.localWorld,s),this.walls[e]=null)},createDebugGraphic:function(){var t=this.scene.sys.add.graphics({x:0,y:0});return t.setZ(Number.MAX_VALUE),this.debugGraphic=t,this.drawDebug=!0,t},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=1),this.localWorld.gravity.x=t,this.localWorld.gravity.y=e,void 0!==i&&(this.localWorld.gravity.scale=i),this},create:function(e,i,o,r,l){var s=t.rectangle(e,i,o,r,l);return d.add(this.localWorld,s),s},add:function(t){return d.add(this.localWorld,t),this},remove:function(t,e){var o=t.body?t.body:t;return i.removeBody(this.localWorld,o,e),this},removeConstraint:function(t,e){return i.remove(this.localWorld,t,e),this},convertTilemapLayer:function(t,e){var i=t.layer,o=t.getTilesWithin(0,0,i.width,i.height,{isColliding:!0});return this.convertTiles(o,e),this},convertTiles:function(t,e){if(0===t.length)return this;for(var i=0;i<t.length;i++)new u(this,t[i],e);return this},nextGroup:function(t){return n.nextGroup(t)},nextCategory:function(){return n.nextCategory()},pause:function(){return this.enabled=!1,this.emit("pause"),this},resume:function(){return this.enabled=!0,this.emit("resume"),this},update:function(t,e){if(this.enabled){o.update(this.engine,e,1)}},postUpdate:function(){if(this.drawDebug){var t=this.debugGraphic,e=i.allBodies(this.localWorld);t.clear(),t.lineStyle(1,this.defaults.bodyDebugColor),t.beginPath();for(var o=0;o<e.length;o++){if(!e[o].render.visible)return;for(var r=0;r<e[o].parts.length;r++){var l=e[o].parts[r].vertices;t.moveTo(l[0].x,l[0].y);for(var s=1;s<l.length;s++)t.lineTo(l[s].x,l[s].y);t.lineTo(l[0].x,l[0].y),t.strokePath()}}t.closePath()}},fromPath:function(t,e){void 0===e&&(e=[]);return t.replace(/L?\s*([\-\d\.e]+)[\s,]*([\-\d\.e]+)*/gi,function(t,i,o){e.push({x:parseFloat(i),y:parseFloat(o)})}),e},shutdown:function(){d.clear(this.localWorld,!1),o.clear(this.engine)},destroy:function(){this.shutdown()}});module.exports=h;
},{"./lib/factory/Bodies":909,"../../utils/Class":8,"./lib/body/Composite":892,"./lib/core/Engine":903,"eventemitter3":35,"../../utils/object/GetFastValue":102,"../../utils/object/GetValue":53,"./lib/body/Body":890,"./lib/core/Events":904,"./lib/body/World":893,"./MatterTileBody":813}],811:[function(require,module,exports) {
var t=require("../../utils/Class"),e=require("./Factory"),s=require("../../utils/object/GetFastValue"),i=require("../../utils/object/GetValue"),r=require("./lib/plugins/MatterAttractors"),o=require("./lib/core/Matter"),n=require("./lib/plugins/MatterWrap"),u=require("../../utils/object/Merge"),h=require("./lib/core/Plugin"),a=require("../../boot/PluginManager"),l=require("./World"),d=new t({initialize:function(t){this.scene=t,this.systems=t.sys,t.sys.settings.isBooted||t.sys.events.once("boot",this.boot,this),this.config=this.getConfig(),this.world,this.add},getConfig:function(){var t=this.systems.game.config.physics,e=this.systems.settings.physics;return u(s(e,"matter",{}),s(t,"matter",{}))},boot:function(){var t=this.config;this.world=new l(this.scene,t),this.add=new e(this.world),i(t,"plugins.attractors",!1)&&(h.register(r),h.use(o,r)),i(t,"plugins.wrap",!1)&&(h.register(n),h.use(o,n));var s=this.systems.events;s.on("update",this.world.update,this.world),s.on("postupdate",this.world.postUpdate,this.world),s.on("shutdown",this.shutdown,this),s.on("destroy",this.destroy,this)},enableAttractorPlugin:function(){return h.register(r),h.use(o,r),this},enableWrapPlugin:function(){return h.register(n),h.use(o,n),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},shutdown:function(){this.world.shutdown()},destroy:function(){this.world.destroy()}});a.register("MatterPhysics",d,"matterPhysics"),module.exports=d;
},{"../../utils/Class":8,"./Factory":809,"../../utils/object/GetFastValue":102,"../../utils/object/GetValue":53,"./lib/plugins/MatterAttractors":914,"./lib/core/Matter":891,"./lib/plugins/MatterWrap":915,"../../utils/object/Merge":866,"./lib/core/Plugin":906,"../../boot/PluginManager":16,"./World":814}],532:[function(require,module,exports) {
module.exports={Factory:require("./Factory"),Image:require("./MatterImage"),Matter:require("./CustomMain"),MatterPhysics:require("./MatterPhysics"),PolyDecomp:require("./poly-decomp"),Sprite:require("./MatterSprite"),TileBody:require("./MatterTileBody"),World:require("./World")};
},{"./Factory":809,"./MatterImage":810,"./CustomMain":808,"./MatterPhysics":811,"./poly-decomp":936,"./MatterSprite":812,"./MatterTileBody":813,"./World":814}],83:[function(require,module,exports) {
module.exports={Arcade:require("./arcade"),Impact:require("./impact"),Matter:require("./matter-js")};
},{"./arcade":530,"./impact":531,"./matter-js":532}],533:[function(require,module,exports) {
module.exports={CanvasRenderer:require("./CanvasRenderer"),BlitImage:require("./utils/BlitImage"),DrawImage:require("./utils/DrawImage"),GetBlendModes:require("./utils/GetBlendModes")};
},{"./CanvasRenderer":56,"./utils/BlitImage":124,"./utils/DrawImage":125,"./utils/GetBlendModes":126}],534:[function(require,module,exports) {
module.exports={Canvas:require("./CanvasSnapshot"),WebGL:require("./WebGLSnapshot")};
},{"./CanvasSnapshot":109,"./WebGLSnapshot":111}],937:[function(require,module,exports) {
module.exports={BitmapMaskPipeline:require("./BitmapMaskPipeline"),FlatTintPipeline:require("./FlatTintPipeline"),ForwardDiffuseLightPipeline:require("./ForwardDiffuseLightPipeline"),TextureTintPipeline:require("./TextureTintPipeline")};
},{"./BitmapMaskPipeline":127,"./FlatTintPipeline":128,"./ForwardDiffuseLightPipeline":129,"./TextureTintPipeline":130}],535:[function(require,module,exports) {
module.exports={Utils:require("./Utils"),WebGLPipeline:require("./WebGLPipeline"),WebGLRenderer:require("./WebGLRenderer"),Pipelines:require("./pipelines"),BYTE:0,SHORT:1,UNSIGNED_BYTE:2,UNSIGNED_SHORT:3,FLOAT:4};
},{"./Utils":116,"./WebGLPipeline":350,"./WebGLRenderer":57,"./pipelines":937}],84:[function(require,module,exports) {
module.exports={Canvas:require("./canvas"),Snapshot:require("./snapshot"),WebGL:require("./webgl")};
},{"./canvas":533,"./snapshot":534,"./webgl":535}],262:[function(require,module,exports) {
var t=require("../utils/Class"),s=require("./const"),i=require("../boot/PluginManager"),e=new t({initialize:function(t){this.scene=t,this.systems=t.sys,t.sys.settings.isBooted||t.sys.events.once("boot",this.boot,this),this.settings=t.sys.settings,this.key=t.sys.settings.key,this.manager=t.sys.game.scene},boot:function(){var t=this.systems.events;t.on("shutdown",this.shutdown,this),t.on("destroy",this.destroy,this)},start:function(t,i){return void 0===t&&(t=this.key),this.settings.status!==s.RUNNING?(this.manager.queueOp("stop",this.key),this.manager.queueOp("start",t,i)):(this.manager.stop(this.key),this.manager.start(t,i)),this},add:function(t,s,i){return this.manager.add(t,s,i),this},launch:function(t,i){return t&&t!==this.key&&(this.settings.status!==s.RUNNING?this.manager.queueOp("start",t,i):this.manager.start(t,i)),this},pause:function(t){return void 0===t&&(t=this.key),this.manager.pause(t),this},resume:function(t){return void 0===t&&(t=this.key),this.manager.resume(t),this},sleep:function(t){return void 0===t&&(t=this.key),this.manager.sleep(t),this},wake:function(t){return void 0===t&&(t=this.key),this.manager.wake(t),this},switch:function(t){return t!==this.key&&(this.settings.status!==s.RUNNING?this.manager.queueOp("switch",this.key,t):this.manager.switch(this.key,t)),this},stop:function(t){return void 0===t&&(t=this.key),this.manager.stop(t),this},setActive:function(t){return this.settings.active=t,this},setVisible:function(t){return this.settings.visible=t,this},isSleeping:function(t){return void 0===t&&(t=this.key),this.manager.isSleeping(t)},isActive:function(t){return void 0===t&&(t=this.key),this.manager.isActive(t)},isVisible:function(t){return void 0===t&&(t=this.key),this.manager.isVisible(t)},swapPosition:function(t,s){return void 0===s&&(s=this.key),t!==s&&this.manager.swapPosition(t,s),this},moveAbove:function(t,s){return void 0===s&&(s=this.key),t!==s&&this.manager.moveAbove(t,s),this},moveBelow:function(t,s){return void 0===s&&(s=this.key),t!==s&&this.manager.moveBelow(t,s),this},remove:function(t){return void 0===t&&(t=this.key),this.manager.remove(t),this},moveUp:function(t){return void 0===t&&(t=this.key),this.manager.moveUp(t),this},moveDown:function(t){return void 0===t&&(t=this.key),this.manager.moveDown(t),this},bringToTop:function(t){return void 0===t&&(t=this.key),this.manager.bringToTop(t),this},sendToBack:function(t){return void 0===t&&(t=this.key),this.manager.sendToBack(t),this},get:function(t){return this.manager.getScene(t)},shutdown:function(){},destroy:function(){}});i.register("ScenePlugin",e,"scenePlugin"),module.exports=e;
},{"../utils/Class":8,"./const":45,"../boot/PluginManager":16}],85:[function(require,module,exports) {
var e=require("./const"),r=require("../utils/object/Extend"),n={SceneManager:require("./SceneManager"),ScenePlugin:require("./ScenePlugin"),Settings:require("./Settings"),Systems:require("./Systems")};n=r(!1,n,e),module.exports=n;
},{"./const":45,"../utils/object/Extend":13,"./SceneManager":26,"./ScenePlugin":262,"./Settings":51,"./Systems":32}],86:[function(require,module,exports) {
module.exports={SoundManagerCreator:require("./SoundManagerCreator"),BaseSound:require("./BaseSound"),BaseSoundManager:require("./BaseSoundManager"),WebAudioSound:require("./webaudio/WebAudioSound"),WebAudioSoundManager:require("./webaudio/WebAudioSoundManager"),HTML5AudioSound:require("./html5/HTML5AudioSound"),HTML5AudioSoundManager:require("./html5/HTML5AudioSoundManager"),NoAudioSound:require("./noaudio/NoAudioSound"),NoAudioSoundManager:require("./noaudio/NoAudioSoundManager")};
},{"./SoundManagerCreator":27,"./BaseSound":267,"./BaseSoundManager":104,"./webaudio/WebAudioSound":123,"./webaudio/WebAudioSoundManager":65,"./html5/HTML5AudioSound":120,"./html5/HTML5AudioSoundManager":63,"./noaudio/NoAudioSound":119,"./noaudio/NoAudioSoundManager":64}],87:[function(require,module,exports) {
module.exports={List:require("./List"),Map:require("./Map"),ProcessQueue:require("./ProcessQueue"),RTree:require("./RTree"),Set:require("./Set")};
},{"./List":263,"./Map":38,"./ProcessQueue":264,"./RTree":265,"./Set":266}],268:[function(require,module,exports) {
var E={LINEAR:0,NEAREST:1};module.exports=E;
},{}],88:[function(require,module,exports) {
var e=require("./const"),r=require("../utils/object/Extend"),u={Parsers:require("./parsers"),Frame:require("./Frame"),Texture:require("./Texture"),TextureManager:require("./TextureManager"),TextureSource:require("./TextureSource")};u=r(!1,u,e),module.exports=u;
},{"./const":268,"../utils/object/Extend":13,"./parsers":387,"./Frame":97,"./Texture":47,"./TextureManager":28,"./TextureSource":98}],832:[function(require,module,exports) {
var t=function(t,e,r){return t>=0&&t<r.width&&e>=0&&e<r.height};module.exports=t;
},{}],825:[function(require,module,exports) {
var n=require("./IsInLayerBounds"),r=function(r,u,l,e){if(void 0===l&&(l=!1),n(r,u,e)){var a=e.data[u][r];return null===a?null:-1===a.index?l?a:null:a}return null};module.exports=r;
},{"./IsInLayerBounds":832}],815:[function(require,module,exports) {
var e=require("./GetTileAt"),c=function(c,o,t){var f=e(c,o,!0,t),a=e(c,o-1,!0,t),l=e(c,o+1,!0,t),i=e(c-1,o,!0,t),s=e(c+1,o,!0,t),r=f&&f.collides;return r&&(f.faceTop=!0,f.faceBottom=!0,f.faceLeft=!0,f.faceRight=!0),a&&a.collides&&(r&&(f.faceTop=!1),a.faceBottom=!r),l&&l.collides&&(r&&(f.faceBottom=!1),l.faceTop=!r),i&&i.collides&&(r&&(f.faceLeft=!1),i.faceRight=!r),s&&s.collides&&(r&&(f.faceRight=!1),s.faceLeft=!r),f&&!f.collides&&f.resetFaces(),f};module.exports=c;
},{"./GetTileAt":825}],827:[function(require,module,exports) {
var i=require("../../utils/object/GetFastValue"),t=function(t,e,a,n,o,h){void 0===t&&(t=0),void 0===e&&(e=0),void 0===a&&(a=h.width),void 0===n&&(n=h.height);var r=i(o,"isNotEmpty",!1),d=i(o,"isColliding",!1),s=i(o,"hasInterestingFace",!1);t<0&&(a+=t,t=0),e<0&&(n+=e,e=0),t+a>h.width&&(a=Math.max(h.width-t,0)),e+n>h.height&&(n=Math.max(h.height-e,0));for(var u=[],l=e;l<e+n;l++)for(var v=t;v<t+a;v++){var c=h.data[l][v];if(null!==c){if(r&&-1===c.index)continue;if(d&&!c.collides)continue;if(s&&!c.hasInterestingFace)continue;u.push(c)}}return u};module.exports=t;
},{"../../utils/object/GetFastValue":102}],816:[function(require,module,exports) {
var e=require("./GetTileAt"),l=require("./GetTilesWithin"),i=function(i,o,t,c,r){for(var n=null,s=null,u=null,a=null,f=l(i,o,t,c,null,r),d=0;d<f.length;d++){var x=f[d];x&&(x.collides?(n=e(x.x,x.y-1,!0,r),s=e(x.x,x.y+1,!0,r),u=e(x.x-1,x.y,!0,r),a=e(x.x+1,x.y,!0,r),x.faceTop=!n||!n.collides,x.faceBottom=!s||!s.collides,x.faceLeft=!u||!u.collides,x.faceRight=!a||!a.collides):x.resetFaces())}};module.exports=i;
},{"./GetTileAt":825,"./GetTilesWithin":827}],817:[function(require,module,exports) {
var e=require("./GetTilesWithin"),i=require("./CalculateFacesWithin"),t=function(t,a,r,l,h,n,o,u){t<0&&(t=0),a<0&&(a=0),void 0===o&&(o=!0);for(var d=e(t,a,r,l,null,u),c=h-t,v=n-a,s=0;s<d.length;s++){var f=d[s].x+c,g=d[s].y+v;f>=0&&f<u.width&&g>=0&&g<u.height&&u.data[g][f]&&u.data[g][f].copy(d[s])}o&&i(h-1,n-1,r+2,l+2,u)};module.exports=t;
},{"./GetTilesWithin":827,"./CalculateFacesWithin":816}],850:[function(require,module,exports) {
var e=function(e,a,r){var l=r.baseTileWidth,c=r.tilemapLayer,o=0;return c&&(void 0===a&&(a=c.scene.cameras.main),o=c.x+a.scrollX*(1-c.scrollFactorX),l*=c.scaleX),o+e*l};module.exports=e;
},{}],853:[function(require,module,exports) {
var e=function(e,a,r){var l=r.baseTileHeight,c=r.tilemapLayer,o=0;return c&&(void 0===a&&(a=c.scene.cameras.main),o=c.y+a.scrollY*(1-c.scrollFactorY),l*=c.scaleY),o+e*l};module.exports=e;
},{}],840:[function(require,module,exports) {
var e=require("./GetTilesWithin"),i=function(i,n,r,l,t,o,u){for(var d=e(r,l,t,o,null,u),x=0;x<d.length;x++)d[x]&&d[x].index===i&&(d[x].index=n)};module.exports=i;
},{"./GetTilesWithin":827}],818:[function(require,module,exports) {
var e=require("./TileToWorldX"),r=require("./TileToWorldY"),i=require("./GetTilesWithin"),t=require("./ReplaceByIndex"),a=function(a,h,l,n,o,d){void 0===l&&(l={}),Array.isArray(a)||(a=[a]);var u=d.tilemapLayer;void 0===n&&(n=u.scene),void 0===o&&(o=n.cameras.main);var f,s=i(0,0,d.width,d.height,null,d),y=[];for(f=0;f<s.length;f++){var v=s[f];if(-1!==a.indexOf(v.index)){l.x=e(v.x,o,d),l.y=r(v.y,o,d);var g=n.make.sprite(l);y.push(g)}}if("number"==typeof h)for(f=0;f<a.length;f++)t(a[f],h,0,0,d.width,d.height,d);else if(Array.isArray(h))for(f=0;f<a.length;f++)t(a[f],h[f],0,0,d.width,d.height,d);return y};module.exports=a;
},{"./TileToWorldX":850,"./TileToWorldY":853,"./GetTilesWithin":827,"./ReplaceByIndex":840}],819:[function(require,module,exports) {
var l=function(l,e,i){void 0===i&&(i=[]),i.length=0;for(var r=l.tilemapLayer,o=l.data,t=l.width,a=l.height,h=e.scrollX*e.zoom*r.scrollFactorX-r.x,c=e.scrollY*e.zoom*r.scrollFactorY-r.y,s=r.scaleX,d=r.scaleY,v=l.tileWidth*s,n=l.tileHeight*d,p=0;p<a;++p)for(var u=0;u<t;++u){var x=o[p][u];if(null!==x&&-1!==x.index){var f=x.pixelX*s-h,g=x.pixelY*d-c,m=e.width+v,X=e.height+n;x.visible&&f>-v&&g>-n&&f<m&&g<X&&i.push(x)}}return i};module.exports=l;
},{}],882:[function(require,module,exports) {
var o=function(o,e){e?o.setCollision(!0,!0,!0,!0,!1):o.resetCollision(!1)};module.exports=o;
},{}],820:[function(require,module,exports) {
var e=require("./GetTilesWithin"),i=require("./CalculateFacesWithin"),l=require("./SetTileCollision"),n=function(n,r,o,t,u,d,a){void 0===d&&(d=!0);for(var s=-1!==a.collideIndexes.indexOf(n),c=e(r,o,t,u,null,a),x=0;x<c.length;x++)c[x].index=n,l(c[x],s);d&&i(r-1,o-1,t+2,u+2,a)};module.exports=n;
},{"./GetTilesWithin":827,"./CalculateFacesWithin":816,"./SetTileCollision":882}],821:[function(require,module,exports) {
var e=require("./GetTilesWithin"),r=function(r,i,t,n,u,l,o,f){return e(t,n,u,l,o,f).filter(r,i)};module.exports=r;
},{"./GetTilesWithin":827}],822:[function(require,module,exports) {
var i=function(i,r,e,t){void 0===r&&(r=0),void 0===e&&(e=!1);var f,d,o,n=0;if(e){for(d=t.height-1;d>=0;d--)for(f=t.width-1;f>=0;f--)if((o=t.data[d][f])&&o.index===i){if(n===r)return o;n+=1}}else for(d=0;d<t.height;d++)for(f=0;f<t.width;f++)if((o=t.data[d][f])&&o.index===i){if(n===r)return o;n+=1}return null};module.exports=i;
},{}],823:[function(require,module,exports) {
var e=require("./GetTilesWithin"),i=function(i,n,r,t,u,l,o,d){return e(r,t,u,l,o,d).find(i,n)||null};module.exports=i;
},{"./GetTilesWithin":827}],824:[function(require,module,exports) {
var e=require("./GetTilesWithin"),i=function(i,r,o,t,n,u,a,c){e(o,t,n,u,a,c).forEach(i,r)};module.exports=i;
},{"./GetTilesWithin":827}],852:[function(require,module,exports) {
var a=function(a,e,r,o){void 0===e&&(e=!0);var l=o.baseTileWidth,c=o.tilemapLayer;return c&&(void 0===r&&(r=c.scene.cameras.main),a-=c.x+r.scrollX*(1-c.scrollFactorX),l*=c.scaleX),e?Math.floor(a/l):a/l};module.exports=a;
},{}],856:[function(require,module,exports) {
var e=function(e,a,r,o){void 0===a&&(a=!0);var l=o.baseTileHeight,c=o.tilemapLayer;return c&&(void 0===r&&(r=c.scene.cameras.main),e-=c.y+r.scrollY*(1-c.scrollFactorY),l*=c.scaleY),a?Math.floor(e/l):e/l};module.exports=e;
},{}],826:[function(require,module,exports) {
var e=require("./GetTileAt"),r=require("./WorldToTileX"),i=require("./WorldToTileY"),o=function(o,l,u,t,T){var d=r(o,!0,t,T),n=i(l,!0,t,T);return e(d,n,u,T)};module.exports=o;
},{"./GetTileAt":825,"./WorldToTileX":852,"./WorldToTileY":856}],828:[function(require,module,exports) {
var e=require("../../geom/"),r=require("./GetTilesWithin"),i=require("../../geom/intersects/"),t=require("../../utils/NOOP"),l=require("./TileToWorldX"),a=require("./TileToWorldY"),n=require("./WorldToTileX"),o=require("./WorldToTileY"),c=function(e,r){return i.RectangleToTriangle(r,e)},u=function(u,T,g,s){if(void 0===u)return[];var h=t;u instanceof e.Circle?h=i.CircleToRectangle:u instanceof e.Rectangle?h=i.RectangleToRectangle:u instanceof e.Triangle?h=c:u instanceof e.Line&&(h=i.LineToRectangle);var f=n(u.left,!0,g,s),m=o(u.top,!0,g,s),q=Math.ceil(n(u.right,!1,g,s)),d=Math.ceil(o(u.bottom,!1,g,s)),R=Math.max(q-f,1),p=Math.max(d-m,1),v=r(f,m,R,p,T,s),W=s.tileWidth,x=s.tileHeight;s.tilemapLayer&&(W*=s.tilemapLayer.scaleX,x*=s.tilemapLayer.scaleY);for(var y=[],L=new e.Rectangle(0,0,W,x),M=0;M<v.length;M++){var X=v[M];L.x=l(X.x,g,s),L.y=a(X.y,g,s),h(u,L)&&y.push(X)}return y};module.exports=u;
},{"../../geom/":79,"./GetTilesWithin":827,"../../geom/intersects/":514,"../../utils/NOOP":30,"./TileToWorldX":850,"./TileToWorldY":853,"./WorldToTileX":852,"./WorldToTileY":856}],829:[function(require,module,exports) {
var e=require("./GetTilesWithin"),r=require("./WorldToTileX"),i=require("./WorldToTileY"),l=function(l,o,t,u,T,a,n){var c=r(l,!0,a,n),d=i(o,!0,a,n),h=Math.ceil(r(l+t,!1,a,n)),q=Math.ceil(i(o+u,!1,a,n));return e(c,d,h-c,q-d,T,n)};module.exports=l;
},{"./GetTilesWithin":827,"./WorldToTileX":852,"./WorldToTileY":856}],830:[function(require,module,exports) {
var r=require("./IsInLayerBounds"),e=function(e,n,u){if(r(e,n,u)){var a=u.data[n][e];return null!==a&&a.index>-1}return!1};module.exports=e;
},{"./IsInLayerBounds":832}],831:[function(require,module,exports) {
var r=require("./HasTileAt"),e=require("./WorldToTileX"),i=require("./WorldToTileY"),o=function(o,l,u,T){var t=e(o,!0,u,T),a=i(l,!0,u,T);return r(t,a,T)};module.exports=o;
},{"./HasTileAt":830,"./WorldToTileX":852,"./WorldToTileY":856}],273:[function(require,module,exports) {
var t=require("../utils/Class"),i=require("../gameobjects/components"),e=require("../geom/rectangle"),s=new t({Mixins:[i.Alpha,i.Flip,i.Visible],initialize:function(t,i,e,s,h,l,o,n){this.layer=t,this.index=i,this.x=e,this.y=s,this.width=h,this.height=l,this.baseWidth=void 0!==o?o:h,this.baseHeight=void 0!==n?n:l,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=null,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(t,i){return!(t<this.pixelX||i<this.pixelY||t>this.right||i>this.bottom)},copy:function(t){return this.index=t.index,this.alpha=t.alpha,this.properties=t.properties,this.visible=t.visible,this.setFlip(t.flipX,t.flipY),this.tint=t.tint,this.rotation=t.rotation,this.collideUp=t.collideUp,this.collideDown=t.collideDown,this.collideLeft=t.collideLeft,this.collideRight=t.collideRight,this.collisionCallback=t.collisionCallback,this.collisionCallbackContext=t.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(t){var i=this.tilemapLayer;return i?i.tileToWorldX(this.x,t):this.x*this.baseWidth},getRight:function(t){var i=this.tilemapLayer;return i?this.getLeft(t)+this.width*i.scaleX:this.getLeft(t)+this.width},getTop:function(t){var i=this.tilemapLayer;return i?i.tileToWorldY(this.y,t)-(this.height-this.baseHeight)*i.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function(t){var i=this.tilemapLayer;return i?this.getTop(t)+this.height*i.scaleY:this.getTop(t)+this.height},getBounds:function(t,i){return void 0===i&&(i=new e),i.x=this.getLeft(),i.y=this.getTop(),i.width=this.getRight()-i.x,i.height=this.getBottom()-i.y,i},getCenterX:function(t){return this.getLeft(t)+this.width/2},getCenterY:function(t){return this.getTop(t)+this.height/2},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},intersects:function(t,i,e,s){return!(e<=this.pixelX||s<=this.pixelY||t>=this.right||i>=this.bottom)},isInteresting:function(t,i){return t&&i?this.canCollide||this.hasInterestingFace:t?this.collides:!!i&&this.hasInterestingFace},resetCollision:function(t){(void 0===t&&(t=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,t)&&(this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y));return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(t,i,e,s,h){(void 0===i&&(i=t),void 0===e&&(e=t),void 0===s&&(s=t),void 0===h&&(h=!0),this.collideLeft=t,this.collideRight=i,this.collideUp=e,this.collideDown=s,this.faceLeft=t,this.faceRight=i,this.faceTop=e,this.faceBottom=s,h)&&(this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y));return this},setCollisionCallback:function(t,i){return null===t?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=t,this.collisionCallbackContext=i),this},setSize:function(t,i,e,s){return void 0!==t&&(this.width=t),void 0!==i&&(this.height=i),void 0!==e&&(this.baseWidth=e),void 0!==s&&(this.baseHeight=s),this.updatePixelXY(),this},updatePixelXY:function(){return this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight-(this.height-this.baseHeight),this},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var t=this.tilemapLayer;return t?t.tileset:null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var t=this.tilemapLayer;return t?t.tilemap:null}}});module.exports=s;
},{"../utils/Class":8,"../gameobjects/components":509,"../geom/rectangle":517}],833:[function(require,module,exports) {
var e=require("../Tile"),i=require("./IsInLayerBounds"),a=require("./CalculateFacesAt"),l=require("./SetTileCollision"),t=function(t,d,n,r,u){if(!i(d,n,u))return null;void 0===r&&(r=!0);var o=u.data[n][d],s=o&&o.collides;if(t instanceof e)null===u.data[n][d]&&(u.data[n][d]=new e(u,t.index,d,n,t.width,t.height)),u.data[n][d].copy(t);else{var c=t;null===u.data[n][d]?u.data[n][d]=new e(u,c,d,n,u.tileWidth,u.tileHeight):u.data[n][d].index=c}var x=u.data[n][d],f=-1!==u.collideIndexes.indexOf(x.index);return l(x,f),r&&s!==x.collides&&a(d,n,u),x};module.exports=t;
},{"../Tile":273,"./IsInLayerBounds":832,"./CalculateFacesAt":815,"./SetTileCollision":882}],834:[function(require,module,exports) {
var r=require("./PutTileAt"),e=require("./WorldToTileX"),i=require("./WorldToTileY"),o=function(o,u,l,t,T,d){var n=e(u,!0,T,d),q=i(l,!0,T,d);return r(o,n,q,t,d)};module.exports=o;
},{"./PutTileAt":833,"./WorldToTileX":852,"./WorldToTileY":856}],835:[function(require,module,exports) {
var r=require("./CalculateFacesWithin"),e=require("./PutTileAt"),a=function(a,i,t,l,u){if(!Array.isArray(a))return null;void 0===l&&(l=!0),Array.isArray(a[0])||(a=[a]);for(var n=a.length,o=a[0].length,v=0;v<n;v++)for(var A=0;A<o;A++){var f=a[v][A];e(f,i+A,t+v,!1,u)}l&&r(i-1,t-1,o+2,n+2,u)};module.exports=a;
},{"./CalculateFacesWithin":816,"./PutTileAt":833}],836:[function(require,module,exports) {
var e=require("./GetTilesWithin"),i=require("../../utils/array/GetRandomElement"),n=function(n,r,t,l,d,o){var u,a=e(n,r,t,l,null,o);if(void 0===d)for(d=[],u=0;u<a.length;u++)-1===d.indexOf(a[u].index)&&d.push(a[u].index);for(u=0;u<a.length;u++)a[u].index=i(d)};module.exports=n;
},{"./GetTilesWithin":827,"../../utils/array/GetRandomElement":468}],837:[function(require,module,exports) {
var e=require("../Tile"),l=require("./IsInLayerBounds"),r=require("./CalculateFacesAt"),u=function(u,i,n,a,t){if(void 0===n&&(n=!1),void 0===a&&(a=!0),!l(u,i,t))return null;var d=t.data[i][u];return null===d?null:(t.data[i][u]=n?null:new e(t,-1,u,i,d.width,d.height),a&&d&&d.collides&&r(u,i,t),d)};module.exports=u;
},{"../Tile":273,"./IsInLayerBounds":832,"./CalculateFacesAt":815}],838:[function(require,module,exports) {
var e=require("./RemoveTileAt"),r=require("./WorldToTileX"),o=require("./WorldToTileY"),i=function(i,l,u,T,t,d){var n=r(i,!0,t,d),q=o(l,!0,t,d);return e(n,q,u,T,d)};module.exports=i;
},{"./RemoveTileAt":837,"./WorldToTileX":852,"./WorldToTileY":856}],839:[function(require,module,exports) {
var e=require("./GetTilesWithin"),l=require("../../display/color"),i=function(i,o,t){void 0===o&&(o={});for(var n=void 0!==o.tileColor?o.tileColor:new l(105,210,231,150),r=void 0!==o.collidingTileColor?o.collidingTileColor:new l(243,134,48,200),a=void 0!==o.faceColor?o.faceColor:new l(40,39,37,150),c=e(0,0,t.width,t.height,null,t),d=0;d<c.length;d++){var f=c[d],h=f.width,w=f.height,p=f.pixelX,u=f.pixelY,v=f.collides?r:n;null!==v&&(i.fillStyle(v.color,v.alpha/255),i.fillRect(p,u,h,w)),p+=1,u+=1,h-=2,w-=2,null!==a&&(i.lineStyle(1,a.color,a.alpha/255),f.faceTop&&i.lineBetween(p,u,p+h,u),f.faceRight&&i.lineBetween(p+h,u,p+h,u+w),f.faceBottom&&i.lineBetween(p,u+w,p+h,u+w),f.faceLeft&&i.lineBetween(p,u,p,u+w))}};module.exports=i;
},{"./GetTilesWithin":827,"../../display/color":507}],883:[function(require,module,exports) {
var e=function(e,d,l){var i=l.collideIndexes.indexOf(e);d&&-1===i?l.collideIndexes.push(e):d||-1===i||l.collideIndexes.splice(i,1)};module.exports=e;
},{}],841:[function(require,module,exports) {
var e=require("./SetTileCollision"),i=require("./CalculateFacesWithin"),r=require("./SetLayerCollisionIndex"),a=function(a,o,t,d){void 0===o&&(o=!0),void 0===t&&(t=!0),Array.isArray(a)||(a=[a]);for(var l=0;l<a.length;l++)r(a[l],o,d);for(var n=0;n<d.height;n++)for(var h=0;h<d.width;h++){var v=d.data[n][h];v&&-1!==a.indexOf(v.index)&&e(v,o)}t&&i(0,0,d.width,d.height,d)};module.exports=a;
},{"./SetTileCollision":882,"./CalculateFacesWithin":816,"./SetLayerCollisionIndex":883}],842:[function(require,module,exports) {
var i=require("./SetTileCollision"),e=require("./CalculateFacesWithin"),r=require("./SetLayerCollisionIndex"),o=function(o,a,t,d,l){if(void 0===t&&(t=!0),void 0===d&&(d=!0),!(o>a)){for(var n=o;n<=a;n++)r(n,t,l);for(var h=0;h<l.height;h++)for(var v=0;v<l.width;v++){var u=l.data[h][v];u&&u.index>=o&&u.index<=a&&i(u,t)}d&&e(0,0,l.width,l.height,l)}};module.exports=o;
},{"./SetTileCollision":882,"./CalculateFacesWithin":816,"./SetLayerCollisionIndex":883}],843:[function(require,module,exports) {
var i=require("./SetTileCollision"),e=require("./CalculateFacesWithin"),r=require("./SetLayerCollisionIndex"),a=function(a,o,t,d){void 0===o&&(o=!0),void 0===t&&(t=!0),Array.isArray(a)||(a=[a]);for(var n=0;n<d.height;n++)for(var l=0;l<d.width;l++){var h=d.data[n][l];h&&-1===a.indexOf(h.index)&&(i(h,o),r(h.index,o,d))}t&&e(0,0,d.width,d.height,d)};module.exports=a;
},{"./SetTileCollision":882,"./CalculateFacesWithin":816,"./SetLayerCollisionIndex":883}],844:[function(require,module,exports) {
var r=require("./SetTileCollision"),i=require("./CalculateFacesWithin"),e=require("../../utils/object/HasValue"),a=function(a,t,o,l){void 0===t&&(t=!0),void 0===o&&(o=!0);for(var v=0;v<l.height;v++)for(var h=0;h<l.width;h++){var s=l.data[v][h];if(s)for(var u in a)if(e(s.properties,u)){var f=a[u];Array.isArray(f)||(f=[f]);for(var d=0;d<f.length;d++)s.properties[u]===f[d]&&r(s,t)}}o&&i(0,0,l.width,l.height,l)};module.exports=a;
},{"./SetTileCollision":882,"./CalculateFacesWithin":816,"../../utils/object/HasValue":470}],845:[function(require,module,exports) {
var i=require("./SetTileCollision"),e=require("./CalculateFacesWithin"),o=function(o,t,r){void 0===o&&(o=!0),void 0===t&&(t=!0);for(var a=0;a<r.height;a++)for(var l=0;l<r.width;l++){var h=r.data[a][l];if(h){var v=h.getCollisionGroup();v&&v.objects&&v.objects.length>0&&i(h,o)}}t&&e(0,0,r.width,r.height,r)};module.exports=o;
},{"./SetTileCollision":882,"./CalculateFacesWithin":816}],846:[function(require,module,exports) {
var l=function(l,a,c,e){if("number"==typeof l)e.callbacks[l]=null!==a?{callback:a,callbackContext:c}:void 0;else for(var o=0,n=l.length;o<n;o++)e.callbacks[l[o]]=null!==a?{callback:a,callbackContext:c}:void 0};module.exports=l;
},{}],847:[function(require,module,exports) {
var l=require("./GetTilesWithin"),e=function(e,i,n,o,r,t,a){for(var s=l(e,i,n,o,null,a),u=0;u<s.length;u++)s[u].setCollisionCallback(r,t)};module.exports=e;
},{"./GetTilesWithin":827}],848:[function(require,module,exports) {
var e=require("./GetTilesWithin"),r=require("../../utils/array/Shuffle"),i=function(i,n,u,t,l){var a=e(i,n,u,t,null,l),f=a.map(function(e){return e.index});r(f);for(var o=0;o<a.length;o++)a[o].index=f[o]};module.exports=i;
},{"./GetTilesWithin":827,"../../utils/array/Shuffle":370}],849:[function(require,module,exports) {
var e=require("./GetTilesWithin"),i=function(i,n,r,d,l,t,x){for(var o=e(r,d,l,t,null,x),u=0;u<o.length;u++)o[u]&&(o[u].index===i?o[u].index=n:o[u].index===n&&(o[u].index=i))};module.exports=i;
},{"./GetTilesWithin":827}],851:[function(require,module,exports) {
var e=require("./TileToWorldX"),r=require("./TileToWorldY"),o=require("../../math/Vector2"),i=function(i,u,l,t,d){return void 0===l&&(l=new o(0,0)),l.x=e(i,t,d),l.y=r(u,t,d),l};module.exports=i;
},{"./TileToWorldX":850,"./TileToWorldY":853,"../../math/Vector2":96}],854:[function(require,module,exports) {
var r=require("./GetTilesWithin"),e=function(e,i,t,a,n,o){if(void 0!==n){var h,l=r(e,i,t,a,null,o),f=0;for(h=0;h<n.length;h++)f+=n[h].weight;if(!(f<=0))for(h=0;h<l.length;h++){for(var d=Math.random()*f,g=0,v=-1,u=0;u<n.length;u++)if(d<=(g+=n[u].weight)){var m=n[u].index;v=Array.isArray(m)?m[Math.floor(Math.random()*m.length)]:m;break}l[h].index=v}}};module.exports=e;
},{"./GetTilesWithin":827}],855:[function(require,module,exports) {
var e=require("./WorldToTileX"),r=require("./WorldToTileY"),o=require("../../math/Vector2"),i=function(i,u,l,t,d,n){return void 0===t&&(t=new o(0,0)),t.x=e(i,l,d,n),t.y=r(u,l,d,n),t};module.exports=i;
},{"./WorldToTileX":852,"./WorldToTileY":856,"../../math/Vector2":96}],536:[function(require,module,exports) {
module.exports={CalculateFacesAt:require("./CalculateFacesAt"),CalculateFacesWithin:require("./CalculateFacesWithin"),Copy:require("./Copy"),CreateFromTiles:require("./CreateFromTiles"),CullTiles:require("./CullTiles"),Fill:require("./Fill"),FilterTiles:require("./FilterTiles"),FindByIndex:require("./FindByIndex"),FindTile:require("./FindTile"),ForEachTile:require("./ForEachTile"),GetTileAt:require("./GetTileAt"),GetTileAtWorldXY:require("./GetTileAtWorldXY"),GetTilesWithin:require("./GetTilesWithin"),GetTilesWithinShape:require("./GetTilesWithinShape"),GetTilesWithinWorldXY:require("./GetTilesWithinWorldXY"),HasTileAt:require("./HasTileAt"),HasTileAtWorldXY:require("./HasTileAtWorldXY"),IsInLayerBounds:require("./IsInLayerBounds"),PutTileAt:require("./PutTileAt"),PutTileAtWorldXY:require("./PutTileAtWorldXY"),PutTilesAt:require("./PutTilesAt"),Randomize:require("./Randomize"),RemoveTileAt:require("./RemoveTileAt"),RemoveTileAtWorldXY:require("./RemoveTileAtWorldXY"),RenderDebug:require("./RenderDebug"),ReplaceByIndex:require("./ReplaceByIndex"),SetCollision:require("./SetCollision"),SetCollisionBetween:require("./SetCollisionBetween"),SetCollisionByExclusion:require("./SetCollisionByExclusion"),SetCollisionByProperty:require("./SetCollisionByProperty"),SetCollisionFromCollisionGroup:require("./SetCollisionFromCollisionGroup"),SetTileIndexCallback:require("./SetTileIndexCallback"),SetTileLocationCallback:require("./SetTileLocationCallback"),Shuffle:require("./Shuffle"),SwapByIndex:require("./SwapByIndex"),TileToWorldX:require("./TileToWorldX"),TileToWorldXY:require("./TileToWorldXY"),TileToWorldY:require("./TileToWorldY"),WeightedRandomize:require("./WeightedRandomize"),WorldToTileX:require("./WorldToTileX"),WorldToTileXY:require("./WorldToTileXY"),WorldToTileY:require("./WorldToTileY")};
},{"./CalculateFacesAt":815,"./CalculateFacesWithin":816,"./Copy":817,"./CreateFromTiles":818,"./CullTiles":819,"./Fill":820,"./FilterTiles":821,"./FindByIndex":822,"./FindTile":823,"./ForEachTile":824,"./GetTileAt":825,"./GetTileAtWorldXY":826,"./GetTilesWithin":827,"./GetTilesWithinShape":828,"./GetTilesWithinWorldXY":829,"./HasTileAt":830,"./HasTileAtWorldXY":831,"./IsInLayerBounds":832,"./PutTileAt":833,"./PutTileAtWorldXY":834,"./PutTilesAt":835,"./Randomize":836,"./RemoveTileAt":837,"./RemoveTileAtWorldXY":838,"./RenderDebug":839,"./ReplaceByIndex":840,"./SetCollision":841,"./SetCollisionBetween":842,"./SetCollisionByExclusion":843,"./SetCollisionByProperty":844,"./SetCollisionFromCollisionGroup":845,"./SetTileIndexCallback":846,"./SetTileLocationCallback":847,"./Shuffle":848,"./SwapByIndex":849,"./TileToWorldX":850,"./TileToWorldXY":851,"./TileToWorldY":853,"./WeightedRandomize":854,"./WorldToTileX":852,"./WorldToTileXY":855,"./WorldToTileY":856}],322:[function(require,module,exports) {
var i=require("../../utils/Class"),e=require("../../utils/object/GetFastValue"),t=new i({initialize:function(i){void 0===i&&(i={}),this.name=e(i,"name","layer"),this.x=e(i,"x",0),this.y=e(i,"y",0),this.width=e(i,"width",0),this.height=e(i,"height",0),this.tileWidth=e(i,"tileWidth",0),this.tileHeight=e(i,"tileHeight",0),this.baseTileWidth=e(i,"baseTileWidth",this.tileWidth),this.baseTileHeight=e(i,"baseTileHeight",this.tileHeight),this.widthInPixels=e(i,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=e(i,"heightInPixels",this.height*this.baseTileHeight),this.alpha=e(i,"alpha",1),this.visible=e(i,"visible",!0),this.properties=e(i,"properties",{}),this.indexes=e(i,"indexes",[]),this.collideIndexes=e(i,"collideIndexes",[]),this.callbacks=e(i,"callbacks",[]),this.bodies=e(i,"bodies",[]),this.data=e(i,"data",[]),this.tilemapLayer=e(i,"tilemapLayer",null)}});module.exports=t;
},{"../../utils/Class":8,"../../utils/object/GetFastValue":102}],325:[function(require,module,exports) {
var i=require("../../utils/Class"),t=require("../../utils/object/GetFastValue"),e=new i({initialize:function(i){void 0===i&&(i={}),this.name=t(i,"name","map"),this.width=t(i,"width",0),this.height=t(i,"height",0),this.tileWidth=t(i,"tileWidth",0),this.tileHeight=t(i,"tileHeight",0),this.widthInPixels=t(i,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=t(i,"heightInPixels",this.height*this.tileHeight),this.format=t(i,"format",null),this.orientation=t(i,"orientation","orthogonal"),this.version=t(i,"version","1"),this.properties=t(i,"properties",{}),this.layers=t(i,"layers",[]),this.images=t(i,"images",[]),this.objects=t(i,"objects",{}),this.collision=t(i,"collision",{}),this.tilesets=t(i,"tilesets",[]),this.imageCollections=t(i,"imageCollections",[]),this.tiles=t(i,"tiles",[])}});module.exports=e;
},{"../../utils/Class":8,"../../utils/object/GetFastValue":102}],449:[function(require,module,exports) {
var e=require("../Formats"),t=require("../mapdata/LayerData"),i=require("../mapdata/MapData"),a=require("../Tile"),r=function(r,h,n,l,d){for(var g=new t({tileWidth:n,tileHeight:l}),s=new i({name:r,tileWidth:n,tileHeight:l,format:e.ARRAY_2D,layers:[g]}),u=[],w=h.length,m=0,o=0;o<h.length;o++){u[o]=[];for(var p=h[o],x=0;x<p.length;x++){var I=parseInt(p[x],10);Number.isNaN(I)||-1===I?u[o][x]=d?null:new a(g,-1,x,o,n,l):u[o][x]=new a(g,I,x,o,n,l)}0===m&&(m=p.length)}return s.width=g.width=m,s.height=g.height=w,s.widthInPixels=g.widthInPixels=m*n,s.heightInPixels=g.heightInPixels=w*l,g.data=u,s};module.exports=r;
},{"../Formats":277,"../mapdata/LayerData":322,"../mapdata/MapData":325,"../Tile":273}],450:[function(require,module,exports) {
var r=require("../Formats"),t=require("./Parse2DArray"),e=function(e,a,i,n,u){var o=a.trim().split("\n").map(function(r){return r.split(",")}),m=t(e,o,i,n,u);return m.format=r.CSV,m};module.exports=e;
},{"../Formats":277,"./Parse2DArray":449}],884:[function(require,module,exports) {
var r=function(r){for(var o=window.atob(r),e=o.length,t=new Array(e),a=0;a<e;a+=4)t[a/4]=(o.charCodeAt(a)|o.charCodeAt(a+1)<<8|o.charCodeAt(a+2)<<16|o.charCodeAt(a+3)<<24)>>>0;return t};module.exports=r;
},{}],885:[function(require,module,exports) {
var a=2147483648,o=1073741824,t=536870912,e=function(e){var i=Boolean(e&a),l=Boolean(e&o),n=Boolean(e&t);e&=~(a|o|t);var p=0,r=!1;return i&&l&&n?(p=Math.PI/2,r=!0):i&&l&&!n?(p=Math.PI,r=!1):i&&!l&&n?(p=Math.PI/2,r=!1):!i||l||n?!i&&l&&n?(p=3*Math.PI/2,r=!1):i||!l||n?i||l||!n?i||l||n||(p=0,r=!1):(p=3*Math.PI/2,r=!0):(p=Math.PI,r=!0):(p=0,r=!0),{gid:e,flippedHorizontal:i,flippedVertical:l,flippedAntiDiagonal:n,rotation:p,flipped:r}};module.exports=e;
},{}],558:[function(require,module,exports) {
var e=require("./Base64Decode"),i=require("../../../utils/object/GetFastValue"),t=require("../../mapdata/LayerData"),a=require("./ParseGID"),r=require("../../Tile"),l=function(l,s){for(var n=[],h=0;h<l.layers.length;h++)if("tilelayer"===l.layers[h].type){var o=l.layers[h];if(o.compression)console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+o.name+"'");else{o.encoding&&"base64"===o.encoding&&(o.data=e(o.data),delete o.encoding);for(var d=new t({name:o.name,x:i(o,"offsetx",0)+o.x,y:i(o,"offsety",0)+o.y,width:o.width,height:o.height,tileWidth:l.tilewidth,tileHeight:l.tileheight,alpha:o.opacity,visible:o.visible,properties:i(o,"properties",{})}),p=0,u=[],g=[],f=0,y=o.data.length;f<y;f++){var c=a(o.data[f]);if(c.gid>0){var w=new r(d,c.gid,p,g.length,l.tilewidth,l.tileheight);w.rotation=c.rotation,w.flipX=c.flipped,u.push(w)}else{var v=s?null:new r(d,-1,p,g.length,l.tilewidth,l.tileheight);u.push(v)}++p===o.width&&(g.push(u),p=0,u=[])}d.data=g,n.push(d)}}return n};module.exports=l;
},{"./Base64Decode":884,"../../../utils/object/GetFastValue":102,"../../mapdata/LayerData":322,"./ParseGID":885,"../../Tile":273}],559:[function(require,module,exports) {
var e=require("../../../utils/object/GetFastValue"),a=function(a){for(var r=[],i=0;i<a.layers.length;i++)if("imagelayer"===a.layers[i].type){var t=a.layers[i];r.push({name:t.name,image:t.image,x:e(t,"offsetx",0)+t.x,y:e(t,"offsety",0)+t.y,alpha:t.opacity,visible:t.visible,properties:e(t,"properties",{})})}return r};module.exports=a;
},{"../../../utils/object/GetFastValue":102}],278:[function(require,module,exports) {
var i=require("../utils/Class"),t=new i({initialize:function(i,t,e,s,h,n,a,l){(void 0===e||e<=0)&&(e=32),(void 0===s||s<=0)&&(s=32),void 0===h&&(h=0),void 0===n&&(n=0),void 0===a&&(a={}),void 0===l&&(l={}),this.name=i,this.firstgid=t,this.tileWidth=e,this.tileHeight=s,this.tileMargin=h,this.tileSpacing=n,this.tileProperties=a,this.tileData=l,this.image=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(i){return this.containsTileIndex(i)?this.tileProperties[i-this.firstgid]:null},getTileData:function(i){return this.containsTileIndex(i)?this.tileData[i-this.firstgid]:null},getTileCollisionGroup:function(i){var t=this.getTileData(i);return t&&t.objectgroup?t.objectgroup:null},containsTileIndex:function(i){return i>=this.firstgid&&i<this.firstgid+this.total},getTileTextureCoordinates:function(i){return this.containsTileIndex(i)?this.texCoordinates[i-this.firstgid]:null},setImage:function(i){return this.image=i,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(i,t){return void 0!==i&&(this.tileWidth=i),void 0!==t&&(this.tileHeight=t),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(i,t){return void 0!==i&&(this.tileMargin=i),void 0!==t&&(this.tileSpacing=t),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(i,t){var e=(t-2*this.tileMargin+this.tileSpacing)/(this.tileHeight+this.tileSpacing),s=(i-2*this.tileMargin+this.tileSpacing)/(this.tileWidth+this.tileSpacing);e%1==0&&s%1==0||console.warn("Tileset "+this.name+" image tile area is not an even multiple of tile size"),e=Math.floor(e),s=Math.floor(s),this.rows=e,this.columns=s,this.total=e*s,this.texCoordinates.length=0;for(var h=this.tileMargin,n=this.tileMargin,a=0;a<this.rows;a++){for(var l=0;l<this.columns;l++)this.texCoordinates.push({x:h,y:n}),h+=this.tileWidth+this.tileSpacing;h=this.tileMargin,n+=this.tileHeight+this.tileSpacing}return this}});module.exports=t;
},{"../utils/Class":8}],271:[function(require,module,exports) {
var i=require("../utils/Class"),t=new i({initialize:function(i,t,s,e,a,h,g){(void 0===s||s<=0)&&(s=32),(void 0===e||e<=0)&&(e=32),void 0===a&&(a=0),void 0===h&&(h=0),this.name=i,this.firstgid=0|t,this.imageWidth=0|s,this.imageHeight=0|e,this.imageMargin=0|a,this.imageSpacing=0|h,this.properties=g||{},this.images=[],this.total=0},containsImageIndex:function(i){return i>=this.firstgid&&i<this.firstgid+this.total},addImage:function(i,t){return this.images.push({gid:i,image:t}),this.total++,this}});module.exports=t;
},{"../utils/Class":8}],918:[function(require,module,exports) {
var r=require("../../../utils/object/HasValue"),e=function(e,t){for(var u={},a=0;a<t.length;a++){var o=t[a];r(e,o)&&(u[o]=e[o])}return u};module.exports=e;
},{"../../../utils/object/HasValue":470}],886:[function(require,module,exports) {
var i=require("./Pick"),e=require("./ParseGID"),t=function(i){return{x:i.x,y:i.y}},l=["id","name","type","rotation","properties","visible","x","y","width","height"],p=function(p,o,d){void 0===o&&(o=0),void 0===d&&(d=0);var h=i(p,l);if(h.x+=o,h.y+=d,p.gid){var n=e(p.gid);h.gid=n.gid,h.flippedHorizontal=n.flippedHorizontal,h.flippedVertical=n.flippedVertical,h.flippedAntiDiagonal=n.flippedAntiDiagonal}else p.polyline?h.polyline=p.polyline.map(t):p.polygon?h.polygon=p.polygon.map(t):p.ellipse?(h.ellipse=p.ellipse,h.width=p.width,h.height=p.height):p.text?(h.width=p.width,h.height=p.height,h.text=p.text):(h.rectangle=!0,h.width=p.width,h.height=p.height);return h};module.exports=p;
},{"./Pick":918,"./ParseGID":885}],560:[function(require,module,exports) {
var e=require("../../Tileset"),t=require("../../ImageCollection"),i=require("./ParseObject"),a=function(a){for(var r,s=[],l=[],n=null,o=0;o<a.tilesets.length;o++){var g=a.tilesets[o];if(g.source)console.warn("Phaser can't load external tilesets. Use the Embed Tileset button and then export the map again.");else if(g.image){var p=new e(g.name,g.firstgid,g.tilewidth,g.tileheight,g.margin,g.spacing);if(g.tileproperties&&(p.tileProperties=g.tileproperties),g.tiles)for(r in p.tileData=g.tiles,p.tileData){var h=p.tileData[r].objectgroup;if(h&&h.objects){var u=h.objects.map(function(e){return i(e)});p.tileData[r].objectgroup.objects=u}}p.updateTileData(g.imagewidth,g.imageheight),s.push(p)}else{var c=new t(g.name,g.firstgid,g.tilewidth,g.tileheight,g.margin,g.spacing,g.properties);for(r in g.tiles){var d=g.tiles[r].image,m=g.firstgid+parseInt(r,10);c.addImage(m,d)}l.push(c)}n&&(n.lastgid=g.firstgid-1),n=g}return{tilesets:s,imageCollections:l}};module.exports=a;
},{"../../Tileset":278,"../../ImageCollection":271,"./ParseObject":886}],323:[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../../utils/object/GetFastValue"),i=new e({initialize:function(e){void 0===e&&(e={}),this.name=t(e,"name","object layer"),this.opacity=t(e,"opacity",1),this.properties=t(e,"properties",{}),this.propertyTypes=t(e,"propertytypes",{}),this.type=t(e,"type","objectgroup"),this.visible=t(e,"visible",!0),this.objects=t(e,"objects",[])}});module.exports=i;
},{"../../utils/Class":8,"../../utils/object/GetFastValue":102}],561:[function(require,module,exports) {
var e=require("../../../utils/object/GetFastValue"),r=require("./ParseObject"),t=require("../../mapdata/ObjectLayer"),a=function(a){for(var s=[],o=0;o<a.layers.length;o++)if("objectgroup"===a.layers[o].type){for(var u=a.layers[o],c=e(u,"offsetx",0),f=e(u,"offsety",0),l=[],b=0;b<u.objects.length;b++){var j=r(u.objects[b],c,f);l.push(j)}var i=new t(u);i.objects=l,s.push(i)}return s};module.exports=a;
},{"../../../utils/object/GetFastValue":102,"./ParseObject":886,"../../mapdata/ObjectLayer":323}],562:[function(require,module,exports) {
var t=function(t){for(var i=[],e=0;e<t.tilesets.length;e++)for(var l=t.tilesets[e],r=l.tileMargin,a=l.tileMargin,n=0,g=0,o=0,s=l.firstgid;s<l.firstgid+l.total&&(i[s]=[r,a,e],r+=l.tileWidth+l.tileSpacing,++n!==l.total)&&(++g!==l.columns||(r=l.tileMargin,a+=l.tileHeight+l.tileSpacing,g=0,++o!==l.rows));s++);return i};module.exports=t;
},{}],563:[function(require,module,exports) {
var e=require("../../../utils/object/Extend"),t=function(t){for(var i,r,l,s,d,n=0;n<t.layers.length;n++){i=t.layers[n],s=null;for(var o=0;o<i.data.length;o++){d=i.data[o];for(var a=0;a<d.length;a++)null===(r=d[a])||r.index<0||(l=t.tiles[r.index][2],s=t.tilesets[l],r.width=s.tileWidth,r.height=s.tileHeight,s.tileProperties&&s.tileProperties[r.index-s.firstgid]&&(r.properties=e(r.properties,s.tileProperties[r.index-s.firstgid])))}}};module.exports=t;
},{"../../../utils/object/Extend":13}],462:[function(require,module,exports) {
var e=require("../../Formats"),r=require("../../mapdata/MapData"),i=require("./ParseTileLayers"),t=require("./ParseImageLayers"),s=require("./ParseTilesets"),a=require("./ParseObjectLayers"),o=require("./BuildTilesetIndex"),n=require("./AssignTileProperties"),l=function(l,h,u){if("orthogonal"!==h.orientation)return console.warn("Only orthogonal map types are supported in this version of Phaser"),null;var p=new r({width:h.width,height:h.height,name:l,tileWidth:h.tilewidth,tileHeight:h.tileheight,orientation:h.orientation,format:e.TILED_JSON,version:h.version,properties:h.properties});p.layers=i(h,u),p.images=t(h);var g=s(h);return p.tilesets=g.tilesets,p.imageCollections=g.imageCollections,p.objects=a(h),p.tiles=o(p),n(p),p};module.exports=l;
},{"../../Formats":277,"../../mapdata/MapData":325,"./ParseTileLayers":558,"./ParseImageLayers":559,"./ParseTilesets":560,"./ParseObjectLayers":561,"./BuildTilesetIndex":562,"./AssignTileProperties":563}],556:[function(require,module,exports) {
var e=require("../../mapdata/LayerData"),i=require("../../Tile"),t=function(t,a){for(var l=[],r=0;r<t.layer.length;r++){for(var h=t.layer[r],n=new e({name:h.name,width:h.width,height:h.height,tileWidth:h.tilesize,tileHeight:h.tilesize,visible:1===h.visible}),s=[],d=[],u=0;u<h.data.length;u++){for(var v=0;v<h.data[u].length;v++){var g,o=h.data[u][v]-1;g=o>-1?new i(n,o,v,u,h.tilesize,h.tilesize):a?null:new i(n,-1,v,u,h.tilesize,h.tilesize),s.push(g)}d.push(s),s=[]}n.data=d,l.push(n)}return l};module.exports=t;
},{"../../mapdata/LayerData":322,"../../Tile":273}],557:[function(require,module,exports) {
var e=require("../../Tileset"),r=function(r){for(var i=[],t=[],l=0;l<r.layer.length;l++){var s=r.layer[l],a=s.tilesetName;""!==a&&-1===t.indexOf(a)&&(t.push(a),i.push(new e(a,0,s.tilesize,s.tilesize,0,0)))}return i};module.exports=r;
},{"../../Tileset":278}],461:[function(require,module,exports) {
var e=require("../../Formats"),r=require("../../mapdata/MapData"),t=require("./ParseTileLayers"),a=require("./ParseTilesets"),i=function(i,l,s){if(0===l.layer.length)return console.warn("No layers found in the Weltmeister map: "+i),null;for(var h=0,n=0,y=0;y<l.layer.length;y++)l.layer[y].width>h&&(h=l.layer[y].width),l.layer[y].height>n&&(n=l.layer[y].height);var o=new r({width:h,height:n,name:i,tileWidth:l.layer[0].tilesize,tileHeight:l.layer[0].tilesize,format:e.WELTMEISTER});return o.layers=t(l,s),o.tilesets=a(l),o};module.exports=i;
},{"../../Formats":277,"../../mapdata/MapData":325,"./ParseTileLayers":556,"./ParseTilesets":557}],389:[function(require,module,exports) {
var e=require("../Formats"),r=require("./Parse2DArray"),a=require("./ParseCSV"),i=require("./tiled/ParseJSONTiled"),s=require("./impact/ParseWeltmeister"),t=function(t,u,c,l,n,o){var d;switch(u){case e.ARRAY_2D:d=r(t,c,l,n,o);break;case e.CSV:d=a(t,c,l,n,o);break;case e.TILED_JSON:d=i(t,c,o);break;case e.WELTMEISTER:d=s(t,c,o);break;default:console.warn("Unrecognized tilemap data format: "+u),d=null}return d};module.exports=t;
},{"../Formats":277,"./Parse2DArray":449,"./ParseCSV":450,"./tiled/ParseJSONTiled":462,"./impact/ParseWeltmeister":461}],537:[function(require,module,exports) {
module.exports={Parse:require("./Parse"),Parse2DArray:require("./Parse2DArray"),ParseCSV:require("./ParseCSV"),Impact:require("./impact/ParseWeltmeister"),Tiled:require("./tiled/ParseJSONTiled")};
},{"./Parse":389,"./Parse2DArray":449,"./ParseCSV":450,"./impact/ParseWeltmeister":461,"./tiled/ParseJSONTiled":462}],484:[function(require,module,exports) {
var e=require("../../gameobjects/GameObject"),a=function(a,r,i,c){e.RENDER_MASK!==r.renderFlags||r.cameraFilter>0&&r.cameraFilter&c._id||(r.cull(c),this.pipeline.batchDynamicTilemapLayer(r,c))};module.exports=a;
},{"../../gameobjects/GameObject":208}],483:[function(require,module,exports) {
var e=require("../../gameobjects/GameObject"),l=function(l,a,t,r){if(!(e.RENDER_MASK!==a.renderFlags||a.cameraFilter>0&&a.cameraFilter&r._id)){a.cull(r);var i=a.culledTiles,o=i.length,s=a.tileset.image.getSourceImage(),c=this.tileset,h=a.x-r.scrollX*a.scrollFactorX,g=a.y-r.scrollY*a.scrollFactorY,n=l.gameContext;n.save(),n.translate(h,g),n.rotate(a.rotation),n.scale(a.scaleX,a.scaleY),n.scale(a.flipX?-1:1,a.flipY?-1:1);for(var p=0;p<o;++p){var d=i[p],f=c.getTileTextureCoordinates(d.index);if(null!==f){var m=d.width/2,u=d.height/2;n.save(),n.translate(d.pixelX+m,d.pixelY+u),0!==d.rotation&&n.rotate(d.rotation),(d.flipX||d.flipY)&&n.scale(d.flipX?-1:1,d.flipY?-1:1),n.globalAlpha=a.alpha*d.alpha,n.drawImage(s,f.x,f.y,d.width,d.height,-m,-u,d.width,d.height),n.restore()}}n.restore()}};module.exports=l;
},{"../../gameobjects/GameObject":208}],412:[function(require,module,exports) {
var e=require("../../utils/NOOP"),r=require("../../utils/NOOP");WEBGL_RENDERER&&(e=require("./DynamicTilemapLayerWebGLRenderer")),CANVAS_RENDERER&&(r=require("./DynamicTilemapLayerCanvasRenderer")),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../utils/NOOP":30,"./DynamicTilemapLayerWebGLRenderer":484,"./DynamicTilemapLayerCanvasRenderer":483}],324:[function(require,module,exports) {
var e=require("../../utils/Class"),i=require("../../gameobjects/components"),t=require("./DynamicTilemapLayerRender"),l=require("../../gameobjects/GameObject"),r=require("../components"),n=new e({Extends:l,Mixins:[i.Alpha,i.BlendMode,i.Depth,i.Flip,i.GetBounds,i.Origin,i.Pipeline,i.ScaleMode,i.Size,i.Transform,i.Visible,i.ScrollFactor,t],initialize:function(e,i,t,r,n,s){l.call(this,e,"DynamicTilemapLayer"),this.isTilemap=!0,this.tilemap=i,this.layerIndex=t,this.layer=i.layers[t],this.layer.tilemapLayer=this,this.tileset=r,this.culledTiles=[],this.setAlpha(this.layer.alpha),this.setPosition(n,s),this.setOrigin(),this.setSize(this.layer.tileWidth*this.layer.width,this.layer.tileHeight*this.layer.height),this.initPipeline("TextureTintPipeline")},calculateFacesAt:function(e,i){return r.CalculateFacesAt(e,i,this.layer),this},calculateFacesWithin:function(e,i,t,l){return r.CalculateFacesWithin(e,i,t,l,this.layer),this},createFromTiles:function(e,i,t,l,n){return r.CreateFromTiles(e,i,t,l,n,this.layer)},cull:function(e){return r.CullTiles(this.layer,e,this.culledTiles)},copy:function(e,i,t,l,n,s,o){return r.Copy(e,i,t,l,n,s,o,this.layer),this},destroy:function(){this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),this.tilemap=void 0,this.layer=void 0,this.tileset=void 0,this.culledTiles.length=0,l.prototype.destroy.call(this)},fill:function(e,i,t,l,n,s){return r.Fill(e,i,t,l,n,s,this.layer),this},filterTiles:function(e,i,t,l,n,s,o){return r.FilterTiles(e,i,t,l,n,s,o,this.layer)},findByIndex:function(e,i,t){return r.FindByIndex(e,i,t,this.layer)},findTile:function(e,i,t,l,n,s,o){return r.FindTile(e,i,t,l,n,s,o,this.layer)},forEachTile:function(e,i,t,l,n,s,o){return r.ForEachTile(e,i,t,l,n,s,o,this.layer),this},getTileAt:function(e,i,t){return r.GetTileAt(e,i,t,this.layer)},getTileAtWorldXY:function(e,i,t,l){return r.GetTileAtWorldXY(e,i,t,l,this.layer)},getTilesWithin:function(e,i,t,l,n){return r.GetTilesWithin(e,i,t,l,n,this.layer)},getTilesWithinShape:function(e,i,t){return r.GetTilesWithinShape(e,i,t,this.layer)},getTilesWithinWorldXY:function(e,i,t,l,n,s){return r.GetTilesWithinWorldXY(e,i,t,l,n,s,this.layer)},hasTileAt:function(e,i){return r.HasTileAt(e,i,this.layer)},hasTileAtWorldXY:function(e,i,t){return r.HasTileAtWorldXY(e,i,t,this.layer)},putTileAt:function(e,i,t,l){return r.PutTileAt(e,i,t,l,this.layer)},putTileAtWorldXY:function(e,i,t,l,n){return r.PutTileAtWorldXY(e,i,t,l,n,this.layer)},putTilesAt:function(e,i,t,l){return r.PutTilesAt(e,i,t,l,this.layer),this},randomize:function(e,i,t,l,n){return r.Randomize(e,i,t,l,n,this.layer),this},removeTileAt:function(e,i,t,l){return r.RemoveTileAt(e,i,t,l,this.layer)},removeTileAtWorldXY:function(e,i,t,l,n){return r.RemoveTileAtWorldXY(e,i,t,l,n,this.layer)},renderDebug:function(e,i){return r.RenderDebug(e,i,this.layer),this},replaceByIndex:function(e,i,t,l,n,s){return r.ReplaceByIndex(e,i,t,l,n,s,this.layer),this},setCollision:function(e,i,t){return r.SetCollision(e,i,t,this.layer),this},setCollisionBetween:function(e,i,t,l){return r.SetCollisionBetween(e,i,t,l,this.layer),this},setCollisionByProperty:function(e,i,t){return r.SetCollisionByProperty(e,i,t,this.layer),this},setCollisionByExclusion:function(e,i,t){return r.SetCollisionByExclusion(e,i,t,this.layer),this},setCollisionFromCollisionGroup:function(e,i){return r.SetCollisionFromCollisionGroup(e,i,this.layer),this},setTileIndexCallback:function(e,i,t){return r.SetTileIndexCallback(e,i,t,this.layer),this},setTileLocationCallback:function(e,i,t,l,n,s){return r.SetTileLocationCallback(e,i,t,l,n,s,this.layer),this},shuffle:function(e,i,t,l){return r.Shuffle(e,i,t,l,this.layer),this},swapByIndex:function(e,i,t,l,n,s){return r.SwapByIndex(e,i,t,l,n,s,this.layer),this},tileToWorldX:function(e,i){return r.TileToWorldX(e,i,this.layer)},tileToWorldY:function(e,i){return r.TileToWorldY(e,i,this.layer)},tileToWorldXY:function(e,i,t,l){return r.TileToWorldXY(e,i,t,l,this.layer)},weightedRandomize:function(e,i,t,l,n){return r.WeightedRandomize(e,i,t,l,n,this.layer),this},worldToTileX:function(e,i,t){return r.WorldToTileX(e,i,t,this.layer)},worldToTileY:function(e,i,t){return r.WorldToTileY(e,i,t,this.layer)},worldToTileXY:function(e,i,t,l,n){return r.WorldToTileXY(e,i,t,l,n,this.layer)}});module.exports=n;
},{"../../utils/Class":8,"../../gameobjects/components":509,"./DynamicTilemapLayerRender":412,"../../gameobjects/GameObject":208,"../components":536}],485:[function(require,module,exports) {
var e=require("../../gameobjects/GameObject"),a=function(a,r,i,t){e.RENDER_MASK!==r.renderFlags||r.cameraFilter>0&&r.cameraFilter&t._id||(r.upload(t),this.pipeline.drawStaticTilemapLayer(r,t))};module.exports=a;
},{"../../gameobjects/GameObject":208}],486:[function(require,module,exports) {
var e=require("../../gameobjects/GameObject"),l=function(l,a,r,t){if(!(e.RENDER_MASK!==a.renderFlags||a.cameraFilter>0&&a.cameraFilter&t._id)){a.cull(t);var i=a.culledTiles,o=this.tileset,c=l.gameContext,s=i.length,g=o.image.getSourceImage(),h=a.x-t.scrollX*a.scrollFactorX,n=a.y-t.scrollY*a.scrollFactorY;c.save(),c.translate(h,n),c.rotate(a.rotation),c.scale(a.scaleX,a.scaleY),c.scale(a.flipX?-1:1,a.flipY?-1:1),c.globalAlpha=a.alpha;for(var d=0;d<s;++d){var m=i[d],u=o.getTileTextureCoordinates(m.index);null!==u&&c.drawImage(g,u.x,u.y,m.width,m.height,m.pixelX,m.pixelY,m.width,m.height)}c.restore()}};module.exports=l;
},{"../../gameobjects/GameObject":208}],413:[function(require,module,exports) {
var e=require("../../utils/NOOP"),r=require("../../utils/NOOP");WEBGL_RENDERER&&(e=require("./StaticTilemapLayerWebGLRenderer")),CANVAS_RENDERER&&(r=require("./StaticTilemapLayerCanvasRenderer")),module.exports={renderWebGL:e,renderCanvas:r};
},{"../../utils/NOOP":30,"./StaticTilemapLayerWebGLRenderer":485,"./StaticTilemapLayerCanvasRenderer":486}],326:[function(require,module,exports) {
var e=require("../../utils/Class"),t=require("../../gameobjects/components"),i=require("../../const"),r=require("../../gameobjects/GameObject"),l=require("./StaticTilemapLayerRender"),n=require("../components"),s=require("../../renderer/webgl/Utils"),o=new e({Extends:r,Mixins:[t.Alpha,t.BlendMode,t.Depth,t.Flip,t.GetBounds,t.Origin,t.Pipeline,t.ScaleMode,t.Size,t.Transform,t.Visible,t.ScrollFactor,l],initialize:function(e,t,l,n,s,o){r.call(this,e,"StaticTilemapLayer"),this.isTilemap=!0,this.tilemap=t,this.layerIndex=l,this.layer=t.layers[l],this.layer.tilemapLayer=this,this.tileset=n,this.culledTiles=[],this.vertexBuffer=null,this.renderer=e.sys.game.renderer,this.bufferData=null,this.vertexViewF32=null,this.vertexViewU32=null,this.dirty=!0,this.vertexCount=0,this.setAlpha(this.layer.alpha),this.setPosition(s,o),this.setOrigin(),this.setSize(this.layer.tileWidth*this.layer.width,this.layer.tileHeight*this.layer.height),this.initPipeline("TextureTintPipeline"),e.sys.game.config.renderType===i.WEBGL&&e.sys.game.renderer.onContextRestored(function(){this.dirty=!0,this.vertexBuffer=null},this)},upload:function(e){var t,i,r,l,n=this.tileset,o=this.layer.width,a=this.layer.height,h=n.image.get().width,u=n.image.get().height,c=this.layer.data,y=this.renderer;if(y.gl){var d=y.pipelines.TextureTintPipeline;if(this.dirty){var f=y.gl,T=this.vertexBuffer,p=this.bufferData,x=0,g=0,m=o*a*d.vertexSize*6;null===p&&(p=new ArrayBuffer(m),this.bufferData=p,this.vertexViewF32=new Float32Array(p),this.vertexViewU32=new Uint32Array(p));var C=this.vertexViewF32,W=this.vertexViewU32;for(i=0;i<a;++i)for(r=0;r<o;++r)if(null!==(t=c[i][r])&&-1!==t.index){var v=t.pixelX,F=t.pixelY,w=v+t.width,A=F+t.height;if(null!==(l=n.getTileTextureCoordinates(t.index))){var B=l.x/h,S=l.y/u,Y=(l.x+t.width)/h,X=(l.y+t.height)/u,b=v,G=F,D=v,L=A,V=w,q=A,E=w,I=F,P=s.getTintAppendFloatAlpha(16777215,this.alpha*t.alpha);C[x+0]=b,C[x+1]=G,C[x+2]=B,C[x+3]=S,W[x+4]=P,C[x+5]=D,C[x+6]=L,C[x+7]=B,C[x+8]=X,W[x+9]=P,C[x+10]=V,C[x+11]=q,C[x+12]=Y,C[x+13]=X,W[x+14]=P,C[x+15]=b,C[x+16]=G,C[x+17]=B,C[x+18]=S,W[x+19]=P,C[x+20]=V,C[x+21]=q,C[x+22]=Y,C[x+23]=X,W[x+24]=P,C[x+25]=E,C[x+26]=I,C[x+27]=Y,C[x+28]=S,W[x+29]=P,x+=30,g+=6}}this.vertexCount=g,this.dirty=!1,null===T?(T=y.createVertexBuffer(p,f.STATIC_DRAW),this.vertexBuffer=T):(y.setVertexBuffer(T),f.bufferSubData(f.ARRAY_BUFFER,0,p))}d.modelIdentity(),d.modelTranslate(this.x-e.scrollX*this.scrollFactorX,this.y-e.scrollY*this.scrollFactorY,0),d.modelScale(this.scaleX,this.scaleY,1),d.viewLoad2D(e.matrix.matrix)}return this},calculateFacesAt:function(e,t){return n.CalculateFacesAt(e,t,this.layer),this},calculateFacesWithin:function(e,t,i,r){return n.CalculateFacesWithin(e,t,i,r,this.layer),this},createFromTiles:function(e,t,i,r,l){return n.CreateFromTiles(e,t,i,r,l,this.layer)},cull:function(e){return n.CullTiles(this.layer,e,this.culledTiles)},destroy:function(){this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),this.tilemap=void 0,this.layer=void 0,this.tileset=void 0,r.prototype.destroy.call(this)},findByIndex:function(e,t,i){return n.FindByIndex(e,t,i,this.layer)},findTile:function(e,t,i,r,l,s,o){return n.FindTile(e,t,i,r,l,s,o,this.layer)},filterTiles:function(e,t,i,r,l,s,o){return n.FilterTiles(e,t,i,r,l,s,o,this.layer)},forEachTile:function(e,t,i,r,l,s,o){return n.ForEachTile(e,t,i,r,l,s,o,this.layer),this},getTileAt:function(e,t,i){return n.GetTileAt(e,t,i,this.layer)},getTileAtWorldXY:function(e,t,i,r){return n.GetTileAtWorldXY(e,t,i,r,this.layer)},getTilesWithin:function(e,t,i,r,l){return n.GetTilesWithin(e,t,i,r,l,this.layer)},getTilesWithinWorldXY:function(e,t,i,r,l,s){return n.GetTilesWithinWorldXY(e,t,i,r,l,s,this.layer)},getTilesWithinShape:function(e,t,i){return n.GetTilesWithinShape(e,t,i,this.layer)},hasTileAt:function(e,t){return n.HasTileAt(e,t,this.layer)},hasTileAtWorldXY:function(e,t,i){return n.HasTileAtWorldXY(e,t,i,this.layer)},renderDebug:function(e,t){return n.RenderDebug(e,t,this.layer),this},setCollision:function(e,t,i){return n.SetCollision(e,t,i,this.layer),this},setCollisionBetween:function(e,t,i,r){return n.SetCollisionBetween(e,t,i,r,this.layer),this},setCollisionByProperty:function(e,t,i){return n.SetCollisionByProperty(e,t,i,this.layer),this},setCollisionByExclusion:function(e,t,i){return n.SetCollisionByExclusion(e,t,i,this.layer),this},setTileIndexCallback:function(e,t,i){return n.SetTileIndexCallback(e,t,i,this.layer),this},setCollisionFromCollisionGroup:function(e,t){return n.SetCollisionFromCollisionGroup(e,t,this.layer),this},setTileLocationCallback:function(e,t,i,r,l,s){return n.SetTileLocationCallback(e,t,i,r,l,s,this.layer),this},tileToWorldX:function(e,t){return n.TileToWorldX(e,t,this.layer)},tileToWorldY:function(e,t){return n.TileToWorldY(e,t,this.layer)},tileToWorldXY:function(e,t,i,r){return n.TileToWorldXY(e,t,i,r,this.layer)},worldToTileX:function(e,t,i){return n.WorldToTileX(e,t,i,this.layer)},worldToTileY:function(e,t,i){return n.WorldToTileY(e,t,i,this.layer)},worldToTileXY:function(e,t,i,r,l){return n.WorldToTileXY(e,t,i,r,l,this.layer)}});module.exports=o;
},{"../../utils/Class":8,"../../gameobjects/components":509,"../../const":12,"../../gameobjects/GameObject":208,"./StaticTilemapLayerRender":413,"../components":536,"../../renderer/webgl/Utils":116}],274:[function(require,module,exports) {
var t=require("../utils/Class"),e=require("../math/DegToRad"),i=require("./dynamiclayer/DynamicTilemapLayer.js"),l=require("../utils/object/Extend"),n=require("./Formats"),r=require("./mapdata/LayerData"),s=require("../math/Rotate"),a=require("./staticlayer/StaticTilemapLayer.js"),h=require("./Tile"),o=require("./components"),u=require("./Tileset"),c=new t({initialize:function(t,e){this.scene=t,this.tileWidth=e.tileWidth,this.tileHeight=e.tileHeight,this.width=e.width,this.height=e.height,this.orientation=e.orientation,this.format=e.format,this.version=e.version,this.properties=e.properties,this.widthInPixels=e.widthInPixels,this.heightInPixels=e.heightInPixels,this.imageCollections=e.imageCollections,this.images=e.images,this.layers=e.layers,this.tilesets=e.tilesets,this.objects=e.objects,this.currentLayerIndex=0},addTilesetImage:function(t,e,i,l,r,s,a){if(void 0===t)return null;if(void 0!==e&&null!==e||(e=t),!this.scene.sys.textures.exists(e))return console.warn('Invalid image key given for tileset: "'+e+'"'),null;var h=this.scene.sys.textures.get(e),o=this.getTilesetIndex(t);if(null===o&&this.format===n.TILED_JSON)return console.warn('No data found in the JSON tilemap from Tiled matching the tileset name: "'+t+'"'),null;if(this.tilesets[o])return this.tilesets[o].setTileSize(i,l),this.tilesets[o].setSpacing(r,s),this.tilesets[o].setImage(h),this.tilesets[o];void 0===i&&(i=this.tileWidth),void 0===l&&(l=this.tileHeight),void 0===r&&(r=0),void 0===s&&(s=0),void 0===a&&(a=0);var c=new u(t,a,i,l,r,s);return c.setImage(h),this.tilesets.push(c),c},convertLayerToStatic:function(t){if(null===(t=this.getLayer(t)))return null;var e=t.tilemapLayer;if(!(e&&e instanceof i))return null;var l=new a(e.scene,e.tilemap,e.layerIndex,e.tileset,e.x,e.y);return this.scene.sys.displayList.add(l),e.destroy(),l},copy:function(t,e,i,l,n,r,s,a){return a=this.getLayer(a),this._isStaticCall(a,"copy")?this:(null!==a&&o.Copy(t,e,i,l,n,r,s,a),this)},createBlankDynamicLayer:function(t,e,l,n,s,a,o,u){if(void 0===o&&(o=e.tileWidth),void 0===u&&(u=e.tileHeight),void 0===s&&(s=this.width),void 0===a&&(a=this.height),void 0===l&&(l=0),void 0===n&&(n=0),null!==this.getLayerIndex(t))return console.warn("Cannot create blank layer: layer with matching name already exists "+t),null;for(var c,y=new r({name:t,tileWidth:o,tileHeight:u,width:s,height:a}),d=0;d<a;d++){c=[];for(var g=0;g<s;g++)c.push(new h(y,-1,g,d,o,u,this.tileWidth,this.tileHeight));y.data.push(c)}this.layers.push(y),this.currentLayerIndex=this.layers.length-1;var f=new i(this.scene,this,this.currentLayerIndex,e,l,n);return this.scene.sys.displayList.add(f),f},createDynamicLayer:function(t,e,l,n){var r=this.getLayerIndex(t);if(null===r)return console.warn("Cannot create tilemap layer, invalid layer ID given: "+t),null;var s=this.layers[r];if(s.tilemapLayer)return console.warn("Cannot create dynamic tilemap layer since a static or dynamic tilemap layer exists for layer ID:"+t),null;this.currentLayerIndex=r,s.tileWidth===e.tileWidth&&s.tileHeight===e.tileHeight||this.setLayerTileSize(e.tileWidth,e.tileHeight,r),void 0===l&&this.layers[r].x&&(l=this.layers[r].x),void 0===n&&this.layers[r].y&&(n=this.layers[r].y);var a=new i(this.scene,this,r,e,l,n);return this.scene.sys.displayList.add(a),a},createFromObjects:function(t,i,n,r){void 0===n&&(n={}),void 0===r&&(r=this.scene);var a=this.getObjectLayer(t);if(a){for(var h=a.objects,o=[],u=0;u<h.length;u++){var c=!1,y=h[u];if((void 0!==y.gid&&"number"==typeof i&&y.gid===i||void 0!==y.id&&"number"==typeof i&&y.id===i||void 0!==y.name&&"string"==typeof i&&y.name===i)&&(c=!0),c){var d=l({},n,y.properties);d.x=y.x,d.y=y.y;var g=this.scene.make.sprite(d);g.name=y.name,y.width&&(g.displayWidth=y.width),y.height&&(g.displayHeight=y.height);var f={x:g.originX*g.displayWidth,y:(g.originY-1)*g.displayHeight};if(y.rotation){var L=e(y.rotation);s(f,L),g.rotation=L}g.x+=f.x,g.y+=f.y,void 0===y.flippedHorizontal&&void 0===y.flippedVertical||g.setFlip(y.flippedHorizontal,y.flippedVertical),y.visible||(g.visible=!1),o.push(g)}}return o}console.warn("Cannot create from object. Invalid objectgroup name given: "+t)},createFromTiles:function(t,e,i,l,n,r){return null===(r=this.getLayer(r))?null:o.CreateFromTiles(t,e,i,l,n,r)},createStaticLayer:function(t,e,i,l){var n=this.getLayerIndex(t);if(null===n)return console.warn("Cannot create tilemap layer, invalid layer ID given: "+t),null;var r=this.layers[n];if(r.tilemapLayer)return console.warn("Cannot create static tilemap layer since a static or dynamic tilemap layer exists for layer ID:"+t),null;this.currentLayerIndex=n,r.tileWidth===e.tileWidth&&r.tileHeight===e.tileHeight||this.setLayerTileSize(e.tileWidth,e.tileHeight,n),void 0===i&&this.layers[n].x&&(i=this.layers[n].x),void 0===l&&this.layers[n].y&&(l=this.layers[n].y);var s=new a(this.scene,this,n,e,i,l);return this.scene.sys.displayList.add(s),s},destroy:function(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=void 0},fill:function(t,e,i,l,n,r,s){return s=this.getLayer(s),this._isStaticCall(s,"fill")?this:(null!==s&&o.Fill(t,e,i,l,n,r,s),this)},filterObjects:function(t,e,i){if("string"==typeof t){var l=t;if(!(t=this.getObjectLayer(t)))return console.warn("No object layer found with the name: "+l),null}return t.objects.filter(e,i)},filterTiles:function(t,e,i,l,n,r,s,a){return null===(a=this.getLayer(a))?null:o.FilterTiles(t,e,i,l,n,r,s,a)},findByIndex:function(t,e,i,l){return null===(l=this.getLayer(l))?null:o.FindByIndex(t,e,i,l)},findObject:function(t,e,i){if("string"==typeof t){var l=t;if(!(t=this.getObjectLayer(t)))return console.warn("No object layer found with the name: "+l),null}return t.objects.find(e,i)||null},findTile:function(t,e,i,l,n,r,s,a){return null===(a=this.getLayer(a))?null:o.FindTile(t,e,i,l,n,r,s,a)},forEachTile:function(t,e,i,l,n,r,s,a){return null!==(a=this.getLayer(a))&&o.ForEachTile(t,e,i,l,n,r,s,a),this},getImageIndex:function(t){return this.getIndex(this.images,t)},getIndex:function(t,e){for(var i=0;i<t.length;i++)if(t[i].name===e)return i;return null},getLayer:function(t){var e=this.getLayerIndex(t);return null!==e?this.layers[e]:null},getObjectLayer:function(t){var e=this.getIndex(this.objects,t);return null!==e?this.objects[e]:null},getLayerIndex:function(t){return void 0===t?this.currentLayerIndex:"string"==typeof t?this.getLayerIndexByName(t):"number"==typeof t&&t<this.layers.length?t:t instanceof a||t instanceof i?t.layerIndex:null},getLayerIndexByName:function(t){return this.getIndex(this.layers,t)},getTileAt:function(t,e,i,l){return null===(l=this.getLayer(l))?null:o.GetTileAt(t,e,i,l)},getTileAtWorldXY:function(t,e,i,l,n){return null===(n=this.getLayer(n))?null:o.GetTileAtWorldXY(t,e,i,l,n)},getTilesWithin:function(t,e,i,l,n,r){return null===(r=this.getLayer(r))?null:o.GetTilesWithin(t,e,i,l,n,r)},getTilesWithinShape:function(t,e,i,l){return null===(l=this.getLayer(l))?null:o.GetTilesWithinShape(t,e,i,l)},getTilesWithinWorldXY:function(t,e,i,l,n,r,s){return null===(s=this.getLayer(s))?null:o.GetTilesWithinWorldXY(t,e,i,l,n,r,s)},getTilesetIndex:function(t){return this.getIndex(this.tilesets,t)},hasTileAt:function(t,e,i){return null===(i=this.getLayer(i))?null:o.HasTileAt(t,e,i)},hasTileAtWorldXY:function(t,e,i,l){return null===(l=this.getLayer(l))?null:o.HasTileAtWorldXY(t,e,i,l)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(t){this.setLayer(t)}},putTileAt:function(t,e,i,l,n){return n=this.getLayer(n),this._isStaticCall(n,"putTileAt")?null:null===n?null:o.PutTileAt(t,e,i,l,n)},putTileAtWorldXY:function(t,e,i,l,n,r){return r=this.getLayer(r),this._isStaticCall(r,"putTileAtWorldXY")?null:null===r?null:o.PutTileAtWorldXY(t,e,i,l,n,r)},putTilesAt:function(t,e,i,l,n){return n=this.getLayer(n),this._isStaticCall(n,"putTilesAt")?this:(null!==n&&o.PutTilesAt(t,e,i,l,n),this)},randomize:function(t,e,i,l,n,r){return r=this.getLayer(r),this._isStaticCall(r,"randomize")?this:(null!==r&&o.Randomize(t,e,i,l,n,r),this)},calculateFacesAt:function(t,e,i){return null===(i=this.getLayer(i))?this:(o.CalculateFacesAt(t,e,i),this)},calculateFacesWithin:function(t,e,i,l,n){return null===(n=this.getLayer(n))?this:(o.CalculateFacesWithin(t,e,i,l,n),this)},removeAllLayers:function(){for(var t=0;t<this.layers.length;t++)this.layers[t].tilemapLayer&&this.layers[t].tilemapLayer.destroy();return this.layers.length=0,this.currentLayerIndex=0,this},removeTileAt:function(t,e,i,l,n){return n=this.getLayer(n),this._isStaticCall(n,"removeTileAt")?null:null===n?null:o.RemoveTileAt(t,e,i,l,n)},removeTileAtWorldXY:function(t,e,i,l,n,r){return r=this.getLayer(r),this._isStaticCall(r,"removeTileAtWorldXY")?null:null===r?null:o.RemoveTileAtWorldXY(t,e,i,l,n,r)},renderDebug:function(t,e,i){return null===(i=this.getLayer(i))?this:(o.RenderDebug(t,e,i),this)},replaceByIndex:function(t,e,i,l,n,r,s){return s=this.getLayer(s),this._isStaticCall(s,"replaceByIndex")?this:(null!==s&&o.ReplaceByIndex(t,e,i,l,n,r,s),this)},setCollision:function(t,e,i,l){return null===(l=this.getLayer(l))?this:(o.SetCollision(t,e,i,l),this)},setCollisionBetween:function(t,e,i,l,n){return null===(n=this.getLayer(n))?this:(o.SetCollisionBetween(t,e,i,l,n),this)},setCollisionByProperty:function(t,e,i,l){return null===(l=this.getLayer(l))?this:(o.SetCollisionByProperty(t,e,i,l),this)},setCollisionByExclusion:function(t,e,i,l){return null===(l=this.getLayer(l))?this:(o.SetCollisionByExclusion(t,e,i,l),this)},setCollisionFromCollisionGroup:function(t,e,i){return null===(i=this.getLayer(i))?this:(o.SetCollisionFromCollisionGroup(t,e,i),this)},setTileIndexCallback:function(t,e,i,l){return null===(l=this.getLayer(l))?this:(o.SetTileIndexCallback(t,e,i,l),this)},setTileLocationCallback:function(t,e,i,l,n,r,s){return null===(s=this.getLayer(s))?this:(o.SetTileLocationCallback(t,e,i,l,n,r,s),this)},setLayer:function(t){var e=this.getLayerIndex(t);return null!==e&&(this.currentLayerIndex=e),this},setBaseTileSize:function(t,e){this.tileWidth=t,this.tileHeight=e,this.widthInPixels=this.width*t,this.heightInPixels=this.height*e;for(var i=0;i<this.layers.length;i++){this.layers[i].baseWidth=t,this.layers[i].baseHeight=e;for(var l=this.layers[i].data,n=this.layers[i].width,r=this.layers[i].height,s=0;s<r;++s)for(var a=0;a<n;++a){var h=l[s][a];null!==h&&h.setSize(void 0,void 0,t,e)}}return this},setLayerTileSize:function(t,e,i){if(null===(i=this.getLayer(i)))return this;i.tileWidth=t,i.tileHeight=e;for(var l=i.data,n=i.width,r=i.height,s=0;s<r;++s)for(var a=0;a<n;++a){var h=l[s][a];null!==h&&h.setSize(t,e)}return this},shuffle:function(t,e,i,l,n){return n=this.getLayer(n),this._isStaticCall(n,"shuffle")?this:(null!==n&&o.Shuffle(t,e,i,l,n),this)},swapByIndex:function(t,e,i,l,n,r,s){return s=this.getLayer(s),this._isStaticCall(s,"swapByIndex")?this:(null!==s&&o.SwapByIndex(t,e,i,l,n,r,s),this)},tileToWorldX:function(t,e,i){return null===(i=this.getLayer(i))?null:o.TileToWorldX(t,e,i)},tileToWorldY:function(t,e,i){return null===(i=this.getLayer(i))?null:o.TileToWorldY(t,e,i)},tileToWorldXY:function(t,e,i,l,n){return null===(n=this.getLayer(n))?null:o.TileToWorldXY(t,e,i,l,n)},weightedRandomize:function(t,e,i,l,n,r){return r=this.getLayer(r),this._isStaticCall(r,"weightedRandomize")?this:(null!==r&&o.WeightedRandomize(t,e,i,l,n,r),this)},worldToTileX:function(t,e,i,l){return null===(l=this.getLayer(l))?null:o.WorldToTileX(t,e,i,l)},worldToTileY:function(t,e,i,l){return null===(l=this.getLayer(l))?null:o.WorldToTileY(t,e,i,l)},worldToTileXY:function(t,e,i,l,n,r){return null===(r=this.getLayer(r))?null:o.WorldToTileXY(t,e,i,l,n,r)},_isStaticCall:function(t,e){return t.tilemapLayer instanceof a&&(console.warn(e+": You cannot change the tiles in a static tilemap layer"),!0)}});module.exports=c;
},{"../utils/Class":8,"../math/DegToRad":228,"./dynamiclayer/DynamicTilemapLayer.js":324,"../utils/object/Extend":13,"./Formats":277,"./mapdata/LayerData":322,"../math/Rotate":245,"./staticlayer/StaticTilemapLayer.js":326,"./Tile":273,"./components":536,"./Tileset":278}],272:[function(require,module,exports) {
var e=require("./Formats"),a=require("./mapdata/MapData"),r=require("./parsers/Parse"),i=require("./Tilemap"),o=function(o,t,d,l,n,u,v,m){void 0===d&&(d=32),void 0===l&&(l=32),void 0===n&&(n=10),void 0===u&&(u=10),void 0===m&&(m=!1);var p=null;if(Array.isArray(v))p=r(void 0!==t?t:"map",e.ARRAY_2D,v,d,l,m);else if(void 0!==t){var s=o.cache.tilemap.get(t);s?p=r(t,s.format,s.data,d,l,m):console.warn("No map data found for key "+t)}return null===p&&(p=new a({tileWidth:d,tileHeight:l,width:n,height:u})),new i(o,p)};module.exports=o;
},{"./Formats":277,"./mapdata/MapData":325,"./parsers/Parse":389,"./Tilemap":274}],275:[function(require,module,exports) {
var e=require("../gameobjects/GameObjectCreator"),t=require("./ParseToTilemap");e.register("tilemap",function(e){var i=void 0!==e?e:{};return t(this.scene,i.key,i.tileWidth,i.tileHeight,i.width,i.height,i.data,i.insertNull)});
},{"../gameobjects/GameObjectCreator":205,"./ParseToTilemap":272}],276:[function(require,module,exports) {
var e=require("../gameobjects/GameObjectFactory"),i=require("./ParseToTilemap");e.register("tilemap",function(e,l,r,n,o,u,t){return null===e&&(e=void 0),null===l&&(l=void 0),null===r&&(r=void 0),null===n&&(n=void 0),null===o&&(o=void 0),i(this.scene,e,l,r,n,o,u,t)});
},{"../gameobjects/GameObjectFactory":210,"./ParseToTilemap":272}],89:[function(require,module,exports) {
module.exports={Components:require("./components"),Parsers:require("./parsers"),Formats:require("./Formats"),ImageCollection:require("./ImageCollection"),ParseToTilemap:require("./ParseToTilemap"),Tile:require("./Tile"),Tilemap:require("./Tilemap"),TilemapCreator:require("./TilemapCreator"),TilemapFactory:require("./TilemapFactory"),Tileset:require("./Tileset"),LayerData:require("./mapdata/LayerData"),MapData:require("./mapdata/MapData"),ObjectLayer:require("./mapdata/ObjectLayer"),DynamicTilemapLayer:require("./dynamiclayer/DynamicTilemapLayer"),StaticTilemapLayer:require("./staticlayer/StaticTilemapLayer")};
},{"./components":536,"./parsers":537,"./Formats":277,"./ImageCollection":271,"./ParseToTilemap":272,"./Tile":273,"./Tilemap":274,"./TilemapCreator":275,"./TilemapFactory":276,"./Tileset":278,"./mapdata/LayerData":322,"./mapdata/MapData":325,"./mapdata/ObjectLayer":323,"./dynamiclayer/DynamicTilemapLayer":324,"./staticlayer/StaticTilemapLayer":326}],270:[function(require,module,exports) {
var t=require("../utils/Class"),e=require("../utils/object/GetFastValue"),s=new t({initialize:function(t){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(t)},reset:function(t){return this.delay=e(t,"delay",0),this.repeat=e(t,"repeat",0),this.loop=e(t,"loop",!1),this.callback=e(t,"callback",void 0),this.callbackScope=e(t,"callbackScope",this.callback),this.args=e(t,"args",[]),this.timeScale=e(t,"timeScale",1),this.startAt=e(t,"startAt",0),this.paused=e(t,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=-1===this.repeat||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var t=this.delay+this.delay*this.repeat;return(this.elapsed+this.delay*(this.repeat-this.repeatCount))/t}return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return.001*this.elapsed},remove:function(t){void 0===t&&(t=!1),this.elapsed=this.delay,this.hasDispatched=!t,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});module.exports=s;
},{"../utils/Class":8,"../utils/object/GetFastValue":102}],269:[function(require,module,exports) {
var e=require("../utils/Class"),t=require("../boot/PluginManager"),i=require("./TimerEvent"),n=new e({initialize:function(e){this.scene=e,this.systems=e.sys,e.sys.settings.isBooted||e.sys.events.once("boot",this.boot,this),this.now=Date.now(),this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[]},boot:function(){var e=this.systems.events;e.on("preupdate",this.preUpdate,this),e.on("update",this.update,this),e.on("shutdown",this.shutdown,this),e.on("destroy",this.destroy,this)},addEvent:function(e){var t=new i(e);return this._pendingInsertion.push(t),t},delayedCall:function(e,t,i,n){return this.addEvent({delay:e,callback:t,args:i,callbackScope:n})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var e=this._pendingRemoval.length,t=this._pendingInsertion.length;if(0!==e||0!==t){var i,n;for(i=0;i<e;i++){n=this._pendingRemoval[i];var s=this._active.indexOf(n);s>-1&&this._active.splice(s,1),n.destroy()}for(i=0;i<t;i++)n=this._pendingInsertion[i],this._active.push(n);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(e,t){if(this.now=e,!this.paused){t*=this.timeScale;for(var i=0;i<this._active.length;i++){var n=this._active[i];if(!n.paused&&(n.elapsed+=t*n.timeScale,n.elapsed>=n.delay)){var s=n.elapsed-n.delay;n.elapsed=n.delay,!n.hasDispatched&&n.callback&&(n.hasDispatched=!0,n.callback.apply(n.callbackScope,n.args)),n.repeatCount>0?(n.repeatCount--,n.elapsed=s,n.hasDispatched=!1):this._pendingRemoval.push(n)}}}},shutdown:function(){var e;for(e=0;e<this._pendingInsertion.length;e++)this._pendingInsertion[e].destroy();for(e=0;e<this._active.length;e++)this._active[e].destroy();for(e=0;e<this._pendingRemoval.length;e++)this._pendingRemoval[e].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0},destroy:function(){this.shutdown(),this.scene=void 0}});t.register("Clock",n,"time"),module.exports=n;
},{"../utils/Class":8,"../boot/PluginManager":16,"./TimerEvent":270}],90:[function(require,module,exports) {
module.exports={Clock:require("./Clock"),TimerEvent:require("./TimerEvent")};
},{"./Clock":269,"./TimerEvent":270}],454:[function(require,module,exports) {
var n=function(n,t,r){var o;n.hasOwnProperty(t)?o="function"===typeof n[t]?function(r,o,u){return n[t](r,o,u)}:function(){return n[t]}:o="function"==typeof r?r:function(){return r};return o};module.exports=n;
},{}],555:[function(require,module,exports) {
module.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"];
},{}],458:[function(require,module,exports) {
var e=require("../tween/ReservedProps"),r=function(r){var s,p=[];if(r.hasOwnProperty("props"))for(s in r.props)"_"!==s.substr(0,1)&&p.push({key:s,value:r.props[s]});else for(s in r)-1===e.indexOf(s)&&"_"!==s.substr(0,1)&&p.push({key:s,value:r[s]});return p};module.exports=r;
},{"../tween/ReservedProps":555}],456:[function(require,module,exports) {
var r=require("../../utils/object/GetValue"),e=function(e){var t=r(e,"targets",null);return null===t?t:("function"==typeof t&&(t=t.call()),Array.isArray(t)||(t=[t]),t)};module.exports=e;
},{"../../utils/object/GetValue":53}],457:[function(require,module,exports) {
var e=require("../../utils/object/GetValue"),r=function(r){var l=e(r,"tweens",null);return null===l?[]:("function"==typeof l&&(l=l.call()),Array.isArray(l)||(l=[l]),l)};module.exports=r;
},{"../../utils/object/GetValue":53}],453:[function(require,module,exports) {
function t(t){return!!t.getStart&&"function"==typeof t.getStart}function n(t){return!!t.getEnd&&"function"==typeof t.getEnd}function e(e){return t(e)||n(e)}var r=function(u,o){var a,c=function(t,n,e){return e},f=function(t,n,e){return e},i=typeof o;if("number"===i)c=function(){return o};else if("string"===i){var s=o[0],g=parseFloat(o.substr(2));switch(s){case"+":c=function(t,n,e){return e+g};break;case"-":c=function(t,n,e){return e-g};break;case"*":c=function(t,n,e){return e*g};break;case"/":c=function(t,n,e){return e/g};break;default:c=function(){return parseFloat(o)}}}else"function"===i?c=o:"object"===i&&e(o)?(n(o)&&(c=o.getEnd),t(o)&&(f=o.getStart)):o.hasOwnProperty("value")&&(a=r(u,o.value));return a||(a={getEnd:c,getStart:f}),a};module.exports=r;
},{}],455:[function(require,module,exports) {
var e={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1};module.exports=e;
},{}],328:[function(require,module,exports) {
var t=require("../../utils/Class"),e=require("../../gameobjects/GameObjectCreator"),a=require("../../gameobjects/GameObjectFactory"),s=require("./const"),r=new t({initialize:function(t,e,a){this.parent=t,this.parentIsTimeline=t.hasOwnProperty("isTimeline"),this.data=e,this.totalData=e.length,this.targets=a,this.totalTargets=a.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=s.PENDING_ADD,this._pausedState=s.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onRepeat:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function(){return this.data[0].current},setTimeScale:function(t){return this.timeScale=t,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===s.ACTIVE},isPaused:function(){return this.state===s.PAUSED},hasTarget:function(t){return-1!==this.targets.indexOf(t)},updateTo:function(t,e,a){for(var s=0;s<this.totalData;s++){var r=this.data[s];if(r.key===t){r.end=e,a&&(r.start=r.current);break}}return this},restart:function(){this.stop(),this.play()},calcDuration:function(){for(var t=0,e=this.data,a=0;a<this.totalData;a++){var s=e[a];s.t1=s.duration+s.hold,s.yoyo&&(s.t1+=s.duration),s.t2=s.t1+s.repeatDelay,s.totalDuration=s.delay+s.t1,-1===s.repeat?s.totalDuration+=999999999999*s.t2:s.repeat>0&&(s.totalDuration+=s.t2*s.repeat),s.totalDuration>t&&(t=s.totalDuration)}this.duration=t,this.loopCounter=-1===this.loop?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){for(var t=this.data,e=this.totalTargets,a=0;a<this.totalData;a++){var r=t[a],i=r.target,o=r.gen;r.delay=o.delay(a,e,i),r.duration=o.duration(a,e,i),r.hold=o.hold(a,e,i),r.repeat=o.repeat(a,e,i),r.repeatDelay=o.repeatDelay(a,e,i)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.paused&&!this.parentIsTimeline?(this.state=s.PENDING_ADD,!1):(this.state=s.INIT,!0)},nextState:function(){if(this.loopCounter>0){this.elapsed=0,this.progress=0,this.loopCounter--;var t=this.callbacks.onLoop;t&&(t.params[1]=this.targets,t.func.apply(t.scope,t.params)),this.resetTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=s.LOOP_DELAY):this.state=s.ACTIVE}else if(this.completeDelay>0)this.countdown=this.completeDelay,this.state=s.COMPLETE_DELAY;else{var e=this.callbacks.onComplete;e&&(e.params[1]=this.targets,e.func.apply(e.scope,e.params)),this.state=s.PENDING_REMOVE}},pause:function(){if(this.state!==s.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=s.PAUSED,this},play:function(t){if(this.state!==s.ACTIVE){this.state!==s.PENDING_REMOVE&&this.state!==s.REMOVED||(this.init(),this.parent.makeActive(this),t=!0);var e=this.callbacks.onStart;this.parentIsTimeline?(this.resetTweenData(t),0===this.calculatedOffset?(e&&(e.params[1]=this.targets,e.func.apply(e.scope,e.params)),this.state=s.ACTIVE):(this.countdown=this.calculatedOffset,this.state=s.OFFSET_DELAY)):this.paused?(this.paused=!1,this.parent.makeActive(this)):(this.resetTweenData(t),this.state=s.ACTIVE,e&&(e.params[1]=this.targets,e.func.apply(e.scope,e.params)))}},resetTweenData:function(t){for(var e=this.data,a=0;a<this.totalData;a++){var r=e[a];r.progress=0,r.elapsed=0,r.repeatCounter=-1===r.repeat?999999999999:r.repeat,t?(r.start=r.getStartValue(r.target,r.key,r.start),r.end=r.getEndValue(r.target,r.key,r.end),r.current=r.start,r.state=s.PLAYING_FORWARD):r.delay>0?(r.elapsed=r.delay,r.state=s.DELAY):r.state=s.PENDING_RENDER}},resume:function(){return this.state===s.PAUSED&&(this.paused=!1,this.state=this._pausedState),this},seek:function(t){for(var e=this.data,a=0;a<this.totalData;a++){var s=this.totalDuration*t,r=e[a],i=0,o=0;s<=r.delay?(i=0,o=0):s>=r.totalDuration?(i=1,o=r.duration):s>r.delay&&s<=r.t1?(i=(s=Math.max(0,s-r.delay))/r.t1,o=r.duration*i):s>r.t1&&s<r.totalDuration&&(s-=r.delay,(s=(s-=r.t1)/r.t2%1*r.t2)>r.repeatDelay&&(i=s/r.t1,o=r.duration*i)),r.progress=i,r.elapsed=o;var n=r.ease(r.progress);r.current=r.start+(r.end-r.start)*n,r.target[r.key]=r.current}},setCallback:function(t,e,a,s){return this.callbacks[t]={func:e,scope:s,params:a},this},complete:function(t){if(void 0===t&&(t=0),t)this.countdown=t,this.state=s.COMPLETE_DELAY;else{var e=this.callbacks.onComplete;e&&(e.params[1]=this.targets,e.func.apply(e.scope,e.params)),this.state=s.PENDING_REMOVE}},stop:function(t){this.state===s.ACTIVE&&void 0!==t&&this.seek(t),this.state!==s.REMOVED&&(this.state=s.PENDING_REMOVE)},update:function(t,e){if(this.state===s.PAUSED)return!1;switch(this.useFrames&&(e=1*this.parent.timeScale),e*=this.timeScale,this.elapsed+=e,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=e,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case s.ACTIVE:for(var a=!1,r=0;r<this.totalData;r++)this.updateTweenData(this,this.data[r],e)&&(a=!0);a||this.nextState();break;case s.LOOP_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=s.ACTIVE);break;case s.OFFSET_DELAY:if(this.countdown-=e,this.countdown<=0){var i=this.callbacks.onStart;i&&(i.params[1]=this.targets,i.func.apply(i.scope,i.params)),this.state=s.ACTIVE}break;case s.COMPLETE_DELAY:if(this.countdown-=e,this.countdown<=0){var o=this.callbacks.onComplete;o&&o.func.apply(o.scope,o.params),this.state=s.PENDING_REMOVE}}return this.state===s.PENDING_REMOVE},setStateFromEnd:function(t,e,a){if(e.yoyo){e.elapsed=a,e.progress=a/e.duration,e.flipX&&e.target.toggleFlipX(),e.flipY&&e.target.toggleFlipY();var r=t.callbacks.onYoyo;return r&&(r.params[1]=e.target,r.func.apply(r.scope,r.params)),e.start=e.getStartValue(e.target,e.key,e.start),s.PLAYING_BACKWARD}if(e.repeatCounter>0){e.repeatCounter--,e.elapsed=a,e.progress=a/e.duration,e.flipX&&e.target.toggleFlipX(),e.flipY&&e.target.toggleFlipY();var i=t.callbacks.onRepeat;return i&&(i.params[1]=e.target,i.func.apply(i.scope,i.params)),e.start=e.getStartValue(e.target,e.key,e.start),e.end=e.getEndValue(e.target,e.key,e.start),e.repeatDelay>0?(e.elapsed=e.repeatDelay-a,e.current=e.start,e.target[e.key]=e.current,s.REPEAT_DELAY):s.PLAYING_FORWARD}return s.COMPLETE},setStateFromStart:function(t,e,a){if(e.repeatCounter>0){e.repeatCounter--,e.elapsed=a,e.progress=a/e.duration,e.flipX&&e.target.toggleFlipX(),e.flipY&&e.target.toggleFlipY();var r=t.callbacks.onRepeat;return r&&(r.params[1]=e.target,r.func.apply(r.scope,r.params)),e.end=e.getEndValue(e.target,e.key,e.start),e.repeatDelay>0?(e.elapsed=e.repeatDelay-a,e.current=e.start,e.target[e.key]=e.current,s.REPEAT_DELAY):s.PLAYING_FORWARD}return s.COMPLETE},updateTweenData:function(t,e,a){switch(e.state){case s.PLAYING_FORWARD:case s.PLAYING_BACKWARD:if(!e.target){e.state=s.COMPLETE;break}var r=e.elapsed,i=e.duration,o=0;(r+=a)>i&&(o=r-i,r=i);var n,l=e.state===s.PLAYING_FORWARD,p=r/i;n=l?e.ease(p):e.ease(1-p),e.current=e.start+(e.end-e.start)*n,e.target[e.key]=e.current,e.elapsed=r,e.progress=p;var h=t.callbacks.onUpdate;h&&(h.params[1]=e.target,h.func.apply(h.scope,h.params)),1===p&&(l?e.hold>0?(e.elapsed=e.hold-o,e.state=s.HOLD_DELAY):e.state=this.setStateFromEnd(t,e,o):e.state=this.setStateFromStart(t,e,o));break;case s.DELAY:e.elapsed-=a,e.elapsed<=0&&(e.elapsed=Math.abs(e.elapsed),e.state=s.PENDING_RENDER);break;case s.REPEAT_DELAY:e.elapsed-=a,e.elapsed<=0&&(e.elapsed=Math.abs(e.elapsed),e.state=s.PLAYING_FORWARD);break;case s.HOLD_DELAY:e.elapsed-=a,e.elapsed<=0&&(e.state=this.setStateFromEnd(t,e,Math.abs(e.elapsed)));break;case s.PENDING_RENDER:e.target?(e.start=e.getStartValue(e.target,e.key,e.target[e.key]),e.end=e.getEndValue(e.target,e.key,e.start),e.current=e.start,e.target[e.key]=e.start,e.state=s.PLAYING_FORWARD):e.state=s.COMPLETE}return e.state!==s.COMPLETE}});r.TYPES=["onComplete","onLoop","onRepeat","onStart","onUpdate","onYoyo"],a.register("tween",function(t){return this.scene.sys.tweens.add(t)}),e.register("tween",function(t){return this.scene.sys.tweens.create(t)}),module.exports=r;
},{"../../utils/Class":8,"../../gameobjects/GameObjectCreator":205,"../../gameobjects/GameObjectFactory":210,"./const":327}],329:[function(require,module,exports) {
var e=function(e,t,a,r,l,o,n,d,p,u,s,y,i){return{target:e,key:t,getEndValue:a,getStartValue:r,ease:l,duration:0,totalDuration:0,delay:0,yoyo:d,hold:0,repeat:0,repeatDelay:0,flipX:y,flipY:i,progress:0,elapsed:0,repeatCounter:0,start:0,current:0,end:0,t1:0,t2:0,gen:{delay:o,duration:n,hold:p,repeat:u,repeatDelay:s},state:0}};module.exports=e;
},{}],391:[function(require,module,exports) {
var e=require("../tween/Defaults"),a=require("../../utils/object/GetAdvancedValue"),r=require("./GetBoolean"),t=require("./GetEaseFunction"),o=require("./GetNewValue"),l=require("../../utils/object/GetValue"),u=require("./GetValueOp"),n=require("../tween/Tween"),s=require("../tween/TweenData"),i=function(i,p,c){void 0===c&&(c=e);var d=l(p,"from",0),y=l(p,"to",1),v=[{value:d}],f=o(p,"delay",c.delay),m=o(p,"duration",c.duration),q=l(p,"easeParams",c.easeParams),D=t(l(p,"ease",c.ease),q),w=o(p,"hold",c.hold),h=o(p,"repeat",c.repeat),G=o(p,"repeatDelay",c.repeatDelay),b=r(p,"yoyo",c.yoyo),P=[],S=u("value",y),V=s(v[0],"value",S.getEnd,S.getStart,D,f,m,b,w,h,G,!1,!1);V.start=d,V.current=d,V.to=y,P.push(V);var g=new n(i,P,v);g.offset=a(p,"offset",null),g.completeDelay=a(p,"completeDelay",0),g.loop=Math.round(a(p,"loop",0)),g.loopDelay=Math.round(a(p,"loopDelay",0)),g.paused=r(p,"paused",!1),g.useFrames=r(p,"useFrames",!1);for(var E=l(p,"callbackScope",g),F=[g,null],T=n.TYPES,j=0;j<T.length;j++){var k=T[j],M=l(p,k,!1);if(M){var x=l(p,k+"Scope",E),A=l(p,k+"Params",[]);g.setCallback(k,M,F.concat(A),x)}}return g};module.exports=i;
},{"../tween/Defaults":455,"../../utils/object/GetAdvancedValue":375,"./GetBoolean":404,"./GetEaseFunction":451,"./GetNewValue":454,"../../utils/object/GetValue":53,"./GetValueOp":453,"../tween/Tween":328,"../tween/TweenData":329}],393:[function(require,module,exports) {
var e=require("../tween/Defaults"),a=require("../../utils/object/GetAdvancedValue"),r=require("./GetBoolean"),t=require("./GetEaseFunction"),l=require("./GetNewValue"),o=require("./GetProps"),u=require("./GetTargets"),s=require("../../utils/object/GetValue"),i=require("./GetValueOp"),p=require("../tween/Tween"),n=require("../tween/TweenData"),d=function(d,y,f){void 0===f&&(f=e);for(var c=f.targets?f.targets:u(y),q=o(y),v=l(y,"delay",f.delay),h=l(y,"duration",f.duration),D=s(y,"easeParams",f.easeParams),g=t(s(y,"ease",f.ease),D),m=l(y,"hold",f.hold),G=l(y,"repeat",f.repeat),w=l(y,"repeatDelay",f.repeatDelay),P=r(y,"yoyo",f.yoyo),b=r(y,"flipX",f.flipX),S=r(y,"flipY",f.flipY),T=[],V=0;V<q.length;V++)for(var Y=q[V].key,k=q[V].value,E=0;E<c.length;E++){var F=i(Y,k),X=n(c[E],Y,F.getEnd,F.getStart,t(s(k,"ease",g),D),l(k,"delay",v),l(k,"duration",h),r(k,"yoyo",P),l(k,"hold",m),l(k,"repeat",G),l(k,"repeatDelay",w),r(k,"flipX",b),r(k,"flipY",S));T.push(X)}var j=new p(d,T,c);j.offset=a(y,"offset",null),j.completeDelay=a(y,"completeDelay",0),j.loop=Math.round(a(y,"loop",0)),j.loopDelay=Math.round(a(y,"loopDelay",0)),j.paused=r(y,"paused",!1),j.useFrames=r(y,"useFrames",!1);for(var M=s(y,"callbackScope",j),x=[j,null],A=p.TYPES,B=0;B<A.length;B++){var C=A[B],N=s(y,C,!1);if(N){var O=s(y,C+"Scope",M),z=s(y,C+"Params",[]);j.setCallback(C,N,x.concat(z),O)}}return j};module.exports=d;
},{"../tween/Defaults":455,"../../utils/object/GetAdvancedValue":375,"./GetBoolean":404,"./GetEaseFunction":451,"./GetNewValue":454,"./GetProps":458,"./GetTargets":456,"../../utils/object/GetValue":53,"./GetValueOp":453,"../tween/Tween":328,"../tween/TweenData":329}],280:[function(require,module,exports) {
var t=require("../utils/Class"),s=require("eventemitter3"),e=require("./builders/TweenBuilder"),i=require("./tween/const"),a=new t({Extends:s,initialize:function(t){s.call(this),this.manager=t,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=i.PENDING_ADD,this._pausedState=i.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},setTimeScale:function(t){return this.timeScale=t,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===i.ACTIVE},add:function(t){return this.queue(e(this,t))},queue:function(t){return this.isPlaying()||(t.parent=this,t.parentIsTimeline=!0,this.data.push(t),this.totalData=this.data.length),this},hasOffset:function(t){return null!==t.offset},isOffsetAbsolute:function(t){return"number"==typeof t},isOffsetRelative:function(t){if("string"===typeof t){var s=t[0];if("-"===s||"+"===s)return!0}return!1},getRelativeOffset:function(t,s){var e=t[0],i=parseFloat(t.substr(2)),a=s;switch(e){case"+":a+=i;break;case"-":a-=i}return Math.max(0,a)},calcDuration:function(){for(var t=0,s=0,e=0,i=0;i<this.totalData;i++){var a=this.data[i];a.init(),this.hasOffset(a)?this.isOffsetAbsolute(a.offset)?(a.calculatedOffset=a.offset,0===a.offset&&(e=0)):this.isOffsetRelative(a.offset)&&(a.calculatedOffset=this.getRelativeOffset(a.offset,t)):a.calculatedOffset=e,t=a.totalDuration+a.calculatedOffset,s+=a.totalDuration,e+=a.totalDuration}this.duration=s,this.loopCounter=-1===this.loop?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,!this.paused||(this.state=i.PAUSED,!1)},resetTweens:function(t){for(var s=0;s<this.totalData;s++){this.data[s].play(t)}},setCallback:function(t,s,e,i){return-1!==a.TYPES.indexOf(t)&&(this.callbacks[t]={func:s,scope:i,params:e}),this},makeActive:function(t){return this.manager.makeActive(t)},play:function(){if(this.state!==i.ACTIVE){if(this.paused)return this.paused=!1,void this.manager.makeActive(this);this.resetTweens(!1),this.state=i.ACTIVE;var t=this.callbacks.onStart;t&&t.func.apply(t.scope,t.params),this.emit("start",this)}},nextState:function(){if(this.loopCounter>0){this.elapsed=0,this.progress=0,this.loopCounter--;var t=this.callbacks.onLoop;t&&t.func.apply(t.scope,t.params),this.emit("loop",this,this.loopCounter),this.resetTweens(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=i.LOOP_DELAY):this.state=i.ACTIVE}else if(this.completeDelay>0)this.countdown=this.completeDelay,this.state=i.COMPLETE_DELAY;else{var s=this.callbacks.onComplete;s&&s.func.apply(s.scope,s.params),this.emit("complete",this),this.state=i.PENDING_REMOVE}},update:function(t,s){if(this.state!==i.PAUSED){var e=s;switch(this.useFrames&&(s=1*this.manager.timeScale),s*=this.timeScale,this.elapsed+=s,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=s,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case i.ACTIVE:for(var a=this.totalData,o=0;o<this.totalData;o++){this.data[o].update(t,e)&&a--}var h=this.callbacks.onUpdate;h&&h.func.apply(h.scope,h.params),this.emit("update",this),0===a&&this.nextState();break;case i.LOOP_DELAY:this.countdown-=s,this.countdown<=0&&(this.state=i.ACTIVE);break;case i.COMPLETE_DELAY:if(this.countdown-=s,this.countdown<=0){var n=this.callbacks.onComplete;n&&n.func.apply(n.scope,n.params),this.emit("complete",this),this.state=i.PENDING_REMOVE}}return this.state===i.PENDING_REMOVE}},stop:function(){this.state=i.PENDING_REMOVE},pause:function(){if(this.state!==i.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=i.PAUSED,this.emit("pause",this),this},resume:function(){return this.state===i.PAUSED&&(this.paused=!1,this.state=this._pausedState),this.emit("resume",this),this},hasTarget:function(t){for(var s=0;s<this.data.length;s++)if(this.data[s].hasTarget(t))return!0;return!1},destroy:function(){for(var t=0;t<this.data.length;t++)this.data[t].destroy()}});a.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],module.exports=a;
},{"../utils/Class":8,"eventemitter3":35,"./builders/TweenBuilder":393,"./tween/const":327}],392:[function(require,module,exports) {
var e=require("../../utils/object/Clone"),a=require("../tween/Defaults"),o=require("../../utils/object/GetAdvancedValue"),r=require("./GetBoolean"),t=require("./GetEaseFunction"),l=require("./GetNewValue"),n=require("./GetTargets"),p=require("./GetTweens"),u=require("../../utils/object/GetValue"),s=require("../Timeline"),i=require("./TweenBuilder"),c=function(c,d){var y=new s(c),m=p(d);if(0===m.length)return y.paused=!0,y;var f=e(a);f.targets=n(d);var v=o(d,"totalDuration",0);f.duration=v>0?Math.floor(v/m.length):l(d,"duration",f.duration),f.delay=l(d,"delay",f.delay),f.easeParams=u(d,"easeParams",f.easeParams),f.ease=t(u(d,"ease",f.ease),f.easeParams),f.hold=l(d,"hold",f.hold),f.repeat=l(d,"repeat",f.repeat),f.repeatDelay=l(d,"repeatDelay",f.repeatDelay),f.yoyo=r(d,"yoyo",f.yoyo),f.flipX=r(d,"flipX",f.flipX),f.flipY=r(d,"flipY",f.flipY);for(var q=0;q<m.length;q++)y.queue(i(y,m[q],f));y.completeDelay=o(d,"completeDelay",0),y.loop=Math.round(o(d,"loop",0)),y.loopDelay=Math.round(o(d,"loopDelay",0)),y.paused=r(d,"paused",!1),y.useFrames=r(d,"useFrames",!1);var C=u(d,"callbackScope",y),S=[y],b=u(d,"onStart",!1);if(b){var h=u(d,"onStartScope",C),D=u(d,"onStartParams",[]);y.setCallback("onStart",b,S.concat(D),h)}var P=u(d,"onUpdate",!1);if(P){var G=u(d,"onUpdateScope",C),Y=u(d,"onUpdateParams",[]);y.setCallback("onUpdate",P,S.concat(Y),G)}var k=u(d,"onLoop",!1);if(k){var g=u(d,"onLoopScope",C),w=u(d,"onLoopParams",[]);y.setCallback("onLoop",k,S.concat(w),g)}var L=u(d,"onYoyo",!1);if(L){var T=u(d,"onYoyoScope",C),U=u(d,"onYoyoParams",[]);y.setCallback("onYoyo",L,S.concat(null,U),T)}var j=u(d,"onComplete",!1);if(j){var F=u(d,"onCompleteScope",C),M=u(d,"onCompleteParams",[]);y.setCallback("onComplete",j,S.concat(M),F)}return y};module.exports=c;
},{"../../utils/object/Clone":452,"../tween/Defaults":455,"../../utils/object/GetAdvancedValue":375,"./GetBoolean":404,"./GetEaseFunction":451,"./GetNewValue":454,"./GetTargets":456,"./GetTweens":457,"../../utils/object/GetValue":53,"../Timeline":280,"./TweenBuilder":393}],538:[function(require,module,exports) {
module.exports={GetBoolean:require("./GetBoolean"),GetEaseFunction:require("./GetEaseFunction"),GetNewValue:require("./GetNewValue"),GetProps:require("./GetProps"),GetTargets:require("./GetTargets"),GetTweens:require("./GetTweens"),GetValueOp:require("./GetValueOp"),NumberTweenBuilder:require("./NumberTweenBuilder"),TimelineBuilder:require("./TimelineBuilder"),TweenBuilder:require("./TweenBuilder")};
},{"./GetBoolean":404,"./GetEaseFunction":451,"./GetNewValue":454,"./GetProps":458,"./GetTargets":456,"./GetTweens":457,"./GetValueOp":453,"./NumberTweenBuilder":391,"./TimelineBuilder":392,"./TweenBuilder":393}],279:[function(require,module,exports) {
var t=require("../utils/Class"),e=require("./builders/NumberTweenBuilder"),i=require("../boot/PluginManager"),s=require("./builders/TimelineBuilder"),n=require("./tween/const"),r=require("./builders/TweenBuilder"),h=new t({initialize:function(t){this.scene=t,this.systems=t.sys,t.sys.settings.isBooted||t.sys.events.once("boot",this.boot,this),this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0},boot:function(){var t=this.systems.events;t.on("preupdate",this.preUpdate,this),t.on("update",this.update,this),t.on("shutdown",this.shutdown,this),t.on("destroy",this.destroy,this),this.timeScale=1},createTimeline:function(t){return s(this,t)},timeline:function(t){var e=s(this,t);return e.paused||(this._add.push(e),this._toProcess++),e},create:function(t){return r(this,t)},add:function(t){var e=r(this,t);return this._add.push(e),this._toProcess++,e},existing:function(t){return this._add.push(t),this._toProcess++,this},addCounter:function(t){var i=e(this,t);return this._add.push(i),this._toProcess++,i},preUpdate:function(){if(0!==this._toProcess){var t,e,i=this._destroy,s=this._active;for(t=0;t<i.length;t++){e=i[t];var r=s.indexOf(e);-1!==r&&(e.state=n.REMOVED,s.splice(r,1))}for(i.length=0,i=this._add,t=0;t<i.length;t++)(e=i[t]).state===n.PENDING_ADD&&(e.init()?(e.play(),this._active.push(e)):this._pending.push(e));i.length=0,this._toProcess=0}},update:function(t,e){var i,s=this._active;e*=this.timeScale;for(var n=0;n<s.length;n++)(i=s[n]).update(t,e)&&(this._destroy.push(i),this._toProcess++)},makeActive:function(t){if(-1===this._add.indexOf(t)&&-1===this._active.indexOf(t)){var e=this._pending.indexOf(t);return-1!==e&&this._pending.splice(e,1),this._add.push(t),t.state=n.PENDING_ADD,this._toProcess++,this}},each:function(t,e){for(var i=[null],s=1;s<arguments.length;s++)i.push(arguments[s]);for(var n in this.list)i[0]=this.list[n],t.apply(e,i)},getAllTweens:function(){for(var t=this._active,e=[],i=0;i<t.length;i++)e.push(t[i]);return e},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(t){var e,i,s=this._active,n=[];if(Array.isArray(t))for(i=0;i<s.length;i++){e=s[i];for(;0<t.length;i++)e.hasTarget(t[0])&&n.push(e)}else for(i=0;i<s.length;i++)(e=s[i]).hasTarget(t)&&n.push(e);return n},isTweening:function(t){for(var e,i=this._active,s=0;s<i.length;s++)if((e=i[s]).hasTarget(t)&&e.isPlaying())return!0;return!1},killAll:function(){for(var t=this.getAllTweens(),e=0;e<t.length;e++)t[e].stop();return this},killTweensOf:function(t){for(var e=this.getTweensOf(t),i=0;i<e.length;i++)e[i].stop();return this},pauseAll:function(){for(var t=this._active,e=0;e<t.length;e++)t[e].pause();return this},resumeAll:function(){for(var t=this._active,e=0;e<t.length;e++)t[e].resume();return this},setGlobalTimeScale:function(t){return this.timeScale=t,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0},destroy:function(){this.shutdown()}});i.register("TweenManager",h,"tweens"),module.exports=h;
},{"../utils/Class":8,"./builders/NumberTweenBuilder":391,"../boot/PluginManager":16,"./builders/TimelineBuilder":392,"./tween/const":327,"./builders/TweenBuilder":393}],91:[function(require,module,exports) {
var e=require("./tween/const"),r=require("../utils/object/Extend"),n={Builders:require("./builders"),TweenManager:require("./TweenManager"),Tween:require("./tween/Tween"),TweenData:require("./tween/TweenData"),Timeline:require("./Timeline")};n=r(!1,n,e),module.exports=n;
},{"./tween/const":327,"../utils/object/Extend":13,"./builders":538,"./TweenManager":279,"./tween/Tween":328,"./tween/TweenData":329,"./Timeline":280}],858:[function(require,module,exports) {
var r=function(r,e){if(!e.length)return NaN;if(1===e.length||r<e[0])return e[0];for(var n=1;e[n]<r;)n++;var t=e[n-1],u=n<e.length?e[n]:Number.POSITIVE_INFINITY;return u-r<=r-t?u:t};module.exports=r;
},{}],992:[function(require,module,exports) {
var r=function(r){if(!Array.isArray(r)||r.length<2||!Array.isArray(r[0]))return!1;for(var e=r[0].length,n=1;n<r.length;n++)if(r[n].length!==e)return!1;return!0};module.exports=r;
},{}],993:[function(require,module,exports) {
var r=require("../../string/Pad"),e=require("./CheckMatrix"),n=function(n){var t="";if(!e(n))return t;for(var i=0;i<n.length;i++){for(var a=0;a<n[i].length;a++){var g=n[i][a].toString();t+="undefined"!==g?r(g,2):"?",a<n[i].length-1&&(t+=" |")}if(i<n.length-1){t+="\n";for(var f=0;f<n[i].length;f++)t+="---",f<n[i].length-1&&(t+="+");t+="\n"}}return t};module.exports=n;
},{"../../string/Pad":52,"./CheckMatrix":992}],994:[function(require,module,exports) {
var r=function(r){for(var e=0;e<r.length;e++)r[e].reverse();return r};module.exports=r;
},{}],995:[function(require,module,exports) {
var e=function(e){return e.reverse()};module.exports=e;
},{}],1000:[function(require,module,exports) {
var r=function(r){for(var e=r.length,n=r[0].length,a=new Array(n),o=0;o<n;o++){a[o]=new Array(e);for(var t=e-1;t>-1;t--)a[o][t]=r[t][o]}return a};module.exports=r;
},{}],998:[function(require,module,exports) {
var e=require("./CheckMatrix"),r=require("./TransposeMatrix"),t=function(t,i){if(void 0===i&&(i=90),!e(t))return null;if("string"!=typeof i&&(i=(i%360+360)%360),90===i||-270===i||"rotateLeft"===i)(t=r(t)).reverse();else if(-90===i||270===i||"rotateRight"===i)t.reverse(),t=r(t);else if(180===Math.abs(i)||"rotate180"===i){for(var s=0;s<t.length;s++)t[s].reverse();t.reverse()}return t};module.exports=t;
},{"./CheckMatrix":992,"./TransposeMatrix":1000}],996:[function(require,module,exports) {
var r=require("./RotateMatrix"),e=function(e){return r(e,180)};module.exports=e;
},{"./RotateMatrix":998}],997:[function(require,module,exports) {
var r=require("./RotateMatrix"),e=function(e){return r(e,90)};module.exports=e;
},{"./RotateMatrix":998}],999:[function(require,module,exports) {
var r=require("./RotateMatrix"),e=function(e){return r(e,-90)};module.exports=e;
},{"./RotateMatrix":998}],938:[function(require,module,exports) {
module.exports={CheckMatrix:require("./CheckMatrix"),MatrixToString:require("./MatrixToString"),ReverseColumns:require("./ReverseColumns"),ReverseRows:require("./ReverseRows"),Rotate180:require("./Rotate180"),RotateLeft:require("./RotateLeft"),RotateMatrix:require("./RotateMatrix"),RotateRight:require("./RotateRight"),TransposeMatrix:require("./TransposeMatrix")};
},{"./CheckMatrix":992,"./MatrixToString":993,"./ReverseColumns":994,"./ReverseRows":995,"./Rotate180":996,"./RotateLeft":997,"./RotateMatrix":998,"./RotateRight":999,"./TransposeMatrix":1000}],859:[function(require,module,exports) {
var o=require("../../math/RoundAwayFromZero"),r=function(r,u,a){void 0===r&&(r=0),void 0===u&&(u=null),void 0===a&&(a=1),null===u&&(u=r,r=0);for(var e=[],n=Math.max(o((u-r)/(a||1)),0),d=0;d<n;d++)e.push(r),r+=a;return e};module.exports=r;
},{"../../math/RoundAwayFromZero":248}],861:[function(require,module,exports) {
var e=function(e,n){if(!(n>=e.length)){for(var r=e.length-1,t=e[n],l=n;l<r;l++)e[l]=e[l+1];return e.length=r,t}};module.exports=e;
},{}],860:[function(require,module,exports) {
var r=require("./SpliceOne"),e=function(e,o,n){void 0===o&&(o=0),void 0===n&&(n=e.length);var t=o+Math.floor(Math.random()*n);return r(e,t)};module.exports=e;
},{"./SpliceOne":861}],541:[function(require,module,exports) {
module.exports={FindClosestInSorted:require("./FindClosestInSorted"),GetRandomElement:require("./GetRandomElement"),Matrix:require("./matrix"),NumberArray:require("./NumberArray"),NumberArrayStep:require("./NumberArrayStep"),QuickSelect:require("./QuickSelect"),Range:require("./Range"),RemoveRandomElement:require("./RemoveRandomElement"),RotateLeft:require("./RotateLeft"),RotateRight:require("./RotateRight"),Shuffle:require("./Shuffle"),SpliceOne:require("./SpliceOne")};
},{"./FindClosestInSorted":858,"./GetRandomElement":468,"./matrix":938,"./NumberArray":857,"./NumberArrayStep":859,"./QuickSelect":388,"./Range":400,"./RemoveRandomElement":860,"./RotateLeft":364,"./RotateRight":365,"./Shuffle":370,"./SpliceOne":861}],864:[function(require,module,exports) {
var e=require("./GetValue"),r=require("../../math/Clamp"),u=function(u,a,t,i,o){void 0===o&&(o=t);var l=e(u,a,o);return r(l,t,i)};module.exports=u;
},{"./GetValue":53,"../../math/Clamp":227}],865:[function(require,module,exports) {
var r=function(r,e){for(var n=0;n<e.length;n++)if(!r.hasOwnProperty(e[n]))return!1;return!0};module.exports=r;
},{}],867:[function(require,module,exports) {
var r=require("./Clone"),e=function(e,n){var o=r(e);for(var a in n)o.hasOwnProperty(a)&&(o[a]=n[a]);return o};module.exports=e;
},{"./Clone":452}],542:[function(require,module,exports) {
module.exports={Clone:require("./Clone"),Extend:require("./Extend"),GetAdvancedValue:require("./GetAdvancedValue"),GetFastValue:require("./GetFastValue"),GetMinMaxValue:require("./GetMinMaxValue"),GetValue:require("./GetValue"),HasAll:require("./HasAll"),HasAny:require("./HasAny"),HasValue:require("./HasValue"),IsPlainObject:require("./IsPlainObject"),Merge:require("./Merge"),MergeRight:require("./MergeRight")};
},{"./Clone":452,"./Extend":13,"./GetAdvancedValue":375,"./GetFastValue":102,"./GetMinMaxValue":864,"./GetValue":53,"./HasAll":865,"./HasAny":469,"./HasValue":470,"./IsPlainObject":34,"./Merge":866,"./MergeRight":867}],862:[function(require,module,exports) {
var r=function(r,e){return r.replace(/%([0-9]+)/g,function(r,n){return e[Number(n)-1]})};module.exports=r;
},{}],863:[function(require,module,exports) {
var e=function(e){return e.split("").reverse().join("")};module.exports=e;
},{}],543:[function(require,module,exports) {
module.exports={Format:require("./Format"),Pad:require("./Pad"),Reverse:require("./Reverse"),UppercaseFirst:require("./UppercaseFirst")};
},{"./Format":862,"./Pad":52,"./Reverse":863,"./UppercaseFirst":103}],92:[function(require,module,exports) {
module.exports={Array:require("./array/"),Objects:require("./object/"),String:require("./string/")};
},{"./array/":541,"./object/":542,"./string/":543}],6:[function(require,module,exports) {
var global = (1,eval)("this");
var e=(0,eval)("this");require("./polyfills");var r=require("./const"),i=require("./utils/object/Extend"),u={Actions:require("./actions"),Animation:require("./animations"),Cache:require("./cache"),Cameras:require("./cameras"),Class:require("./utils/Class"),Create:require("./create"),Curves:require("./curves"),Data:require("./data"),Display:require("./display"),DOM:require("./dom"),EventEmitter:require("./events/EventEmitter"),Game:require("./boot/Game"),GameObjects:require("./gameobjects"),Geom:require("./geom"),Input:require("./input"),Loader:require("./loader"),Math:require("./math"),Physics:require("./physics"),Renderer:require("./renderer"),Scene:require("./scene/Scene"),Scenes:require("./scene"),Sound:require("./sound"),Structs:require("./structs"),Textures:require("./textures"),Tilemaps:require("./tilemaps"),Time:require("./time"),Tweens:require("./tweens"),Utils:require("./utils")};u=i(!1,u,r),module.exports=u,e.Phaser=u;
},{"./polyfills":68,"./const":12,"./utils/object/Extend":13,"./actions":69,"./animations":70,"./cache":71,"./cameras":72,"./utils/Class":8,"./create":73,"./curves":74,"./data":75,"./display":76,"./dom":77,"./events/EventEmitter":9,"./boot/Game":10,"./gameobjects":78,"./geom":79,"./input":80,"./loader":81,"./math":82,"./physics":83,"./renderer":84,"./scene/Scene":11,"./scene":85,"./sound":86,"./structs":87,"./textures":88,"./tilemaps":89,"./time":90,"./tweens":91,"./utils":92}],1002:[function(require,module,exports) {
"use strict";exports.__esModule=!0;var t,i=function(){function t(t,i,e){this.time=t,this.scrollTime=i,this.type=e,this.isActive=!0,this.showTime=t-4*i}return t.prototype.createSprite=function(t){this.sprite=t.add.sprite(0,222,"notes",this.type),this.sprite.setScale(2),this.sprite.visible=!1},t.prototype.update=function(t){var i=this.time-t;this.sprite.x=394+180*i/this.scrollTime},t}();exports.Note=i,function(t){t[t.Don=1]="Don",t[t.Ka=2]="Ka",t[t.BigDon=3]="BigDon",t[t.BigKa=4]="BigKa",t[t.Renda=5]="Renda",t[t.BigRenda=6]="BigRenda",t[t.Baloon=7]="Baloon"}(t||(t={}));
},{}],422:[function(require,module,exports) {
"use strict";exports.__esModule=!0;var t=require("./note"),s=function(){function s(t){var s=this;this.map={},t.replace(/\r?\n/g,"").split("&").forEach(function(t){var e=t.indexOf("="),i=t.slice(0,e),a=t.slice(e+1),r=parseFloat(a);s.map[i]=""!=a&&isFinite(r)?r:a}),void 0!=this.map.BPM&&this.setBpm(this.map.BPM)}return s.prototype.setBpm=function(t){this.map.BPM=t;for(var s=240/t,e=8;e<=64;e+=8)this.map["u"+e]=s/e;return[this.map.unit_time=this.map.u16,this.map.scroll_time=3.4*this.map.u16]},s.prototype.getNotes=function(s){var e=this,i=this.map["seq"+s];if(void 0==i)return null;for(var a,r,p=[],n=this.map.start_time,o=this.map.unit_time,h=this.map.scroll_time,m=i.split(""),c=function(){var t="";for(m.shift();")"!=m[0];t+=m.shift());m.shift();var s=parseFloat(t);return isFinite(s)?s:e.map[t]};a=m.shift();)switch(a){case",":n+=o;break;case"[":o/=1.5;break;case"]":o*=1.5;break;case"1":case"2":case"3":case"4":p.push(new t.Note(n,h,parseInt(a)));break;case"m":o=(r=this.setBpm(c()))[0],h=r[1];break;case"x":h/=c()}return p},s}();exports.Data=s;
},{"./note":1002}],1001:[function(require,module,exports) {
"use strict";exports.__esModule=!0,require("phaser");var t=function(){function t(t){var r=this;this.input=t,this.prev=new Array(4),this.now=new Array(4),this.keys=[];var e=Phaser.Input.Keyboard.KeyCodes;[e.F,e.D,e.J,e.K].forEach(function(e){r.keys.push(t.keyboard.addKey(e))})}return t.prototype.get=function(){for(var t=0;t<4;t++)this.now[t]=!this.prev[t]&&this.keys[t].isDown,this.prev[t]=this.keys[t].isDown;var r=this.input.activePointer;if(r.justDown){var e=r.x-568,s=r.y-590,i=e<0?0:2,n=e*e+s*s<62500?0:1;this.now[i+n]=!0}return this.now},t}();exports.InputManager=t;
},{"phaser":6}],423:[function(require,module,exports) {
"use strict";exports.__esModule=!0;var t=require("./inputManager"),e=function(){function e(e,s){this.scene=e,this.waitingNotes=s,this.displayNotes=[],this.judgeTimes=[.16,.035,-.035,-.12,-.2],this.combo=0,this.inputManager=new t.InputManager(e.input);for(var i=s.length-1;i>=0;i--)s[i].createSprite(e);s.sort(function(t,e){return t.showTime-e.showTime}),this.comboText=e.add.text(259,214,"",{color:"black"}),this.zureText=e.add.text(380,290,"",{color:"black"})}return e.prototype.update=function(t){for(;this.waitingNotes.length>0&&t>this.waitingNotes[0].showTime;){var e=this.waitingNotes.shift();e.sprite.visible=!0,this.displayNotes.push(e),this.displayNotes.sort(function(t,e){return t.time-e.time})}for(var s=this.inputManager.get(),i=0;i<4;i++)s[i]&&(this.scene.sound.play(["dong","ka"][i%2]),this.judge(i,t));for(i=0;i<this.displayNotes.length;)this.displayNotes[i].update(t),this.displayNotes[i].time+this.judgeTimes[0]<t?(this.displayNotes.splice(i,1)[0].sprite.destroy(),this.combo=0,this.comboText.setText("")):i++},e.prototype.judge=function(t,e){if(0!=this.displayNotes.length){var s=this.displayNotes[0];if(!(s.time+this.judgeTimes[4]>e)&&(s.type-t)%2!=0){this.displayNotes.shift().sprite.destroy(),this.combo++,this.comboText.setText(this.combo.toString());var i=Math.floor(1e3*(s.time-e));this.zureText.style.color=i>=0?"red":"blue",this.zureText.setText((i>0?"+":"")+i)}}},e}();exports.NoteManager=e;
},{"./inputManager":1001}],424:[function(require,module,exports) {
module.exports="bg.ed946d56.jpg";
},{}],425:[function(require,module,exports) {
module.exports="notes.13b47dd9.png";
},{}],426:[function(require,module,exports) {
module.exports="data.c237335e.txt";
},{}],427:[function(require,module,exports) {
module.exports="bgm.a10a4f6f.mp3";
},{}],428:[function(require,module,exports) {
module.exports="dong.ac738337.mp3";
},{}],429:[function(require,module,exports) {
module.exports="ka.e92f372c.mp3";
},{}],4:[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function r(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(r.prototype=a.prototype,new r)}}(),e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};exports.__esModule=!0,require("phaser");var a=require("./data"),r=require("./noteManager"),s=e(require("./assets/bg.jpg")),i=e(require("./assets/notes.png")),o=e(require("./assets/data.txt")),n=e(require("./assets/bgm.mp3")),u=e(require("./assets/dong.mp3")),d=e(require("./assets/ka.mp3")),p=function(e){function p(){return null!==e&&e.apply(this,arguments)||this}return t(p,e),p.prototype.preload=function(){this.load.image("bg",s.default),this.load.image("notes",i.default),this.load.text("data",o.default),this.load.audio("bgm",n.default,null),this.load.audio("dong",u.default,null),this.load.audio("ka",d.default,null)},p.prototype.create=function(){this.add.image(568,320,"bg");for(var t=this.textures.get("notes"),e=1;e<=4;e++)t.add(e,0,48*e,0,48,48);this.dataObj=new a.Data(this.cache.text.get("data"));var s=this.dataObj.getNotes(4);this.noteManager=new r.NoteManager(this,s),this.bgm=this.sound.add("bgm")},p.prototype.update=function(){if(!this.bgm.isPlaying){if(!this.input.activePointer.isDown)return;this.bgm.play()}var t=this.bgm.seek+.22;this.noteManager.update(t)},p}(Phaser.Scene);exports.MainScene=p;
},{"phaser":6,"./data":422,"./noteManager":423,"./assets/bg.jpg":424,"./assets/notes.png":425,"./assets/data.txt":426,"./assets/bgm.mp3":427,"./assets/dong.mp3":428,"./assets/ka.mp3":429}],3:[function(require,module,exports) {
"use strict";exports.__esModule=!0,require("phaser");var e=require("./main"),r=new Phaser.Game({width:1136,height:640,type:Phaser.WEBGL});r.scene.add("main",e.MainScene,!0);
},{"phaser":6,"./main":4}],2:[function(require,module,exports) {
"use strict";var e=require("./test.ts"),t=r(e);function r(e){return e&&e.__esModule?e:{default:e}}
},{"./test.ts":3}]},{},[2])
//# sourceMappingURL=core.d7bf5ac4.map